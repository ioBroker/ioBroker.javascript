var index_cjs$3={},index_cjs$2={},polyfills_cjs$1={};function _extends$2(){return _extends$2=Object.assign||function(i){for(var d=1;d<arguments.length;d++){var u=arguments[d];for(var p in u)Object.prototype.hasOwnProperty.call(u,p)&&(i[p]=u[p])}return i},_extends$2.apply(this,arguments)}function _object_without_properties_loose(o,i){if(o==null)return{};var d={},u=Object.keys(o),p,S;for(S=0;S<u.length;S++)p=u[S],!(i.indexOf(p)>=0)&&(d[p]=o[p]);return d}polyfills_cjs$1._extends=_extends$2;polyfills_cjs$1._object_without_properties_loose=_object_without_properties_loose;var index_cjs$1={},__defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__hasOwnProp=Object.prototype.hasOwnProperty,__export=(o,i)=>{for(var d in i)__defProp(o,d,{get:i[d],enumerable:!0})},__copyProps=(o,i,d,u)=>{if(typeof i=="object"||typeof i=="function")for(let p of __getOwnPropNames(i))!__hasOwnProp.call(o,p)&&p!==d&&__defProp(o,p,{get:()=>i[p],enumerable:!(u=__getOwnPropDesc(i,p))||u.enumerable});return o},__toCommonJS=o=>__copyProps(__defProp({},"__esModule",{value:!0}),o),browser_exports={};__export(browser_exports,{createLogger:()=>createLogger2,logger:()=>logger$1});var browser=__toCommonJS(browser_exports),supportsSubstitutions=void 0,supportColor=()=>{if(typeof supportsSubstitutions<"u")return supportsSubstitutions;const o=console.log;try{const i="color test",d="color: red;";supportsSubstitutions=!1,console.log=(...u)=>{u[0]===`%c${i}`&&u[1]===d&&(supportsSubstitutions=!0)},console.log(`%c${i}`,d)}catch{supportsSubstitutions=!1}finally{console.log=o}return supportsSubstitutions},ansiToCss={bold:"font-weight: bold;",red:"color: red;",green:"color: green;",orange:"color: orange;",dodgerblue:"color: dodgerblue;",magenta:"color: magenta;",gray:"color: gray;"},formatter=o=>supportColor()?i=>{if(Array.isArray(i)){const[d,u]=i;return[`%c${d.replace("%c","")}`,u?`${ansiToCss[o]}${u}`:`${ansiToCss[o]||""}`]}return[`%c${String(i).replace("%c","")}`,ansiToCss[o]||""]}:i=>[String(i)],bold=formatter("bold"),red=formatter("red"),green=formatter("green"),orange=formatter("orange"),dodgerblue=formatter("dodgerblue"),magenta=formatter("magenta");formatter("gray");function getLabel(o,i,d){let u=[""];if("label"in i)if(u=[(o!=="log"?d[o]:void 0)||i.label||""],i.color){const S=i.color(u[0]);Array.isArray(S)&&S.length===2?u=bold([S[0],S[1]]):u=bold(S[0]||"")}else u=bold(u[0]);return u=u.filter(Boolean),u}function finalLog(o,i,d,u){o.length?Array.isArray(u)?console.log(...o,...u,...d):console.log(...o,i,...d):Array.isArray(u)?console.log(...u):console.log(i,...d)}var LOG_LEVEL={error:0,warn:1,info:2,log:3,verbose:4},errorStackRegExp=/at\s.*:\d+:\d+[\s\)]*$/,anonymousErrorStackRegExp=/at\s.*\(<anonymous>\)$/,isErrorStackMessage=o=>errorStackRegExp.test(o)||anonymousErrorStackRegExp.test(o);function validateOptions(o){const i={...o};if(o.labels&&typeof o.labels!="object")throw new Error("Labels must be an object");if(o.level&&typeof o.level!="string")throw new Error("Level must be a string");return i}var createLogger$1=(o={},{getLabel:i,handleError:d,finalLog:u,greet:p,LOG_TYPES:S})=>{const b=validateOptions(o);let E=b.level||"log",R=b.labels||{},v=(L,O,...G)=>{if(LOG_LEVEL[S[L].level]>LOG_LEVEL[E])return;if(O==null)return console.log();let Y=S[L],V="";const le=i(L,Y,R);if(O instanceof Error)if(O.stack){let[Z,...B]=O.stack.split(`
`);Z.startsWith("Error: ")&&(Z=Z.slice(7)),V=`${Z}
${d(B.join(`
`))}`}else V=O.message;else Y.level==="error"&&typeof O=="string"?V=O.split(`
`).map(B=>isErrorStackMessage(B)?d(B):B).join(`
`):V=`${O}`;u(le,V,G,O)},w={greet:L=>v("log",p(L))};return Object.keys(S).forEach(L=>{w[L]=(...O)=>v(L,...O)}),Object.defineProperty(w,"level",{get:()=>E,set(L){E=L}}),Object.defineProperty(w,"labels",{get:()=>R,set(L){R=L}}),w.override=L=>{Object.assign(w,L)},w},startColor=[189,255,243],endColor=[74,194,154],isWord=o=>!/[\s\n]/.test(o);function gradient(o){if(!supportColor())return[o];const i=[...o],d=i.filter(isWord),u=d.length-1;if(u===0)return console.log(`%c${o}`,`color: rgb(${startColor.join(",")}); font-weight: bold;`),[o];let p="",S=[];return i.forEach(b=>{if(isWord(b)){const E=d.indexOf(b)/u,R=Math.round(startColor[0]+(endColor[0]-startColor[0])*E),v=Math.round(startColor[1]+(endColor[1]-startColor[1])*E),w=Math.round(startColor[2]+(endColor[2]-startColor[2])*E);p+=`%c${b}`,S.push(`color: rgb(${R},${v},${w}); font-weight: bold;`)}else p+=b}),[p,...S]}var LOG_TYPES={error:{label:"error",level:"error",color:red},warn:{label:"warn",level:"warn",color:orange},info:{label:"info",level:"info",color:dodgerblue},start:{label:"start",level:"info",color:dodgerblue},ready:{label:"ready",level:"info",color:green},success:{label:"success",level:"info",color:green},log:{level:"log"},debug:{label:"debug",level:"verbose",color:magenta}};function createLogger2(o={}){return createLogger$1(o,{handleError:i=>i,getLabel,gradient,finalLog,LOG_TYPES,greet:i=>gradient(i)})}var logger$1=createLogger2(),polyfills_cjs={};function _extends$1(){return _extends$1=Object.assign||function(i){for(var d=1;d<arguments.length;d++){var u=arguments[d];for(var p in u)Object.prototype.hasOwnProperty.call(u,p)&&(i[p]=u[p])}return i},_extends$1.apply(this,arguments)}polyfills_cjs._extends=_extends$1;var define_process_env_default={},isomorphicRslog=browser,polyfills=polyfills_cjs;const FederationModuleManifest="federation-manifest.json",MANIFEST_EXT=".json",BROWSER_LOG_KEY="FEDERATION_DEBUG",BROWSER_LOG_VALUE="1",NameTransformSymbol={AT:"@",HYPHEN:"-",SLASH:"/"},NameTransformMap={[NameTransformSymbol.AT]:"scope_",[NameTransformSymbol.HYPHEN]:"_",[NameTransformSymbol.SLASH]:"__"},EncodedNameTransformMap={[NameTransformMap[NameTransformSymbol.AT]]:NameTransformSymbol.AT,[NameTransformMap[NameTransformSymbol.HYPHEN]]:NameTransformSymbol.HYPHEN,[NameTransformMap[NameTransformSymbol.SLASH]]:NameTransformSymbol.SLASH},SEPARATOR=":",ManifestFileName="mf-manifest.json",StatsFileName="mf-stats.json",MFModuleType={NPM:"npm",APP:"app"},MODULE_DEVTOOL_IDENTIFIER="__MF_DEVTOOLS_MODULE_INFO__",ENCODE_NAME_PREFIX="ENCODE_NAME_PREFIX",TEMP_DIR=".federation",MFPrefetchCommon={identifier:"MFDataPrefetch",globalKey:"__PREFETCH__",library:"mf-data-prefetch",exportsKey:"__PREFETCH_EXPORTS__",fileName:"bootstrap.js"};var ContainerPlugin=Object.freeze({__proto__:null}),ContainerReferencePlugin=Object.freeze({__proto__:null}),ModuleFederationPlugin=Object.freeze({__proto__:null}),SharePlugin=Object.freeze({__proto__:null});function isBrowserEnv(){return typeof window<"u"}function isBrowserDebug(){try{if(isBrowserEnv()&&window.localStorage)return localStorage.getItem(BROWSER_LOG_KEY)===BROWSER_LOG_VALUE}catch{return!1}return!1}function isDebugMode(){return typeof process<"u"&&define_process_env_default&&define_process_env_default.FEDERATION_DEBUG?!!define_process_env_default.FEDERATION_DEBUG:typeof FEDERATION_DEBUG<"u"&&FEDERATION_DEBUG?!0:isBrowserDebug()}const getProcessEnv=function(){return typeof process<"u"&&define_process_env_default?define_process_env_default:{}},PREFIX="[ Module Federation ]";function setDebug(o){isDebugMode()&&(o.level="verbose")}function setPrefix(o,i){o.labels={warn:`${i} Warn`,error:`${i} Error`,success:`${i} Success`,info:`${i} Info`,ready:`${i} Ready`,debug:`${i} Debug`}}function createLogger(o){const i=isomorphicRslog.createLogger({labels:{warn:`${PREFIX} Warn`,error:`${PREFIX} Error`,success:`${PREFIX} Success`,info:`${PREFIX} Info`,ready:`${PREFIX} Ready`,debug:`${PREFIX} Debug`}});return setDebug(i),setPrefix(i,o),i}const logger=createLogger(PREFIX),LOG_CATEGORY="[ Federation Runtime ]",parseEntry=(o,i,d=SEPARATOR)=>{const u=o.split(d),p=getProcessEnv().NODE_ENV==="development"&&i,S="*",b=E=>E.startsWith("http")||E.includes(MANIFEST_EXT);if(u.length>=2){let[E,...R]=u;o.startsWith(d)&&(R=[p||u.slice(-1)[0]],E=u.slice(0,-1).join(d));let v=p||R.join(d);return b(v)?{name:E,entry:v}:{name:E,version:v||S}}else if(u.length===1){const[E]=u;return p&&b(p)?{name:E,entry:p}:{name:E,version:p||S}}else throw`Invalid entry value: ${o}`},composeKeyWithSeparator=function(...o){return o.length?o.reduce((i,d)=>d?i?`${i}${SEPARATOR}${d}`:d:i,""):""},encodeName=function(o,i="",d=!1){try{const u=d?".js":"";return`${i}${o.replace(new RegExp(`${NameTransformSymbol.AT}`,"g"),NameTransformMap[NameTransformSymbol.AT]).replace(new RegExp(`${NameTransformSymbol.HYPHEN}`,"g"),NameTransformMap[NameTransformSymbol.HYPHEN]).replace(new RegExp(`${NameTransformSymbol.SLASH}`,"g"),NameTransformMap[NameTransformSymbol.SLASH])}${u}`}catch(u){throw u}},decodeName=function(o,i,d){try{let u=o;if(i){if(!u.startsWith(i))return u;u=u.replace(new RegExp(i,"g"),"")}return u=u.replace(new RegExp(`${NameTransformMap[NameTransformSymbol.AT]}`,"g"),EncodedNameTransformMap[NameTransformMap[NameTransformSymbol.AT]]).replace(new RegExp(`${NameTransformMap[NameTransformSymbol.SLASH]}`,"g"),EncodedNameTransformMap[NameTransformMap[NameTransformSymbol.SLASH]]).replace(new RegExp(`${NameTransformMap[NameTransformSymbol.HYPHEN]}`,"g"),EncodedNameTransformMap[NameTransformMap[NameTransformSymbol.HYPHEN]]),d&&(u=u.replace(".js","")),u}catch(u){throw u}},generateExposeFilename=(o,i)=>{if(!o)return"";let d=o;return d==="."&&(d="default_export"),d.startsWith("./")&&(d=d.replace("./","")),encodeName(d,"__federation_expose_",i)},generateShareFilename=(o,i)=>o?encodeName(o,"__federation_shared_",i):"",getResourceUrl=(o,i)=>{if("getPublicPath"in o){let d;return o.getPublicPath.startsWith("function")?d=new Function("return "+o.getPublicPath)()():d=new Function(o.getPublicPath)(),`${d}${i}`}else return"publicPath"in o?`${o.publicPath}${i}`:(console.warn("Cannot get resource URL. If in debug mode, please ignore.",o,i),"")},assert=(o,i)=>{o||error(i)},error=o=>{throw new Error(`${LOG_CATEGORY}: ${o}`)},warn=o=>{console.warn(`${LOG_CATEGORY}: ${o}`)};function safeToString(o){try{return JSON.stringify(o,null,2)}catch{return""}}const VERSION_PATTERN_REGEXP=/^([\d^=v<>~]|[*xX]$)/;function isRequiredVersion(o){return VERSION_PATTERN_REGEXP.test(o)}const simpleJoinRemoteEntry=(o,i)=>{if(!o)return i;const u=(p=>{if(p===".")return"";if(p.startsWith("./"))return p.replace("./","");if(p.startsWith("/")){const S=p.slice(1);return S.endsWith("/")?S.slice(0,-1):S}return p})(o);return u?u.endsWith("/")?`${u}${i}`:`${u}/${i}`:i};function inferAutoPublicPath(o){return o.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/")}function generateSnapshotFromManifest(o,i={}){var d,u;const{remotes:p={},overrides:S={},version:b}=i;let E;const R=()=>"publicPath"in o.metaData?o.metaData.publicPath==="auto"&&b?inferAutoPublicPath(b):o.metaData.publicPath:o.metaData.getPublicPath,v=Object.keys(S);let w={};if(!Object.keys(p).length){var L;w=((L=o.remotes)==null?void 0:L.reduce(($,x)=>{let C;const te=x.federationContainerName;return v.includes(te)?C=S[te]:"version"in x?C=x.version:C=x.entry,$[te]={matchedVersion:C},$},{}))||{}}Object.keys(p).forEach($=>w[$]={matchedVersion:v.includes($)?S[$]:p[$]});const{remoteEntry:{path:O,name:G,type:Y},types:V,buildInfo:{buildVersion:le},globalName:Z,ssrRemoteEntry:B}=o.metaData,{exposes:ce}=o;let ee={version:b||"",buildVersion:le,globalName:Z,remoteEntry:simpleJoinRemoteEntry(O,G),remoteEntryType:Y,remoteTypes:simpleJoinRemoteEntry(V.path,V.name),remoteTypesZip:V.zip||"",remoteTypesAPI:V.api||"",remotesInfo:w,shared:o==null?void 0:o.shared.map($=>({assets:$.assets,sharedName:$.name,version:$.version})),modules:ce==null?void 0:ce.map($=>({moduleName:$.name,modulePath:$.path,assets:$.assets}))};if((d=o.metaData)!=null&&d.prefetchInterface){const $=o.metaData.prefetchInterface;ee=polyfills._extends({},ee,{prefetchInterface:$})}if((u=o.metaData)!=null&&u.prefetchEntry){const{path:$,name:x,type:C}=o.metaData.prefetchEntry;ee=polyfills._extends({},ee,{prefetchEntry:simpleJoinRemoteEntry($,x),prefetchEntryType:C})}if("publicPath"in o.metaData?E=polyfills._extends({},ee,{publicPath:R()}):E=polyfills._extends({},ee,{getPublicPath:R()}),B){const $=simpleJoinRemoteEntry(B.path,B.name);E.ssrRemoteEntry=$,E.ssrRemoteEntryType=B.type||"commonjs-module"}return E}function isManifestProvider(o){return!!("remoteEntry"in o&&o.remoteEntry.includes(MANIFEST_EXT))}async function safeWrapper(o,i){try{return await o()}catch(d){!i&&warn(d);return}}function isStaticResourcesEqual(o,i){const d=/^(https?:)?\/\//i,u=o.replace(d,"").replace(/\/$/,""),p=i.replace(d,"").replace(/\/$/,"");return u===p}function createScript(o){let i=null,d=!0,u=2e4,p;const S=document.getElementsByTagName("script");for(let E=0;E<S.length;E++){const R=S[E],v=R.getAttribute("src");if(v&&isStaticResourcesEqual(v,o.url)){i=R,d=!1;break}}if(!i){const E=o.attrs;i=document.createElement("script"),i.type=(E==null?void 0:E.type)==="module"?"module":"text/javascript";let R;o.createScriptHook&&(R=o.createScriptHook(o.url,o.attrs),R instanceof HTMLScriptElement?i=R:typeof R=="object"&&("script"in R&&R.script&&(i=R.script),"timeout"in R&&R.timeout&&(u=R.timeout))),i.src||(i.src=o.url),E&&!R&&Object.keys(E).forEach(v=>{i&&(v==="async"||v==="defer"?i[v]=E[v]:i.getAttribute(v)||i.setAttribute(v,E[v]))})}const b=async(E,R)=>{clearTimeout(p);const v=()=>{(R==null?void 0:R.type)==="error"?o!=null&&o.onErrorCallback&&(o==null||o.onErrorCallback(R)):o!=null&&o.cb&&(o==null||o.cb())};if(i&&(i.onerror=null,i.onload=null,safeWrapper(()=>{const{needDeleteScript:w=!0}=o;w&&i!=null&&i.parentNode&&i.parentNode.removeChild(i)}),E&&typeof E=="function")){const w=E(R);if(w instanceof Promise){const L=await w;return v(),L}return v(),w}v()};return i.onerror=b.bind(null,i.onerror),i.onload=b.bind(null,i.onload),p=setTimeout(()=>{b(null,new Error(`Remote script "${o.url}" time-outed.`))},u),{script:i,needAttach:d}}function createLink(o){let i=null,d=!0;const u=document.getElementsByTagName("link");for(let S=0;S<u.length;S++){const b=u[S],E=b.getAttribute("href"),R=b.getAttribute("ref");if(E&&isStaticResourcesEqual(E,o.url)&&R===o.attrs.ref){i=b,d=!1;break}}if(!i){i=document.createElement("link"),i.setAttribute("href",o.url);let S;const b=o.attrs;o.createLinkHook&&(S=o.createLinkHook(o.url,b),S instanceof HTMLLinkElement&&(i=S)),b&&!S&&Object.keys(b).forEach(E=>{i&&!i.getAttribute(E)&&i.setAttribute(E,b[E])})}const p=(S,b)=>{const E=()=>{(b==null?void 0:b.type)==="error"?o!=null&&o.onErrorCallback&&(o==null||o.onErrorCallback(b)):o!=null&&o.cb&&(o==null||o.cb())};if(i&&(i.onerror=null,i.onload=null,safeWrapper(()=>{const{needDeleteLink:R=!0}=o;R&&i!=null&&i.parentNode&&i.parentNode.removeChild(i)}),S)){const R=S(b);return E(),R}E()};return i.onerror=p.bind(null,i.onerror),i.onload=p.bind(null,i.onload),{link:i,needAttach:d}}function loadScript(o,i){const{attrs:d={},createScriptHook:u}=i;return new Promise((p,S)=>{const{script:b,needAttach:E}=createScript({url:o,cb:p,onErrorCallback:S,attrs:polyfills._extends({fetchpriority:"high"},d),createScriptHook:u,needDeleteScript:!0});E&&document.head.appendChild(b)})}function importNodeModule(o){if(!o)throw new Error("import specifier is required");return new Function("name","return import(name)")(o).then(d=>d).catch(d=>{throw console.error(`Error importing module ${o}:`,d),d})}const loadNodeFetch=async()=>{const o=await importNodeModule("node-fetch");return o.default||o},lazyLoaderHookFetch=async(o,i,d)=>{const p=await((S,b)=>d.lifecycle.fetch.emit(S,b))(o,i||{});return!p||!(p instanceof Response)?(typeof fetch>"u"?await loadNodeFetch():fetch)(o,i||{}):p};function createScriptNode(url,cb,attrs,loaderHook){if(loaderHook!=null&&loaderHook.createScriptHook){const o=loaderHook.createScriptHook(url);o&&typeof o=="object"&&"url"in o&&(url=o.url)}let urlObj;try{urlObj=new URL(url)}catch(o){console.error("Error constructing URL:",o),cb(new Error(`Invalid URL: ${o}`));return}const getFetch=async()=>loaderHook!=null&&loaderHook.fetch?(o,i)=>lazyLoaderHookFetch(o,i,loaderHook):typeof fetch>"u"?loadNodeFetch():fetch,handleScriptFetch=async(f,urlObj)=>{try{var _vm_constants;const res=await f(urlObj.href),data=await res.text(),[path,vm]=await Promise.all([importNodeModule("path"),importNodeModule("vm")]),scriptContext={exports:{},module:{exports:{}}},urlDirname=urlObj.pathname.split("/").slice(0,-1).join("/"),filename=path.basename(urlObj.pathname);var _vm_constants_USE_MAIN_CONTEXT_DEFAULT_LOADER;const script=new vm.Script(`(function(exports, module, require, __dirname, __filename) {${data}
})`,{filename,importModuleDynamically:(_vm_constants_USE_MAIN_CONTEXT_DEFAULT_LOADER=(_vm_constants=vm.constants)==null?void 0:_vm_constants.USE_MAIN_CONTEXT_DEFAULT_LOADER)!=null?_vm_constants_USE_MAIN_CONTEXT_DEFAULT_LOADER:importNodeModule});script.runInThisContext()(scriptContext.exports,scriptContext.module,eval("require"),urlDirname,filename);const exportedInterface=scriptContext.module.exports||scriptContext.exports;if(attrs&&exportedInterface&&attrs.globalName){const o=exportedInterface[attrs.globalName]||exportedInterface;cb(void 0,o);return}cb(void 0,exportedInterface)}catch(o){cb(o instanceof Error?o:new Error(`Script execution error: ${o}`))}};getFetch().then(async o=>{if((attrs==null?void 0:attrs.type)==="esm"||(attrs==null?void 0:attrs.type)==="module")return loadModule(urlObj.href,{fetch:o,vm:await importNodeModule("vm")}).then(async i=>{await i.evaluate(),cb(void 0,i.namespace)}).catch(i=>{cb(i instanceof Error?i:new Error(`Script execution error: ${i}`))});handleScriptFetch(o,urlObj)}).catch(o=>{cb(o)})}function loadScriptNode(o,i){return new Promise((d,u)=>{createScriptNode(o,(p,S)=>{if(p)u(p);else{var b,E;const R=(i==null||(b=i.attrs)==null?void 0:b.globalName)||`__FEDERATION_${i==null||(E=i.attrs)==null?void 0:E.name}:custom__`,v=globalThis[R]=S;d(v)}},i.attrs,i.loaderHook)})}async function loadModule(o,i){const{fetch:d,vm:u}=i,S=await(await d(o)).text(),b=new u.SourceTextModule(S,{importModuleDynamically:async(E,R)=>{const v=new URL(E,o).href;return loadModule(v,i)}});return await b.link(async E=>{const R=new URL(E,o).href;return await loadModule(R,i)}),b}function normalizeOptions(o,i,d){return function(u){if(u===!1)return!1;if(typeof u>"u")return o?i:!1;if(u===!0)return i;if(u&&typeof u=="object")return polyfills._extends({},i,u);throw new Error(`Unexpected type for \`${d}\`, expect boolean/undefined/object, got: ${typeof u}`)}}index_cjs$1.BROWSER_LOG_KEY=BROWSER_LOG_KEY;index_cjs$1.BROWSER_LOG_VALUE=BROWSER_LOG_VALUE;index_cjs$1.ENCODE_NAME_PREFIX=ENCODE_NAME_PREFIX;index_cjs$1.EncodedNameTransformMap=EncodedNameTransformMap;index_cjs$1.FederationModuleManifest=FederationModuleManifest;index_cjs$1.MANIFEST_EXT=MANIFEST_EXT;index_cjs$1.MFModuleType=MFModuleType;index_cjs$1.MFPrefetchCommon=MFPrefetchCommon;index_cjs$1.MODULE_DEVTOOL_IDENTIFIER=MODULE_DEVTOOL_IDENTIFIER;index_cjs$1.ManifestFileName=ManifestFileName;index_cjs$1.NameTransformMap=NameTransformMap;index_cjs$1.NameTransformSymbol=NameTransformSymbol;index_cjs$1.SEPARATOR=SEPARATOR;index_cjs$1.StatsFileName=StatsFileName;index_cjs$1.TEMP_DIR=TEMP_DIR;index_cjs$1.assert=assert;index_cjs$1.composeKeyWithSeparator=composeKeyWithSeparator;index_cjs$1.containerPlugin=ContainerPlugin;index_cjs$1.containerReferencePlugin=ContainerReferencePlugin;index_cjs$1.createLink=createLink;index_cjs$1.createLogger=createLogger;index_cjs$1.createScript=createScript;index_cjs$1.createScriptNode=createScriptNode;index_cjs$1.decodeName=decodeName;index_cjs$1.encodeName=encodeName;index_cjs$1.error=error;index_cjs$1.generateExposeFilename=generateExposeFilename;index_cjs$1.generateShareFilename=generateShareFilename;index_cjs$1.generateSnapshotFromManifest=generateSnapshotFromManifest;index_cjs$1.getProcessEnv=getProcessEnv;index_cjs$1.getResourceUrl=getResourceUrl;index_cjs$1.inferAutoPublicPath=inferAutoPublicPath;index_cjs$1.isBrowserEnv=isBrowserEnv;index_cjs$1.isDebugMode=isDebugMode;index_cjs$1.isManifestProvider=isManifestProvider;index_cjs$1.isRequiredVersion=isRequiredVersion;index_cjs$1.isStaticResourcesEqual=isStaticResourcesEqual;index_cjs$1.loadScript=loadScript;index_cjs$1.loadScriptNode=loadScriptNode;index_cjs$1.logger=logger;index_cjs$1.moduleFederationPlugin=ModuleFederationPlugin;index_cjs$1.normalizeOptions=normalizeOptions;index_cjs$1.parseEntry=parseEntry;index_cjs$1.safeToString=safeToString;index_cjs$1.safeWrapper=safeWrapper;index_cjs$1.sharePlugin=SharePlugin;index_cjs$1.simpleJoinRemoteEntry=simpleJoinRemoteEntry;index_cjs$1.warn=warn;var index_cjs={};const RUNTIME_001="RUNTIME-001",RUNTIME_002="RUNTIME-002",RUNTIME_003="RUNTIME-003",RUNTIME_004="RUNTIME-004",RUNTIME_005="RUNTIME-005",RUNTIME_006="RUNTIME-006",RUNTIME_007="RUNTIME-007",RUNTIME_008="RUNTIME-008",TYPE_001="TYPE-001",BUILD_001="BUILD-001",getDocsUrl=o=>`https://module-federation.io/guide/troubleshooting/${o.split("-")[0].toLowerCase()}/${o}`,getShortErrorMsg=(o,i,d,u)=>{const p=[`${[i[o]]} #${o}`];return d&&p.push(`args: ${JSON.stringify(d)}`),p.push(getDocsUrl(o)),u&&p.push(`Original Error Message:
 ${u}`),p.join(`
`)};function _extends(){return _extends=Object.assign||function(i){for(var d=1;d<arguments.length;d++){var u=arguments[d];for(var p in u)Object.prototype.hasOwnProperty.call(u,p)&&(i[p]=u[p])}return i},_extends.apply(this,arguments)}const runtimeDescMap={[RUNTIME_001]:"Failed to get remoteEntry exports.",[RUNTIME_002]:'The remote entry interface does not contain "init"',[RUNTIME_003]:"Failed to get manifest.",[RUNTIME_004]:"Failed to locate remote.",[RUNTIME_005]:"Invalid loadShareSync function call from bundler runtime",[RUNTIME_006]:"Invalid loadShareSync function call from runtime",[RUNTIME_007]:"Failed to get remote snapshot.",[RUNTIME_008]:"Failed to load script resources."},typeDescMap={[TYPE_001]:"Failed to generate type declaration."},buildDescMap={[BUILD_001]:"Failed to find expose module."},errorDescMap=_extends({},runtimeDescMap,typeDescMap,buildDescMap);index_cjs.BUILD_001=BUILD_001;index_cjs.RUNTIME_001=RUNTIME_001;index_cjs.RUNTIME_002=RUNTIME_002;index_cjs.RUNTIME_003=RUNTIME_003;index_cjs.RUNTIME_004=RUNTIME_004;index_cjs.RUNTIME_005=RUNTIME_005;index_cjs.RUNTIME_006=RUNTIME_006;index_cjs.RUNTIME_007=RUNTIME_007;index_cjs.RUNTIME_008=RUNTIME_008;index_cjs.TYPE_001=TYPE_001;index_cjs.buildDescMap=buildDescMap;index_cjs.errorDescMap=errorDescMap;index_cjs.getShortErrorMsg=getShortErrorMsg;index_cjs.runtimeDescMap=runtimeDescMap;index_cjs.typeDescMap=typeDescMap;(function(o){var i=polyfills_cjs$1,d=index_cjs$1,u=index_cjs;const p="[ Federation Runtime ]",S=d.createLogger(p);function b(t,e){t||E(e)}function E(t){throw t instanceof Error?(t.message=`${p}: ${t.message}`,t):new Error(`${p}: ${t}`)}function R(t){t instanceof Error&&(t.message=`${p}: ${t.message}`),S.warn(t)}function v(t,e){return t.findIndex(n=>n===e)===-1&&t.push(e),t}function w(t){return"version"in t&&t.version?`${t.name}:${t.version}`:"entry"in t&&t.entry?`${t.name}:${t.entry}`:`${t.name}`}function L(t){return typeof t.entry<"u"}function O(t){return!t.entry.includes(".json")&&t.entry.includes(".js")}async function G(t,e){try{return await t()}catch(n){!e&&R(n);return}}function Y(t){return t&&typeof t=="object"}const V=Object.prototype.toString;function le(t){return V.call(t)==="[object Object]"}function Z(t,e){const n=/^(https?:)?\/\//i,r=t.replace(n,"").replace(/\/$/,""),s=e.replace(n,"").replace(/\/$/,"");return r===s}function B(t){return Array.isArray(t)?t:[t]}function ce(t){const e={url:"",type:"global",globalName:""};return d.isBrowserEnv()?"remoteEntry"in t?{url:t.remoteEntry,type:t.remoteEntryType,globalName:t.globalName}:e:"ssrRemoteEntry"in t?{url:t.ssrRemoteEntry||e.url,type:t.ssrRemoteEntryType||e.type,globalName:t.globalName}:e}const ee=(t,e)=>{let n;return t.endsWith("/")?n=t.slice(0,-1):n=t,e.startsWith(".")&&(e=e.slice(1)),n=n+e,n},$=typeof globalThis=="object"?globalThis:window,x=(()=>{try{return document.defaultView}catch{return $}})(),C=x;function te(t,e,n){Object.defineProperty(t,e,{value:n,configurable:!1,writable:!0})}function ye(t,e){return Object.hasOwnProperty.call(t,e)}ye($,"__GLOBAL_LOADING_REMOTE_ENTRY__")||te($,"__GLOBAL_LOADING_REMOTE_ENTRY__",{});const ne=$.__GLOBAL_LOADING_REMOTE_ENTRY__;function xe(t){var e,n,r,s,c,a;ye(t,"__VMOK__")&&!ye(t,"__FEDERATION__")&&te(t,"__FEDERATION__",t.__VMOK__),ye(t,"__FEDERATION__")||(te(t,"__FEDERATION__",{__GLOBAL_PLUGIN__:[],__INSTANCES__:[],moduleInfo:{},__SHARE__:{},__MANIFEST_LOADING__:{},__PRELOADED_MAP__:new Map}),te(t,"__VMOK__",t.__FEDERATION__));var l;(l=(e=t.__FEDERATION__).__GLOBAL_PLUGIN__)!=null||(e.__GLOBAL_PLUGIN__=[]);var h;(h=(n=t.__FEDERATION__).__INSTANCES__)!=null||(n.__INSTANCES__=[]);var _;(_=(r=t.__FEDERATION__).moduleInfo)!=null||(r.moduleInfo={});var g;(g=(s=t.__FEDERATION__).__SHARE__)!=null||(s.__SHARE__={});var y;(y=(c=t.__FEDERATION__).__MANIFEST_LOADING__)!=null||(c.__MANIFEST_LOADING__={});var m;(m=(a=t.__FEDERATION__).__PRELOADED_MAP__)!=null||(a.__PRELOADED_MAP__=new Map)}xe($),xe(x);function je(){$.__FEDERATION__.__GLOBAL_PLUGIN__=[],$.__FEDERATION__.__INSTANCES__=[],$.__FEDERATION__.moduleInfo={},$.__FEDERATION__.__SHARE__={},$.__FEDERATION__.__MANIFEST_LOADING__={},Object.keys(ne).forEach(t=>{delete ne[t]})}function ke(t){$.__FEDERATION__.__INSTANCES__.push(t)}function Ce(){return $.__FEDERATION__.__DEBUG_CONSTRUCTOR__}function He(t,e=d.isDebugMode()){e&&($.__FEDERATION__.__DEBUG_CONSTRUCTOR__=t,$.__FEDERATION__.__DEBUG_CONSTRUCTOR_VERSION__="0.6.17")}function re(t,e){if(typeof e=="string"){if(t[e])return{value:t[e],key:e};{const r=Object.keys(t);for(const s of r){const[c,a]=s.split(":"),l=`${c}:${e}`,h=t[l];if(h)return{value:h,key:l}}return{value:void 0,key:e}}}else throw new Error("key must be string")}const ge=()=>x.__FEDERATION__.moduleInfo,Ue=(t,e)=>{const n=w(t),r=re(e,n).value;if(r&&!r.version&&"version"in t&&t.version&&(r.version=t.version),r)return r;if("version"in t&&t.version){const{version:s}=t,c=i._object_without_properties_loose(t,["version"]),a=w(c),l=re(x.__FEDERATION__.moduleInfo,a).value;if((l==null?void 0:l.version)===s)return l}},ue=t=>Ue(t,x.__FEDERATION__.moduleInfo),Ne=(t,e)=>{const n=w(t);return x.__FEDERATION__.moduleInfo[n]=e,x.__FEDERATION__.moduleInfo},Ie=t=>(x.__FEDERATION__.moduleInfo=i._extends({},x.__FEDERATION__.moduleInfo,t),()=>{const e=Object.keys(t);for(const n of e)delete x.__FEDERATION__.moduleInfo[n]}),fe=(t,e)=>{const n=e||`__FEDERATION_${t}:custom__`,r=$[n];return{remoteEntryKey:n,entryExports:r}},Ge=t=>{const{__GLOBAL_PLUGIN__:e}=x.__FEDERATION__;t.forEach(n=>{e.findIndex(r=>r.name===n.name)===-1?e.push(n):R(`The plugin ${n.name} has been registered.`)})},Be=()=>x.__FEDERATION__.__GLOBAL_PLUGIN__,Ve=t=>$.__FEDERATION__.__PRELOADED_MAP__.get(t),We=t=>$.__FEDERATION__.__PRELOADED_MAP__.set(t,!0),de="default",Xe="global",Ke="[0-9A-Za-z-]+",Te=`(?:\\+(${Ke}(?:\\.${Ke})*))`,he="0|[1-9]\\d*",be="[0-9]+",qe="\\d*[a-zA-Z-][a-zA-Z0-9-]*",Ye=`(?:${be}|${qe})`,dt=`(?:-?(${Ye}(?:\\.${Ye})*))`,ze=`(?:${he}|${qe})`,Je=`(?:-(${ze}(?:\\.${ze})*))`,ve=`${he}|x|X|\\*`,ie=`[v=\\s]*(${ve})(?:\\.(${ve})(?:\\.(${ve})(?:${Je})?${Te}?)?)?`,ht=`^\\s*(${ie})\\s+-\\s+(${ie})\\s*$`,_t=`[v=\\s]*${`(${be})\\.(${be})\\.(${be})`}${dt}?${Te}?`,Oe="((?:<|>)?=?)",pt=`(\\s*)${Oe}\\s*(${_t}|${ie})`,Ze="(?:~>?)",mt=`(\\s*)${Ze}\\s+`,Qe="(?:\\^)",Et=`(\\s*)${Qe}\\s+`,yt="(<|>)?=?\\s*\\*",gt=`^${Qe}${ie}$`,bt=`v?${`(${he})\\.(${he})\\.(${he})`}${Je}?${Te}?`,St=`^${Ze}${ie}$`,Rt=`^${Oe}\\s*${ie}$`,$t=`^${Oe}\\s*(${bt})$|^$`,Nt="^\\s*>=\\s*0.0.0\\s*$";function z(t){return new RegExp(t)}function j(t){return!t||t.toLowerCase()==="x"||t==="*"}function et(...t){return e=>t.reduce((n,r)=>r(n),e)}function tt(t){return t.match(z($t))}function nt(t,e,n,r){const s=`${t}.${e}.${n}`;return r?`${s}-${r}`:s}function It(t){return t.replace(z(ht),(e,n,r,s,c,a,l,h,_,g,y,m)=>(j(r)?n="":j(s)?n=`>=${r}.0.0`:j(c)?n=`>=${r}.${s}.0`:n=`>=${n}`,j(_)?h="":j(g)?h=`<${Number(_)+1}.0.0-0`:j(y)?h=`<${_}.${Number(g)+1}.0-0`:m?h=`<=${_}.${g}.${y}-${m}`:h=`<=${h}`,`${n} ${h}`.trim()))}function Tt(t){return t.replace(z(pt),"$1$2$3")}function vt(t){return t.replace(z(mt),"$1~")}function Ot(t){return t.replace(z(Et),"$1^")}function Mt(t){return t.trim().split(/\s+/).map(e=>e.replace(z(gt),(n,r,s,c,a)=>j(r)?"":j(s)?`>=${r}.0.0 <${Number(r)+1}.0.0-0`:j(c)?r==="0"?`>=${r}.${s}.0 <${r}.${Number(s)+1}.0-0`:`>=${r}.${s}.0 <${Number(r)+1}.0.0-0`:a?r==="0"?s==="0"?`>=${r}.${s}.${c}-${a} <${r}.${s}.${Number(c)+1}-0`:`>=${r}.${s}.${c}-${a} <${r}.${Number(s)+1}.0-0`:`>=${r}.${s}.${c}-${a} <${Number(r)+1}.0.0-0`:r==="0"?s==="0"?`>=${r}.${s}.${c} <${r}.${s}.${Number(c)+1}-0`:`>=${r}.${s}.${c} <${r}.${Number(s)+1}.0-0`:`>=${r}.${s}.${c} <${Number(r)+1}.0.0-0`)).join(" ")}function Pt(t){return t.trim().split(/\s+/).map(e=>e.replace(z(St),(n,r,s,c,a)=>j(r)?"":j(s)?`>=${r}.0.0 <${Number(r)+1}.0.0-0`:j(c)?`>=${r}.${s}.0 <${r}.${Number(s)+1}.0-0`:a?`>=${r}.${s}.${c}-${a} <${r}.${Number(s)+1}.0-0`:`>=${r}.${s}.${c} <${r}.${Number(s)+1}.0-0`)).join(" ")}function At(t){return t.split(/\s+/).map(e=>e.trim().replace(z(Rt),(n,r,s,c,a,l)=>{const h=j(s),_=h||j(c),g=_||j(a);return r==="="&&g&&(r=""),l="",h?r===">"||r==="<"?"<0.0.0-0":"*":r&&g?(_&&(c=0),a=0,r===">"?(r=">=",_?(s=Number(s)+1,c=0,a=0):(c=Number(c)+1,a=0)):r==="<="&&(r="<",_?s=Number(s)+1:c=Number(c)+1),r==="<"&&(l="-0"),`${r+s}.${c}.${a}${l}`):_?`>=${s}.0.0${l} <${Number(s)+1}.0.0-0`:g?`>=${s}.${c}.0${l} <${s}.${Number(c)+1}.0-0`:n})).join(" ")}function wt(t){return t.trim().replace(z(yt),"")}function Lt(t){return t.trim().replace(z(Nt),"")}function Se(t,e){return t=Number(t)||t,e=Number(e)||e,t>e?1:t===e?0:-1}function Dt(t,e){const{preRelease:n}=t,{preRelease:r}=e;if(n===void 0&&r)return 1;if(n&&r===void 0)return-1;if(n===void 0&&r===void 0)return 0;for(let s=0,c=n.length;s<=c;s++){const a=n[s],l=r[s];if(a!==l)return a===void 0&&l===void 0?0:a?l?Se(a,l):-1:1}return 0}function Re(t,e){return Se(t.major,e.major)||Se(t.minor,e.minor)||Se(t.patch,e.patch)||Dt(t,e)}function Me(t,e){return t.version===e.version}function Ft(t,e){switch(t.operator){case"":case"=":return Me(t,e);case">":return Re(t,e)<0;case">=":return Me(t,e)||Re(t,e)<0;case"<":return Re(t,e)>0;case"<=":return Me(t,e)||Re(t,e)>0;case void 0:return!0;default:return!1}}function xt(t){return et(Mt,Pt,At,wt)(t)}function jt(t){return et(It,Tt,vt,Ot)(t.trim()).split(/\s+/).join(" ")}function _e(t,e){if(!t)return!1;const s=jt(e).split(" ").map(m=>xt(m)).join(" ").split(/\s+/).map(m=>Lt(m)),c=tt(t);if(!c)return!1;const[,a,,l,h,_,g]=c,y={operator:a,version:nt(l,h,_,g),major:l,minor:h,patch:_,preRelease:g==null?void 0:g.split(".")};for(const m of s){const N=tt(m);if(!N)return!1;const[,T,,P,I,M,F]=N,A={operator:T,version:nt(P,I,M,F),major:P,minor:I,patch:M,preRelease:F==null?void 0:F.split(".")};if(!Ft(A,y))return!1}return!0}function kt(t,e,n,r){let s;"get"in t?s=t.get:"lib"in t?s=()=>Promise.resolve(t.lib):s=()=>Promise.resolve(()=>{throw new Error(`Can not get shared '${n}'!`)}),t.strategy&&R('"shared.strategy is deprecated, please set in initOptions.shareStrategy instead!"');var c,a,l;return i._extends({deps:[],useIn:[],from:e,loading:null},t,{shareConfig:i._extends({requiredVersion:`^${t.version}`,singleton:!1,eager:!1,strictVersion:!1},t.shareConfig),get:s,loaded:t!=null&&t.loaded||"lib"in t?!0:void 0,version:(c=t.version)!=null?c:"0",scope:Array.isArray(t.scope)?t.scope:[(a=t.scope)!=null?a:"default"],strategy:((l=t.strategy)!=null?l:r)||"version-first"})}function rt(t,e){const n=e.shared||{},r=e.name,s=Object.keys(n).reduce((a,l)=>{const h=B(n[l]);return a[l]=a[l]||[],h.forEach(_=>{a[l].push(kt(_,r,l,e.shareStrategy))}),a},{}),c=i._extends({},t.shared);return Object.keys(s).forEach(a=>{c[a]?s[a].forEach(l=>{c[a].find(_=>_.version===l.version)||c[a].push(l)}):c[a]=s[a]}),{shared:c,shareInfos:s}}function pe(t,e){const n=r=>{if(!Number.isNaN(Number(r))){const c=r.split(".");let a=r;for(let l=0;l<3-c.length;l++)a+=".0";return a}return r};return!!_e(n(t),`<=${n(e)}`)}const Pe=(t,e)=>{const n=e||function(r,s){return pe(r,s)};return Object.keys(t).reduce((r,s)=>!r||n(r,s)||r==="0"?s:r,0)},Ae=t=>!!t.loaded||typeof t.lib=="function",Ct=t=>!!t.loading;function Ht(t,e,n){const r=t[e][n],s=function(c,a){return!Ae(r[c])&&pe(c,a)};return Pe(t[e][n],s)}function Ut(t,e,n){const r=t[e][n],s=function(c,a){const l=h=>Ae(h)||Ct(h);return l(r[a])?l(r[c])?!!pe(c,a):!0:l(r[c])?!1:pe(c,a)};return Pe(t[e][n],s)}function Gt(t){return t==="loaded-first"?Ut:Ht}function oe(t,e,n,r){if(!t)return;const{shareConfig:s,scope:c=de,strategy:a}=n,l=Array.isArray(c)?c:[c];for(const h of l)if(s&&t[h]&&t[h][e]){const{requiredVersion:_}=s,y=Gt(a)(t,h,e),m=()=>{if(s.singleton){if(typeof _=="string"&&!_e(y,_)){const P=`Version ${y} from ${y&&t[h][e][y].from} of shared singleton module ${e} does not satisfy the requirement of ${n.from} which needs ${_})`;s.strictVersion?E(P):R(P)}return t[h][e][y]}else{if(_===!1||_==="*"||_e(y,_))return t[h][e][y];for(const[P,I]of Object.entries(t[h][e]))if(_e(P,_))return I}},N={shareScopeMap:t,scope:h,pkgName:e,version:y,GlobalFederation:C.__FEDERATION__,resolver:m};return(r.emit(N)||N).resolver()}}function we(){return C.__FEDERATION__.__SHARE__}function ot(t){const{pkgName:e,extraOptions:n,shareInfos:r}=t,s=l=>{if(!l)return;const h={};l.forEach(y=>{h[y.version]=y});const g=Pe(h,function(y,m){return!Ae(h[y])&&pe(y,m)});return h[g]};var c;const a=(c=n==null?void 0:n.resolver)!=null?c:s;return Object.assign({},a(r[e]),n==null?void 0:n.customShareInfo)}var Bt={global:{Global:C,nativeGlobal:x,resetFederationGlobalInfo:je,setGlobalFederationInstance:ke,getGlobalFederationConstructor:Ce,setGlobalFederationConstructor:He,getInfoWithoutType:re,getGlobalSnapshot:ge,getTargetSnapshotInfoByModuleInfo:Ue,getGlobalSnapshotInfoByModuleInfo:ue,setGlobalSnapshotInfoByModuleInfo:Ne,addGlobalSnapshot:Ie,getRemoteEntryExports:fe,registerGlobalPlugins:Ge,getGlobalHostPlugins:Be,getPreloaded:Ve,setPreloaded:We},share:{getRegisteredShare:oe,getGlobalShareScope:we}};function Vt(){return typeof FEDERATION_BUILD_IDENTIFIER<"u"?FEDERATION_BUILD_IDENTIFIER:""}function st(t,e){for(const n of t){const r=e.startsWith(n.name);let s=e.replace(n.name,"");if(r){if(s.startsWith("/")){const l=n.name;return s=`.${s}`,{pkgNameOrAlias:l,expose:s,remote:n}}else if(s==="")return{pkgNameOrAlias:n.name,expose:".",remote:n}}const c=n.alias&&e.startsWith(n.alias);let a=n.alias&&e.replace(n.alias,"");if(n.alias&&c){if(a&&a.startsWith("/")){const l=n.alias;return a=`.${a}`,{pkgNameOrAlias:l,expose:a,remote:n}}else if(a==="")return{pkgNameOrAlias:n.alias,expose:".",remote:n}}}}function Wt(t,e){for(const n of t)if(e===n.name||n.alias&&e===n.alias)return n}function Xt(t,e){const n=Be();return n.length>0&&n.forEach(r=>{t!=null&&t.find(s=>s.name!==r.name)&&t.push(r)}),t&&t.length>0&&t.forEach(r=>{e.forEach(s=>{s.applyPlugin(r)})}),t}async function Kt({entry:t,remoteEntryExports:e}){return new Promise((n,r)=>{try{e?n(e):typeof FEDERATION_ALLOW_NEW_FUNCTION<"u"?new Function("callbacks",`import("${t}").then(callbacks[0]).catch(callbacks[1])`)([n,r]):import(t).then(n).catch(r)}catch(s){r(s)}})}async function qt({entry:t,remoteEntryExports:e}){return new Promise((n,r)=>{try{e?n(e):typeof __system_context__>"u"?System.import(t).then(n).catch(r):new Function("callbacks",`System.import("${t}").then(callbacks[0]).catch(callbacks[1])`)([n,r])}catch(s){r(s)}})}async function Yt({name:t,globalName:e,entry:n,loaderHook:r}){const{entryExports:s}=fe(t,e);return s||d.loadScript(n,{attrs:{},createScriptHook:(c,a)=>{const l=r.lifecycle.createScript.emit({url:c,attrs:a});if(l&&(l instanceof HTMLScriptElement||"script"in l||"timeout"in l))return l}}).then(()=>{const{remoteEntryKey:c,entryExports:a}=fe(t,e);return b(a,u.getShortErrorMsg(u.RUNTIME_001,u.runtimeDescMap,{remoteName:t,remoteEntryUrl:n,remoteEntryKey:c})),a}).catch(c=>{throw b(void 0,u.getShortErrorMsg(u.RUNTIME_008,u.runtimeDescMap,{remoteName:t,resourceUrl:n})),c})}async function zt({remoteInfo:t,remoteEntryExports:e,loaderHook:n}){const{entry:r,entryGlobalName:s,name:c,type:a}=t;switch(a){case"esm":case"module":return Kt({entry:r,remoteEntryExports:e});case"system":return qt({entry:r,remoteEntryExports:e});default:return Yt({entry:r,globalName:s,name:c,loaderHook:n})}}async function Jt({remoteInfo:t,loaderHook:e}){const{entry:n,entryGlobalName:r,name:s,type:c}=t,{entryExports:a}=fe(s,r);return a||d.loadScriptNode(n,{attrs:{name:s,globalName:r,type:c},loaderHook:{createScriptHook:(l,h={})=>{const _=e.lifecycle.createScript.emit({url:l,attrs:h});if(_&&"url"in _)return _}}}).then(()=>{const{remoteEntryKey:l,entryExports:h}=fe(s,r);return b(h,u.getShortErrorMsg(u.RUNTIME_001,u.runtimeDescMap,{remoteName:s,remoteEntryUrl:n,remoteEntryKey:l})),h}).catch(l=>{throw l})}function Le(t){const{entry:e,name:n}=t;return d.composeKeyWithSeparator(n,e)}async function me({origin:t,remoteEntryExports:e,remoteInfo:n}){const r=Le(n);if(e)return e;if(!ne[r]){const s=t.remoteHandler.hooks.lifecycle.loadEntry,c=t.loaderHook;ne[r]=s.emit({loaderHook:c,remoteInfo:n,remoteEntryExports:e}).then(a=>a||(d.isBrowserEnv()?zt({remoteInfo:n,remoteEntryExports:e,loaderHook:c}):Jt({remoteInfo:n,loaderHook:c})))}return ne[r]}function $e(t){return i._extends({},t,{entry:"entry"in t?t.entry:"",type:t.type||Xe,entryGlobalName:t.entryGlobalName||t.name,shareScope:t.shareScope||de})}let De=class{async getEntry(){if(this.remoteEntryExports)return this.remoteEntryExports;let e;try{e=await me({origin:this.host,remoteInfo:this.remoteInfo,remoteEntryExports:this.remoteEntryExports})}catch{const r=Le(this.remoteInfo);e=await this.host.loaderHook.lifecycle.loadEntryError.emit({getRemoteEntry:me,origin:this.host,remoteInfo:this.remoteInfo,remoteEntryExports:this.remoteEntryExports,globalLoading:ne,uniqueKey:r})}return b(e,`remoteEntryExports is undefined 
 ${d.safeToString(this.remoteInfo)}`),this.remoteEntryExports=e,this.remoteEntryExports}async get(e,n,r,s){const{loadFactory:c=!0}=r||{loadFactory:!0},a=await this.getEntry();if(!this.inited){const y=this.host.shareScopeMap,m=this.remoteInfo.shareScope||"default";y[m]||(y[m]={});const N=y[m],T=[],P={version:this.remoteInfo.version||""};Object.defineProperty(P,"shareScopeMap",{value:y,enumerable:!1});const I=await this.host.hooks.lifecycle.beforeInitContainer.emit({shareScope:N,remoteEntryInitOptions:P,initScope:T,remoteInfo:this.remoteInfo,origin:this.host});typeof(a==null?void 0:a.init)>"u"&&E(u.getShortErrorMsg(u.RUNTIME_002,u.runtimeDescMap,{remoteName:name,remoteEntryUrl:this.remoteInfo.entry,remoteEntryKey:this.remoteInfo.entryGlobalName})),await a.init(I.shareScope,I.initScope,I.remoteEntryInitOptions),await this.host.hooks.lifecycle.initContainer.emit(i._extends({},I,{id:e,remoteSnapshot:s,remoteEntryExports:a}))}this.lib=a,this.inited=!0;let l;l=await this.host.loaderHook.lifecycle.getModuleFactory.emit({remoteEntryExports:a,expose:n,moduleInfo:this.remoteInfo}),l||(l=await a.get(n)),b(l,`${w(this.remoteInfo)} remote don't export ${n}.`);const h=ee(this.remoteInfo.name,n),_=this.wraperFactory(l,h);return c?await _():_}wraperFactory(e,n){function r(s,c){s&&typeof s=="object"&&Object.isExtensible(s)&&!Object.getOwnPropertyDescriptor(s,Symbol.for("mf_module_id"))&&Object.defineProperty(s,Symbol.for("mf_module_id"),{value:c,enumerable:!1})}return e instanceof Promise?async()=>{const s=await e();return r(s,n),s}:()=>{const s=e();return r(s,n),s}}constructor({remoteInfo:e,host:n}){this.inited=!1,this.lib=void 0,this.remoteInfo=e,this.host=n}};class W{on(e){typeof e=="function"&&this.listeners.add(e)}once(e){const n=this;this.on(function r(...s){return n.remove(r),e.apply(null,s)})}emit(...e){let n;return this.listeners.size>0&&this.listeners.forEach(r=>{n=r(...e)}),n}remove(e){this.listeners.delete(e)}removeAll(){this.listeners.clear()}constructor(e){this.type="",this.listeners=new Set,e&&(this.type=e)}}class K extends W{emit(...e){let n;const r=Array.from(this.listeners);if(r.length>0){let s=0;const c=a=>a===!1?!1:s<r.length?Promise.resolve(r[s++].apply(null,e)).then(c):a;n=c()}return Promise.resolve(n)}}function it(t,e){if(!Y(e))return!1;if(t!==e){for(const n in t)if(!(n in e))return!1}return!0}class Ee extends W{emit(e){Y(e)||E(`The data for the "${this.type}" hook should be an object.`);for(const n of this.listeners)try{const r=n(e);if(it(e,r))e=r;else{this.onerror(`A plugin returned an unacceptable value for the "${this.type}" type.`);break}}catch(r){R(r),this.onerror(r)}return e}constructor(e){super(),this.onerror=E,this.type=e}}class se extends W{emit(e){Y(e)||E(`The response data for the "${this.type}" hook must be an object.`);const n=Array.from(this.listeners);if(n.length>0){let r=0;const s=a=>(R(a),this.onerror(a),e),c=a=>{if(it(e,a)){if(e=a,r<n.length)try{return Promise.resolve(n[r++](e)).then(c,s)}catch(l){return s(l)}}else this.onerror(`A plugin returned an incorrect value for the "${this.type}" type.`);return e};return Promise.resolve(c(e))}return Promise.resolve(e)}constructor(e){super(),this.onerror=E,this.type=e}}class ae{applyPlugin(e){b(le(e),"Plugin configuration is invalid.");const n=e.name;b(n,"A name must be provided by the plugin."),this.registerPlugins[n]||(this.registerPlugins[n]=e,Object.keys(this.lifecycle).forEach(r=>{const s=e[r];s&&this.lifecycle[r].on(s)}))}removePlugin(e){b(e,"A name is required.");const n=this.registerPlugins[e];b(n,`The plugin "${e}" is not registered.`),Object.keys(n).forEach(r=>{r!=="name"&&this.lifecycle[r].remove(n[r])})}inherit({lifecycle:e,registerPlugins:n}){Object.keys(e).forEach(r=>{b(!this.lifecycle[r],`The hook "${r}" has a conflict and cannot be inherited.`),this.lifecycle[r]=e[r]}),Object.keys(n).forEach(r=>{b(!this.registerPlugins[r],`The plugin "${r}" has a conflict and cannot be inherited.`),this.applyPlugin(n[r])})}constructor(e){this.registerPlugins={},this.lifecycle=e,this.lifecycleKeys=Object.keys(e)}}function at(t){return i._extends({resourceCategory:"sync",share:!0,depsRemote:!0,prefetchInterface:!1},t)}function Zt(t,e){return e.map(n=>{const r=Wt(t,n.nameOrAlias);return b(r,`Unable to preload ${n.nameOrAlias} as it is not included in ${!r&&d.safeToString({remoteInfo:r,remotes:t})}`),{remote:r,preloadConfig:at(n)}})}function Qt(t){return t?t.map(e=>e==="."?e:e.startsWith("./")?e.replace("./",""):e):[]}function lt(t,e,n,r=!0){const{cssAssets:s,jsAssetsWithoutEntry:c,entryAssets:a}=n;if(e.options.inBrowser){if(a.forEach(l=>{const{moduleInfo:h}=l,_=e.moduleCache.get(t.name);me(_?{origin:e,remoteInfo:h,remoteEntryExports:_.remoteEntryExports}:{origin:e,remoteInfo:h,remoteEntryExports:void 0})}),r){const l={rel:"preload",as:"style"};s.forEach(h=>{const{link:_,needAttach:g}=d.createLink({url:h,cb:()=>{},attrs:l,createLinkHook:(y,m)=>{const N=e.loaderHook.lifecycle.createLink.emit({url:y,attrs:m});if(N instanceof HTMLLinkElement)return N}});g&&document.head.appendChild(_)})}else{const l={rel:"stylesheet",type:"text/css"};s.forEach(h=>{const{link:_,needAttach:g}=d.createLink({url:h,cb:()=>{},attrs:l,createLinkHook:(y,m)=>{const N=e.loaderHook.lifecycle.createLink.emit({url:y,attrs:m});if(N instanceof HTMLLinkElement)return N},needDeleteLink:!1});g&&document.head.appendChild(_)})}if(r){const l={rel:"preload",as:"script"};c.forEach(h=>{const{link:_,needAttach:g}=d.createLink({url:h,cb:()=>{},attrs:l,createLinkHook:(y,m)=>{const N=e.loaderHook.lifecycle.createLink.emit({url:y,attrs:m});if(N instanceof HTMLLinkElement)return N}});g&&document.head.appendChild(_)})}else{const l={fetchpriority:"high",type:(t==null?void 0:t.type)==="module"?"module":"text/javascript"};c.forEach(h=>{const{script:_,needAttach:g}=d.createScript({url:h,cb:()=>{},attrs:l,createScriptHook:(y,m)=>{const N=e.loaderHook.lifecycle.createScript.emit({url:y,attrs:m});if(N instanceof HTMLScriptElement)return N},needDeleteScript:!0});g&&document.head.appendChild(_)})}}}function ct(t,e){const n=ce(e);n.url||E(`The attribute remoteEntry of ${t.name} must not be undefined.`);let r=d.getResourceUrl(e,n.url);!d.isBrowserEnv()&&!r.startsWith("http")&&(r=`https:${r}`),t.type=n.type,t.entryGlobalName=n.globalName,t.entry=r,t.version=e.version,t.buildVersion=e.buildVersion}function en(){return{name:"snapshot-plugin",async afterResolve(t){const{remote:e,pkgNameOrAlias:n,expose:r,origin:s,remoteInfo:c}=t;if(!L(e)||!O(e)){const{remoteSnapshot:a,globalSnapshot:l}=await s.snapshotHandler.loadRemoteSnapshotInfo(e);ct(c,a);const h={remote:e,preloadConfig:{nameOrAlias:n,exposes:[r],resourceCategory:"sync",share:!1,depsRemote:!1}},_=await s.remoteHandler.hooks.lifecycle.generatePreloadAssets.emit({origin:s,preloadOptions:h,remoteInfo:c,remote:e,remoteSnapshot:a,globalSnapshot:l});return _&&lt(c,s,_,!1),i._extends({},t,{remoteSnapshot:a})}return t}}}function tn(t){const e=t.split(":");return e.length===1?{name:e[0],version:void 0}:e.length===2?{name:e[0],version:e[1]}:{name:e[1],version:e[2]}}function ut(t,e,n,r,s={},c){const a=w(e),{value:l}=re(t,a),h=c||l;if(h&&!d.isManifestProvider(h)&&(n(h,e,r),h.remotesInfo)){const _=Object.keys(h.remotesInfo);for(const g of _){if(s[g])continue;s[g]=!0;const y=tn(g),m=h.remotesInfo[g];ut(t,{name:y.name,version:m.matchedVersion},n,!1,s,void 0)}}}function nn(t,e,n,r,s){const c=[],a=[],l=[],h=new Set,_=new Set,{options:g}=t,{preloadConfig:y}=e,{depsRemote:m}=y;if(ut(r,n,(I,M,F)=>{let A;if(F)A=y;else if(Array.isArray(m)){const q=m.find(X=>X.nameOrAlias===M.name||X.nameOrAlias===M.alias);if(!q)return;A=at(q)}else if(m===!0)A=y;else return;const D=d.getResourceUrl(I,ce(I).url);D&&l.push({name:M.name,moduleInfo:{name:M.name,entry:D,type:"remoteEntryType"in I?I.remoteEntryType:"global",entryGlobalName:"globalName"in I?I.globalName:M.name,shareScope:"",version:"version"in I?I.version:void 0},url:D});let H="modules"in I?I.modules:[];const U=Qt(A.exposes);if(U.length&&"modules"in I){var Q;H=I==null||(Q=I.modules)==null?void 0:Q.reduce((q,X)=>((U==null?void 0:U.indexOf(X.moduleName))!==-1&&q.push(X),q),[])}function k(q){const X=q.map(J=>d.getResourceUrl(I,J));return A.filter?X.filter(A.filter):X}if(H){const q=H.length;for(let X=0;X<q;X++){const J=H[X],Fe=`${M.name}/${J.moduleName}`;t.remoteHandler.hooks.lifecycle.handlePreloadModule.emit({id:J.moduleName==="."?M.name:Fe,name:M.name,remoteSnapshot:I,preloadConfig:A,remote:M,origin:t}),!Ve(Fe)&&(A.resourceCategory==="all"?(c.push(...k(J.assets.css.async)),c.push(...k(J.assets.css.sync)),a.push(...k(J.assets.js.async)),a.push(...k(J.assets.js.sync))):(A.resourceCategory="sync")&&(c.push(...k(J.assets.css.sync)),a.push(...k(J.assets.js.sync))),We(Fe))}}},!0,{},s),s.shared){const I=(M,F)=>{const A=oe(t.shareScopeMap,F.sharedName,M,t.sharedHandler.hooks.lifecycle.resolveShare);A&&typeof A.lib=="function"&&(F.assets.js.sync.forEach(D=>{h.add(D)}),F.assets.css.sync.forEach(D=>{_.add(D)}))};s.shared.forEach(M=>{var F;const A=(F=g.shared)==null?void 0:F[M.sharedName];if(!A)return;const D=M.version?A.find(U=>U.version===M.version):A;if(!D)return;B(D).forEach(U=>{I(U,M)})})}const T=a.filter(I=>!h.has(I));return{cssAssets:c.filter(I=>!_.has(I)),jsAssetsWithoutEntry:T,entryAssets:l}}const rn=function(){return{name:"generate-preload-assets-plugin",async generatePreloadAssets(t){const{origin:e,preloadOptions:n,remoteInfo:r,remote:s,globalSnapshot:c,remoteSnapshot:a}=t;return L(s)&&O(s)?{cssAssets:[],jsAssetsWithoutEntry:[],entryAssets:[{name:s.name,url:s.entry,moduleInfo:{name:r.name,entry:s.entry,type:r.type||"global",entryGlobalName:"",shareScope:""}}]}:(ct(r,a),nn(e,n,r,c,a))}}};function ft(t,e){const n=ue({name:e.options.name,version:e.options.version}),r=n&&"remotesInfo"in n&&n.remotesInfo&&re(n.remotesInfo,t.name).value;return r&&r.matchedVersion?{hostGlobalSnapshot:n,globalSnapshot:ge(),remoteSnapshot:ue({name:t.name,version:r.matchedVersion})}:{hostGlobalSnapshot:void 0,globalSnapshot:ge(),remoteSnapshot:ue({name:t.name,version:"version"in t?t.version:void 0})}}class on{async loadSnapshot(e){const{options:n}=this.HostInstance,{hostGlobalSnapshot:r,remoteSnapshot:s,globalSnapshot:c}=this.getGlobalRemoteInfo(e),{remoteSnapshot:a,globalSnapshot:l}=await this.hooks.lifecycle.loadSnapshot.emit({options:n,moduleInfo:e,hostGlobalSnapshot:r,remoteSnapshot:s,globalSnapshot:c});return{remoteSnapshot:a,globalSnapshot:l}}async loadRemoteSnapshotInfo(e){const{options:n}=this.HostInstance;await this.hooks.lifecycle.beforeLoadRemoteSnapshot.emit({options:n,moduleInfo:e});let r=ue({name:this.HostInstance.options.name,version:this.HostInstance.options.version});r||(r={version:this.HostInstance.options.version||"",remoteEntry:"",remotesInfo:{}},Ie({[this.HostInstance.options.name]:r})),r&&"remotesInfo"in r&&!re(r.remotesInfo,e.name).value&&("version"in e||"entry"in e)&&(r.remotesInfo=i._extends({},r==null?void 0:r.remotesInfo,{[e.name]:{matchedVersion:"version"in e?e.version:e.entry}}));const{hostGlobalSnapshot:s,remoteSnapshot:c,globalSnapshot:a}=this.getGlobalRemoteInfo(e),{remoteSnapshot:l,globalSnapshot:h}=await this.hooks.lifecycle.loadSnapshot.emit({options:n,moduleInfo:e,hostGlobalSnapshot:s,remoteSnapshot:c,globalSnapshot:a});let _,g;if(l)if(d.isManifestProvider(l)){const y=d.isBrowserEnv()?l.remoteEntry:l.ssrRemoteEntry||l.remoteEntry||"",m=await this.getManifestJson(y,e,{}),N=Ne(i._extends({},e,{entry:y}),m);_=m,g=N}else{const{remoteSnapshot:y}=await this.hooks.lifecycle.loadRemoteSnapshot.emit({options:this.HostInstance.options,moduleInfo:e,remoteSnapshot:l,from:"global"});_=y,g=h}else if(L(e)){const y=await this.getManifestJson(e.entry,e,{}),m=Ne(e,y),{remoteSnapshot:N}=await this.hooks.lifecycle.loadRemoteSnapshot.emit({options:this.HostInstance.options,moduleInfo:e,remoteSnapshot:y,from:"global"});_=N,g=m}else E(u.getShortErrorMsg(u.RUNTIME_007,u.runtimeDescMap,{hostName:e.name,hostVersion:e.version,globalSnapshot:JSON.stringify(h)}));return await this.hooks.lifecycle.afterLoadSnapshot.emit({options:n,moduleInfo:e,remoteSnapshot:_}),{remoteSnapshot:_,globalSnapshot:g}}getGlobalRemoteInfo(e){return ft(e,this.HostInstance)}async getManifestJson(e,n,r){const s=async()=>{let a=this.manifestCache.get(e);if(a)return a;try{let l=await this.loaderHook.lifecycle.fetch.emit(e,{});return(!l||!(l instanceof Response))&&(l=await fetch(e,{})),a=await l.json(),b(a.metaData&&a.exposes&&a.shared,`${e} is not a federation manifest`),this.manifestCache.set(e,a),a}catch(l){delete this.manifestLoading[e],E(u.getShortErrorMsg(u.RUNTIME_003,u.runtimeDescMap,{manifestUrl:e,moduleName:n.name},`${l}`))}},c=async()=>{const a=await s(),l=d.generateSnapshotFromManifest(a,{version:e}),{remoteSnapshot:h}=await this.hooks.lifecycle.loadRemoteSnapshot.emit({options:this.HostInstance.options,moduleInfo:n,manifestJson:a,remoteSnapshot:l,manifestUrl:e,from:"manifest"});return h};return this.manifestLoading[e]||(this.manifestLoading[e]=c().then(a=>a)),this.manifestLoading[e]}constructor(e){this.loadingHostSnapshot=null,this.manifestCache=new Map,this.hooks=new ae({beforeLoadRemoteSnapshot:new K("beforeLoadRemoteSnapshot"),loadSnapshot:new se("loadGlobalSnapshot"),loadRemoteSnapshot:new se("loadRemoteSnapshot"),afterLoadSnapshot:new se("afterLoadSnapshot")}),this.manifestLoading=C.__FEDERATION__.__MANIFEST_LOADING__,this.HostInstance=e,this.loaderHook=e.loaderHook}}class sn{registerShared(e,n){const{shareInfos:r,shared:s}=rt(e,n);return Object.keys(r).forEach(a=>{r[a].forEach(h=>{!oe(this.shareScopeMap,a,h,this.hooks.lifecycle.resolveShare)&&h&&h.lib&&this.setShared({pkgName:a,lib:h.lib,get:h.get,loaded:!0,shared:h,from:n.name})})}),{shareInfos:r,shared:s}}async loadShare(e,n){const{host:r}=this,s=ot({pkgName:e,extraOptions:n,shareInfos:r.options.shared});s!=null&&s.scope&&await Promise.all(s.scope.map(async _=>{await Promise.all(this.initializeSharing(_,{strategy:s.strategy}))}));const c=await this.hooks.lifecycle.beforeLoadShare.emit({pkgName:e,shareInfo:s,shared:r.options.shared,origin:r}),{shareInfo:a}=c;b(a,`Cannot find ${e} Share in the ${r.options.name}. Please ensure that the ${e} Share parameters have been injected`);const l=oe(this.shareScopeMap,e,a,this.hooks.lifecycle.resolveShare),h=_=>{_.useIn||(_.useIn=[]),v(_.useIn,r.options.name)};if(l&&l.lib)return h(l),l.lib;if(l&&l.loading&&!l.loaded){const _=await l.loading;return l.loaded=!0,l.lib||(l.lib=_),h(l),_}else if(l){const g=(async()=>{const y=await l.get();a.lib=y,a.loaded=!0,h(a);const m=oe(this.shareScopeMap,e,a,this.hooks.lifecycle.resolveShare);return m&&(m.lib=y,m.loaded=!0),y})();return this.setShared({pkgName:e,loaded:!1,shared:l,from:r.options.name,lib:null,loading:g}),g}else{if(n!=null&&n.customShareInfo)return!1;const g=(async()=>{const y=await a.get();a.lib=y,a.loaded=!0,h(a);const m=oe(this.shareScopeMap,e,a,this.hooks.lifecycle.resolveShare);return m&&(m.lib=y,m.loaded=!0),y})();return this.setShared({pkgName:e,loaded:!1,shared:a,from:r.options.name,lib:null,loading:g}),g}}initializeSharing(e=de,n){const{host:r}=this,s=n==null?void 0:n.from,c=n==null?void 0:n.strategy;let a=n==null?void 0:n.initScope;const l=[];if(s!=="build"){const{initTokens:T}=this;a||(a=[]);let P=T[e];if(P||(P=T[e]={from:this.host.name}),a.indexOf(P)>=0)return l;a.push(P)}const h=this.shareScopeMap,_=r.options.name;h[e]||(h[e]={});const g=h[e],y=(T,P)=>{var I;const{version:M,eager:F}=P;g[T]=g[T]||{};const A=g[T],D=A[M],H=!!(D&&(D.eager||(I=D.shareConfig)!=null&&I.eager));(!D||D.strategy!=="loaded-first"&&!D.loaded&&(!F!=!H?F:_>D.from))&&(A[M]=P)},m=T=>T&&T.init&&T.init(h[e],a),N=async T=>{const{module:P}=await r.remoteHandler.getRemoteModuleAndOptions({id:T});if(P.getEntry){let I;try{I=await P.getEntry()}catch(M){I=await r.remoteHandler.hooks.lifecycle.errorLoadRemote.emit({id:T,error:M,from:"runtime",lifecycle:"beforeLoadShare",origin:r})}P.inited||(await m(I),P.inited=!0)}};return Object.keys(r.options.shared).forEach(T=>{r.options.shared[T].forEach(I=>{I.scope.includes(e)&&y(T,I)})}),(r.options.shareStrategy==="version-first"||c==="version-first")&&r.options.remotes.forEach(T=>{T.shareScope===e&&l.push(N(T.name))}),l}loadShareSync(e,n){const{host:r}=this,s=ot({pkgName:e,extraOptions:n,shareInfos:r.options.shared});s!=null&&s.scope&&s.scope.forEach(l=>{this.initializeSharing(l,{strategy:s.strategy})});const c=oe(this.shareScopeMap,e,s,this.hooks.lifecycle.resolveShare),a=l=>{l.useIn||(l.useIn=[]),v(l.useIn,r.options.name)};if(c){if(typeof c.lib=="function")return a(c),c.loaded||(c.loaded=!0,c.from===r.options.name&&(s.loaded=!0)),c.lib;if(typeof c.get=="function"){const l=c.get();if(!(l instanceof Promise))return a(c),this.setShared({pkgName:e,loaded:!0,from:r.options.name,lib:l,shared:c}),l}}if(s.lib)return s.loaded||(s.loaded=!0),s.lib;if(s.get){const l=s.get();if(l instanceof Promise){const h=(n==null?void 0:n.from)==="build"?u.RUNTIME_005:u.RUNTIME_006;throw new Error(u.getShortErrorMsg(h,u.runtimeDescMap,{hostName:r.options.name,sharedPkgName:e}))}return s.lib=l,this.setShared({pkgName:e,loaded:!0,from:r.options.name,lib:s.lib,shared:s}),s.lib}throw new Error(u.getShortErrorMsg(u.RUNTIME_006,u.runtimeDescMap,{hostName:r.options.name,sharedPkgName:e}))}initShareScopeMap(e,n,r={}){const{host:s}=this;this.shareScopeMap[e]=n,this.hooks.lifecycle.initContainerShareScopeMap.emit({shareScope:n,options:s.options,origin:s,scopeName:e,hostShareScopeMap:r.hostShareScopeMap})}setShared({pkgName:e,shared:n,from:r,lib:s,loading:c,loaded:a,get:l}){const{version:h,scope:_="default"}=n,g=i._object_without_properties_loose(n,["version","scope"]);(Array.isArray(_)?_:[_]).forEach(m=>{if(this.shareScopeMap[m]||(this.shareScopeMap[m]={}),this.shareScopeMap[m][e]||(this.shareScopeMap[m][e]={}),!this.shareScopeMap[m][e][h]){this.shareScopeMap[m][e][h]=i._extends({version:h,scope:["default"]},g,{lib:s,loaded:a,loading:c}),l&&(this.shareScopeMap[m][e][h].get=l);return}const N=this.shareScopeMap[m][e][h];c&&!N.loading&&(N.loading=c)})}_setGlobalShareScopeMap(e){const n=we(),r=e.id||e.name;r&&!n[r]&&(n[r]=this.shareScopeMap)}constructor(e){this.hooks=new ae({afterResolve:new se("afterResolve"),beforeLoadShare:new se("beforeLoadShare"),loadShare:new K,resolveShare:new Ee("resolveShare"),initContainerShareScopeMap:new Ee("initContainerShareScopeMap")}),this.host=e,this.shareScopeMap={},this.initTokens={},this._setGlobalShareScopeMap(e.options)}}class an{formatAndRegisterRemote(e,n){return(n.remotes||[]).reduce((s,c)=>(this.registerRemote(c,s,{force:!1}),s),e.remotes)}setIdToRemoteMap(e,n){const{remote:r,expose:s}=n,{name:c,alias:a}=r;if(this.idToRemoteMap[e]={name:r.name,expose:s},a&&e.startsWith(c)){const l=e.replace(c,a);this.idToRemoteMap[l]={name:r.name,expose:s};return}if(a&&e.startsWith(a)){const l=e.replace(a,c);this.idToRemoteMap[l]={name:r.name,expose:s}}}async loadRemote(e,n){const{host:r}=this;try{const{loadFactory:s=!0}=n||{loadFactory:!0},{module:c,moduleOptions:a,remoteMatchInfo:l}=await this.getRemoteModuleAndOptions({id:e}),{pkgNameOrAlias:h,remote:_,expose:g,id:y,remoteSnapshot:m}=l,N=await c.get(y,g,n,m),T=await this.hooks.lifecycle.onLoad.emit({id:y,pkgNameOrAlias:h,expose:g,exposeModule:s?N:void 0,exposeModuleFactory:s?void 0:N,remote:_,options:a,moduleInstance:c,origin:r});return this.setIdToRemoteMap(e,l),typeof T=="function"?T:N}catch(s){const{from:c="runtime"}=n||{from:"runtime"},a=await this.hooks.lifecycle.errorLoadRemote.emit({id:e,error:s,from:c,lifecycle:"onLoad",origin:r});if(!a)throw s;return a}}async preloadRemote(e){const{host:n}=this;await this.hooks.lifecycle.beforePreloadRemote.emit({preloadOps:e,options:n.options,origin:n});const r=Zt(n.options.remotes,e);await Promise.all(r.map(async s=>{const{remote:c}=s,a=$e(c),{globalSnapshot:l,remoteSnapshot:h}=await n.snapshotHandler.loadRemoteSnapshotInfo(c),_=await this.hooks.lifecycle.generatePreloadAssets.emit({origin:n,preloadOptions:s,remote:c,remoteInfo:a,globalSnapshot:l,remoteSnapshot:h});_&&lt(a,n,_)}))}registerRemotes(e,n){const{host:r}=this;e.forEach(s=>{this.registerRemote(s,r.options.remotes,{force:n==null?void 0:n.force})})}async getRemoteModuleAndOptions(e){const{host:n}=this,{id:r}=e;let s;try{s=await this.hooks.lifecycle.beforeRequest.emit({id:r,options:n.options,origin:n})}catch(T){if(s=await this.hooks.lifecycle.errorLoadRemote.emit({id:r,options:n.options,origin:n,from:"runtime",error:T,lifecycle:"beforeRequest"}),!s)throw T}const{id:c}=s,a=st(n.options.remotes,c);b(a,u.getShortErrorMsg(u.RUNTIME_004,u.runtimeDescMap,{hostName:n.options.name,requestId:c}));const{remote:l}=a,h=$e(l),_=await n.sharedHandler.hooks.lifecycle.afterResolve.emit(i._extends({id:c},a,{options:n.options,origin:n,remoteInfo:h})),{remote:g,expose:y}=_;b(g&&y,`The 'beforeRequest' hook was executed, but it failed to return the correct 'remote' and 'expose' values while loading ${c}.`);let m=n.moduleCache.get(g.name);const N={host:n,remoteInfo:h};return m||(m=new De(N),n.moduleCache.set(g.name,m)),{module:m,moduleOptions:N,remoteMatchInfo:_}}registerRemote(e,n,r){const{host:s}=this,c=()=>{if(e.alias){const l=n.find(h=>{var _;return e.alias&&(h.name.startsWith(e.alias)||((_=h.alias)==null?void 0:_.startsWith(e.alias)))});b(!l,`The alias ${e.alias} of remote ${e.name} is not allowed to be the prefix of ${l&&l.name} name or alias`)}"entry"in e&&d.isBrowserEnv()&&!e.entry.startsWith("http")&&(e.entry=new URL(e.entry,window.location.origin).href),e.shareScope||(e.shareScope=de),e.type||(e.type=Xe)};this.hooks.lifecycle.beforeRegisterRemote.emit({remote:e,origin:s});const a=n.find(l=>l.name===e.name);if(!a)c(),n.push(e),this.hooks.lifecycle.registerRemote.emit({remote:e,origin:s});else{const l=[`The remote "${e.name}" is already registered.`,"Please note that overriding it may cause unexpected errors."];r!=null&&r.force&&(this.removeRemote(a),c(),n.push(e),this.hooks.lifecycle.registerRemote.emit({remote:e,origin:s}),d.warn(l.join(" ")))}}removeRemote(e){try{const{host:r}=this,{name:s}=e,c=r.options.remotes.findIndex(l=>l.name===s);c!==-1&&r.options.remotes.splice(c,1);const a=r.moduleCache.get(e.name);if(a){const l=a.remoteInfo,h=l.entryGlobalName;if($[h]){var n;(n=Object.getOwnPropertyDescriptor($,h))!=null&&n.configurable?delete $[h]:$[h]=void 0}const _=Le(a.remoteInfo);ne[_]&&delete ne[_],r.snapshotHandler.manifestCache.delete(l.entry);let g=l.buildVersion?d.composeKeyWithSeparator(l.name,l.buildVersion):l.name;const y=$.__FEDERATION__.__INSTANCES__.findIndex(N=>l.buildVersion?N.options.id===g:N.name===g);if(y!==-1){const N=$.__FEDERATION__.__INSTANCES__[y];g=N.options.id||g;const T=we();let P=!0;const I=[];Object.keys(T).forEach(M=>{const F=T[M];F&&Object.keys(F).forEach(A=>{const D=F[A];D&&Object.keys(D).forEach(H=>{const U=D[H];U&&Object.keys(U).forEach(Q=>{const k=U[Q];k&&typeof k=="object"&&k.from===l.name&&(k.loaded||k.loading?(k.useIn=k.useIn.filter(q=>q!==l.name),k.useIn.length?P=!1:I.push([M,A,H,Q])):I.push([M,A,H,Q]))})})})}),P&&(N.shareScopeMap={},delete T[g]),I.forEach(([M,F,A,D])=>{var H,U,Q;(Q=T[M])==null||(U=Q[F])==null||(H=U[A])==null||delete H[D]}),$.__FEDERATION__.__INSTANCES__.splice(y,1)}const{hostGlobalSnapshot:m}=ft(e,r);if(m){const N=m&&"remotesInfo"in m&&m.remotesInfo&&re(m.remotesInfo,e.name).key;N&&(delete m.remotesInfo[N],C.__FEDERATION__.__MANIFEST_LOADING__[N]&&delete C.__FEDERATION__.__MANIFEST_LOADING__[N])}r.moduleCache.delete(e.name)}}catch(r){S.log("removeRemote fail: ",r)}}constructor(e){this.hooks=new ae({beforeRegisterRemote:new Ee("beforeRegisterRemote"),registerRemote:new Ee("registerRemote"),beforeRequest:new se("beforeRequest"),onLoad:new K("onLoad"),handlePreloadModule:new W("handlePreloadModule"),errorLoadRemote:new K("errorLoadRemote"),beforePreloadRemote:new K("beforePreloadRemote"),generatePreloadAssets:new K("generatePreloadAssets"),afterPreloadRemote:new K,loadEntry:new K}),this.host=e,this.idToRemoteMap={}}}class ln{initOptions(e){this.registerPlugins(e.plugins);const n=this.formatOptions(this.options,e);return this.options=n,n}async loadShare(e,n){return this.sharedHandler.loadShare(e,n)}loadShareSync(e,n){return this.sharedHandler.loadShareSync(e,n)}initializeSharing(e=de,n){return this.sharedHandler.initializeSharing(e,n)}initRawContainer(e,n,r){const s=$e({name:e,entry:n}),c=new De({host:this,remoteInfo:s});return c.remoteEntryExports=r,this.moduleCache.set(e,c),c}async loadRemote(e,n){return this.remoteHandler.loadRemote(e,n)}async preloadRemote(e){return this.remoteHandler.preloadRemote(e)}initShareScopeMap(e,n,r={}){this.sharedHandler.initShareScopeMap(e,n,r)}formatOptions(e,n){const{shared:r}=rt(e,n),{userOptions:s,options:c}=this.hooks.lifecycle.beforeInit.emit({origin:this,userOptions:n,options:e,shareInfo:r}),a=this.remoteHandler.formatAndRegisterRemote(c,s),{shared:l}=this.sharedHandler.registerShared(c,s),h=[...c.plugins];s.plugins&&s.plugins.forEach(g=>{h.includes(g)||h.push(g)});const _=i._extends({},e,n,{plugins:h,remotes:a,shared:l});return this.hooks.lifecycle.init.emit({origin:this,options:_}),_}registerPlugins(e){const n=Xt(e,[this.hooks,this.remoteHandler.hooks,this.sharedHandler.hooks,this.snapshotHandler.hooks,this.loaderHook,this.bridgeHook]);this.options.plugins=this.options.plugins.reduce((r,s)=>(s&&r&&!r.find(c=>c.name===s.name)&&r.push(s),r),n||[])}registerRemotes(e,n){return this.remoteHandler.registerRemotes(e,n)}constructor(e){this.hooks=new ae({beforeInit:new Ee("beforeInit"),init:new W,beforeInitContainer:new se("beforeInitContainer"),initContainer:new se("initContainer")}),this.version="0.6.17",this.moduleCache=new Map,this.loaderHook=new ae({getModuleInfo:new W,createScript:new W,createLink:new W,fetch:new K,loadEntryError:new K,getModuleFactory:new K}),this.bridgeHook=new ae({beforeBridgeRender:new W,afterBridgeRender:new W,beforeBridgeDestroy:new W,afterBridgeDestroy:new W});const n={id:Vt(),name:e.name,plugins:[en(),rn()],remotes:[],shared:{},inBrowser:d.isBrowserEnv()};this.name=e.name,this.options=n,this.snapshotHandler=new on(this),this.sharedHandler=new sn(this),this.remoteHandler=new an(this),this.shareScopeMap=this.sharedHandler.shareScopeMap,this.registerPlugins([...n.plugins,...e.plugins||[]]),this.options=this.formatOptions(n,e)}}var cn=Object.freeze({__proto__:null});Object.defineProperty(o,"loadScript",{enumerable:!0,get:function(){return d.loadScript}}),Object.defineProperty(o,"loadScriptNode",{enumerable:!0,get:function(){return d.loadScriptNode}}),o.CurrentGlobal=$,o.FederationHost=ln,o.Global=C,o.Module=De,o.addGlobalSnapshot=Ie,o.assert=b,o.getGlobalFederationConstructor=Ce,o.getGlobalSnapshot=ge,o.getInfoWithoutType=re,o.getRegisteredShare=oe,o.getRemoteEntry=me,o.getRemoteInfo=$e,o.helpers=Bt,o.isStaticResourcesEqual=Z,o.matchRemoteWithNameAndExpose=st,o.registerGlobalPlugins=Ge,o.resetFederationGlobalInfo=je,o.safeWrapper=G,o.satisfy=_e,o.setGlobalFederationConstructor=He,o.setGlobalFederationInstance=ke,o.types=cn})(index_cjs$2);var utils_cjs={},runtimeCore=index_cjs$2;function getBuilderId(){return typeof FEDERATION_BUILD_IDENTIFIER<"u"?FEDERATION_BUILD_IDENTIFIER:""}function getGlobalFederationInstance(o,i){const d=getBuilderId();return runtimeCore.CurrentGlobal.__FEDERATION__.__INSTANCES__.find(u=>!!(d&&u.options.id===getBuilderId()||u.options.name===o&&!u.options.version&&!i||u.options.name===o&&i&&u.options.version===i))}utils_cjs.getGlobalFederationInstance=getGlobalFederationInstance;(function(o){var i=index_cjs$2,d=utils_cjs;let u=null;function p(O){const G=d.getGlobalFederationInstance(O.name,O.version);if(G)return G.initOptions(O),u||(u=G),G;{const Y=i.getGlobalFederationConstructor()||i.FederationHost;return u=new Y(O),i.setGlobalFederationInstance(u),u}}function S(...O){return i.assert(u,"Please call init first"),u.loadRemote.apply(u,O)}function b(...O){return i.assert(u,"Please call init first"),u.loadShare.apply(u,O)}function E(...O){return i.assert(u,"Please call init first"),u.loadShareSync.apply(u,O)}function R(...O){return i.assert(u,"Please call init first"),u.preloadRemote.apply(u,O)}function v(...O){return i.assert(u,"Please call init first"),u.registerRemotes.apply(u,O)}function w(...O){return i.assert(u,"Please call init first"),u.registerPlugins.apply(u,O)}function L(){return u}i.setGlobalFederationConstructor(i.FederationHost),Object.defineProperty(o,"FederationHost",{enumerable:!0,get:function(){return i.FederationHost}}),Object.defineProperty(o,"Module",{enumerable:!0,get:function(){return i.Module}}),Object.defineProperty(o,"getRemoteEntry",{enumerable:!0,get:function(){return i.getRemoteEntry}}),Object.defineProperty(o,"getRemoteInfo",{enumerable:!0,get:function(){return i.getRemoteInfo}}),Object.defineProperty(o,"loadScript",{enumerable:!0,get:function(){return i.loadScript}}),Object.defineProperty(o,"loadScriptNode",{enumerable:!0,get:function(){return i.loadScriptNode}}),Object.defineProperty(o,"registerGlobalPlugins",{enumerable:!0,get:function(){return i.registerGlobalPlugins}}),o.getInstance=L,o.init=p,o.loadRemote=S,o.loadShare=b,o.loadShareSync=E,o.preloadRemote=R,o.registerPlugins=w,o.registerRemotes=v})(index_cjs$3);let initResolve,initReject;const initPromise=new Promise((o,i)=>{initResolve=o,initReject=i});var iobroker_javascript__mf_v__runtimeInit__mf_v__={initPromise,initResolve,initReject};export{iobroker_javascript__mf_v__runtimeInit__mf_v__ as a,index_cjs$3 as i};
