import{_ as __vitePreload}from"./preload-helper-D6kgxu3v.js";var index_cjs$2={},polyfills_cjs$1={};function _extends$2(){return _extends$2=Object.assign||function(n){for(var s=1;s<arguments.length;s++){var t=arguments[s];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(n[a]=t[a])}return n},_extends$2.apply(this,arguments)}function _object_without_properties_loose(e,n){if(e==null)return{};var s={},t=Object.keys(e),a,d;for(d=0;d<t.length;d++)a=t[d],!(n.indexOf(a)>=0)&&(s[a]=e[a]);return s}polyfills_cjs$1._extends=_extends$2;polyfills_cjs$1._object_without_properties_loose=_object_without_properties_loose;var index_cjs$1={},__defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__hasOwnProp=Object.prototype.hasOwnProperty,__export=(e,n)=>{for(var s in n)__defProp(e,s,{get:n[s],enumerable:!0})},__copyProps=(e,n,s,t)=>{if(typeof n=="object"||typeof n=="function")for(let a of __getOwnPropNames(n))!__hasOwnProp.call(e,a)&&a!==s&&__defProp(e,a,{get:()=>n[a],enumerable:!(t=__getOwnPropDesc(n,a))||t.enumerable});return e},__toCommonJS=e=>__copyProps(__defProp({},"__esModule",{value:!0}),e),browser_exports={};__export(browser_exports,{createLogger:()=>createLogger2,logger:()=>logger$2});var browser=__toCommonJS(browser_exports),supportsSubstitutions=void 0,supportColor=()=>{if(typeof supportsSubstitutions<"u")return supportsSubstitutions;const e=console.log;try{const n="color test",s="color: red;";supportsSubstitutions=!1,console.log=(...t)=>{t[0]===`%c${n}`&&t[1]===s&&(supportsSubstitutions=!0)},console.log(`%c${n}`,s)}catch{supportsSubstitutions=!1}finally{console.log=e}return supportsSubstitutions},ansiToCss={bold:"font-weight: bold;",red:"color: red;",green:"color: green;",orange:"color: orange;",dodgerblue:"color: dodgerblue;",magenta:"color: magenta;",gray:"color: gray;"},formatter=e=>supportColor()?n=>{if(Array.isArray(n)){const[s,t]=n;return[`%c${s.replace("%c","")}`,t?`${ansiToCss[e]}${t}`:`${ansiToCss[e]||""}`]}return[`%c${String(n).replace("%c","")}`,ansiToCss[e]||""]}:n=>[String(n)],bold=formatter("bold"),red=formatter("red"),green=formatter("green"),orange=formatter("orange"),dodgerblue=formatter("dodgerblue"),magenta=formatter("magenta");formatter("gray");function getLabel(e,n,s){let t=[""];if("label"in n)if(t=[(e!=="log"?s[e]:void 0)||n.label||""],n.color){const d=n.color(t[0]);Array.isArray(d)&&d.length===2?t=bold([d[0],d[1]]):t=bold(d[0]||"")}else t=bold(t[0]);return t=t.filter(Boolean),t}function finalLog(e,n,s,t){e.length?Array.isArray(t)?console.log(...e,...t,...s):console.log(...e,n,...s):Array.isArray(t)?console.log(...t):console.log(n,...s)}var LOG_LEVEL={error:0,warn:1,info:2,log:3,verbose:4},errorStackRegExp=/at\s.*:\d+:\d+[\s\)]*$/,anonymousErrorStackRegExp=/at\s.*\(<anonymous>\)$/,isErrorStackMessage=e=>errorStackRegExp.test(e)||anonymousErrorStackRegExp.test(e);function validateOptions(e){const n={...e};if(e.labels&&typeof e.labels!="object")throw new Error("Labels must be an object");if(e.level&&typeof e.level!="string")throw new Error("Level must be a string");return n}var createLogger$1=(e={},{getLabel:n,handleError:s,finalLog:t,greet:a,LOG_TYPES:d})=>{const m=validateOptions(e);let p=m.level||"log",g=m.labels||{},b=(I,N,...k)=>{if(LOG_LEVEL[d[I].level]>LOG_LEVEL[p])return;if(N==null)return console.log();let B=d[I],j="";const X=n(I,B,g);if(N instanceof Error)if(N.stack){let[G,...w]=N.stack.split(`
`);G.startsWith("Error: ")&&(G=G.slice(7)),j=`${G}
${s(w.join(`
`))}`}else j=N.message;else B.level==="error"&&typeof N=="string"?j=N.split(`
`).map(w=>isErrorStackMessage(w)?s(w):w).join(`
`):j=`${N}`;t(X,j,k,N)},O={greet:I=>b("log",a(I))};return Object.keys(d).forEach(I=>{O[I]=(...N)=>b(I,...N)}),Object.defineProperty(O,"level",{get:()=>p,set(I){p=I}}),Object.defineProperty(O,"labels",{get:()=>g,set(I){g=I}}),O.override=I=>{Object.assign(O,I)},O},startColor=[189,255,243],endColor=[74,194,154],isWord=e=>!/[\s\n]/.test(e);function gradient(e){if(!supportColor())return[e];const n=[...e],s=n.filter(isWord),t=s.length-1;if(t===0)return console.log(`%c${e}`,`color: rgb(${startColor.join(",")}); font-weight: bold;`),[e];let a="",d=[];return n.forEach(m=>{if(isWord(m)){const p=s.indexOf(m)/t,g=Math.round(startColor[0]+(endColor[0]-startColor[0])*p),b=Math.round(startColor[1]+(endColor[1]-startColor[1])*p),O=Math.round(startColor[2]+(endColor[2]-startColor[2])*p);a+=`%c${m}`,d.push(`color: rgb(${g},${b},${O}); font-weight: bold;`)}else a+=m}),[a,...d]}var LOG_TYPES={error:{label:"error",level:"error",color:red},warn:{label:"warn",level:"warn",color:orange},info:{label:"info",level:"info",color:dodgerblue},start:{label:"start",level:"info",color:dodgerblue},ready:{label:"ready",level:"info",color:green},success:{label:"success",level:"info",color:green},log:{level:"log"},debug:{label:"debug",level:"verbose",color:magenta}};function createLogger2(e={}){return createLogger$1(e,{handleError:n=>n,getLabel,gradient,finalLog,LOG_TYPES,greet:n=>gradient(n)})}var logger$2=createLogger2(),polyfills_cjs={};function _extends$1(){return _extends$1=Object.assign||function(n){for(var s=1;s<arguments.length;s++){var t=arguments[s];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(n[a]=t[a])}return n},_extends$1.apply(this,arguments)}polyfills_cjs._extends=_extends$1;var define_process_env_default={},isomorphicRslog=browser,polyfills$1=polyfills_cjs;const FederationModuleManifest="federation-manifest.json",MANIFEST_EXT=".json",BROWSER_LOG_KEY="FEDERATION_DEBUG",BROWSER_LOG_VALUE="1",NameTransformSymbol={AT:"@",HYPHEN:"-",SLASH:"/"},NameTransformMap={[NameTransformSymbol.AT]:"scope_",[NameTransformSymbol.HYPHEN]:"_",[NameTransformSymbol.SLASH]:"__"},EncodedNameTransformMap={[NameTransformMap[NameTransformSymbol.AT]]:NameTransformSymbol.AT,[NameTransformMap[NameTransformSymbol.HYPHEN]]:NameTransformSymbol.HYPHEN,[NameTransformMap[NameTransformSymbol.SLASH]]:NameTransformSymbol.SLASH},SEPARATOR=":",ManifestFileName="mf-manifest.json",StatsFileName="mf-stats.json",MFModuleType={NPM:"npm",APP:"app"},MODULE_DEVTOOL_IDENTIFIER="__MF_DEVTOOLS_MODULE_INFO__",ENCODE_NAME_PREFIX="ENCODE_NAME_PREFIX",TEMP_DIR=".federation",MFPrefetchCommon={identifier:"MFDataPrefetch",globalKey:"__PREFETCH__",library:"mf-data-prefetch",exportsKey:"__PREFETCH_EXPORTS__",fileName:"bootstrap.js"};var ContainerPlugin=Object.freeze({__proto__:null}),ContainerReferencePlugin=Object.freeze({__proto__:null}),ModuleFederationPlugin=Object.freeze({__proto__:null}),SharePlugin=Object.freeze({__proto__:null});function isBrowserEnv(){return typeof window<"u"}function isBrowserDebug(){try{if(isBrowserEnv()&&window.localStorage)return localStorage.getItem(BROWSER_LOG_KEY)===BROWSER_LOG_VALUE}catch{return!1}return!1}function isDebugMode(){return typeof process<"u"&&define_process_env_default&&define_process_env_default.FEDERATION_DEBUG?!!define_process_env_default.FEDERATION_DEBUG:typeof FEDERATION_DEBUG<"u"&&FEDERATION_DEBUG?!0:isBrowserDebug()}const getProcessEnv=function(){return typeof process<"u"&&define_process_env_default?define_process_env_default:{}},PREFIX="[ Module Federation ]";function setDebug(e){isDebugMode()&&(e.level="verbose")}function setPrefix(e,n){e.labels={warn:`${n} Warn`,error:`${n} Error`,success:`${n} Success`,info:`${n} Info`,ready:`${n} Ready`,debug:`${n} Debug`}}function createLogger(e){const n=isomorphicRslog.createLogger({labels:{warn:`${PREFIX} Warn`,error:`${PREFIX} Error`,success:`${PREFIX} Success`,info:`${PREFIX} Info`,ready:`${PREFIX} Ready`,debug:`${PREFIX} Debug`}});return setDebug(n),setPrefix(n,e),n}const logger$1=createLogger(PREFIX),LOG_CATEGORY$1="[ Federation Runtime ]",parseEntry=(e,n,s=SEPARATOR)=>{const t=e.split(s),a=getProcessEnv().NODE_ENV==="development"&&n,d="*",m=p=>p.startsWith("http")||p.includes(MANIFEST_EXT);if(t.length>=2){let[p,...g]=t;e.startsWith(s)&&(g=[a||t.slice(-1)[0]],p=t.slice(0,-1).join(s));let b=a||g.join(s);return m(b)?{name:p,entry:b}:{name:p,version:b||d}}else if(t.length===1){const[p]=t;return a&&m(a)?{name:p,entry:a}:{name:p,version:a||d}}else throw`Invalid entry value: ${e}`},composeKeyWithSeparator=function(...e){return e.length?e.reduce((n,s)=>s?n?`${n}${SEPARATOR}${s}`:s:n,""):""},encodeName=function(e,n="",s=!1){try{const t=s?".js":"";return`${n}${e.replace(new RegExp(`${NameTransformSymbol.AT}`,"g"),NameTransformMap[NameTransformSymbol.AT]).replace(new RegExp(`${NameTransformSymbol.HYPHEN}`,"g"),NameTransformMap[NameTransformSymbol.HYPHEN]).replace(new RegExp(`${NameTransformSymbol.SLASH}`,"g"),NameTransformMap[NameTransformSymbol.SLASH])}${t}`}catch(t){throw t}},decodeName=function(e,n,s){try{let t=e;if(n){if(!t.startsWith(n))return t;t=t.replace(new RegExp(n,"g"),"")}return t=t.replace(new RegExp(`${NameTransformMap[NameTransformSymbol.AT]}`,"g"),EncodedNameTransformMap[NameTransformMap[NameTransformSymbol.AT]]).replace(new RegExp(`${NameTransformMap[NameTransformSymbol.SLASH]}`,"g"),EncodedNameTransformMap[NameTransformMap[NameTransformSymbol.SLASH]]).replace(new RegExp(`${NameTransformMap[NameTransformSymbol.HYPHEN]}`,"g"),EncodedNameTransformMap[NameTransformMap[NameTransformSymbol.HYPHEN]]),s&&(t=t.replace(".js","")),t}catch(t){throw t}},generateExposeFilename=(e,n)=>{if(!e)return"";let s=e;return s==="."&&(s="default_export"),s.startsWith("./")&&(s=s.replace("./","")),encodeName(s,"__federation_expose_",n)},generateShareFilename=(e,n)=>e?encodeName(e,"__federation_shared_",n):"",getResourceUrl=(e,n)=>{if("getPublicPath"in e){let s;return e.getPublicPath.startsWith("function")?s=new Function("return "+e.getPublicPath)()():s=new Function(e.getPublicPath)(),`${s}${n}`}else return"publicPath"in e?`${e.publicPath}${n}`:(console.warn("Cannot get resource URL. If in debug mode, please ignore.",e,n),"")},assert$1=(e,n)=>{e||error$1(n)},error$1=e=>{throw new Error(`${LOG_CATEGORY$1}: ${e}`)},warn$1=e=>{console.warn(`${LOG_CATEGORY$1}: ${e}`)};function safeToString(e){try{return JSON.stringify(e,null,2)}catch{return""}}const VERSION_PATTERN_REGEXP=/^([\d^=v<>~]|[*xX]$)/;function isRequiredVersion(e){return VERSION_PATTERN_REGEXP.test(e)}const simpleJoinRemoteEntry=(e,n)=>{if(!e)return n;const t=(a=>{if(a===".")return"";if(a.startsWith("./"))return a.replace("./","");if(a.startsWith("/")){const d=a.slice(1);return d.endsWith("/")?d.slice(0,-1):d}return a})(e);return t?t.endsWith("/")?`${t}${n}`:`${t}/${n}`:n};function inferAutoPublicPath(e){return e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/")}function generateSnapshotFromManifest(e,n={}){var s,t;const{remotes:a={},overrides:d={},version:m}=n;let p;const g=()=>"publicPath"in e.metaData?e.metaData.publicPath==="auto"&&m?inferAutoPublicPath(m):e.metaData.publicPath:e.metaData.getPublicPath,b=Object.keys(d);let O={};if(!Object.keys(a).length){var I;O=((I=e.remotes)==null?void 0:I.reduce((P,W)=>{let J;const ee=W.federationContainerName;return b.includes(ee)?J=d[ee]:"version"in W?J=W.version:J=W.entry,P[ee]={matchedVersion:J},P},{}))||{}}Object.keys(a).forEach(P=>O[P]={matchedVersion:b.includes(P)?d[P]:a[P]});const{remoteEntry:{path:N,name:k,type:B},types:j,buildInfo:{buildVersion:X},globalName:G,ssrRemoteEntry:w}=e.metaData,{exposes:Q}=e;let q={version:m||"",buildVersion:X,globalName:G,remoteEntry:simpleJoinRemoteEntry(N,k),remoteEntryType:B,remoteTypes:simpleJoinRemoteEntry(j.path,j.name),remoteTypesZip:j.zip||"",remoteTypesAPI:j.api||"",remotesInfo:O,shared:e==null?void 0:e.shared.map(P=>({assets:P.assets,sharedName:P.name,version:P.version})),modules:Q==null?void 0:Q.map(P=>({moduleName:P.name,modulePath:P.path,assets:P.assets}))};if((s=e.metaData)!=null&&s.prefetchInterface){const P=e.metaData.prefetchInterface;q=polyfills$1._extends({},q,{prefetchInterface:P})}if((t=e.metaData)!=null&&t.prefetchEntry){const{path:P,name:W,type:J}=e.metaData.prefetchEntry;q=polyfills$1._extends({},q,{prefetchEntry:simpleJoinRemoteEntry(P,W),prefetchEntryType:J})}if("publicPath"in e.metaData?p=polyfills$1._extends({},q,{publicPath:g()}):p=polyfills$1._extends({},q,{getPublicPath:g()}),w){const P=simpleJoinRemoteEntry(w.path,w.name);p.ssrRemoteEntry=P,p.ssrRemoteEntryType=w.type||"commonjs-module"}return p}function isManifestProvider(e){return!!("remoteEntry"in e&&e.remoteEntry.includes(MANIFEST_EXT))}async function safeWrapper(e,n){try{return await e()}catch(s){!n&&warn$1(s);return}}function isStaticResourcesEqual(e,n){const s=/^(https?:)?\/\//i,t=e.replace(s,"").replace(/\/$/,""),a=n.replace(s,"").replace(/\/$/,"");return t===a}function createScript(e){let n=null,s=!0,t=2e4,a;const d=document.getElementsByTagName("script");for(let p=0;p<d.length;p++){const g=d[p],b=g.getAttribute("src");if(b&&isStaticResourcesEqual(b,e.url)){n=g,s=!1;break}}if(!n){const p=e.attrs;n=document.createElement("script"),n.type=(p==null?void 0:p.type)==="module"?"module":"text/javascript";let g;e.createScriptHook&&(g=e.createScriptHook(e.url,e.attrs),g instanceof HTMLScriptElement?n=g:typeof g=="object"&&("script"in g&&g.script&&(n=g.script),"timeout"in g&&g.timeout&&(t=g.timeout))),n.src||(n.src=e.url),p&&!g&&Object.keys(p).forEach(b=>{n&&(b==="async"||b==="defer"?n[b]=p[b]:n.getAttribute(b)||n.setAttribute(b,p[b]))})}const m=async(p,g)=>{var b;if(clearTimeout(a),n&&(n.onerror=null,n.onload=null,safeWrapper(()=>{const{needDeleteScript:N=!0}=e;N&&n!=null&&n.parentNode&&n.parentNode.removeChild(n)}),p&&typeof p=="function")){var O;const N=p(g);if(N instanceof Promise){var I;const k=await N;return e==null||(I=e.cb)==null||I.call(e),k}return e==null||(O=e.cb)==null||O.call(e),N}e==null||(b=e.cb)==null||b.call(e)};return n.onerror=m.bind(null,n.onerror),n.onload=m.bind(null,n.onload),a=setTimeout(()=>{m(null,new Error(`Remote script "${e.url}" time-outed.`))},t),{script:n,needAttach:s}}function createLink(e){let n=null,s=!0;const t=document.getElementsByTagName("link");for(let d=0;d<t.length;d++){const m=t[d],p=m.getAttribute("href"),g=m.getAttribute("ref");if(p&&isStaticResourcesEqual(p,e.url)&&g===e.attrs.ref){n=m,s=!1;break}}if(!n){n=document.createElement("link"),n.setAttribute("href",e.url);let d;const m=e.attrs;e.createLinkHook&&(d=e.createLinkHook(e.url,m),d instanceof HTMLLinkElement&&(n=d)),m&&!d&&Object.keys(m).forEach(p=>{n&&!n.getAttribute(p)&&n.setAttribute(p,m[p])})}const a=(d,m)=>{if(n&&(n.onerror=null,n.onload=null,safeWrapper(()=>{const{needDeleteLink:p=!0}=e;p&&n!=null&&n.parentNode&&n.parentNode.removeChild(n)}),d)){const p=d(m);return e.cb(),p}e.cb()};return n.onerror=a.bind(null,n.onerror),n.onload=a.bind(null,n.onload),{link:n,needAttach:s}}function loadScript(e,n){const{attrs:s={},createScriptHook:t}=n;return new Promise((a,d)=>{const{script:m,needAttach:p}=createScript({url:e,cb:a,attrs:polyfills$1._extends({fetchpriority:"high"},s),createScriptHook:t,needDeleteScript:!0});p&&document.head.appendChild(m)})}function importNodeModule(e){if(!e)throw new Error("import specifier is required");return new Function("name","return import(name)")(e).then(s=>s).catch(s=>{throw console.error(`Error importing module ${e}:`,s),s})}const loadNodeFetch=async()=>{const e=await importNodeModule("node-fetch");return e.default||e},lazyLoaderHookFetch=async(e,n,s)=>{const a=await((d,m)=>s.lifecycle.fetch.emit(d,m))(e,n||{});return!a||!(a instanceof Response)?(typeof fetch>"u"?await loadNodeFetch():fetch)(e,n||{}):a};function createScriptNode(url,cb,attrs,loaderHook){if(loaderHook!=null&&loaderHook.createScriptHook){const e=loaderHook.createScriptHook(url);e&&typeof e=="object"&&"url"in e&&(url=e.url)}let urlObj;try{urlObj=new URL(url)}catch(e){console.error("Error constructing URL:",e),cb(new Error(`Invalid URL: ${e}`));return}const getFetch=async()=>loaderHook!=null&&loaderHook.fetch?(e,n)=>lazyLoaderHookFetch(e,n,loaderHook):typeof fetch>"u"?loadNodeFetch():fetch,handleScriptFetch=async(f,urlObj)=>{try{var _vm_constants;const res=await f(urlObj.href),data=await res.text(),[path,vm]=await Promise.all([importNodeModule("path"),importNodeModule("vm")]),scriptContext={exports:{},module:{exports:{}}},urlDirname=urlObj.pathname.split("/").slice(0,-1).join("/"),filename=path.basename(urlObj.pathname);var _vm_constants_USE_MAIN_CONTEXT_DEFAULT_LOADER;const script=new vm.Script(`(function(exports, module, require, __dirname, __filename) {${data}
})`,{filename,importModuleDynamically:(_vm_constants_USE_MAIN_CONTEXT_DEFAULT_LOADER=(_vm_constants=vm.constants)==null?void 0:_vm_constants.USE_MAIN_CONTEXT_DEFAULT_LOADER)!=null?_vm_constants_USE_MAIN_CONTEXT_DEFAULT_LOADER:importNodeModule});script.runInThisContext()(scriptContext.exports,scriptContext.module,eval("require"),urlDirname,filename);const exportedInterface=scriptContext.module.exports||scriptContext.exports;if(attrs&&exportedInterface&&attrs.globalName){const e=exportedInterface[attrs.globalName]||exportedInterface;cb(void 0,e);return}cb(void 0,exportedInterface)}catch(e){cb(e instanceof Error?e:new Error(`Script execution error: ${e}`))}};getFetch().then(async e=>{if((attrs==null?void 0:attrs.type)==="esm"||(attrs==null?void 0:attrs.type)==="module")return loadModule(urlObj.href,{fetch:e,vm:await importNodeModule("vm")}).then(async n=>{await n.evaluate(),cb(void 0,n.namespace)}).catch(n=>{cb(n instanceof Error?n:new Error(`Script execution error: ${n}`))});handleScriptFetch(e,urlObj)}).catch(e=>{cb(e)})}function loadScriptNode(e,n){return new Promise((s,t)=>{createScriptNode(e,(a,d)=>{if(a)t(a);else{var m,p;const g=(n==null||(m=n.attrs)==null?void 0:m.globalName)||`__FEDERATION_${n==null||(p=n.attrs)==null?void 0:p.name}:custom__`,b=globalThis[g]=d;s(b)}},n.attrs,n.loaderHook)})}async function loadModule(e,n){const{fetch:s,vm:t}=n,d=await(await s(e)).text(),m=new t.SourceTextModule(d,{importModuleDynamically:async(p,g)=>{const b=new URL(p,e).href;return loadModule(b,n)}});return await m.link(async p=>{const g=new URL(p,e).href;return await loadModule(g,n)}),m}function normalizeOptions(e,n,s){return function(t){if(t===!1)return!1;if(typeof t>"u")return e?n:!1;if(t===!0)return n;if(t&&typeof t=="object")return polyfills$1._extends({},n,t);throw new Error(`Unexpected type for \`${s}\`, expect boolean/undefined/object, got: ${typeof t}`)}}index_cjs$1.BROWSER_LOG_KEY=BROWSER_LOG_KEY;index_cjs$1.BROWSER_LOG_VALUE=BROWSER_LOG_VALUE;index_cjs$1.ENCODE_NAME_PREFIX=ENCODE_NAME_PREFIX;index_cjs$1.EncodedNameTransformMap=EncodedNameTransformMap;index_cjs$1.FederationModuleManifest=FederationModuleManifest;index_cjs$1.MANIFEST_EXT=MANIFEST_EXT;index_cjs$1.MFModuleType=MFModuleType;index_cjs$1.MFPrefetchCommon=MFPrefetchCommon;index_cjs$1.MODULE_DEVTOOL_IDENTIFIER=MODULE_DEVTOOL_IDENTIFIER;index_cjs$1.ManifestFileName=ManifestFileName;index_cjs$1.NameTransformMap=NameTransformMap;index_cjs$1.NameTransformSymbol=NameTransformSymbol;index_cjs$1.SEPARATOR=SEPARATOR;index_cjs$1.StatsFileName=StatsFileName;index_cjs$1.TEMP_DIR=TEMP_DIR;index_cjs$1.assert=assert$1;index_cjs$1.composeKeyWithSeparator=composeKeyWithSeparator;index_cjs$1.containerPlugin=ContainerPlugin;index_cjs$1.containerReferencePlugin=ContainerReferencePlugin;index_cjs$1.createLink=createLink;index_cjs$1.createLogger=createLogger;index_cjs$1.createScript=createScript;index_cjs$1.createScriptNode=createScriptNode;index_cjs$1.decodeName=decodeName;index_cjs$1.encodeName=encodeName;index_cjs$1.error=error$1;index_cjs$1.generateExposeFilename=generateExposeFilename;index_cjs$1.generateShareFilename=generateShareFilename;index_cjs$1.generateSnapshotFromManifest=generateSnapshotFromManifest;index_cjs$1.getProcessEnv=getProcessEnv;index_cjs$1.getResourceUrl=getResourceUrl;index_cjs$1.inferAutoPublicPath=inferAutoPublicPath;index_cjs$1.isBrowserEnv=isBrowserEnv;index_cjs$1.isDebugMode=isDebugMode;index_cjs$1.isManifestProvider=isManifestProvider;index_cjs$1.isRequiredVersion=isRequiredVersion;index_cjs$1.isStaticResourcesEqual=isStaticResourcesEqual;index_cjs$1.loadScript=loadScript;index_cjs$1.loadScriptNode=loadScriptNode;index_cjs$1.logger=logger$1;index_cjs$1.moduleFederationPlugin=ModuleFederationPlugin;index_cjs$1.normalizeOptions=normalizeOptions;index_cjs$1.parseEntry=parseEntry;index_cjs$1.safeToString=safeToString;index_cjs$1.safeWrapper=safeWrapper;index_cjs$1.sharePlugin=SharePlugin;index_cjs$1.simpleJoinRemoteEntry=simpleJoinRemoteEntry;index_cjs$1.warn=warn$1;var share_cjs={},polyfills=polyfills_cjs$1,sdk=index_cjs$1;function getBuilderId(){return typeof FEDERATION_BUILD_IDENTIFIER<"u"?FEDERATION_BUILD_IDENTIFIER:""}const LOG_CATEGORY="[ Federation Runtime ]",logger=sdk.createLogger(LOG_CATEGORY);function assert(e,n){e||error(n)}function error(e){throw e instanceof Error?(e.message=`${LOG_CATEGORY}: ${e.message}`,e):new Error(`${LOG_CATEGORY}: ${e}`)}function warn(e){e instanceof Error&&(e.message=`${LOG_CATEGORY}: ${e.message}`),logger.warn(e)}function addUniqueItem(e,n){return e.findIndex(s=>s===n)===-1&&e.push(n),e}function getFMId(e){return"version"in e&&e.version?`${e.name}:${e.version}`:"entry"in e&&e.entry?`${e.name}:${e.entry}`:`${e.name}`}function isRemoteInfoWithEntry(e){return typeof e.entry<"u"}function isPureRemoteEntry(e){return!e.entry.includes(".json")&&e.entry.includes(".js")}function isObject(e){return e&&typeof e=="object"}const objectToString=Object.prototype.toString;function isPlainObject(e){return objectToString.call(e)==="[object Object]"}function arrayOptions(e){return Array.isArray(e)?e:[e]}function getRemoteEntryInfoFromSnapshot(e){const n={url:"",type:"global",globalName:""};return sdk.isBrowserEnv()?"remoteEntry"in e?{url:e.remoteEntry,type:e.remoteEntryType,globalName:e.globalName}:n:"ssrRemoteEntry"in e?{url:e.ssrRemoteEntry||n.url,type:e.ssrRemoteEntryType||n.type,globalName:e.globalName}:n}const processModuleAlias=(e,n)=>{let s;return e.endsWith("/")?s=e.slice(0,-1):s=e,n.startsWith(".")&&(n=n.slice(1)),s=s+n,s},CurrentGlobal=typeof globalThis=="object"?globalThis:window,nativeGlobal=(()=>{try{return document.defaultView}catch{return CurrentGlobal}})(),Global=nativeGlobal;function definePropertyGlobalVal(e,n,s){Object.defineProperty(e,n,{value:s,configurable:!1,writable:!0})}function includeOwnProperty(e,n){return Object.hasOwnProperty.call(e,n)}includeOwnProperty(CurrentGlobal,"__GLOBAL_LOADING_REMOTE_ENTRY__")||definePropertyGlobalVal(CurrentGlobal,"__GLOBAL_LOADING_REMOTE_ENTRY__",{});const globalLoading=CurrentGlobal.__GLOBAL_LOADING_REMOTE_ENTRY__;function setGlobalDefaultVal(e){var n,s,t,a,d,m;includeOwnProperty(e,"__VMOK__")&&!includeOwnProperty(e,"__FEDERATION__")&&definePropertyGlobalVal(e,"__FEDERATION__",e.__VMOK__),includeOwnProperty(e,"__FEDERATION__")||(definePropertyGlobalVal(e,"__FEDERATION__",{__GLOBAL_PLUGIN__:[],__INSTANCES__:[],moduleInfo:{},__SHARE__:{},__MANIFEST_LOADING__:{},__PRELOADED_MAP__:new Map}),definePropertyGlobalVal(e,"__VMOK__",e.__FEDERATION__));var p;(p=(n=e.__FEDERATION__).__GLOBAL_PLUGIN__)!=null||(n.__GLOBAL_PLUGIN__=[]);var g;(g=(s=e.__FEDERATION__).__INSTANCES__)!=null||(s.__INSTANCES__=[]);var b;(b=(t=e.__FEDERATION__).moduleInfo)!=null||(t.moduleInfo={});var O;(O=(a=e.__FEDERATION__).__SHARE__)!=null||(a.__SHARE__={});var I;(I=(d=e.__FEDERATION__).__MANIFEST_LOADING__)!=null||(d.__MANIFEST_LOADING__={});var N;(N=(m=e.__FEDERATION__).__PRELOADED_MAP__)!=null||(m.__PRELOADED_MAP__=new Map)}setGlobalDefaultVal(CurrentGlobal);setGlobalDefaultVal(nativeGlobal);function resetFederationGlobalInfo(){CurrentGlobal.__FEDERATION__.__GLOBAL_PLUGIN__=[],CurrentGlobal.__FEDERATION__.__INSTANCES__=[],CurrentGlobal.__FEDERATION__.moduleInfo={},CurrentGlobal.__FEDERATION__.__SHARE__={},CurrentGlobal.__FEDERATION__.__MANIFEST_LOADING__={},Object.keys(globalLoading).forEach(e=>{delete globalLoading[e]})}function getGlobalFederationInstance(e,n){const s=getBuilderId();return CurrentGlobal.__FEDERATION__.__INSTANCES__.find(t=>!!(s&&t.options.id===getBuilderId()||t.options.name===e&&!t.options.version&&!n||t.options.name===e&&n&&t.options.version===n))}function setGlobalFederationInstance(e){CurrentGlobal.__FEDERATION__.__INSTANCES__.push(e)}function getGlobalFederationConstructor(){return CurrentGlobal.__FEDERATION__.__DEBUG_CONSTRUCTOR__}function setGlobalFederationConstructor(e,n=sdk.isDebugMode()){n&&(CurrentGlobal.__FEDERATION__.__DEBUG_CONSTRUCTOR__=e,CurrentGlobal.__FEDERATION__.__DEBUG_CONSTRUCTOR_VERSION__="0.8.6")}function getInfoWithoutType(e,n){if(typeof n=="string"){if(e[n])return{value:e[n],key:n};{const t=Object.keys(e);for(const a of t){const[d,m]=a.split(":"),p=`${d}:${n}`,g=e[p];if(g)return{value:g,key:p}}return{value:void 0,key:n}}}else throw new Error("key must be string")}const getGlobalSnapshot=()=>nativeGlobal.__FEDERATION__.moduleInfo,getTargetSnapshotInfoByModuleInfo=(e,n)=>{const s=getFMId(e),t=getInfoWithoutType(n,s).value;if(t&&!t.version&&"version"in e&&e.version&&(t.version=e.version),t)return t;if("version"in e&&e.version){const{version:a}=e,d=polyfills._object_without_properties_loose(e,["version"]),m=getFMId(d),p=getInfoWithoutType(nativeGlobal.__FEDERATION__.moduleInfo,m).value;if((p==null?void 0:p.version)===a)return p}},getGlobalSnapshotInfoByModuleInfo=e=>getTargetSnapshotInfoByModuleInfo(e,nativeGlobal.__FEDERATION__.moduleInfo),setGlobalSnapshotInfoByModuleInfo=(e,n)=>{const s=getFMId(e);return nativeGlobal.__FEDERATION__.moduleInfo[s]=n,nativeGlobal.__FEDERATION__.moduleInfo},addGlobalSnapshot=e=>(nativeGlobal.__FEDERATION__.moduleInfo=polyfills._extends({},nativeGlobal.__FEDERATION__.moduleInfo,e),()=>{const n=Object.keys(e);for(const s of n)delete nativeGlobal.__FEDERATION__.moduleInfo[s]}),getRemoteEntryExports=(e,n)=>{const s=n||`__FEDERATION_${e}:custom__`,t=CurrentGlobal[s];return{remoteEntryKey:s,entryExports:t}},registerGlobalPlugins=e=>{const{__GLOBAL_PLUGIN__:n}=nativeGlobal.__FEDERATION__;e.forEach(s=>{n.findIndex(t=>t.name===s.name)===-1?n.push(s):warn(`The plugin ${s.name} has been registered.`)})},getGlobalHostPlugins=()=>nativeGlobal.__FEDERATION__.__GLOBAL_PLUGIN__,getPreloaded=e=>CurrentGlobal.__FEDERATION__.__PRELOADED_MAP__.get(e),setPreloaded=e=>CurrentGlobal.__FEDERATION__.__PRELOADED_MAP__.set(e,!0),DEFAULT_SCOPE="default",DEFAULT_REMOTE_TYPE="global",buildIdentifier="[0-9A-Za-z-]+",build=`(?:\\+(${buildIdentifier}(?:\\.${buildIdentifier})*))`,numericIdentifier="0|[1-9]\\d*",numericIdentifierLoose="[0-9]+",nonNumericIdentifier="\\d*[a-zA-Z-][a-zA-Z0-9-]*",preReleaseIdentifierLoose=`(?:${numericIdentifierLoose}|${nonNumericIdentifier})`,preReleaseLoose=`(?:-?(${preReleaseIdentifierLoose}(?:\\.${preReleaseIdentifierLoose})*))`,preReleaseIdentifier=`(?:${numericIdentifier}|${nonNumericIdentifier})`,preRelease=`(?:-(${preReleaseIdentifier}(?:\\.${preReleaseIdentifier})*))`,xRangeIdentifier=`${numericIdentifier}|x|X|\\*`,xRangePlain=`[v=\\s]*(${xRangeIdentifier})(?:\\.(${xRangeIdentifier})(?:\\.(${xRangeIdentifier})(?:${preRelease})?${build}?)?)?`,hyphenRange=`^\\s*(${xRangePlain})\\s+-\\s+(${xRangePlain})\\s*$`,mainVersionLoose=`(${numericIdentifierLoose})\\.(${numericIdentifierLoose})\\.(${numericIdentifierLoose})`,loosePlain=`[v=\\s]*${mainVersionLoose}${preReleaseLoose}?${build}?`,gtlt="((?:<|>)?=?)",comparatorTrim=`(\\s*)${gtlt}\\s*(${loosePlain}|${xRangePlain})`,loneTilde="(?:~>?)",tildeTrim=`(\\s*)${loneTilde}\\s+`,loneCaret="(?:\\^)",caretTrim=`(\\s*)${loneCaret}\\s+`,star="(<|>)?=?\\s*\\*",caret=`^${loneCaret}${xRangePlain}$`,mainVersion=`(${numericIdentifier})\\.(${numericIdentifier})\\.(${numericIdentifier})`,fullPlain=`v?${mainVersion}${preRelease}?${build}?`,tilde=`^${loneTilde}${xRangePlain}$`,xRange=`^${gtlt}\\s*${xRangePlain}$`,comparator=`^${gtlt}\\s*(${fullPlain})$|^$`,gte0="^\\s*>=\\s*0.0.0\\s*$";function parseRegex(e){return new RegExp(e)}function isXVersion(e){return!e||e.toLowerCase()==="x"||e==="*"}function pipe(...e){return n=>e.reduce((s,t)=>t(s),n)}function extractComparator(e){return e.match(parseRegex(comparator))}function combineVersion(e,n,s,t){const a=`${e}.${n}.${s}`;return t?`${a}-${t}`:a}function parseHyphen(e){return e.replace(parseRegex(hyphenRange),(n,s,t,a,d,m,p,g,b,O,I,N)=>(isXVersion(t)?s="":isXVersion(a)?s=`>=${t}.0.0`:isXVersion(d)?s=`>=${t}.${a}.0`:s=`>=${s}`,isXVersion(b)?g="":isXVersion(O)?g=`<${Number(b)+1}.0.0-0`:isXVersion(I)?g=`<${b}.${Number(O)+1}.0-0`:N?g=`<=${b}.${O}.${I}-${N}`:g=`<=${g}`,`${s} ${g}`.trim()))}function parseComparatorTrim(e){return e.replace(parseRegex(comparatorTrim),"$1$2$3")}function parseTildeTrim(e){return e.replace(parseRegex(tildeTrim),"$1~")}function parseCaretTrim(e){return e.replace(parseRegex(caretTrim),"$1^")}function parseCarets(e){return e.trim().split(/\s+/).map(n=>n.replace(parseRegex(caret),(s,t,a,d,m)=>isXVersion(t)?"":isXVersion(a)?`>=${t}.0.0 <${Number(t)+1}.0.0-0`:isXVersion(d)?t==="0"?`>=${t}.${a}.0 <${t}.${Number(a)+1}.0-0`:`>=${t}.${a}.0 <${Number(t)+1}.0.0-0`:m?t==="0"?a==="0"?`>=${t}.${a}.${d}-${m} <${t}.${a}.${Number(d)+1}-0`:`>=${t}.${a}.${d}-${m} <${t}.${Number(a)+1}.0-0`:`>=${t}.${a}.${d}-${m} <${Number(t)+1}.0.0-0`:t==="0"?a==="0"?`>=${t}.${a}.${d} <${t}.${a}.${Number(d)+1}-0`:`>=${t}.${a}.${d} <${t}.${Number(a)+1}.0-0`:`>=${t}.${a}.${d} <${Number(t)+1}.0.0-0`)).join(" ")}function parseTildes(e){return e.trim().split(/\s+/).map(n=>n.replace(parseRegex(tilde),(s,t,a,d,m)=>isXVersion(t)?"":isXVersion(a)?`>=${t}.0.0 <${Number(t)+1}.0.0-0`:isXVersion(d)?`>=${t}.${a}.0 <${t}.${Number(a)+1}.0-0`:m?`>=${t}.${a}.${d}-${m} <${t}.${Number(a)+1}.0-0`:`>=${t}.${a}.${d} <${t}.${Number(a)+1}.0-0`)).join(" ")}function parseXRanges(e){return e.split(/\s+/).map(n=>n.trim().replace(parseRegex(xRange),(s,t,a,d,m,p)=>{const g=isXVersion(a),b=g||isXVersion(d),O=b||isXVersion(m);return t==="="&&O&&(t=""),p="",g?t===">"||t==="<"?"<0.0.0-0":"*":t&&O?(b&&(d=0),m=0,t===">"?(t=">=",b?(a=Number(a)+1,d=0,m=0):(d=Number(d)+1,m=0)):t==="<="&&(t="<",b?a=Number(a)+1:d=Number(d)+1),t==="<"&&(p="-0"),`${t+a}.${d}.${m}${p}`):b?`>=${a}.0.0${p} <${Number(a)+1}.0.0-0`:O?`>=${a}.${d}.0${p} <${a}.${Number(d)+1}.0-0`:s})).join(" ")}function parseStar(e){return e.trim().replace(parseRegex(star),"")}function parseGTE0(e){return e.trim().replace(parseRegex(gte0),"")}function compareAtom(e,n){return e=Number(e)||e,n=Number(n)||n,e>n?1:e===n?0:-1}function comparePreRelease(e,n){const{preRelease:s}=e,{preRelease:t}=n;if(s===void 0&&t)return 1;if(s&&t===void 0)return-1;if(s===void 0&&t===void 0)return 0;for(let a=0,d=s.length;a<=d;a++){const m=s[a],p=t[a];if(m!==p)return m===void 0&&p===void 0?0:m?p?compareAtom(m,p):-1:1}return 0}function compareVersion(e,n){return compareAtom(e.major,n.major)||compareAtom(e.minor,n.minor)||compareAtom(e.patch,n.patch)||comparePreRelease(e,n)}function eq(e,n){return e.version===n.version}function compare(e,n){switch(e.operator){case"":case"=":return eq(e,n);case">":return compareVersion(e,n)<0;case">=":return eq(e,n)||compareVersion(e,n)<0;case"<":return compareVersion(e,n)>0;case"<=":return eq(e,n)||compareVersion(e,n)>0;case void 0:return!0;default:return!1}}function parseComparatorString(e){return pipe(parseCarets,parseTildes,parseXRanges,parseStar)(e)}function parseRange(e){return pipe(parseHyphen,parseComparatorTrim,parseTildeTrim,parseCaretTrim)(e.trim()).split(/\s+/).join(" ")}function satisfy(e,n){if(!e)return!1;const a=parseRange(n).split(" ").map(N=>parseComparatorString(N)).join(" ").split(/\s+/).map(N=>parseGTE0(N)),d=extractComparator(e);if(!d)return!1;const[,m,,p,g,b,O]=d,I={operator:m,version:combineVersion(p,g,b,O),major:p,minor:g,patch:b,preRelease:O==null?void 0:O.split(".")};for(const N of a){const k=extractComparator(N);if(!k)return!1;const[,B,,j,X,G,w]=k,Q={operator:B,version:combineVersion(j,X,G,w),major:j,minor:X,patch:G,preRelease:w==null?void 0:w.split(".")};if(!compare(Q,I))return!1}return!0}function formatShare(e,n,s,t){let a;"get"in e?a=e.get:"lib"in e?a=()=>Promise.resolve(e.lib):a=()=>Promise.resolve(()=>{throw new Error(`Can not get shared '${s}'!`)}),e.strategy&&warn('"shared.strategy is deprecated, please set in initOptions.shareStrategy instead!"');var d,m,p;return polyfills._extends({deps:[],useIn:[],from:n,loading:null},e,{shareConfig:polyfills._extends({requiredVersion:`^${e.version}`,singleton:!1,eager:!1,strictVersion:!1},e.shareConfig),get:a,loaded:e!=null&&e.loaded||"lib"in e?!0:void 0,version:(d=e.version)!=null?d:"0",scope:Array.isArray(e.scope)?e.scope:[(m=e.scope)!=null?m:"default"],strategy:((p=e.strategy)!=null?p:t)||"version-first"})}function formatShareConfigs(e,n){const s=n.shared||{},t=n.name,a=Object.keys(s).reduce((m,p)=>{const g=arrayOptions(s[p]);return m[p]=m[p]||[],g.forEach(b=>{m[p].push(formatShare(b,t,p,n.shareStrategy))}),m},{}),d=polyfills._extends({},e.shared);return Object.keys(a).forEach(m=>{d[m]?a[m].forEach(p=>{d[m].find(b=>b.version===p.version)||d[m].push(p)}):d[m]=a[m]}),{shared:d,shareInfos:a}}function versionLt(e,n){const s=t=>{if(!Number.isNaN(Number(t))){const d=t.split(".");let m=t;for(let p=0;p<3-d.length;p++)m+=".0";return m}return t};return!!satisfy(s(e),`<=${s(n)}`)}const findVersion=(e,n)=>{const s=n||function(t,a){return versionLt(t,a)};return Object.keys(e).reduce((t,a)=>!t||s(t,a)||t==="0"?a:t,0)},isLoaded=e=>!!e.loaded||typeof e.lib=="function",isLoading=e=>!!e.loading;function findSingletonVersionOrderByVersion(e,n,s){const t=e[n][s],a=function(d,m){return!isLoaded(t[d])&&versionLt(d,m)};return findVersion(e[n][s],a)}function findSingletonVersionOrderByLoaded(e,n,s){const t=e[n][s],a=function(d,m){const p=g=>isLoaded(g)||isLoading(g);return p(t[m])?p(t[d])?!!versionLt(d,m):!0:p(t[d])?!1:versionLt(d,m)};return findVersion(e[n][s],a)}function getFindShareFunction(e){return e==="loaded-first"?findSingletonVersionOrderByLoaded:findSingletonVersionOrderByVersion}function getRegisteredShare(e,n,s,t){if(!e)return;const{shareConfig:a,scope:d=DEFAULT_SCOPE,strategy:m}=s,p=Array.isArray(d)?d:[d];for(const g of p)if(a&&e[g]&&e[g][n]){const{requiredVersion:b}=a,I=getFindShareFunction(m)(e,g,n),N=()=>{if(a.singleton){if(typeof b=="string"&&!satisfy(I,b)){const j=`Version ${I} from ${I&&e[g][n][I].from} of shared singleton module ${n} does not satisfy the requirement of ${s.from} which needs ${b})`;a.strictVersion?error(j):warn(j)}return e[g][n][I]}else{if(b===!1||b==="*"||satisfy(I,b))return e[g][n][I];for(const[j,X]of Object.entries(e[g][n]))if(satisfy(j,b))return X}},k={shareScopeMap:e,scope:g,pkgName:n,version:I,GlobalFederation:Global.__FEDERATION__,resolver:N};return(t.emit(k)||k).resolver()}}function getGlobalShareScope(){return Global.__FEDERATION__.__SHARE__}function getTargetSharedOptions(e){const{pkgName:n,extraOptions:s,shareInfos:t}=e,a=p=>{if(!p)return;const g={};p.forEach(I=>{g[I.version]=I});const O=findVersion(g,function(I,N){return!isLoaded(g[I])&&versionLt(I,N)});return g[O]};var d;const m=(d=s==null?void 0:s.resolver)!=null?d:a;return Object.assign({},m(t[n]),s==null?void 0:s.customShareInfo)}share_cjs.CurrentGlobal=CurrentGlobal;share_cjs.DEFAULT_REMOTE_TYPE=DEFAULT_REMOTE_TYPE;share_cjs.DEFAULT_SCOPE=DEFAULT_SCOPE;share_cjs.Global=Global;share_cjs.addGlobalSnapshot=addGlobalSnapshot;share_cjs.addUniqueItem=addUniqueItem;share_cjs.arrayOptions=arrayOptions;share_cjs.assert=assert;share_cjs.error=error;share_cjs.formatShareConfigs=formatShareConfigs;share_cjs.getBuilderId=getBuilderId;share_cjs.getFMId=getFMId;share_cjs.getGlobalFederationConstructor=getGlobalFederationConstructor;share_cjs.getGlobalFederationInstance=getGlobalFederationInstance;share_cjs.getGlobalHostPlugins=getGlobalHostPlugins;share_cjs.getGlobalShareScope=getGlobalShareScope;share_cjs.getGlobalSnapshot=getGlobalSnapshot;share_cjs.getGlobalSnapshotInfoByModuleInfo=getGlobalSnapshotInfoByModuleInfo;share_cjs.getInfoWithoutType=getInfoWithoutType;share_cjs.getPreloaded=getPreloaded;share_cjs.getRegisteredShare=getRegisteredShare;share_cjs.getRemoteEntryExports=getRemoteEntryExports;share_cjs.getRemoteEntryInfoFromSnapshot=getRemoteEntryInfoFromSnapshot;share_cjs.getTargetSharedOptions=getTargetSharedOptions;share_cjs.getTargetSnapshotInfoByModuleInfo=getTargetSnapshotInfoByModuleInfo;share_cjs.globalLoading=globalLoading;share_cjs.isObject=isObject;share_cjs.isPlainObject=isPlainObject;share_cjs.isPureRemoteEntry=isPureRemoteEntry;share_cjs.isRemoteInfoWithEntry=isRemoteInfoWithEntry;share_cjs.logger=logger;share_cjs.nativeGlobal=nativeGlobal;share_cjs.processModuleAlias=processModuleAlias;share_cjs.registerGlobalPlugins=registerGlobalPlugins;share_cjs.resetFederationGlobalInfo=resetFederationGlobalInfo;share_cjs.setGlobalFederationConstructor=setGlobalFederationConstructor;share_cjs.setGlobalFederationInstance=setGlobalFederationInstance;share_cjs.setGlobalSnapshotInfoByModuleInfo=setGlobalSnapshotInfoByModuleInfo;share_cjs.setPreloaded=setPreloaded;share_cjs.warn=warn;var index_cjs={};const RUNTIME_001="RUNTIME-001",RUNTIME_002="RUNTIME-002",RUNTIME_003="RUNTIME-003",RUNTIME_004="RUNTIME-004",RUNTIME_005="RUNTIME-005",RUNTIME_006="RUNTIME-006",RUNTIME_007="RUNTIME-007",TYPE_001="TYPE-001",getDocsUrl=e=>`https://module-federation.io/guide/troubleshooting/${e.split("-")[0].toLowerCase()}/${e}`,getShortErrorMsg=(e,n,s,t)=>{const a=[`${[n[e]]} #${e}`];return s&&a.push(`args: ${JSON.stringify(s)}`),a.push(getDocsUrl(e)),t&&a.push(`Original Error Message:
 ${t}`),a.join(`
`)};function _extends(){return _extends=Object.assign||function(n){for(var s=1;s<arguments.length;s++){var t=arguments[s];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(n[a]=t[a])}return n},_extends.apply(this,arguments)}const runtimeDescMap={[RUNTIME_001]:"Failed to get remoteEntry exports.",[RUNTIME_002]:'The remote entry interface does not contain "init"',[RUNTIME_003]:"Failed to get manifest.",[RUNTIME_004]:"Failed to locate remote.",[RUNTIME_005]:"Invalid loadShareSync function call from bundler runtime",[RUNTIME_006]:"Invalid loadShareSync function call from runtime",[RUNTIME_007]:"Failed to get remote snapshot."},typeDescMap={[TYPE_001]:"Failed to generate type declaration."},errorDescMap=_extends({},runtimeDescMap,typeDescMap);index_cjs.RUNTIME_001=RUNTIME_001;index_cjs.RUNTIME_002=RUNTIME_002;index_cjs.RUNTIME_003=RUNTIME_003;index_cjs.RUNTIME_004=RUNTIME_004;index_cjs.RUNTIME_005=RUNTIME_005;index_cjs.RUNTIME_006=RUNTIME_006;index_cjs.RUNTIME_007=RUNTIME_007;index_cjs.TYPE_001=TYPE_001;index_cjs.errorDescMap=errorDescMap;index_cjs.getShortErrorMsg=getShortErrorMsg;index_cjs.runtimeDescMap=runtimeDescMap;index_cjs.typeDescMap=typeDescMap;(function(e){var n=polyfills_cjs$1,s=index_cjs$1,t=share_cjs,a=index_cjs;function d(h,r){for(const o of h){const i=r.startsWith(o.name);let l=r.replace(o.name,"");if(i){if(l.startsWith("/")){const c=o.name;return l=`.${l}`,{pkgNameOrAlias:c,expose:l,remote:o}}else if(l==="")return{pkgNameOrAlias:o.name,expose:".",remote:o}}const _=o.alias&&r.startsWith(o.alias);let u=o.alias&&r.replace(o.alias,"");if(o.alias&&_){if(u&&u.startsWith("/")){const c=o.alias;return u=`.${u}`,{pkgNameOrAlias:c,expose:u,remote:o}}else if(u==="")return{pkgNameOrAlias:o.alias,expose:".",remote:o}}}}function m(h,r){for(const o of h)if(r===o.name||o.alias&&r===o.alias)return o}function p(h,r){const o=t.getGlobalHostPlugins();return o.length>0&&o.forEach(i=>{h!=null&&h.find(l=>l.name!==i.name)&&h.push(i)}),h&&h.length>0&&h.forEach(i=>{r.forEach(l=>{l.applyPlugin(i)})}),h}async function g({entry:h,remoteEntryExports:r}){return new Promise((o,i)=>{try{r?o(r):typeof FEDERATION_ALLOW_NEW_FUNCTION<"u"?new Function("callbacks",`import("${h}").then(callbacks[0]).catch(callbacks[1])`)([o,i]):__vitePreload(()=>import(h),[],import.meta.url).then(o).catch(i)}catch(l){i(l)}})}async function b({entry:h,remoteEntryExports:r}){return new Promise((o,i)=>{try{r?o(r):typeof __system_context__>"u"?System.import(h).then(o).catch(i):new Function("callbacks",`System.import("${h}").then(callbacks[0]).catch(callbacks[1])`)([o,i])}catch(l){i(l)}})}async function O({name:h,globalName:r,entry:o,loaderHook:i}){const{entryExports:l}=t.getRemoteEntryExports(h,r);return l||s.loadScript(o,{attrs:{},createScriptHook:(_,u)=>{const c=i.lifecycle.createScript.emit({url:_,attrs:u});if(c&&(c instanceof HTMLScriptElement||"script"in c||"timeout"in c))return c}}).then(()=>{const{remoteEntryKey:_,entryExports:u}=t.getRemoteEntryExports(h,r);return t.assert(u,a.getShortErrorMsg(a.RUNTIME_001,a.runtimeDescMap,{remoteName:h,remoteEntryUrl:o,remoteEntryKey:_})),u}).catch(_=>{throw _})}async function I({remoteInfo:h,remoteEntryExports:r,loaderHook:o}){const{entry:i,entryGlobalName:l,name:_,type:u}=h;switch(u){case"esm":case"module":return g({entry:i,remoteEntryExports:r});case"system":return b({entry:i,remoteEntryExports:r});default:return O({entry:i,globalName:l,name:_,loaderHook:o})}}async function N({remoteInfo:h,loaderHook:r}){const{entry:o,entryGlobalName:i,name:l,type:_}=h,{entryExports:u}=t.getRemoteEntryExports(l,i);return u||s.loadScriptNode(o,{attrs:{name:l,globalName:i,type:_},loaderHook:{createScriptHook:(c,E={})=>{const y=r.lifecycle.createScript.emit({url:c,attrs:E});if(y&&"url"in y)return y}}}).then(()=>{const{remoteEntryKey:c,entryExports:E}=t.getRemoteEntryExports(l,i);return t.assert(E,a.getShortErrorMsg(a.RUNTIME_001,a.runtimeDescMap,{remoteName:l,remoteEntryUrl:o,remoteEntryKey:c})),E}).catch(c=>{throw c})}function k(h){const{entry:r,name:o}=h;return s.composeKeyWithSeparator(o,r)}async function B({origin:h,remoteEntryExports:r,remoteInfo:o}){const i=k(o);if(r)return r;if(!t.globalLoading[i]){const l=h.remoteHandler.hooks.lifecycle.loadEntry,_=h.loaderHook;t.globalLoading[i]=l.emit({loaderHook:_,remoteInfo:o,remoteEntryExports:r}).then(u=>u||(s.isBrowserEnv()?I({remoteInfo:o,remoteEntryExports:r,loaderHook:_}):N({remoteInfo:o,loaderHook:_})))}return t.globalLoading[i]}function j(h){return n._extends({},h,{entry:"entry"in h?h.entry:"",type:h.type||t.DEFAULT_REMOTE_TYPE,entryGlobalName:h.entryGlobalName||h.name,shareScope:h.shareScope||t.DEFAULT_SCOPE})}let X=class{async getEntry(){if(this.remoteEntryExports)return this.remoteEntryExports;let r;try{r=await B({origin:this.host,remoteInfo:this.remoteInfo,remoteEntryExports:this.remoteEntryExports})}catch{const i=k(this.remoteInfo);r=await this.host.loaderHook.lifecycle.loadEntryError.emit({getRemoteEntry:B,origin:this.host,remoteInfo:this.remoteInfo,remoteEntryExports:this.remoteEntryExports,globalLoading:t.globalLoading,uniqueKey:i})}return t.assert(r,`remoteEntryExports is undefined 
 ${s.safeToString(this.remoteInfo)}`),this.remoteEntryExports=r,this.remoteEntryExports}async get(r,o,i,l){const{loadFactory:_=!0}=i||{loadFactory:!0},u=await this.getEntry();if(!this.inited){const v=this.host.shareScopeMap,S=this.remoteInfo.shareScope||"default";v[S]||(v[S]={});const T=v[S],M=[],D={version:this.remoteInfo.version||""};Object.defineProperty(D,"shareScopeMap",{value:v,enumerable:!1});const $=await this.host.hooks.lifecycle.beforeInitContainer.emit({shareScope:T,remoteEntryInitOptions:D,initScope:M,remoteInfo:this.remoteInfo,origin:this.host});typeof(u==null?void 0:u.init)>"u"&&t.error(a.getShortErrorMsg(a.RUNTIME_002,a.runtimeDescMap,{remoteName:name,remoteEntryUrl:this.remoteInfo.entry,remoteEntryKey:this.remoteInfo.entryGlobalName})),await u.init($.shareScope,$.initScope,$.remoteEntryInitOptions),await this.host.hooks.lifecycle.initContainer.emit(n._extends({},$,{id:r,remoteSnapshot:l,remoteEntryExports:u}))}this.lib=u,this.inited=!0;let c;c=await this.host.loaderHook.lifecycle.getModuleFactory.emit({remoteEntryExports:u,expose:o,moduleInfo:this.remoteInfo}),c||(c=await u.get(o)),t.assert(c,`${t.getFMId(this.remoteInfo)} remote don't export ${o}.`);const E=t.processModuleAlias(this.remoteInfo.name,o),y=this.wraperFactory(c,E);return _?await y():y}wraperFactory(r,o){function i(l,_){l&&typeof l=="object"&&Object.isExtensible(l)&&!Object.getOwnPropertyDescriptor(l,Symbol.for("mf_module_id"))&&Object.defineProperty(l,Symbol.for("mf_module_id"),{value:_,enumerable:!1})}return r instanceof Promise?async()=>{const l=await r();return i(l,o),l}:()=>{const l=r();return i(l,o),l}}constructor({remoteInfo:r,host:o}){this.inited=!1,this.lib=void 0,this.remoteInfo=r,this.host=o}};class G{on(r){typeof r=="function"&&this.listeners.add(r)}once(r){const o=this;this.on(function i(...l){return o.remove(i),r.apply(null,l)})}emit(...r){let o;return this.listeners.size>0&&this.listeners.forEach(i=>{o=i(...r)}),o}remove(r){this.listeners.delete(r)}removeAll(){this.listeners.clear()}constructor(r){this.type="",this.listeners=new Set,r&&(this.type=r)}}class w extends G{emit(...r){let o;const i=Array.from(this.listeners);if(i.length>0){let l=0;const _=u=>u===!1?!1:l<i.length?Promise.resolve(i[l++].apply(null,r)).then(_):u;o=_()}return Promise.resolve(o)}}function Q(h,r){if(!t.isObject(r))return!1;if(h!==r){for(const o in h)if(!(o in r))return!1}return!0}class q extends G{emit(r){t.isObject(r)||t.error(`The data for the "${this.type}" hook should be an object.`);for(const o of this.listeners)try{const i=o(r);if(Q(r,i))r=i;else{this.onerror(`A plugin returned an unacceptable value for the "${this.type}" type.`);break}}catch(i){t.warn(i),this.onerror(i)}return r}constructor(r){super(),this.onerror=t.error,this.type=r}}class P extends G{emit(r){t.isObject(r)||t.error(`The response data for the "${this.type}" hook must be an object.`);const o=Array.from(this.listeners);if(o.length>0){let i=0;const l=u=>(t.warn(u),this.onerror(u),r),_=u=>{if(Q(r,u)){if(r=u,i<o.length)try{return Promise.resolve(o[i++](r)).then(_,l)}catch(c){return l(c)}}else this.onerror(`A plugin returned an incorrect value for the "${this.type}" type.`);return r};return Promise.resolve(_(r))}return Promise.resolve(r)}constructor(r){super(),this.onerror=t.error,this.type=r}}class W{applyPlugin(r){t.assert(t.isPlainObject(r),"Plugin configuration is invalid.");const o=r.name;t.assert(o,"A name must be provided by the plugin."),this.registerPlugins[o]||(this.registerPlugins[o]=r,Object.keys(this.lifecycle).forEach(i=>{const l=r[i];l&&this.lifecycle[i].on(l)}))}removePlugin(r){t.assert(r,"A name is required.");const o=this.registerPlugins[r];t.assert(o,`The plugin "${r}" is not registered.`),Object.keys(o).forEach(i=>{i!=="name"&&this.lifecycle[i].remove(o[i])})}inherit({lifecycle:r,registerPlugins:o}){Object.keys(r).forEach(i=>{t.assert(!this.lifecycle[i],`The hook "${i}" has a conflict and cannot be inherited.`),this.lifecycle[i]=r[i]}),Object.keys(o).forEach(i=>{t.assert(!this.registerPlugins[i],`The plugin "${i}" has a conflict and cannot be inherited.`),this.applyPlugin(o[i])})}constructor(r){this.registerPlugins={},this.lifecycle=r,this.lifecycleKeys=Object.keys(r)}}function J(h){return n._extends({resourceCategory:"sync",share:!0,depsRemote:!0,prefetchInterface:!1},h)}function ee(h,r){return r.map(o=>{const i=m(h,o.nameOrAlias);return t.assert(i,`Unable to preload ${o.nameOrAlias} as it is not included in ${!i&&s.safeToString({remoteInfo:i,remotes:h})}`),{remote:i,preloadConfig:J(o)}})}function ae(h){return h?h.map(r=>r==="."?r:r.startsWith("./")?r.replace("./",""):r):[]}function ne(h,r,o,i=!0){const{cssAssets:l,jsAssetsWithoutEntry:_,entryAssets:u}=o;if(r.options.inBrowser){if(u.forEach(c=>{const{moduleInfo:E}=c,y=r.moduleCache.get(h.name);B(y?{origin:r,remoteInfo:E,remoteEntryExports:y.remoteEntryExports}:{origin:r,remoteInfo:E,remoteEntryExports:void 0})}),i){const c={rel:"preload",as:"style"};l.forEach(E=>{const{link:y,needAttach:R}=s.createLink({url:E,cb:()=>{},attrs:c,createLinkHook:(v,S)=>{const T=r.loaderHook.lifecycle.createLink.emit({url:v,attrs:S});if(T instanceof HTMLLinkElement)return T}});R&&document.head.appendChild(y)})}else{const c={rel:"stylesheet",type:"text/css"};l.forEach(E=>{const{link:y,needAttach:R}=s.createLink({url:E,cb:()=>{},attrs:c,createLinkHook:(v,S)=>{const T=r.loaderHook.lifecycle.createLink.emit({url:v,attrs:S});if(T instanceof HTMLLinkElement)return T},needDeleteLink:!1});R&&document.head.appendChild(y)})}if(i){const c={rel:"preload",as:"script"};_.forEach(E=>{const{link:y,needAttach:R}=s.createLink({url:E,cb:()=>{},attrs:c,createLinkHook:(v,S)=>{const T=r.loaderHook.lifecycle.createLink.emit({url:v,attrs:S});if(T instanceof HTMLLinkElement)return T}});R&&document.head.appendChild(y)})}else{const c={fetchpriority:"high",type:(h==null?void 0:h.type)==="module"?"module":"text/javascript"};_.forEach(E=>{const{script:y,needAttach:R}=s.createScript({url:E,cb:()=>{},attrs:c,createScriptHook:(v,S)=>{const T=r.loaderHook.lifecycle.createScript.emit({url:v,attrs:S});if(T instanceof HTMLScriptElement)return T},needDeleteScript:!0});R&&document.head.appendChild(y)})}}}function oe(h,r){const o=t.getRemoteEntryInfoFromSnapshot(r);o.url||t.error(`The attribute remoteEntry of ${h.name} must not be undefined.`);let i=s.getResourceUrl(r,o.url);!s.isBrowserEnv()&&!i.startsWith("http")&&(i=`https:${i}`),h.type=o.type,h.entryGlobalName=o.globalName,h.entry=i,h.version=r.version,h.buildVersion=r.buildVersion}function le(){return{name:"snapshot-plugin",async afterResolve(h){const{remote:r,pkgNameOrAlias:o,expose:i,origin:l,remoteInfo:_}=h;if(!t.isRemoteInfoWithEntry(r)||!t.isPureRemoteEntry(r)){const{remoteSnapshot:u,globalSnapshot:c}=await l.snapshotHandler.loadRemoteSnapshotInfo(r);oe(_,u);const E={remote:r,preloadConfig:{nameOrAlias:o,exposes:[i],resourceCategory:"sync",share:!1,depsRemote:!1}},y=await l.remoteHandler.hooks.lifecycle.generatePreloadAssets.emit({origin:l,preloadOptions:E,remoteInfo:_,remote:r,remoteSnapshot:u,globalSnapshot:c});return y&&ne(_,l,y,!1),n._extends({},h,{remoteSnapshot:u})}return h}}}function ce(h){const r=h.split(":");return r.length===1?{name:r[0],version:void 0}:r.length===2?{name:r[0],version:r[1]}:{name:r[1],version:r[2]}}function se(h,r,o,i,l={},_){const u=t.getFMId(r),{value:c}=t.getInfoWithoutType(h,u),E=_||c;if(E&&!s.isManifestProvider(E)&&(o(E,r,i),E.remotesInfo)){const y=Object.keys(E.remotesInfo);for(const R of y){if(l[R])continue;l[R]=!0;const v=ce(R),S=E.remotesInfo[R];se(h,{name:v.name,version:S.matchedVersion},o,!1,l,void 0)}}}function ue(h,r,o,i,l){const _=[],u=[],c=[],E=new Set,y=new Set,{options:R}=h,{preloadConfig:v}=r,{depsRemote:S}=v;if(se(i,o,($,A,C)=>{let L;if(C)L=v;else if(Array.isArray(S)){const K=S.find(Y=>Y.nameOrAlias===A.name||Y.nameOrAlias===A.alias);if(!K)return;L=J(K)}else if(S===!0)L=v;else return;const F=s.getResourceUrl($,t.getRemoteEntryInfoFromSnapshot($).url);F&&c.push({name:A.name,moduleInfo:{name:A.name,entry:F,type:"remoteEntryType"in $?$.remoteEntryType:"global",entryGlobalName:"globalName"in $?$.globalName:A.name,shareScope:"",version:"version"in $?$.version:void 0},url:F});let U="modules"in $?$.modules:[];const V=ae(L.exposes);if(V.length&&"modules"in $){var Z;U=$==null||(Z=$.modules)==null?void 0:Z.reduce((K,Y)=>((V==null?void 0:V.indexOf(Y.moduleName))!==-1&&K.push(Y),K),[])}function H(K){const Y=K.map(z=>s.getResourceUrl($,z));return L.filter?Y.filter(L.filter):Y}if(U){const K=U.length;for(let Y=0;Y<K;Y++){const z=U[Y],re=`${A.name}/${z.moduleName}`;h.remoteHandler.hooks.lifecycle.handlePreloadModule.emit({id:z.moduleName==="."?A.name:re,name:A.name,remoteSnapshot:$,preloadConfig:L,remote:A,origin:h}),!t.getPreloaded(re)&&(L.resourceCategory==="all"?(_.push(...H(z.assets.css.async)),_.push(...H(z.assets.css.sync)),u.push(...H(z.assets.js.async)),u.push(...H(z.assets.js.sync))):(L.resourceCategory="sync")&&(_.push(...H(z.assets.css.sync)),u.push(...H(z.assets.js.sync))),t.setPreloaded(re))}}},!0,{},l),l.shared){const $=(A,C)=>{const L=t.getRegisteredShare(h.shareScopeMap,C.sharedName,A,h.sharedHandler.hooks.lifecycle.resolveShare);L&&typeof L.lib=="function"&&(C.assets.js.sync.forEach(F=>{E.add(F)}),C.assets.css.sync.forEach(F=>{y.add(F)}))};l.shared.forEach(A=>{var C;const L=(C=R.shared)==null?void 0:C[A.sharedName];if(!L)return;const F=A.version?L.find(V=>V.version===A.version):L;if(!F)return;t.arrayOptions(F).forEach(V=>{$(V,A)})})}const M=u.filter($=>!E.has($));return{cssAssets:_.filter($=>!y.has($)),jsAssetsWithoutEntry:M,entryAssets:c}}const de=function(){return{name:"generate-preload-assets-plugin",async generatePreloadAssets(h){const{origin:r,preloadOptions:o,remoteInfo:i,remote:l,globalSnapshot:_,remoteSnapshot:u}=h;return t.isRemoteInfoWithEntry(l)&&t.isPureRemoteEntry(l)?{cssAssets:[],jsAssetsWithoutEntry:[],entryAssets:[{name:l.name,url:l.entry,moduleInfo:{name:i.name,entry:l.entry,type:i.type||"global",entryGlobalName:"",shareScope:""}}]}:(oe(i,u),ue(r,o,i,_,u))}}};function ie(h,r){const o=t.getGlobalSnapshotInfoByModuleInfo({name:r.options.name,version:r.options.version}),i=o&&"remotesInfo"in o&&o.remotesInfo&&t.getInfoWithoutType(o.remotesInfo,h.name).value;return i&&i.matchedVersion?{hostGlobalSnapshot:o,globalSnapshot:t.getGlobalSnapshot(),remoteSnapshot:t.getGlobalSnapshotInfoByModuleInfo({name:h.name,version:i.matchedVersion})}:{hostGlobalSnapshot:void 0,globalSnapshot:t.getGlobalSnapshot(),remoteSnapshot:t.getGlobalSnapshotInfoByModuleInfo({name:h.name,version:"version"in h?h.version:void 0})}}class fe{async loadSnapshot(r){const{options:o}=this.HostInstance,{hostGlobalSnapshot:i,remoteSnapshot:l,globalSnapshot:_}=this.getGlobalRemoteInfo(r),{remoteSnapshot:u,globalSnapshot:c}=await this.hooks.lifecycle.loadSnapshot.emit({options:o,moduleInfo:r,hostGlobalSnapshot:i,remoteSnapshot:l,globalSnapshot:_});return{remoteSnapshot:u,globalSnapshot:c}}async loadRemoteSnapshotInfo(r){const{options:o}=this.HostInstance;await this.hooks.lifecycle.beforeLoadRemoteSnapshot.emit({options:o,moduleInfo:r});let i=t.getGlobalSnapshotInfoByModuleInfo({name:this.HostInstance.options.name,version:this.HostInstance.options.version});i||(i={version:this.HostInstance.options.version||"",remoteEntry:"",remotesInfo:{}},t.addGlobalSnapshot({[this.HostInstance.options.name]:i})),i&&"remotesInfo"in i&&!t.getInfoWithoutType(i.remotesInfo,r.name).value&&("version"in r||"entry"in r)&&(i.remotesInfo=n._extends({},i==null?void 0:i.remotesInfo,{[r.name]:{matchedVersion:"version"in r?r.version:r.entry}}));const{hostGlobalSnapshot:l,remoteSnapshot:_,globalSnapshot:u}=this.getGlobalRemoteInfo(r),{remoteSnapshot:c,globalSnapshot:E}=await this.hooks.lifecycle.loadSnapshot.emit({options:o,moduleInfo:r,hostGlobalSnapshot:l,remoteSnapshot:_,globalSnapshot:u});let y,R;if(c)if(s.isManifestProvider(c)){const v=s.isBrowserEnv()?c.remoteEntry:c.ssrRemoteEntry||c.remoteEntry||"",S=await this.getManifestJson(v,r,{}),T=t.setGlobalSnapshotInfoByModuleInfo(n._extends({},r,{entry:v}),S);y=S,R=T}else{const{remoteSnapshot:v}=await this.hooks.lifecycle.loadRemoteSnapshot.emit({options:this.HostInstance.options,moduleInfo:r,remoteSnapshot:c,from:"global"});y=v,R=E}else if(t.isRemoteInfoWithEntry(r)){const v=await this.getManifestJson(r.entry,r,{}),S=t.setGlobalSnapshotInfoByModuleInfo(r,v),{remoteSnapshot:T}=await this.hooks.lifecycle.loadRemoteSnapshot.emit({options:this.HostInstance.options,moduleInfo:r,remoteSnapshot:v,from:"global"});y=T,R=S}else t.error(a.getShortErrorMsg(a.RUNTIME_007,a.runtimeDescMap,{hostName:r.name,hostVersion:r.version,globalSnapshot:JSON.stringify(E)}));return await this.hooks.lifecycle.afterLoadSnapshot.emit({options:o,moduleInfo:r,remoteSnapshot:y}),{remoteSnapshot:y,globalSnapshot:R}}getGlobalRemoteInfo(r){return ie(r,this.HostInstance)}async getManifestJson(r,o,i){const l=async()=>{let u=this.manifestCache.get(r);if(u)return u;try{let c=await this.loaderHook.lifecycle.fetch.emit(r,{});return(!c||!(c instanceof Response))&&(c=await fetch(r,{})),u=await c.json(),t.assert(u.metaData&&u.exposes&&u.shared,`${r} is not a federation manifest`),this.manifestCache.set(r,u),u}catch(c){delete this.manifestLoading[r],t.error(a.getShortErrorMsg(a.RUNTIME_003,a.runtimeDescMap,{manifestUrl:r,moduleName:o.name},`${c}`))}},_=async()=>{const u=await l(),c=s.generateSnapshotFromManifest(u,{version:r}),{remoteSnapshot:E}=await this.hooks.lifecycle.loadRemoteSnapshot.emit({options:this.HostInstance.options,moduleInfo:o,manifestJson:u,remoteSnapshot:c,manifestUrl:r,from:"manifest"});return E};return this.manifestLoading[r]||(this.manifestLoading[r]=_().then(u=>u)),this.manifestLoading[r]}constructor(r){this.loadingHostSnapshot=null,this.manifestCache=new Map,this.hooks=new W({beforeLoadRemoteSnapshot:new w("beforeLoadRemoteSnapshot"),loadSnapshot:new P("loadGlobalSnapshot"),loadRemoteSnapshot:new P("loadRemoteSnapshot"),afterLoadSnapshot:new P("afterLoadSnapshot")}),this.manifestLoading=t.Global.__FEDERATION__.__MANIFEST_LOADING__,this.HostInstance=r,this.loaderHook=r.loaderHook}}class he{registerShared(r,o){const{shareInfos:i,shared:l}=t.formatShareConfigs(r,o);return Object.keys(i).forEach(u=>{i[u].forEach(E=>{!t.getRegisteredShare(this.shareScopeMap,u,E,this.hooks.lifecycle.resolveShare)&&E&&E.lib&&this.setShared({pkgName:u,lib:E.lib,get:E.get,loaded:!0,shared:E,from:o.name})})}),{shareInfos:i,shared:l}}async loadShare(r,o){const{host:i}=this,l=t.getTargetSharedOptions({pkgName:r,extraOptions:o,shareInfos:i.options.shared});l!=null&&l.scope&&await Promise.all(l.scope.map(async y=>{await Promise.all(this.initializeSharing(y,{strategy:l.strategy}))}));const _=await this.hooks.lifecycle.beforeLoadShare.emit({pkgName:r,shareInfo:l,shared:i.options.shared,origin:i}),{shareInfo:u}=_;t.assert(u,`Cannot find ${r} Share in the ${i.options.name}. Please ensure that the ${r} Share parameters have been injected`);const c=t.getRegisteredShare(this.shareScopeMap,r,u,this.hooks.lifecycle.resolveShare),E=y=>{y.useIn||(y.useIn=[]),t.addUniqueItem(y.useIn,i.options.name)};if(c&&c.lib)return E(c),c.lib;if(c&&c.loading&&!c.loaded){const y=await c.loading;return c.loaded=!0,c.lib||(c.lib=y),E(c),y}else if(c){const R=(async()=>{const v=await c.get();u.lib=v,u.loaded=!0,E(u);const S=t.getRegisteredShare(this.shareScopeMap,r,u,this.hooks.lifecycle.resolveShare);return S&&(S.lib=v,S.loaded=!0),v})();return this.setShared({pkgName:r,loaded:!1,shared:c,from:i.options.name,lib:null,loading:R}),R}else{if(o!=null&&o.customShareInfo)return!1;const R=(async()=>{const v=await u.get();u.lib=v,u.loaded=!0,E(u);const S=t.getRegisteredShare(this.shareScopeMap,r,u,this.hooks.lifecycle.resolveShare);return S&&(S.lib=v,S.loaded=!0),v})();return this.setShared({pkgName:r,loaded:!1,shared:u,from:i.options.name,lib:null,loading:R}),R}}initializeSharing(r=t.DEFAULT_SCOPE,o){const{host:i}=this,l=o==null?void 0:o.from,_=o==null?void 0:o.strategy;let u=o==null?void 0:o.initScope;const c=[];if(l!=="build"){const{initTokens:M}=this;u||(u=[]);let D=M[r];if(D||(D=M[r]={from:this.host.name}),u.indexOf(D)>=0)return c;u.push(D)}const E=this.shareScopeMap,y=i.options.name;E[r]||(E[r]={});const R=E[r],v=(M,D)=>{var $;const{version:A,eager:C}=D;R[M]=R[M]||{};const L=R[M],F=L[A],U=!!(F&&(F.eager||($=F.shareConfig)!=null&&$.eager));(!F||F.strategy!=="loaded-first"&&!F.loaded&&(!C!=!U?C:y>F.from))&&(L[A]=D)},S=M=>M&&M.init&&M.init(E[r],u),T=async M=>{const{module:D}=await i.remoteHandler.getRemoteModuleAndOptions({id:M});if(D.getEntry){let $;try{$=await D.getEntry()}catch(A){$=await i.remoteHandler.hooks.lifecycle.errorLoadRemote.emit({id:M,error:A,from:"runtime",lifecycle:"beforeLoadShare",origin:i})}D.inited||(await S($),D.inited=!0)}};return Object.keys(i.options.shared).forEach(M=>{i.options.shared[M].forEach($=>{$.scope.includes(r)&&v(M,$)})}),(i.options.shareStrategy==="version-first"||_==="version-first")&&i.options.remotes.forEach(M=>{M.shareScope===r&&c.push(T(M.name))}),c}loadShareSync(r,o){const{host:i}=this,l=t.getTargetSharedOptions({pkgName:r,extraOptions:o,shareInfos:i.options.shared});l!=null&&l.scope&&l.scope.forEach(c=>{this.initializeSharing(c,{strategy:l.strategy})});const _=t.getRegisteredShare(this.shareScopeMap,r,l,this.hooks.lifecycle.resolveShare),u=c=>{c.useIn||(c.useIn=[]),t.addUniqueItem(c.useIn,i.options.name)};if(_){if(typeof _.lib=="function")return u(_),_.loaded||(_.loaded=!0,_.from===i.options.name&&(l.loaded=!0)),_.lib;if(typeof _.get=="function"){const c=_.get();if(!(c instanceof Promise))return u(_),this.setShared({pkgName:r,loaded:!0,from:i.options.name,lib:c,shared:_}),c}}if(l.lib)return l.loaded||(l.loaded=!0),l.lib;if(l.get){const c=l.get();if(c instanceof Promise){const E=(o==null?void 0:o.from)==="build"?a.RUNTIME_005:a.RUNTIME_006;throw new Error(a.getShortErrorMsg(E,a.runtimeDescMap,{hostName:i.options.name,sharedPkgName:r}))}return l.lib=c,this.setShared({pkgName:r,loaded:!0,from:i.options.name,lib:l.lib,shared:l}),l.lib}throw new Error(a.getShortErrorMsg(a.RUNTIME_006,a.runtimeDescMap,{hostName:i.options.name,sharedPkgName:r}))}initShareScopeMap(r,o,i={}){const{host:l}=this;this.shareScopeMap[r]=o,this.hooks.lifecycle.initContainerShareScopeMap.emit({shareScope:o,options:l.options,origin:l,scopeName:r,hostShareScopeMap:i.hostShareScopeMap})}setShared({pkgName:r,shared:o,from:i,lib:l,loading:_,loaded:u,get:c}){const{version:E,scope:y="default"}=o,R=n._object_without_properties_loose(o,["version","scope"]);(Array.isArray(y)?y:[y]).forEach(S=>{if(this.shareScopeMap[S]||(this.shareScopeMap[S]={}),this.shareScopeMap[S][r]||(this.shareScopeMap[S][r]={}),!this.shareScopeMap[S][r][E]){this.shareScopeMap[S][r][E]=n._extends({version:E,scope:["default"]},R,{lib:l,loaded:u,loading:_}),c&&(this.shareScopeMap[S][r][E].get=c);return}const T=this.shareScopeMap[S][r][E];_&&!T.loading&&(T.loading=_)})}_setGlobalShareScopeMap(r){const o=t.getGlobalShareScope(),i=r.id||r.name;i&&!o[i]&&(o[i]=this.shareScopeMap)}constructor(r){this.hooks=new W({afterResolve:new P("afterResolve"),beforeLoadShare:new P("beforeLoadShare"),loadShare:new w,resolveShare:new q("resolveShare"),initContainerShareScopeMap:new q("initContainerShareScopeMap")}),this.host=r,this.shareScopeMap={},this.initTokens={},this._setGlobalShareScopeMap(r.options)}}class pe{formatAndRegisterRemote(r,o){return(o.remotes||[]).reduce((l,_)=>(this.registerRemote(_,l,{force:!1}),l),r.remotes)}setIdToRemoteMap(r,o){const{remote:i,expose:l}=o,{name:_,alias:u}=i;if(this.idToRemoteMap[r]={name:i.name,expose:l},u&&r.startsWith(_)){const c=r.replace(_,u);this.idToRemoteMap[c]={name:i.name,expose:l};return}if(u&&r.startsWith(u)){const c=r.replace(u,_);this.idToRemoteMap[c]={name:i.name,expose:l}}}async loadRemote(r,o){const{host:i}=this;try{const{loadFactory:l=!0}=o||{loadFactory:!0},{module:_,moduleOptions:u,remoteMatchInfo:c}=await this.getRemoteModuleAndOptions({id:r}),{pkgNameOrAlias:E,remote:y,expose:R,id:v,remoteSnapshot:S}=c,T=await _.get(v,R,o,S),M=await this.hooks.lifecycle.onLoad.emit({id:v,pkgNameOrAlias:E,expose:R,exposeModule:l?T:void 0,exposeModuleFactory:l?void 0:T,remote:y,options:u,moduleInstance:_,origin:i});return this.setIdToRemoteMap(r,c),typeof M=="function"?M:T}catch(l){const{from:_="runtime"}=o||{from:"runtime"},u=await this.hooks.lifecycle.errorLoadRemote.emit({id:r,error:l,from:_,lifecycle:"onLoad",origin:i});if(!u)throw l;return u}}async preloadRemote(r){const{host:o}=this;await this.hooks.lifecycle.beforePreloadRemote.emit({preloadOps:r,options:o.options,origin:o});const i=ee(o.options.remotes,r);await Promise.all(i.map(async l=>{const{remote:_}=l,u=j(_),{globalSnapshot:c,remoteSnapshot:E}=await o.snapshotHandler.loadRemoteSnapshotInfo(_),y=await this.hooks.lifecycle.generatePreloadAssets.emit({origin:o,preloadOptions:l,remote:_,remoteInfo:u,globalSnapshot:c,remoteSnapshot:E});y&&ne(u,o,y)}))}registerRemotes(r,o){const{host:i}=this;r.forEach(l=>{this.registerRemote(l,i.options.remotes,{force:o==null?void 0:o.force})})}async getRemoteModuleAndOptions(r){const{host:o}=this,{id:i}=r;let l;try{l=await this.hooks.lifecycle.beforeRequest.emit({id:i,options:o.options,origin:o})}catch(M){if(l=await this.hooks.lifecycle.errorLoadRemote.emit({id:i,options:o.options,origin:o,from:"runtime",error:M,lifecycle:"beforeRequest"}),!l)throw M}const{id:_}=l,u=d(o.options.remotes,_);t.assert(u,a.getShortErrorMsg(a.RUNTIME_004,a.runtimeDescMap,{hostName:o.options.name,requestId:_}));const{remote:c}=u,E=j(c),y=await o.sharedHandler.hooks.lifecycle.afterResolve.emit(n._extends({id:_},u,{options:o.options,origin:o,remoteInfo:E})),{remote:R,expose:v}=y;t.assert(R&&v,`The 'beforeRequest' hook was executed, but it failed to return the correct 'remote' and 'expose' values while loading ${_}.`);let S=o.moduleCache.get(R.name);const T={host:o,remoteInfo:E};return S||(S=new X(T),o.moduleCache.set(R.name,S)),{module:S,moduleOptions:T,remoteMatchInfo:y}}registerRemote(r,o,i){const{host:l}=this,_=()=>{if(r.alias){const c=o.find(E=>{var y;return r.alias&&(E.name.startsWith(r.alias)||((y=E.alias)==null?void 0:y.startsWith(r.alias)))});t.assert(!c,`The alias ${r.alias} of remote ${r.name} is not allowed to be the prefix of ${c&&c.name} name or alias`)}"entry"in r&&s.isBrowserEnv()&&!r.entry.startsWith("http")&&(r.entry=new URL(r.entry,window.location.origin).href),r.shareScope||(r.shareScope=t.DEFAULT_SCOPE),r.type||(r.type=t.DEFAULT_REMOTE_TYPE)};this.hooks.lifecycle.beforeRegisterRemote.emit({remote:r,origin:l});const u=o.find(c=>c.name===r.name);if(!u)_(),o.push(r),this.hooks.lifecycle.registerRemote.emit({remote:r,origin:l});else{const c=[`The remote "${r.name}" is already registered.`,"Please note that overriding it may cause unexpected errors."];i!=null&&i.force&&(this.removeRemote(u),_(),o.push(r),this.hooks.lifecycle.registerRemote.emit({remote:r,origin:l}),s.warn(c.join(" ")))}}removeRemote(r){try{const{host:i}=this,{name:l}=r,_=i.options.remotes.findIndex(c=>c.name===l);_!==-1&&i.options.remotes.splice(_,1);const u=i.moduleCache.get(r.name);if(u){const c=u.remoteInfo,E=c.entryGlobalName;if(t.CurrentGlobal[E]){var o;(o=Object.getOwnPropertyDescriptor(t.CurrentGlobal,E))!=null&&o.configurable?delete t.CurrentGlobal[E]:t.CurrentGlobal[E]=void 0}const y=k(u.remoteInfo);t.globalLoading[y]&&delete t.globalLoading[y],i.snapshotHandler.manifestCache.delete(c.entry);let R=c.buildVersion?s.composeKeyWithSeparator(c.name,c.buildVersion):c.name;const v=t.CurrentGlobal.__FEDERATION__.__INSTANCES__.findIndex(T=>c.buildVersion?T.options.id===R:T.name===R);if(v!==-1){const T=t.CurrentGlobal.__FEDERATION__.__INSTANCES__[v];R=T.options.id||R;const M=t.getGlobalShareScope();let D=!0;const $=[];Object.keys(M).forEach(A=>{const C=M[A];C&&Object.keys(C).forEach(L=>{const F=C[L];F&&Object.keys(F).forEach(U=>{const V=F[U];V&&Object.keys(V).forEach(Z=>{const H=V[Z];H&&typeof H=="object"&&H.from===c.name&&(H.loaded||H.loading?(H.useIn=H.useIn.filter(K=>K!==c.name),H.useIn.length?D=!1:$.push([A,L,U,Z])):$.push([A,L,U,Z]))})})})}),D&&(T.shareScopeMap={},delete M[R]),$.forEach(([A,C,L,F])=>{var U,V,Z;(Z=M[A])==null||(V=Z[C])==null||(U=V[L])==null||delete U[F]}),t.CurrentGlobal.__FEDERATION__.__INSTANCES__.splice(v,1)}const{hostGlobalSnapshot:S}=ie(r,i);if(S){const T=S&&"remotesInfo"in S&&S.remotesInfo&&t.getInfoWithoutType(S.remotesInfo,r.name).key;T&&(delete S.remotesInfo[T],t.Global.__FEDERATION__.__MANIFEST_LOADING__[T]&&delete t.Global.__FEDERATION__.__MANIFEST_LOADING__[T])}i.moduleCache.delete(r.name)}}catch(i){t.logger.log("removeRemote fail: ",i)}}constructor(r){this.hooks=new W({beforeRegisterRemote:new q("beforeRegisterRemote"),registerRemote:new q("registerRemote"),beforeRequest:new P("beforeRequest"),onLoad:new w("onLoad"),handlePreloadModule:new G("handlePreloadModule"),errorLoadRemote:new w("errorLoadRemote"),beforePreloadRemote:new w("beforePreloadRemote"),generatePreloadAssets:new w("generatePreloadAssets"),afterPreloadRemote:new w,loadEntry:new w}),this.host=r,this.idToRemoteMap={}}}class te{initOptions(r){this.registerPlugins(r.plugins);const o=this.formatOptions(this.options,r);return this.options=o,o}async loadShare(r,o){return this.sharedHandler.loadShare(r,o)}loadShareSync(r,o){return this.sharedHandler.loadShareSync(r,o)}initializeSharing(r=t.DEFAULT_SCOPE,o){return this.sharedHandler.initializeSharing(r,o)}initRawContainer(r,o,i){const l=j({name:r,entry:o}),_=new X({host:this,remoteInfo:l});return _.remoteEntryExports=i,this.moduleCache.set(r,_),_}async loadRemote(r,o){return this.remoteHandler.loadRemote(r,o)}async preloadRemote(r){return this.remoteHandler.preloadRemote(r)}initShareScopeMap(r,o,i={}){this.sharedHandler.initShareScopeMap(r,o,i)}formatOptions(r,o){const{shared:i}=t.formatShareConfigs(r,o),{userOptions:l,options:_}=this.hooks.lifecycle.beforeInit.emit({origin:this,userOptions:o,options:r,shareInfo:i}),u=this.remoteHandler.formatAndRegisterRemote(_,l),{shared:c}=this.sharedHandler.registerShared(_,l),E=[..._.plugins];l.plugins&&l.plugins.forEach(R=>{E.includes(R)||E.push(R)});const y=n._extends({},r,o,{plugins:E,remotes:u,shared:c});return this.hooks.lifecycle.init.emit({origin:this,options:y}),y}registerPlugins(r){const o=p(r,[this.hooks,this.remoteHandler.hooks,this.sharedHandler.hooks,this.snapshotHandler.hooks,this.loaderHook,this.bridgeHook]);this.options.plugins=this.options.plugins.reduce((i,l)=>(l&&i&&!i.find(_=>_.name===l.name)&&i.push(l),i),o||[])}registerRemotes(r,o){return this.remoteHandler.registerRemotes(r,o)}constructor(r){this.hooks=new W({beforeInit:new q("beforeInit"),init:new G,beforeInitContainer:new P("beforeInitContainer"),initContainer:new P("initContainer")}),this.version="0.8.6",this.moduleCache=new Map,this.loaderHook=new W({getModuleInfo:new G,createScript:new G,createLink:new G,fetch:new w,loadEntryError:new w,getModuleFactory:new w}),this.bridgeHook=new W({beforeBridgeRender:new G,afterBridgeRender:new G,beforeBridgeDestroy:new G,afterBridgeDestroy:new G});const o={id:t.getBuilderId(),name:r.name,plugins:[le(),de()],remotes:[],shared:{},inBrowser:s.isBrowserEnv()};this.name=r.name,this.options=o,this.snapshotHandler=new fe(this),this.sharedHandler=new he(this),this.remoteHandler=new pe(this),this.shareScopeMap=this.sharedHandler.shareScopeMap,this.registerPlugins([...o.plugins,...r.plugins||[]]),this.options=this.formatOptions(o,r)}}let x=null;function _e(h){const r=t.getGlobalFederationInstance(h.name,h.version);if(r)return r.initOptions(h),x||(x=r),r;{const o=t.getGlobalFederationConstructor()||te;return x=new o(h),t.setGlobalFederationInstance(x),x}}function me(...h){return t.assert(x,"Please call init first"),x.loadRemote.apply(x,h)}function ge(...h){return t.assert(x,"Please call init first"),x.loadShare.apply(x,h)}function Ee(...h){return t.assert(x,"Please call init first"),x.loadShareSync.apply(x,h)}function ye(...h){return t.assert(x,"Please call init first"),x.preloadRemote.apply(x,h)}function be(...h){return t.assert(x,"Please call init first"),x.registerRemotes.apply(x,h)}function Se(...h){return t.assert(x,"Please call init first"),x.registerPlugins.apply(x,h)}function Re(){return x}t.setGlobalFederationConstructor(te),Object.defineProperty(e,"loadScript",{enumerable:!0,get:function(){return s.loadScript}}),Object.defineProperty(e,"loadScriptNode",{enumerable:!0,get:function(){return s.loadScriptNode}}),e.registerGlobalPlugins=t.registerGlobalPlugins,e.FederationHost=te,e.Module=X,e.getInstance=Re,e.getRemoteEntry=B,e.getRemoteInfo=j,e.init=_e,e.loadRemote=me,e.loadShare=ge,e.loadShareSync=Ee,e.preloadRemote=ye,e.registerPlugins=Se,e.registerRemotes=be})(index_cjs$2);let initResolve,initReject;const initPromise=new Promise((e,n)=>{initResolve=e,initReject=n});var iobroker_javascript__mf_v__runtimeInit__mf_v__={initPromise,initResolve,initReject};export{iobroker_javascript__mf_v__runtimeInit__mf_v__ as a,index_cjs$2 as i};
