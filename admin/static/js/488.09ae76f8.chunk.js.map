{"version":3,"file":"static/js/488.09ae76f8.chunk.js","mappings":"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","sources":["Dialogs/Rename.tsx","Dialogs/Delete.tsx","Dialogs/AddNewScript.tsx","Dialogs/New.tsx","Dialogs/Error.tsx","Dialogs/AdapterDebug.tsx","SideMenu.tsx","Log.tsx","assets/blockly2js.svg","assets/rules2js.svg","Components/ScriptEditorVanilaMonaco.tsx","Dialogs/Export.tsx","Dialogs/Import.tsx","Components/blockly-plugins/field-multilineinput/src/field_multilineinput.ts","Components/blockly-plugins/field-multilineinput/src/blocks/textMultiline.ts","Components/blockly-plugins/field-multilineinput/src/index.ts","Components/blockly-plugins/field-colour/src/field_colour.ts","Components/blockly-plugins/field-colour/src/blocks/colourPicker.ts","Components/blockly-plugins/field-colour/src/blocks/colourRandom.ts","Components/blockly-plugins/field-colour/src/blocks/colourRgb.ts","Components/blockly-plugins/field-colour/src/blocks/colourBlend.ts","Components/BlocklyEditor.tsx","Components/blockly-plugins/index.ts","Dialogs/ScriptEditor.tsx","webpack://js/./src/Components/RulesEditor/style.module.scss?d9e3","webpack://js/./src/Components/RulesEditor/components/CardMenu/style.module.scss?24d8","Components/RulesEditor/helpers/MaterialDynamicIcon.tsx","Components/RulesEditor/components/CardMenu/index.tsx","webpack://js/./src/Components/RulesEditor/components/CurrentItem/style.module.scss?3318","Components/RulesEditor/helpers/deepCopy.tsx","Components/RulesEditor/helpers/filterElement.tsx","webpack://js/./src/Components/RulesEditor/components/GenericBlock/style.module.scss?9124","webpack://js/./src/Components/RulesEditor/components/CustomButton/style.module.scss?0052","Components/RulesEditor/components/CustomButton/index.tsx","webpack://js/./src/Components/RulesEditor/components/CustomCheckbox/style.module.scss?0cc5","Components/RulesEditor/components/CustomCheckbox/index.tsx","webpack://js/./src/Components/RulesEditor/components/CustomInput/style.module.scss?7193","Components/RulesEditor/components/CustomInput/index.tsx","Components/RulesEditor/components/CustomInstance/index.tsx","webpack://js/./src/Components/RulesEditor/components/CustomModal/style.module.scss?7408","Components/RulesEditor/components/CustomModal/index.tsx","webpack://js/./src/Components/RulesEditor/components/CustomSelect/style.module.scss?40f6","Components/RulesEditor/components/CustomSelect/index.tsx","webpack://js/./src/Components/RulesEditor/components/CustomSlider/style.module.scss?f41a","Components/RulesEditor/components/CustomSlider/index.tsx","webpack://js/./src/Components/RulesEditor/components/CustomSwitch/style.module.scss?0c1c","Components/RulesEditor/components/CustomSwitch/index.tsx","webpack://js/./src/Components/RulesEditor/components/CustomTime/style.module.scss?880f","Components/RulesEditor/components/CustomTime/index.tsx","webpack://js/./src/Components/RulesEditor/components/CustomDate/style.module.scss?8a42","Components/RulesEditor/components/CustomDate/index.tsx","Components/RulesEditor/helpers/utils.tsx","Components/RulesEditor/helpers/Tour.tsx","Components/RulesEditor/components/GenericBlock/index.tsx","Components/RulesEditor/components/Blocks/ActionSayText.tsx","Components/RulesEditor/components/Blocks/ActionSendEmail.tsx","Components/RulesEditor/components/Blocks/ActionTelegram.tsx","Components/RulesEditor/components/Blocks/ActionPushover.tsx","Components/RulesEditor/components/Blocks/ActionWhatsappcmb.tsx","Components/RulesEditor/components/Blocks/ActionPushsafer.tsx","Components/RulesEditor/helpers/Compile.tsx","Components/RulesEditor/components/Blocks/TriggerScriptSave.tsx","Components/RulesEditor/components/Blocks/TriggerSchedule.tsx","Components/RulesEditor/components/Blocks/TriggerState.tsx","Components/RulesEditor/components/Blocks/ConditionState.tsx","Components/RulesEditor/components/Blocks/ConditionTime.tsx","Components/RulesEditor/components/Blocks/ConditionAstronomical.tsx","Components/RulesEditor/components/Blocks/ActionSetState.tsx","Components/RulesEditor/components/Blocks/ActionExec.tsx","Components/RulesEditor/components/Blocks/ActionHTTPCall.tsx","Components/RulesEditor/components/Blocks/ActionPrintText.tsx","Components/RulesEditor/components/Blocks/ActionPause.tsx","Components/RulesEditor/components/Blocks/ActionFunction.tsx","Components/RulesEditor/components/Blocks/ActionSetStateDelayed.tsx","Components/RulesEditor/components/Blocks/ActionOperateStates.tsx","Components/RulesEditor/components/StandardBlocks/index.tsx","Components/RulesEditor/components/ContextWrapper/index.tsx","Components/RulesEditor/components/CurrentItem/index.tsx","Components/RulesEditor/helpers/findElement.tsx","Components/RulesEditor/components/CustomDragLayer/index.tsx","webpack://js/./src/Components/RulesEditor/components/ContentBlockItems/style.module.scss?385e","Components/RulesEditor/hooks/useStateLocal.tsx","Components/RulesEditor/helpers/cardSort.tsx","webpack://js/./src/Components/RulesEditor/components/DragWrapper/style.module.scss?b1b7","Components/RulesEditor/components/DragWrapper/index.tsx","Components/RulesEditor/components/ContentBlockItems/DialogHelp.tsx","Components/RulesEditor/components/ContentBlockItems/DialogCondition.tsx","Components/RulesEditor/components/ContentBlockItems/index.tsx","webpack://js/./src/Components/RulesEditor/components/Menu/style.module.scss?9893","Components/RulesEditor/components/CardMenu/CustomDragItem.tsx","webpack://js/./src/Components/RulesEditor/components/HamburgerMenu/hamburgerMenu.module.scss?ab25","Components/RulesEditor/components/HamburgerMenu/index.tsx","Components/RulesEditor/components/Menu/index.tsx","Components/RulesEditor/index.tsx","Components/Debugger/Editor.tsx","Components/Debugger/Console.tsx","Components/Debugger/Stack.tsx","Components/Debugger/index.tsx","OpenAi/OpenAiPrompt.tsx","OpenAi/OpenAiDialog.tsx","Editor.tsx","Dialogs/ImportFile.tsx","App.tsx","serviceWorker.jsx","bootstrap.tsx"],"sourcesContent":["import React from 'react';\n\nimport {\n    Button,\n    Dialog,\n    DialogActions,\n    DialogContent,\n    DialogTitle,\n    TextField,\n    FormControl,\n    Select,\n    InputLabel,\n    MenuItem,\n} from '@mui/material';\n\nimport { Cancel as IconCancel, Check as IconOk } from '@mui/icons-material';\n\nimport { I18n } from '@iobroker/adapter-react-v5';\n\ninterface DialogRenameProps {\n    onClose: () => void;\n    onRename: (oldId: string, newId: string, newName?: string, newInstance?: number) => void;\n    name: string;\n    id: string;\n    instance: number | null;\n    instances: number[];\n    folder: boolean;\n}\n\ninterface DialogRenameState {\n    name: string;\n    id: string;\n    instance: number | null;\n    prefix: string;\n}\n\nclass DialogRename extends React.Component<DialogRenameProps, DialogRenameState> {\n    private readonly isShowInstance: boolean;\n\n    private readonly oldId: string;\n\n    constructor(props: DialogRenameProps) {\n        super(props);\n        this.state = {\n            name: props.name,\n            id: props.id,\n            instance: props.instance || 0,\n            prefix: DialogRename.getPrefix(props.id),\n        };\n        this.isShowInstance =\n            !props.folder && // if not folder\n            !!props.instances && // and list of instances is defined\n            (!!props.instance || // and instance is not 0\n                !!props.instances[0] || // or first instance is not 0\n                props.instances.length > 1); // or more than one instance\n\n        this.oldId = props.id;\n    }\n\n    static getPrefix(id: string): string {\n        const parts = (id || '').split('.');\n        parts.pop();\n        return parts.join('.');\n    }\n\n    getId(name: string): string {\n        name = (name || '').replace(/[\\\\/\\][*,;'\"`<>?\\s]/g, '_');\n        return `${this.state.prefix}.${name}`;\n    }\n\n    handleCancel = (): void => {\n        this.props.onClose();\n    };\n\n    handleOk = (): void => {\n        this.props.onRename(\n            this.oldId,\n            this.state.id,\n            this.state.name,\n            this.state.instance === 0 ? 0 : this.state.instance || undefined,\n        );\n        this.props.onClose();\n    };\n\n    handleChange = (name: string): void => {\n        this.setState({ name, id: this.getId(name) });\n    };\n\n    render(): React.JSX.Element {\n        return (\n            <Dialog\n                onClose={() => false}\n                maxWidth=\"md\"\n                fullWidth\n                open={!0}\n                aria-labelledby=\"confirmation-dialog-title\"\n            >\n                <DialogTitle id=\"confirmation-dialog-title\">{I18n.t('Rename')}</DialogTitle>\n                <DialogContent>\n                    <form\n                        noValidate\n                        autoComplete=\"off\"\n                    >\n                        <TextField\n                            variant=\"standard\"\n                            style={{ width: '100%' }}\n                            id=\"standard-name\"\n                            autoFocus\n                            label={I18n.t('Name')}\n                            value={this.state.name}\n                            onKeyUp={ev => {\n                                if (ev.key === 'Enter') {\n                                    // Do code here\n                                    ev.preventDefault();\n                                    setTimeout(() => this.handleOk(), 200);\n                                }\n                            }}\n                            onChange={e => this.handleChange(e.target.value)}\n                            margin=\"normal\"\n                        />\n                        <TextField\n                            variant=\"standard\"\n                            id=\"standard-name-id\"\n                            style={{ width: '100%' }}\n                            label={I18n.t('ID')}\n                            value={this.state.id}\n                            disabled\n                            margin=\"normal\"\n                        />\n                        {this.isShowInstance && (\n                            <FormControl variant=\"standard\">\n                                <InputLabel htmlFor=\"instance\">{I18n.t('Instance')}</InputLabel>\n                                <Select\n                                    variant=\"standard\"\n                                    value={this.state.instance}\n                                    onChange={e => this.setState({ instance: parseInt(e.target.value as string, 10) })}\n                                    inputProps={{ name: 'instance', id: 'instance' }}\n                                >\n                                    {this.props.instances.map(instance => (\n                                        <MenuItem\n                                            key={instance}\n                                            value={instance}\n                                        >\n                                            {instance || '0'}\n                                        </MenuItem>\n                                    ))}\n                                </Select>\n                            </FormControl>\n                        )}\n                    </form>\n                </DialogContent>\n                <DialogActions>\n                    <Button\n                        variant=\"contained\"\n                        onClick={this.handleOk}\n                        color=\"primary\"\n                        startIcon={<IconOk />}\n                    >\n                        {I18n.t('Ok')}\n                    </Button>\n                    <Button\n                        color=\"grey\"\n                        variant=\"contained\"\n                        onClick={this.handleCancel}\n                        startIcon={<IconCancel />}\n                    >\n                        {I18n.t('Cancel')}\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        );\n    }\n}\n\nexport default DialogRename;\n","import React from 'react';\n\nimport { Button, DialogTitle, DialogContent, DialogActions, Dialog } from '@mui/material';\n\nimport { Check as IconOk, Cancel as IconCancel, Delete as IconDelete } from '@mui/icons-material';\n\nimport { I18n } from '@iobroker/adapter-react-v5';\n\ninterface DialogDeleteProps {\n    onClose: () => void;\n    onDelete: (id: string) => void;\n    name: string;\n    id: string;\n}\ninterface DialogDeleteState {\n    name: string;\n    id: string;\n}\n\nclass DialogDelete extends React.Component<DialogDeleteProps, DialogDeleteState> {\n    constructor(props: DialogDeleteProps) {\n        super(props);\n        this.state = {\n            name: props.name,\n            id: props.id,\n        };\n    }\n\n    handleCancel = (): void => {\n        this.props.onClose();\n    };\n\n    handleOk = (): void => {\n        this.props.onDelete(this.state.id);\n        this.props.onClose();\n    };\n\n    render(): React.JSX.Element {\n        return (\n            <Dialog\n                onClose={() => false}\n                maxWidth=\"md\"\n                open={!0}\n                aria-labelledby=\"confirmation-dialog-title\"\n            >\n                <DialogTitle id=\"confirmation-dialog-title\">{I18n.t('Are you sure?')}</DialogTitle>\n                <DialogContent>\n                    <IconDelete />\n                    <span style={{ fontSize: 14, fontWeight: 'bold' }}>{I18n.t('Delete %s', this.state.name)}</span>\n                </DialogContent>\n                <DialogActions>\n                    <Button\n                        variant=\"contained\"\n                        onClick={this.handleOk}\n                        color=\"primary\"\n                        startIcon={<IconOk />}\n                    >\n                        {I18n.t('Ok')}\n                    </Button>\n                    <Button\n                        color=\"grey\"\n                        variant=\"contained\"\n                        onClick={this.handleCancel}\n                        startIcon={<IconCancel />}\n                    >\n                        {I18n.t('Cancel')}\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        );\n    }\n}\n\nexport default DialogDelete;\n","import React from 'react';\n\nimport {\n    Button,\n    DialogTitle,\n    DialogContent,\n    DialogActions,\n    Dialog,\n    Card,\n    CardActionArea,\n    CardActions,\n    CardContent,\n    CardMedia,\n} from '@mui/material';\n\nimport { Cancel as IconCancel } from '@mui/icons-material';\n\nimport { I18n } from '@iobroker/adapter-react-v5';\n\nimport type { ScriptType } from '@/types';\nimport ImgJS from '../assets/tileJS.png';\nimport ImgTS from '../assets/tileTS.png';\nimport ImgBlockly from '../assets/tileBlockly.png';\nimport ImgRules from '../assets/tileRules.png';\n\nconst styles: Record<string, React.CSSProperties> = {\n    card: {\n        maxWidth: 345,\n        minWidth: 250,\n        display: 'inline-block',\n        margin: '0 10px 0 10px',\n    },\n    media: {\n        height: 122,\n    },\n    text: {\n        maxWidth: 218,\n        minHeight: 30,\n    },\n    complexity: {\n        fontWeight: 'bold',\n        fontStyle: 'italic',\n        marginBottom: 8,\n    },\n};\n\ninterface DialogAddNewProps {\n    onClose: (type?: ScriptType) => void;\n}\n\nclass DialogAddNew extends React.Component<DialogAddNewProps> {\n    handleCancel = (): void => {\n        this.props.onClose();\n    };\n\n    static openHtml(html: string): void {\n        const lang = I18n.getLanguage();\n        if (!html.includes('javascript.md') && (lang === 'de' || lang === 'ru')) {\n            html = html.replace(/\\/en\\//, `/${lang}/`);\n        }\n        const win: Window | null = window.open(html, '_blank');\n        win?.focus();\n    }\n\n    getJSCard(): React.JSX.Element {\n        return (\n            <Card style={styles.card}>\n                <CardActionArea onClick={() => this.props.onClose && this.props.onClose('Javascript/js')}>\n                    <CardMedia\n                        style={styles.media}\n                        image={ImgJS}\n                        title=\"JavaScript\"\n                    />\n                    <CardContent>\n                        <h2>JavaScript</h2>\n                        <div style={styles.complexity}>{I18n.t('for programmers')}</div>\n                        <div style={styles.text}>{I18n.t('JS description')}</div>\n                    </CardContent>\n                </CardActionArea>\n                <CardActions>\n                    <Button\n                        size=\"small\"\n                        color=\"primary\"\n                        variant=\"contained\"\n                        onClick={() => this.props.onClose && this.props.onClose('Javascript/js')}\n                    >\n                        {I18n.t('Add')}\n                    </Button>\n                    <Button\n                        size=\"small\"\n                        color=\"secondary\"\n                        onClick={() =>\n                            DialogAddNew.openHtml(\n                                'https://github.com/ioBroker/ioBroker.javascript/blob/master/docs/en/javascript.md',\n                            )\n                        }\n                    >\n                        {I18n.t('Learn More')}\n                    </Button>\n                </CardActions>\n            </Card>\n        );\n    }\n\n    getTSCard(): React.JSX.Element {\n        return (\n            <Card style={styles.card}>\n                <CardActionArea onClick={() => this.props.onClose && this.props.onClose('TypeScript/ts')}>\n                    <CardMedia\n                        style={styles.media}\n                        image={ImgTS}\n                        title=\"TypeScript\"\n                    />\n                    <CardContent>\n                        <h2>TypeScript</h2>\n                        <div style={styles.complexity}>{I18n.t('for professionals')}</div>\n                        <div style={styles.text}>{I18n.t('TS description')}</div>\n                    </CardContent>\n                </CardActionArea>\n                <CardActions>\n                    <Button\n                        size=\"small\"\n                        color=\"primary\"\n                        variant=\"contained\"\n                        onClick={() => this.props.onClose && this.props.onClose('TypeScript/ts')}\n                    >\n                        {I18n.t('Add')}\n                    </Button>\n                    <Button\n                        size=\"small\"\n                        color=\"secondary\"\n                        onClick={() =>\n                            DialogAddNew.openHtml(\n                                'https://github.com/ioBroker/ioBroker.javascript/blob/master/docs/en/javascript.md',\n                            )\n                        }\n                    >\n                        {I18n.t('Learn More')}\n                    </Button>\n                </CardActions>\n            </Card>\n        );\n    }\n\n    getBlocklyCard(): React.JSX.Element {\n        return (\n            <Card style={styles.card}>\n                <CardActionArea onClick={() => this.props.onClose && this.props.onClose('Blockly')}>\n                    <CardMedia\n                        style={styles.media}\n                        image={ImgBlockly}\n                        title=\"Blockly\"\n                    />\n                    <CardContent>\n                        <h2>Blockly</h2>\n                        <div style={styles.complexity}>{I18n.t('normal')}</div>\n                        <div style={styles.text}>{I18n.t('Blockly description')}</div>\n                    </CardContent>\n                </CardActionArea>\n                <CardActions>\n                    <Button\n                        size=\"small\"\n                        color=\"primary\"\n                        variant=\"contained\"\n                        onClick={() => this.props.onClose && this.props.onClose('Blockly')}\n                    >\n                        {I18n.t('Add')}\n                    </Button>\n                    <Button\n                        size=\"small\"\n                        color=\"secondary\"\n                        onClick={() =>\n                            DialogAddNew.openHtml(\n                                'https://github.com/ioBroker/ioBroker.javascript/blob/master/docs/en/blockly.md',\n                            )\n                        }\n                    >\n                        {I18n.t('Learn More')}\n                    </Button>\n                </CardActions>\n            </Card>\n        );\n    }\n\n    getRulesCard(): React.JSX.Element {\n        return (\n            <Card style={styles.card}>\n                <CardActionArea onClick={() => this.props.onClose && this.props.onClose('Rules')}>\n                    <CardMedia\n                        style={styles.media}\n                        image={ImgRules}\n                        title=\"Rules\"\n                    />\n                    <CardContent>\n                        <h2>Rules</h2>\n                        <div style={styles.complexity}>{I18n.t('easy')}</div>\n                        <div style={styles.text}>{I18n.t('Rules description')}</div>\n                    </CardContent>\n                </CardActionArea>\n                <CardActions>\n                    <Button\n                        size=\"small\"\n                        color=\"primary\"\n                        variant=\"contained\"\n                        onClick={() => this.props.onClose && this.props.onClose('Rules')}\n                    >\n                        {I18n.t('Add')}\n                    </Button>\n                    <Button\n                        size=\"small\"\n                        color=\"secondary\"\n                        onClick={() =>\n                            DialogAddNew.openHtml(\n                                'https://github.com/ioBroker/ioBroker.javascript/blob/master/docs/en/javascript.md',\n                            )\n                        }\n                    >\n                        {I18n.t('Learn More')}\n                    </Button>\n                </CardActions>\n            </Card>\n        );\n    }\n\n    render(): React.JSX.Element {\n        return (\n            <Dialog\n                onClose={() => false}\n                maxWidth=\"lg\"\n                fullWidth\n                open={!0}\n                aria-labelledby=\"confirmation-dialog-title\"\n            >\n                <DialogTitle id=\"confirmation-dialog-title\">{I18n.t('Add new script')}</DialogTitle>\n                <DialogContent style={{ textAlign: 'center' }}>\n                    {this.getRulesCard()}\n                    {this.getBlocklyCard()}\n                    {this.getJSCard()}\n                    {this.getTSCard()}\n                </DialogContent>\n                <DialogActions>\n                    <Button\n                        color=\"grey\"\n                        onClick={this.handleCancel}\n                        startIcon={<IconCancel />}\n                    >\n                        {I18n.t('Cancel')}\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        );\n    }\n}\n\nexport default DialogAddNew;\n","import React from 'react';\n\nimport {\n    Button,\n    DialogTitle,\n    DialogContent,\n    DialogActions,\n    Dialog,\n    TextField,\n    FormControl,\n    Select,\n    InputLabel,\n    MenuItem,\n    IconButton,\n} from '@mui/material';\n\nimport { Check as IconOk, Cancel as IconCancel, Clear as ClearIcon } from '@mui/icons-material';\n\nimport { I18n } from '@iobroker/adapter-react-v5';\nimport type { ScriptType } from '@/types';\n\ninterface DialogNewProps {\n    onClose: () => void;\n    onAdd: (id: string, name: string, instance?: number, type?: ScriptType) => void;\n    name: string;\n    title: string;\n    parent: string;\n    instance?: number;\n    instances?: number[];\n    parents: { id: string; name: string }[];\n    existingItems?: string[];\n    folder?: boolean;\n    type?: ScriptType;\n}\n\ninterface DialogNewState {\n    name: string;\n    instance: number;\n    parent: string;\n    error: string;\n    id: string;\n}\n\nclass DialogNew extends React.Component<DialogNewProps, DialogNewState> {\n    private readonly isShowInstance: boolean;\n\n    constructor(props: DialogNewProps) {\n        super(props);\n        this.state = {\n            name: props.name || 'Script',\n            instance: props.instance || 0,\n            parent: props.parent,\n            error: '',\n            id: '',\n        };\n\n        this.isShowInstance =\n            !props.folder && // if not folder\n            !!props.instances && // and list of instances is defined\n            (!!props.instance || // and instance is not 0\n                !!props.instances[0] || // or first instance is not 0\n                props.instances.length > 1); // or more than one instance\n    }\n\n    getId(name?: string): string {\n        name = name || this.state.name || '';\n        name = name\n            .replace(/[\\\\/\\][.*,;'\"`<>?\\s]/g, '_')\n            .trim()\n            .replace(/\\.$/, '_');\n        return `${this.state ? this.state.parent : this.props.parent}.${name}`;\n    }\n\n    handleOk = (): void => {\n        this.props.onAdd(this.getId(this.state.name), this.state.name, this.state.instance, this.props.type);\n        this.props.onClose();\n    };\n\n    render(): React.JSX.Element {\n        console.log(this.state.name);\n        return (\n            <Dialog\n                onClose={() => false}\n                maxWidth=\"md\"\n                fullWidth\n                open={!0}\n                aria-labelledby=\"confirmation-dialog-title\"\n            >\n                <DialogTitle id=\"confirmation-dialog-title\">{this.props.title || I18n.t('Create new')}</DialogTitle>\n                <DialogContent>\n                    <form\n                        noValidate\n                        autoComplete=\"off\"\n                    >\n                        <TextField\n                            variant=\"standard\"\n                            style={{ width: '100%' }}\n                            id=\"standard-name\"\n                            autoFocus\n                            error={!!this.state.error}\n                            label={I18n.t('Name')}\n                            value={this.state.name || ''}\n                            helperText={this.state.error}\n                            slotProps={{\n                                input: {\n                                    endAdornment: this.state.name ? (\n                                        <IconButton\n                                            size=\"small\"\n                                            onClick={() => this.setState({ name: '' })}\n                                        >\n                                            <ClearIcon />\n                                        </IconButton>\n                                    ) : undefined,\n                                },\n                            }}\n                            onKeyUp={ev => {\n                                ev.preventDefault();\n                                if (ev.key === 'Enter' && !this.state.error) {\n                                    setTimeout(() => this.handleOk(), 200);\n                                }\n                            }}\n                            onChange={e => {\n                                const name = e.target.value;\n                                const id = this.getId(name);\n                                if (!name) {\n                                    this.setState({ name, id, error: I18n.t('Empty name is not allowed') });\n                                } else if (this.props.existingItems?.includes(id)) {\n                                    this.setState({ name, id, error: I18n.t('Duplicate name') });\n                                } else {\n                                    console.log(`Set name: \"${name}\"`);\n                                    this.setState({ name, id, error: '' });\n                                }\n                            }}\n                            margin=\"normal\"\n                        />\n                        <FormControl\n                            variant=\"standard\"\n                            style={{ width: '100%' }}\n                        >\n                            <InputLabel htmlFor=\"parent\">{I18n.t('Folder')}</InputLabel>\n                            <Select\n                                variant=\"standard\"\n                                style={{ width: '100%' }}\n                                value={this.state.parent}\n                                onChange={e => this.setState({ parent: e.target.value })}\n                                inputProps={{ name: 'parent', id: 'parent' }}\n                            >\n                                {this.props.parents.map(parent => {\n                                    const parts = parent.id.split('.');\n                                    parts.splice(0, 2); // remove script.js\n                                    const names = [];\n                                    let id = 'script.js';\n                                    parts.forEach(n => {\n                                        id += `.${n}`;\n                                        const el = this.props.parents.find(item => item.id === id);\n                                        if (el) {\n                                            names.push(el.name);\n                                        } else {\n                                            names.push(n);\n                                        }\n                                    });\n                                    if (!names.length) {\n                                        names.push(parent.name);\n                                    }\n                                    return (\n                                        <MenuItem\n                                            key={parent.id}\n                                            value={parent.id}\n                                        >\n                                            {names.join(' / ')}\n                                        </MenuItem>\n                                    );\n                                })}\n                            </Select>\n                        </FormControl>\n                        <TextField\n                            variant=\"standard\"\n                            id=\"standard-name-id\"\n                            style={{ width: '100%' }}\n                            label={I18n.t('ID')}\n                            value={this.getId()}\n                            disabled\n                            margin=\"normal\"\n                        />\n                        {this.isShowInstance && (\n                            <FormControl variant=\"standard\">\n                                <InputLabel htmlFor=\"instance\">{I18n.t('Instance')}</InputLabel>\n                                <Select\n                                    variant=\"standard\"\n                                    value={this.state.instance}\n                                    onChange={e => this.setState({ instance: parseInt(e.target.value as string, 10) })}\n                                    inputProps={{ name: 'instance', id: 'instance' }}\n                                >\n                                    {this.props.instances?.map(instance => (\n                                        <MenuItem\n                                            key={`instance${instance}`}\n                                            value={instance}\n                                        >\n                                            {instance || '0'}\n                                        </MenuItem>\n                                    ))}\n                                </Select>\n                            </FormControl>\n                        )}\n                    </form>\n                </DialogContent>\n                <DialogActions>\n                    <Button\n                        variant=\"contained\"\n                        onClick={this.handleOk}\n                        disabled={!!this.state.error}\n                        color=\"primary\"\n                        startIcon={<IconOk />}\n                    >\n                        {I18n.t('Ok')}\n                    </Button>\n                    <Button\n                        color=\"grey\"\n                        variant=\"contained\"\n                        onClick={() => this.props.onClose()}\n                        startIcon={<IconCancel />}\n                    >\n                        {I18n.t('Cancel')}\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        );\n    }\n}\n\nexport default DialogNew;\n","import React from 'react';\n\nimport { Button, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle } from '@mui/material';\n\nimport { Check as IconOk } from '@mui/icons-material';\n\nimport { I18n, type IobTheme } from '@iobroker/adapter-react-v5';\n\nconst styles: Record<string, any> = {\n    title: (theme: IobTheme) => ({\n        background: theme.palette.error.main,\n        color: theme.palette.error.contrastText,\n        '&>h2': {\n            color: theme.palette.error.contrastText,\n        },\n    }),\n};\ninterface DialogErrorProps {\n    onClose: () => void;\n    title?: string;\n    text: string | React.JSX.Element;\n}\n\nclass DialogError extends React.Component<DialogErrorProps> {\n    handleOk = (): void => {\n        this.props.onClose();\n    };\n\n    render(): React.JSX.Element {\n        return (\n            <Dialog\n                open={!0}\n                maxWidth=\"sm\"\n                fullWidth\n                onClose={() => this.handleOk()}\n                aria-labelledby=\"alert-dialog-title\"\n                aria-describedby=\"alert-dialog-description\"\n            >\n                <DialogTitle\n                    sx={styles.title}\n                    id=\"alert-dialog-title\"\n                >\n                    {this.props.title || I18n.t('Error')}\n                </DialogTitle>\n                <DialogContent>\n                    <DialogContentText id=\"alert-dialog-description\">\n                        {this.props.text || I18n.t('Unknown error!')}\n                    </DialogContentText>\n                </DialogContent>\n                <DialogActions>\n                    <Button\n                        variant=\"contained\"\n                        onClick={() => this.handleOk()}\n                        color=\"primary\"\n                        autoFocus\n                        startIcon={<IconOk />}\n                    >\n                        {I18n.t('Ok')}\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        );\n    }\n}\n\nexport default DialogError;\n","import React from 'react';\n\nimport {\n    Button,\n    DialogTitle,\n    DialogContent,\n    DialogActions,\n    Dialog,\n    ListItemIcon,\n    List,\n    Grid2,\n    ListItemText,\n    Input,\n    InputAdornment,\n    IconButton,\n    ListItemButton,\n} from '@mui/material';\n\nimport { Check as IconOk, Cancel as IconCancel, Close as IconClose } from '@mui/icons-material';\n\nimport { type AdminConnection, I18n } from '@iobroker/adapter-react-v5';\n\nconst styles: Record<string, React.CSSProperties> = {\n    buttonIcon: {\n        marginRight: 8,\n    },\n    icon: {\n        width: 24,\n        height: 24,\n    },\n    filter: {\n        width: '100%',\n    },\n    filterWithButton: {\n        width: '100%',\n    },\n    title: {\n        fontWeight: 'bold',\n        marginTop: 16,\n    },\n};\n\ninterface DialogAdapterDebugProps {\n    socket: AdminConnection;\n    onDebug: (instance: string, adapterToDebug: string) => void;\n    onClose: () => void;\n    title?: string;\n}\ninterface DialogAdapterDebugState {\n    instances: {\n        id: string;\n        enabled: boolean;\n        host: string;\n        icon: string;\n    }[];\n    jsInstance: string;\n    filter: string;\n    showAskForStop: boolean;\n    jsInstanceHost: string;\n    adapterToDebug: string;\n}\n\nclass DialogAdapterDebug extends React.Component<DialogAdapterDebugProps, DialogAdapterDebugState> {\n    constructor(props: DialogAdapterDebugProps) {\n        super(props);\n        this.state = {\n            instances: [],\n            filter: window.localStorage.getItem('javascript.debug.filter') || '',\n            showAskForStop: false,\n            jsInstance: window.localStorage.getItem('javascript.debug.instance') || '',\n            jsInstanceHost: '',\n            adapterToDebug: window.localStorage.getItem('javascript.debug.adapter') || '',\n        };\n    }\n\n    componentDidMount(): void {\n        void this.props.socket.getAdapterInstances().then(oInstances => {\n            const instances: {\n                id: string;\n                enabled: boolean;\n                host: string;\n                icon: string;\n            }[] = oInstances\n                .filter(i => i && !i.common?.onlyWWW)\n                .map(item => {\n                    const name = item._id.replace(/^system\\.adapter\\./, '');\n                    const [adapter] = name.split('.');\n                    return {\n                        id: name,\n                        enabled: item.common?.enabled,\n                        host: item.common?.host,\n                        icon: item.common?.icon ? `../../adapter/${adapter}/${item.common.icon}` : '',\n                    };\n                });\n            instances.sort((a, b) => (a.id > b.id ? 1 : a.id < b.id ? -1 : 0));\n            let jsInstance: string = this.state.jsInstance || '';\n            const jsInstanceObj = this.state.jsInstance\n                ? instances.find(item => item.id === this.state.jsInstance)\n                : null;\n            let jsInstanceHost: string;\n\n            // check if selected instance is in the list\n            if (!this.state.jsInstance || !jsInstanceObj) {\n                const oJsInstance = instances.find(item => item.id.startsWith('javascript.')); // take the first one\n                jsInstanceHost = oJsInstance?.host || '';\n                jsInstance = oJsInstance?.id || '';\n            } else {\n                jsInstanceHost = jsInstanceObj?.host || '';\n            }\n\n            let adapterToDebug = this.state.adapterToDebug || '';\n            if (adapterToDebug && !instances.find(item => item.id === adapterToDebug)) {\n                adapterToDebug = '';\n            }\n\n            this.setState({ instances, jsInstance, adapterToDebug, jsInstanceHost });\n        });\n    }\n\n    handleOk = (): void => {\n        // TODO\n        if (this.state.instances.find(item => item.id === this.state.adapterToDebug)?.enabled) {\n            void this.props.socket.getObject(`system.adapter.${this.state.adapterToDebug}`).then(obj => {\n                if (obj) {\n                    obj.common.enabled = false;\n                    void this.props.socket\n                        .setObject(obj._id, obj)\n                        .then(() => this.props.onDebug(this.state.jsInstance, this.state.adapterToDebug));\n                }\n            });\n            return;\n        }\n        this.props.onDebug(this.state.jsInstance, this.state.adapterToDebug);\n    };\n\n    renderJavascriptList(): React.JSX.Element | null {\n        const js = this.state.instances.filter(item => item.id.startsWith('javascript.'));\n        if (js.length < 2) {\n            return null;\n        }\n        return (\n            <Grid2>\n                <div style={styles.title}>{I18n.t('Host')}</div>\n                <List component=\"nav\">\n                    {js.map(item => (\n                        <ListItemButton\n                            component=\"div\"\n                            key={item.id}\n                            selected={this.state.jsInstance === item.id}\n                            onClick={() => this.setState({ jsInstance: item.id, jsInstanceHost: item.host })}\n                        >\n                            <ListItemIcon>\n                                <img\n                                    src={item.icon}\n                                    alt={item.id}\n                                    style={styles.icon}\n                                />\n                            </ListItemIcon>\n                            <ListItemText primary={item.id} />\n                        </ListItemButton>\n                    ))}\n                </List>\n            </Grid2>\n        );\n    }\n\n    renderInstances(): React.JSX.Element {\n        if (!this.state.jsInstance) {\n            return <Grid2 />;\n        }\n        const instances = this.state.instances.filter(\n            item =>\n                item.id !== this.state.jsInstance &&\n                item.host === this.state.jsInstanceHost &&\n                (!this.state.filter || item.id.includes(this.state.filter.toLowerCase())),\n        );\n\n        return (\n            <Grid2>\n                <div style={styles.title}>{I18n.t('Instances')}</div>\n                <List component=\"nav\">\n                    {instances.map(item => (\n                        <ListItemButton\n                            key={item.id}\n                            selected={this.state.adapterToDebug === item.id}\n                            onDoubleClick={() => this.setState({ adapterToDebug: item.id }, () => this.handleOk())}\n                            onClick={() => this.setState({ adapterToDebug: item.id })}\n                        >\n                            <ListItemIcon>\n                                <img\n                                    src={item.icon}\n                                    alt={item.id}\n                                    style={styles.icon}\n                                />\n                            </ListItemIcon>\n                            <ListItemText primary={item.id} />\n                        </ListItemButton>\n                    ))}\n                </List>\n            </Grid2>\n        );\n    }\n\n    render(): React.JSX.Element {\n        return (\n            <Dialog\n                maxWidth=\"md\"\n                fullWidth={false}\n                open={!0}\n                onClose={() => false}\n                aria-labelledby=\"confirmation-dialog-title\"\n            >\n                <DialogTitle id=\"confirmation-dialog-title\">{this.props.title || I18n.t('Debug instance')}</DialogTitle>\n                <DialogContent>\n                    <Grid2\n                        container\n                        direction=\"column\"\n                    >\n                        <Grid2>\n                            <Input\n                                style={styles.filterWithButton}\n                                value={this.state.filter}\n                                placeholder={I18n.t('Filter')}\n                                onChange={e => {\n                                    this.setState({ filter: e.target.value });\n                                    window.localStorage.setItem('javascript.debug.filter', e.target.value);\n                                }}\n                                endAdornment={\n                                    <InputAdornment position=\"end\">\n                                        {this.state.filter ? (\n                                            <IconButton\n                                                size=\"small\"\n                                                aria-label=\"toggle password visibility\"\n                                                onClick={() => this.setState({ filter: '' })}\n                                            >\n                                                <IconClose />\n                                            </IconButton>\n                                        ) : (\n                                            ''\n                                        )}\n                                    </InputAdornment>\n                                }\n                            />\n                        </Grid2>\n                        <Grid2>\n                            <Grid2 container>\n                                {this.renderJavascriptList()}\n                                {this.renderInstances()}\n                            </Grid2>\n                        </Grid2>\n                    </Grid2>\n                </DialogContent>\n                <DialogActions>\n                    <Button\n                        variant=\"contained\"\n                        onClick={this.handleOk}\n                        disabled={!this.state.jsInstance || !this.state.adapterToDebug}\n                        color=\"primary\"\n                        startIcon={<IconOk />}\n                    >\n                        {I18n.t('Start')}\n                    </Button>\n                    <Button\n                        color=\"grey\"\n                        variant=\"contained\"\n                        onClick={() => this.props.onClose()}\n                        startIcon={<IconCancel />}\n                    >\n                        {I18n.t('Close')}\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        );\n    }\n}\n\nexport default DialogAdapterDebug;\n","import React from 'react';\nimport { useDrag, useDrop, DndProvider as DragDropContext } from 'react-dnd';\nimport { HTML5Backend } from 'react-dnd-html5-backend';\n\nimport {\n    Drawer,\n    Divider,\n    List,\n    ListItem,\n    ListItemIcon,\n    ListItemText,\n    IconButton,\n    Menu,\n    MenuItem,\n    Input,\n    Box,\n} from '@mui/material';\n\nimport {\n    MdMoreVert as IconMore,\n    MdContentCopy as IconCopy,\n    MdDelete as IconDelete,\n    MdInput as IconDoEdit,\n    MdClose as IconClear,\n    MdFormatClear as IconClose,\n    MdPlayArrow as IconPlay,\n    MdAdd as IconAdd,\n    MdCreateNewFolder as IconAddFolder,\n    MdPause as IconPause,\n    MdSwapVert as IconReorder,\n    MdEdit as IconEdit,\n    MdSearch as IconFind,\n    MdPalette as IconDark,\n    MdUnfoldMore as IconExpandAll,\n    MdUnfoldLess as IconCollapseAll,\n    MdBugReport as IconDebug,\n} from 'react-icons/md';\n\nimport {\n    FaFolder as IconFolder,\n    FaFolderOpen as IconFolderOpened,\n    FaFileExport as IconExport,\n    FaFileImport as IconImport,\n} from 'react-icons/fa';\n\nimport { red, green, yellow } from '@mui/material/colors';\n\nimport {\n    type AdminConnection,\n    I18n,\n    type IobTheme,\n    type ThemeName,\n    Utils,\n    IconExpert,\n} from '@iobroker/adapter-react-v5';\n\nimport ImgJS from './assets/js.png';\nimport ImgBlockly from './assets/blockly.png';\nimport ImgTypeScript from './assets/typescript.png';\nimport ImgRules from './assets/rules.png';\n\nimport DialogRename from './Dialogs/Rename';\nimport DialogDelete from './Dialogs/Delete';\nimport DialogAddNewScript from './Dialogs/AddNewScript';\nimport DialogNew from './Dialogs/New';\nimport DialogError from './Dialogs/Error';\nimport DialogAdapterDebug from './Dialogs/AdapterDebug';\nimport type { ScriptType } from '@/types';\n\nconst MENU_ITEM_HEIGHT = 48;\nconst COLOR_RUN = green[400];\nconst COLOR_PROBLEM = yellow[400];\nconst COLOR_PAUSE = red[400];\nconst ROOT_ID = 'script.js';\nconst COMMON_ID = `${ROOT_ID}.common`;\nconst GLOBAL_ID = `${ROOT_ID}.global`;\nconst NARROW_WIDTH = 350;\nconst LEVEL_PADDING = 16;\n\nconst SELECTED_STYLE: React.CSSProperties = {\n    background: '#164477',\n    color: 'white',\n};\n\nconst styles: Record<string, any> = {\n    drawerPaper: {\n        position: 'relative',\n        width: '100%', //Theme.menu.width,\n        height: '100%',\n        overflow: 'hidden',\n    },\n    toolbar: (theme: IobTheme): React.CSSProperties => ({\n        height: theme.toolbar.height,\n    }),\n    toolbarButtons: (theme: IobTheme): React.CSSProperties => ({\n        color: theme.palette.mode === 'dark' ? 'white !important' : 'black !important',\n    }),\n    iconButtonsDisabled: {\n        filter: 'grayscale(100%)',\n        opacity: 0.5,\n    },\n    toolbarSearch: {\n        width: 'calc(100% - 105px)',\n        lineHeight: '34px',\n        marginLeft: 5,\n    },\n    iconButtons: {\n        width: 32,\n        height: 32,\n        padding: 2,\n    },\n    iconDropdownMenu: {\n        paddingRight: 5,\n    },\n    iconOnTheRight: {\n        position: 'absolute',\n        right: 10,\n        top: 'calc(50% - 8px)',\n    },\n    menu: {\n        width: '100%',\n        height: '100%',\n    },\n    innerMenu: {\n        width: '100%',\n        height: 'calc(100% - 76px)',\n        overflowX: 'hidden',\n        overflowY: 'auto',\n    },\n    listItemIcon: {\n        minWidth: 32,\n    },\n    filterIcon: {\n        width: 18,\n        height: 18,\n        borderRadius: 2,\n        marginRight: 5,\n    },\n    scriptIcon: {\n        width: 18,\n        height: 18,\n        borderRadius: 2,\n        marginTop: 4,\n        marginBottom: 4,\n        marginLeft: 8,\n        marginRight: 4,\n    },\n    folder: {\n        //background: theme.palette.mode === 'dark' ? '#6a6a6a' : '#e2e2e2',\n        cursor: 'pointer',\n        padding: 0,\n        userSelect: 'none',\n    },\n    folderReorder: {\n        opacity: 0.3,\n        transitionDuration: '0.5s',\n        transitionProperty: 'opacity',\n    },\n    folderIcon: {\n        width: 20,\n        height: 20,\n    },\n    folderIconReorder: {\n        paddingTop: 4,\n        paddingBottom: 4,\n        paddingLeft: 8,\n        paddingRight: 4,\n    },\n    folderIconNoReorder: {\n        cursor: 'pointer',\n        paddingTop: 4,\n        paddingBottom: 4,\n        paddingLeft: 8,\n        paddingRight: 4,\n    },\n    script: {\n        cursor: 'pointer',\n        padding: 0,\n        userSelect: 'none',\n    },\n    scriptReorder: {\n        opacity: 1,\n        transitionDuration: '0.5s',\n        transitionProperty: 'opacity',\n    },\n    reorder: {\n        //padding: '9px 16px 9px 9px',\n    },\n    expandButton: {\n        width: 37,\n        height: 37,\n    },\n    selected: SELECTED_STYLE,\n    instances: {\n        color: 'gray',\n        fontSize: 'smaller',\n    },\n    childrenCount: {\n        fontSize: 10,\n        opacity: 0.4,\n    },\n    footer: {\n        height: 24,\n        display: 'flex',\n    },\n    footerButtons: (theme: IobTheme): any => ({\n        '& img': {\n            color: theme.palette.mode === 'dark' ? '#ffffff' : '#111111',\n            cursor: 'pointer',\n            mt: '1px',\n            mr: '2px',\n            height: 22,\n            width: 22,\n            '&:hover': {\n                backgroundColor: '#dbdbdb',\n            },\n        },\n        '& svg': {\n            color: theme.palette.mode === 'dark' ? '#ffffff' : '#111111',\n            cursor: 'pointer',\n            mt: '1px',\n            mr: '2px',\n            height: 22,\n            width: 22,\n            '&:hover': {\n                backgroundColor: '#dbdbdb',\n            },\n        },\n    }),\n    footerButtonsRight: {\n        float: 'right',\n    },\n\n    mainList: {\n        '& .js-folder-dragover>div>li>.folder-reorder': {\n            background: '#40adff',\n        },\n        '& .js-folder-dragging .folder-reorder': {\n            opacity: 1,\n        },\n        '& .js-folder-dragging .script-reorder': {\n            opacity: 0.3,\n        },\n    },\n};\n\nconst images: Record<ScriptType | 'def', string> = {\n    Blockly: ImgBlockly,\n    'Javascript/js': ImgJS,\n    def: ImgJS,\n    Rules: ImgRules,\n    'TypeScript/ts': ImgTypeScript,\n};\n\nfunction getObjectName(id: string, obj: ioBroker.Object, lang?: ioBroker.Languages): string {\n    lang = lang || I18n.getLanguage();\n    if (obj?.common?.name) {\n        if (typeof obj.common.name === 'object') {\n            return (obj.common.name[lang] || obj.common.name.en || id.replace(/^script\\.js./, '')).toString();\n        }\n\n        return obj.common.name.toString();\n    }\n\n    return id.replace(/^script\\.js./, '');\n}\n\ntype ListElementFolder = {\n    id: string;\n    depth: number;\n    index: number;\n    parent: string | null;\n    parentIndex: number | null;\n    title: string;\n    type: 'folder';\n    filteredPartly?: boolean;\n    filtered?: boolean;\n};\n\ntype ListElementScript = {\n    id: string;\n    depth: number;\n    index: number;\n    parent: string | null;\n    title: string;\n    enabled: boolean;\n    type: ScriptType;\n    instance: number | null;\n    parentIndex: number;\n    filteredPartly?: boolean;\n    filtered?: boolean;\n};\n\ntype ListElement = ListElementFolder | ListElementScript;\n\nfunction prepareList(data: Record<string, ioBroker.ScriptObject | ioBroker.ChannelObject>): ListElement[] {\n    const result: ListElement[] = [\n        {\n            id: ROOT_ID,\n            depth: 0,\n            index: 0,\n            parent: null,\n            title: 'root',\n            type: 'folder',\n            parentIndex: null,\n        },\n    ];\n    const ids: string[] = Object.keys(data);\n\n    /*ids.sort((a, b) => {\n        if ((a === 'script.js.common' || a === 'script.js.global') && (b === 'script.js.common' || b === 'script.js.global')) {\n            return a > b ? 1 : -1;\n        } else if (a === 'script.js.common' || a === 'script.js.global' || b === 'script.js.common' || b === 'script.js.global') {\n            return 1;\n        } else {\n            return a > b ? 1 : -1;\n        }\n    });*/\n\n    for (let i = 0; i < ids.length; i++) {\n        const obj = data[ids[i]];\n        const parts = ids[i].split('.');\n        parts.pop();\n        if (obj.type === 'script') {\n            result.push({\n                id: ids[i],\n                title: getObjectName(ids[i], obj),\n                enabled: !!obj?.common?.enabled,\n                depth: parts.length - 1,\n                type: obj.common.engineType as 'Javascript/js' | 'TypeScript/ts' | 'Blockly' | 'Rules',\n                parent: parts.length > 1 ? parts.join('.') : null,\n                instance: obj.common.engine ? parseInt(obj.common.engine.split('.').pop() as string, 10) || 0 : null,\n                index: 0, // temporary. It will be filled below\n                parentIndex: 0, // temporary. It will be filled below\n            });\n        } else {\n            result.push({\n                id: ids[i],\n                title: getObjectName(ids[i], obj),\n                depth: parts.length - 1,\n                type: 'folder',\n                parent: parts.length > 1 ? parts.join('.') : null,\n                index: 0, // temporary. It will be filled below\n                parentIndex: null, // temporary. It will be filled below\n            });\n        }\n    }\n\n    // Place all folder-less scripts at start\n    /*result.sort((a, b) => {\n        // without folders => always at start\n        if (!a.parent && a.type !== 'folder' && !b.parent && b.type !== 'folder') {\n            if (a.id === b.id) {\n                return 0;\n            } else {\n                return a.id > b.id ? 1 : -1;\n            }\n        } else if (!a.parent && a.type !== 'folder') {\n            return -1;\n        } else if (!b.parent && b.type !== 'folder') {\n            return 1;\n        } else {\n            // common and global are always at the end\n            if ((a.id.startsWith('script.js.common') || a.id.startsWith('script.js.global')) &&\n                (b.id.startsWith('script.js.common') || b.id.startsWith('script.js.global'))) {\n                if (a.id === b.id) {\n                    return 0;\n                } else {\n                    return a.id > b.id ? 1 : -1;\n                }\n            } else if (a.id.startsWith('script.js.common') || a.id.startsWith('script.js.global')) {\n                return 1;\n            } else if (b.id.startsWith('script.js.common') || b.id.startsWith('script.js.global')) {\n                return -1;\n            } else {\n                if (a.id === b.id) {\n                    return 0;\n                } else {\n                    return a.id > b.id ? 1 : -1;\n                }\n            }\n        }\n    });*/\n\n    let modified;\n    do {\n        modified = false;\n        // check if all parents exist\n        // eslint-disable-next-line\n        result.forEach(item => {\n            if (item.parent) {\n                const parent = result.find(it => it.id === item.parent);\n                if (!parent) {\n                    const parts = item.parent.split('.');\n                    parts.pop();\n                    result.push({\n                        id: item.parent,\n                        title: item.parent.split('.').pop() || '',\n                        depth: parts.length - 1,\n                        type: 'folder',\n                        parent: parts.length > 1 ? parts.join('.') : null,\n                        index: 0, // temporary. It will be filled below\n                        parentIndex: null, // temporary. It will be filled below\n                    });\n                    modified = true;\n                }\n            }\n        });\n    } while (modified);\n\n    // Folders first\n    result.sort((a, b) => {\n        const idA = a.id.toLowerCase();\n        const idB = b.id.toLowerCase();\n        if (a.type === 'folder' && b.type !== 'folder') {\n            return -1;\n        }\n        if (b.type === 'folder' && a.type !== 'folder') {\n            return 1;\n        }\n\n        if (idA > idB) {\n            return 1;\n        }\n        if (idA < idB) {\n            return -1;\n        }\n        return 0;\n    });\n\n    // Fill all indexes\n    result.forEach((item, i) => (item.index = i));\n\n    // Fill all parentIndex\n    result.forEach(item => {\n        if (item.parent) {\n            const parent = result.find(it => it.id === item.parent);\n            if (parent) {\n                item.parentIndex = parent.index;\n            }\n        }\n    });\n\n    return result;\n}\n\nexport function Droppable(props: {\n    children: (React.JSX.Element | null)[];\n    onDrop: (obj: { name: string }) => void;\n}): React.JSX.Element {\n    const { onDrop } = props;\n\n    const [{ isOver, isOverAny }, drop] = useDrop({\n        accept: ['script'],\n        drop: (e: { name: string }): undefined | void => (isOver ? onDrop(e) : undefined),\n        collect: monitor => ({\n            isOver: monitor.isOver({ shallow: true }),\n            isOverAny: monitor.isOver(),\n        }),\n    });\n\n    return (\n        <div\n            ref={drop}\n            className={Utils.clsx(isOver && 'js-folder-dragover', isOverAny && 'js-folder-dragging')}\n        >\n            {props.children}\n        </div>\n    );\n}\n\ninterface DraggableProps {\n    name: string;\n    children: React.JSX.Element | (React.JSX.Element | React.JSX.Element[] | null)[] | null;\n}\n\nexport function Draggable(props: DraggableProps): React.JSX.Element {\n    const { name } = props;\n    const [{ opacity }, drag] = useDrag({\n        type: 'script',\n        item: () => ({ name }),\n        collect: monitor => ({ opacity: monitor.isDragging() ? 0.3 : 1 }),\n    });\n    // About transform: https://github.com/react-dnd/react-dnd/issues/832#issuecomment-442071628\n    return (\n        <div\n            ref={drag}\n            style={{ opacity, transform: 'translate3d(0, 0, 0)' }}\n        >\n            {props.children}\n        </div>\n    );\n}\n\ninterface SideDrawerProps {\n    socket: AdminConnection;\n    onEdit: (id: string) => void;\n    onEnableDisable: (id: string, enabled: boolean) => void;\n    onDelete: (id: string) => void;\n    onExport: () => void;\n    onImport: () => void;\n    onRename: (oldId: string, newId: string, newName?: string, newInstance?: number) => void;\n    instances: number[];\n    scripts: Record<string, ioBroker.ScriptObject | ioBroker.ChannelObject>;\n    runningInstances: Record<string, boolean>;\n    expertMode: boolean;\n    themeName: ThemeName;\n    width: number;\n    debugMode: boolean;\n    version: string;\n    selectId: string;\n    scriptsHash: number;\n    onExpertModeChange?: (expertMode: boolean) => void;\n    onThemeChange?: (theme: ThemeName) => void;\n    onSearch?: (searchText: string) => void;\n    onAddNew?: (\n        id: string,\n        name: string,\n        isFolder: boolean,\n        instance?: number,\n        type?: ScriptType | 'folder',\n        source?: string,\n    ) => void;\n    onDebugInstance: (data: { instance: string; adapter: string }) => void;\n}\n\ninterface SideDrawerState {\n    listItems: ListElement[];\n    expanded: string[];\n    problems: string[];\n    reorder: boolean;\n    themeName: ThemeName;\n    selected: string | null;\n    creatingScript: null | ScriptType;\n    creatingFolder: boolean;\n    copingScript: string;\n    renaming: string | null;\n    deleting: string | null;\n    choosingType: boolean;\n    errorText: string;\n    instances: number[];\n    menuOpened: boolean;\n    menuAnchorEl: null | HTMLElement;\n    menuAnchorFilterEl: null | HTMLElement;\n    searchMode: boolean;\n    expertMode: boolean;\n    searchText: string;\n    width: number;\n    typeFilter: string;\n    statusFilter: string;\n    runningInstances: Record<string, boolean>;\n    scriptsHash: number;\n    showAdapterDebug: boolean;\n    isAllZeroInstances: boolean;\n}\n\nclass SideDrawer extends React.Component<SideDrawerProps, SideDrawerState> {\n    private readonly inputRef: React.RefObject<HTMLInputElement>;\n\n    private filterTimer: ReturnType<typeof setTimeout> | null;\n\n    private problems: string[] | null;\n\n    private problemsTimer: ReturnType<typeof setTimeout> | null;\n\n    private readonly onProblemUpdatedBound: (id: string, state: ioBroker.State | null | undefined) => void;\n\n    private parent: string | null = null;\n\n    constructor(props: SideDrawerProps) {\n        super(props);\n\n        const expandedStr = window.localStorage ? window.localStorage.getItem('SideMenu.expanded') : '[]';\n        let expanded: string[];\n        try {\n            expanded = JSON.parse(expandedStr || '[]') || [];\n        } catch {\n            expanded = [];\n        }\n\n        this.inputRef = React.createRef<HTMLInputElement>();\n\n        this.state = {\n            listItems: prepareList(props.scripts || {}),\n            expanded,\n            problems: [],\n            reorder: false,\n            themeName: this.props.themeName,\n            selected: window.localStorage ? window.localStorage.getItem('SideMenu.selected') || null : null,\n            creatingScript: null,\n            creatingFolder: false,\n            copingScript: '',\n            renaming: null,\n            deleting: null,\n            choosingType: false,\n            errorText: '',\n            instances: props.instances || [],\n            menuOpened: false,\n            menuAnchorEl: null,\n            menuAnchorFilterEl: null,\n            searchMode: false,\n            expertMode: this.props.expertMode,\n            searchText: '',\n            width: this.props.width || 300,\n            typeFilter: window.localStorage ? window.localStorage.getItem('SideMenu.typeFilter') || '' : '', // blockly, js, ts\n            statusFilter: window.localStorage ? window.localStorage.getItem('SideMenu.statusFilter') || '' : '',\n            runningInstances: this.props.runningInstances || {},\n            scriptsHash: props.scriptsHash,\n            showAdapterDebug: false,\n            isAllZeroInstances: false,\n        };\n\n        const newExp = this.ensureSelectedIsVisible();\n        if (newExp) {\n            Object.assign(this.state, { expanded: newExp });\n        }\n\n        // debounce search process\n        this.filterTimer = null;\n\n        Object.assign(this.state, { isAllZeroInstances: this.getIsAllZeroInstances() });\n\n        this.problems = null; //cache\n        this.problemsTimer = null;\n        this.onProblemUpdatedBound = this.onProblemUpdated.bind(this);\n    }\n\n    readProblems(cb: () => void, tasks?: string[]): void {\n        if (!tasks) {\n            tasks = Object.keys(this.props.scripts);\n        }\n        if (!tasks || !tasks.length) {\n            cb && cb();\n        } else {\n            const id: string = tasks.shift() as string;\n            const scriptObj: ioBroker.ScriptObject = this.props.scripts[id] as ioBroker.ScriptObject;\n            if (\n                this.props.scripts?.[id].type === 'script' &&\n                scriptObj.common?.enabled &&\n                !id.match(/^script\\.js\\.global\\./) // GLOBAL_ID\n            ) {\n                const instance = scriptObj.common.engine.split('.').pop();\n                const that = this; // sometimes lambda does not work\n                const _id = `javascript.${instance}.scriptProblem.${id.substring(ROOT_ID.length + 1)}`;\n\n                void this.props.socket.getState(_id).then((state: ioBroker.State | null | undefined): void => {\n                    that.onProblemUpdated(_id, state);\n                    setTimeout(() => that.readProblems(cb, tasks), 0);\n                });\n            } else {\n                setTimeout(() => this.readProblems(cb, tasks), 0);\n            }\n        }\n    }\n\n    componentDidMount(): void {\n        this.readProblems(() => {\n            this.props.instances.forEach(instance => {\n                void this.props.socket.subscribeState(\n                    `javascript.${instance}.scriptProblem.*`,\n                    this.onProblemUpdatedBound,\n                );\n            });\n        });\n    }\n\n    componentWillUnmount(): void {\n        this.props.instances.forEach(instance => {\n            this.props.socket.unsubscribeState(`javascript.${instance}.scriptProblem.*`, this.onProblemUpdatedBound);\n        });\n    }\n\n    onProblemUpdated(id: string, state: ioBroker.State | null | undefined): void {\n        if (!state || !id) {\n            return;\n        }\n        id = `${ROOT_ID}.${id.replace(/^javascript\\.\\d+\\.scriptProblem\\./, '')}`;\n\n        if (!this.problems) {\n            this.problems = JSON.parse(JSON.stringify(this.state.problems)) || [];\n        }\n        let changed = false;\n\n        if (state.val) {\n            if (!(this.problems as string[]).includes(id)) {\n                (this.problems as string[]).push(id);\n                changed = true;\n            }\n        } else {\n            const pos = (this.problems as string[]).indexOf(id);\n            if (pos !== -1) {\n                (this.problems as string[]).splice(pos, 1);\n                changed = true;\n            }\n        }\n\n        if (changed && !this.problemsTimer) {\n            this.problemsTimer = setTimeout(() => {\n                this.problemsTimer = null;\n                this.setState({ problems: this.problems as string[] });\n                this.problems = null;\n            }, 300);\n        }\n    }\n\n    static filterListStatic(\n        isSearchEnabled: boolean,\n        listItems: ListElement[],\n        searchMode: boolean,\n        searchText: string,\n        objects: Record<string, ioBroker.ScriptObject | ioBroker.ChannelObject>,\n    ): Partial<SideDrawerState> | null {\n        listItems = JSON.parse(JSON.stringify(listItems));\n        let changed = false;\n        const newState: Partial<SideDrawerState> = { listItems };\n        if (isSearchEnabled && searchMode && searchText) {\n            const text = searchText.toLowerCase();\n            listItems.forEach(item => {\n                const id = item.title.toLowerCase();\n                item.filteredPartly = false;\n                let found = id.includes(text);\n                const common: ioBroker.ScriptCommon | undefined = objects?.[item.id]?.common as ioBroker.ScriptCommon;\n                if (!found && common?.source) {\n                    if (common.engineType === 'Blockly') {\n                        const pos = common.source.lastIndexOf('//');\n                        found = common.source.substring(0, pos).toLowerCase().includes(text);\n                    } else {\n                        found = common.source.toLowerCase().includes(text);\n                    }\n                }\n                if (found) {\n                    if (item.filtered) {\n                        item.filtered = false;\n                        changed = true;\n                    }\n                } else if (!item.filtered) {\n                    item.filtered = true;\n                    changed = true;\n                }\n            });\n\n            if (changed) {\n                // check that all parents of every non-filtered item are visible\n                for (let i = listItems.length - 1; i >= 0; i--) {\n                    const item: ListElement = listItems[i];\n                    if (!item.filtered || item.filteredPartly) {\n                        let it: ListElement | null = item;\n                        do {\n                            if (it?.parent && listItems[it.parentIndex as number]) {\n                                changed = true;\n                                listItems[it.parentIndex as number].filteredPartly = true;\n                            }\n                            it =\n                                it?.parent && listItems[it.parentIndex as number]\n                                    ? listItems[it.parentIndex as number]\n                                    : null;\n                        } while (it);\n                    }\n                }\n            }\n        } else {\n            listItems.forEach(item => {\n                if (item.filtered || item.filteredPartly) {\n                    item.filtered = false;\n                    item.filteredPartly = false;\n                    changed = true;\n                }\n            });\n            if (!isSearchEnabled) {\n                newState.searchText = '';\n                newState.searchMode = false;\n                changed = true;\n            }\n        }\n\n        return changed ? newState : null;\n    }\n\n    filterList(isSearchEnabled: boolean, cb?: () => void): void {\n        const newState = SideDrawer.filterListStatic(\n            isSearchEnabled,\n            this.state.listItems,\n            this.state.searchMode,\n            this.state.searchText,\n            this.props.scripts,\n        );\n\n        if (newState) {\n            this.setState(newState as SideDrawerState, () => cb && cb());\n        } else if (cb) {\n            cb();\n        }\n    }\n\n    static ensureSelectedIsVisibleStatic(\n        selected: string | ListElement | null,\n        expanded: string[],\n        listItems: ListElement[],\n    ): string[] | null {\n        expanded = JSON.parse(JSON.stringify(expanded));\n        let changed = false;\n\n        // ensure that the item is visible\n        let el: ListElement | undefined | null =\n            typeof selected === 'object' ? selected : listItems.find(it => it.id === selected);\n        do {\n            // eslint-disable-next-line\n            if (el?.parent) {\n                const parent: string = el.parent;\n                el = listItems.find(it => it.id === parent);\n            } else {\n                el = undefined;\n            }\n            if (el) {\n                if (!expanded.includes(el.id)) {\n                    expanded.push(el.id);\n                    changed = true;\n                }\n            }\n        } while (el);\n\n        return changed ? expanded : null;\n    }\n\n    ensureSelectedIsVisible(selected?: string | ListElement, expanded?: string[]): string[] | null {\n        return SideDrawer.ensureSelectedIsVisibleStatic(\n            selected || this.state.selected,\n            expanded || this.state.expanded,\n            this.state.listItems,\n        );\n    }\n\n    static getDerivedStateFromProps(props: SideDrawerProps, state: SideDrawerState): Partial<SideDrawerState> | null {\n        const newState: Partial<SideDrawerState> = {};\n        let changed = false;\n        if (state.expertMode !== props.expertMode) {\n            changed = true;\n            newState.expertMode = props.expertMode;\n        }\n        if (state.scriptsHash !== props.scriptsHash && props.scripts) {\n            const listItems = prepareList(props.scripts || {});\n\n            newState.listItems = listItems;\n\n            if (state.searchText) {\n                const nState = SideDrawer.filterListStatic(\n                    true,\n                    listItems,\n                    state.searchMode,\n                    state.searchText,\n                    props.scripts,\n                );\n                nState && Object.assign(newState, nState);\n            }\n\n            const isAllZeroInstances = SideDrawer.getIsAllZeroInstancesStatic(listItems, props.instances || []);\n\n            const newExp = SideDrawer.ensureSelectedIsVisibleStatic(state.selected, state.expanded, state.listItems);\n\n            newState.isAllZeroInstances = isAllZeroInstances;\n            if (newExp) {\n                newState.expanded = newExp;\n            }\n            changed = true;\n        }\n\n        if (state.width !== props.width) {\n            changed = true;\n            newState.width = props.width;\n        }\n        if (state.themeName !== props.themeName) {\n            changed = true;\n            newState.themeName = props.themeName;\n        }\n\n        if (props.selectId && state.selected !== props.selectId) {\n            const item = state.listItems.find(item => item.id === props.selectId);\n\n            if (!state.reorder && item) {\n                const expanded = SideDrawer.ensureSelectedIsVisibleStatic(item, state.expanded, state.listItems);\n                newState.selected = item.id;\n                if (expanded) {\n                    newState.expanded = expanded;\n                }\n                changed = true;\n                window.localStorage && window.localStorage.setItem('SideMenu.selected', item.id);\n            }\n        }\n\n        if (changed) {\n            return newState;\n        }\n        return null;\n    }\n\n    static getIsAllZeroInstancesStatic(listItems: ListElement[], instances: number[]): boolean {\n        let isAllZeroInstances = !instances[0] && instances.length <= 1;\n\n        if (isAllZeroInstances) {\n            listItems.forEach(item => {\n                if (item.type !== 'folder' && item.instance !== 0) {\n                    isAllZeroInstances = false;\n                }\n            });\n        }\n        return isAllZeroInstances;\n    }\n\n    getIsAllZeroInstances(listItems?: ListElement[], instances?: number[]): boolean {\n        listItems = listItems || this.state.listItems;\n        instances = instances || this.state.instances;\n        return SideDrawer.getIsAllZeroInstancesStatic(\n            listItems || this.state.listItems,\n            instances || this.state.instances,\n        );\n    }\n\n    saveExpanded(expanded?: string[]): void {\n        window.localStorage.setItem('SideMenu.expanded', JSON.stringify(expanded || this.state.expanded));\n    }\n\n    showError(errorText: string): void {\n        this.setState({ errorText });\n    }\n\n    onToggle(id: string, e?: React.MouseEvent<any>): void {\n        e?.stopPropagation();\n        if (id === ROOT_ID) {\n            return;\n        }\n        const expanded = [...this.state.expanded];\n        const newState: Partial<SideDrawerState> = { expanded };\n        const pos = expanded.indexOf(id);\n        if (pos !== -1) {\n            expanded.splice(pos, 1);\n            if (this.state.selected && this.state.selected.startsWith(`${id}.`)) {\n                newState.selected = id;\n                window.localStorage && window.localStorage.setItem('SideMenu.selected', id);\n            }\n        } else {\n            expanded.push(id);\n            expanded.sort();\n        }\n        this.setState({ expanded });\n        this.saveExpanded(expanded);\n    }\n\n    renderItemButtonsOnEnd(\n        item: ListElement,\n        children: ListElement[],\n    ): (React.JSX.Element | null)[] | React.JSX.Element | null {\n        if (this.state.reorder) {\n            return null;\n        }\n        if (item.type !== 'folder') {\n            let color: string = item.enabled ? COLOR_RUN : COLOR_PAUSE;\n            if (item.enabled && this.state.problems.includes(item.id)) {\n                color = COLOR_PROBLEM;\n            }\n\n            return [\n                <IconButton\n                    onClick={e => {\n                        e.stopPropagation();\n                        this.props.onEnableDisable && this.props.onEnableDisable(item.id, !item.enabled);\n                    }}\n                    title={item.enabled ? I18n.t('Pause script') : I18n.t('Run script')}\n                    disabled={this.props.debugMode}\n                    key=\"startStop\"\n                    style={{\n                        ...styles.iconButtons,\n                        ...(this.props.debugMode ? styles.iconButtonsDisabled : undefined),\n                        color,\n                    }}\n                    size=\"medium\"\n                >\n                    {item.enabled ? <IconPause /> : <IconPlay />}\n                </IconButton>,\n                this.state.width > NARROW_WIDTH ? (\n                    <IconButton\n                        key=\"delete\"\n                        style={this.props.debugMode ? styles.iconButtonsDisabled : undefined}\n                        title={I18n.t('Delete script')}\n                        disabled={item.id === GLOBAL_ID || item.id === COMMON_ID || this.props.debugMode}\n                        onClick={e => this.onDelete(item, e)}\n                        size=\"medium\"\n                    >\n                        <IconDelete />\n                    </IconButton>\n                ) : null,\n                <IconButton\n                    style={this.props.debugMode ? styles.iconButtonsDisabled : undefined}\n                    disabled={this.props.debugMode}\n                    key=\"openInEdit\"\n                    title={I18n.t('Edit script or just double click')}\n                    onClick={e => this.onEdit(item, e)}\n                    size=\"medium\"\n                >\n                    <IconDoEdit />\n                </IconButton>,\n            ];\n        }\n        if (this.state.width > NARROW_WIDTH) {\n            if (item.id !== ROOT_ID && item.id !== COMMON_ID && item.id !== GLOBAL_ID && children?.length) {\n                return (\n                    <IconButton\n                        style={this.props.debugMode ? styles.iconButtonsDisabled : undefined}\n                        key=\"delete\"\n                        title={I18n.t('Delete folder')}\n                        disabled={item.id === GLOBAL_ID || item.id === COMMON_ID || this.props.debugMode}\n                        onClick={e => this.onDelete(item, e)}\n                        size=\"medium\"\n                    >\n                        <IconDelete />\n                    </IconButton>\n                );\n            }\n        }\n        return null;\n    }\n\n    onDelete(item: string | ListElement | null, e?: React.MouseEvent): Promise<void> {\n        e?.stopPropagation();\n        return new Promise(resolve => {\n            if (!item) {\n                resolve();\n                return;\n            }\n            if (typeof item !== 'object') {\n                this.setState({ deleting: item }, () => resolve());\n            } else {\n                this.setState({ deleting: item.id }, () => resolve());\n            }\n        });\n    }\n\n    onEdit(item: ListElement, e?: React.MouseEvent): void {\n        this.onClick(item, e);\n        this.props.onEdit && this.props.onEdit(item.id);\n    }\n\n    getTextStyle(item: ListElement): React.CSSProperties {\n        if (!this.state.reorder && item.type !== 'folder') {\n            return {\n                //width: 130,\n                width: `calc(100% - ${this.state.width > NARROW_WIDTH ? 185 : 137}px)`,\n                overflow: 'hidden',\n                whiteSpace: 'nowrap',\n                flex: 'none',\n                padding: '0 16px 0 0',\n            };\n        }\n\n        return {\n            whiteSpace: 'nowrap',\n            padding: '0 16px 0 0',\n        };\n    }\n\n    onClick(item: ListElement, e?: React.MouseEvent): void {\n        e?.stopPropagation();\n        if (!this.state.reorder && item) {\n            const expanded = this.ensureSelectedIsVisible(item);\n            const newState: Partial<SideDrawerState> = { selected: item.id };\n            if (expanded) {\n                newState.expanded = expanded;\n            }\n            this.setState(newState as SideDrawerState);\n            window.localStorage && window.localStorage.setItem('SideMenu.selected', item.id);\n        }\n    }\n\n    onDblClick(item: ListElement, e?: React.MouseEvent): void {\n        e?.stopPropagation();\n        if (this.state.reorder) {\n            return;\n        }\n        if (item.type === 'folder') {\n            this.onToggle(item.id);\n        } else {\n            this.onEdit(item);\n        }\n    }\n\n    isFilteredOut(item: ListElement): boolean {\n        if (item.filtered && !item.filteredPartly) {\n            return true;\n        }\n\n        if (this.state.typeFilter && item.type !== 'folder' && item.type !== this.state.typeFilter) {\n            return true;\n        }\n\n        if (\n            this.state.statusFilter &&\n            item.type !== 'folder' &&\n            ((this.state.statusFilter === 'running' && !item.enabled) ||\n                (this.state.statusFilter === 'paused' && item.enabled) ||\n                (this.state.statusFilter === 'problems' &&\n                    (!item.enabled || this.state.problems.indexOf(item.id) === -1)))\n        ) {\n            return true;\n        }\n\n        return item.id === GLOBAL_ID && !this.state.expertMode;\n    }\n\n    renderListItem(\n        item: ListElement,\n        children: ListElement[],\n        childrenFiltered: ListElement[],\n    ): React.JSX.Element | null {\n        if (item.id === ROOT_ID && !this.state.reorder) {\n            return null;\n        }\n\n        const depthPx = (this.state.reorder ? item.depth : item.depth - 1) * LEVEL_PADDING;\n\n        let title: string | React.JSX.Element[] = item.title;\n\n        if (this.state.searchText) {\n            const pos = title.toLowerCase().indexOf(this.state.searchText.toLowerCase());\n            if (pos !== -1) {\n                title = [\n                    <span key=\"first\">{title.substring(0, pos)}</span>,\n                    <span\n                        key=\"second\"\n                        style={{ color: 'orange' }}\n                    >\n                        {title.substring(pos, pos + this.state.searchText.length)}\n                    </span>,\n                    <span key=\"third\">{title.substring(pos + this.state.searchText.length)}</span>,\n                ];\n            }\n        }\n\n        if (!this.state.isAllZeroInstances && item.type !== 'folder') {\n            title = [\n                <span key=\"title\">{title}</span>,\n                <span\n                    key=\"instance\"\n                    title={I18n.t('Instance')}\n                    style={styles.instances}\n                >\n                    [{item.instance}]\n                </span>,\n            ];\n        }\n        const reorder = this.state.reorder && !this.props.debugMode;\n\n        const style = Object.assign(\n            {\n                marginLeft: depthPx,\n                cursor: item.type === 'folder' && reorder ? 'default' : 'inherit',\n                width: `calc(100% - ${depthPx}px)`,\n            },\n            item.id === this.state.selected && !reorder ? SELECTED_STYLE : undefined,\n        );\n\n        if (!reorder) {\n            style.opacity = item.filteredPartly ? 0.5 : 1;\n        }\n\n        if (item.id === GLOBAL_ID && item.id !== this.state.selected) {\n            style.color = '#00a200';\n        }\n\n        let isExpanded = item.id === ROOT_ID;\n        if (!isExpanded && children) {\n            isExpanded = this.state.expanded.includes(item.id);\n        }\n\n        let iconStyle;\n        if (item.type === 'folder') {\n            iconStyle = {\n                ...styles.folderIcon,\n                ...(reorder ? styles.folderIconReorder : styles.folderIconNoReorder),\n            };\n        } else {\n            iconStyle = {\n                ...styles.scriptIcon,\n                // ...(reorder ? styles.scriptIconReorder : styles.scriptIconNoReorder),\n            };\n        }\n        if (item.id === GLOBAL_ID) {\n            iconStyle.color = '#356956';\n        } else if (item.id === COMMON_ID) {\n            iconStyle.color = '#4899e1';\n        }\n\n        let childrenCount = null;\n        if ((childrenFiltered && childrenFiltered.length) || (children && children.length)) {\n            childrenCount = (\n                <span style={styles.childrenCount}>\n                    {childrenFiltered && childrenFiltered.length !== children.length\n                        ? `${childrenFiltered.length}(${children.length})`\n                        : children.length}\n                </span>\n            );\n        }\n\n        const combinedStyle = {\n            ...(item.type === 'folder' ? styles.folder : styles.script),\n            ...(reorder ? styles.reorder : undefined),\n            ...(reorder && item.type !== 'folder' ? styles.scriptReorder : undefined),\n            ...(reorder && item.type === 'folder' ? styles.folderReorder : undefined),\n            ...style,\n        };\n\n        return (\n            <ListItem\n                key={item.id}\n                style={combinedStyle}\n                className={Utils.clsx(\n                    reorder && item.type === 'folder' && 'folder-reorder',\n                    reorder && item.type !== 'folder' && 'script-reorder',\n                )}\n                onClick={e => this.onClick(item, e)}\n                onDoubleClick={e => this.onDblClick(item, e)}\n                secondaryAction={this.renderItemButtonsOnEnd(item, children)}\n            >\n                <ListItemIcon style={styles.listItemIcon}>\n                    {item.type === 'folder' ? (\n                        reorder || isExpanded ? (\n                            <IconFolderOpened\n                                style={iconStyle}\n                                onClick={e => !reorder && this.onToggle(item.id, e)}\n                            />\n                        ) : (\n                            <IconFolder\n                                style={iconStyle}\n                                onClick={e => !reorder && this.onToggle(item.id, e)}\n                            />\n                        )\n                    ) : (\n                        <img\n                            style={iconStyle}\n                            alt={item.type}\n                            src={images[item.type] || images.def}\n                        />\n                    )}\n                </ListItemIcon>\n                <ListItemText\n                    sx={{\n                        '& .MuiListItemText-primary':\n                            item.id === this.state.selected && !reorder ? styles.selected : undefined,\n                    }}\n                    style={this.getTextStyle(item)}\n                    primary={\n                        <span style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\n                            {title}\n                            {childrenCount}\n                        </span>\n                    }\n                />\n            </ListItem>\n        );\n    }\n\n    onDragFinish(oldId: string, target: string): undefined {\n        let newId = `${target}.${oldId.split('.').pop()}`;\n        if (newId !== oldId) {\n            // If target yet exists => add Copy to\n            if (this.state.listItems.find(item => item.id === newId)) {\n                newId += `_${I18n.t('copy')}`;\n            }\n\n            this.props.onRename && this.props.onRename(oldId, newId);\n        }\n        return undefined;\n    }\n\n    renderOneItem(items: ListElement[], item: ListElement /* , dragging */): (React.JSX.Element | null)[] | null {\n        const childrenFiltered: ListElement[] =\n            this.state.statusFilter || this.state.typeFilter\n                ? items.filter(i => (i.parent === item.id ? !this.isFilteredOut(i) : false))\n                : [];\n\n        const children: ListElement[] = items.filter(i => i.parent === item.id);\n\n        if (this.isFilteredOut(item)) {\n            return null;\n        }\n\n        if (item.type === 'folder' && (this.state.statusFilter || this.state.typeFilter) && !childrenFiltered.length) {\n            return null;\n        }\n        const reorder = this.state.reorder && !this.props.debugMode;\n\n        const element = this.renderListItem(item, children, childrenFiltered);\n        const result: (React.JSX.Element | null)[] = [];\n        let reactChildren: React.JSX.Element[] | undefined;\n        if (children && (reorder || this.state.expanded.includes(item.id) || item.id === ROOT_ID)) {\n            reactChildren = children.map(it => this.renderOneItem(items, it) as unknown as React.JSX.Element);\n        }\n\n        if (reorder) {\n            if (item.type === 'folder') {\n                result.push(\n                    <Droppable\n                        key={`droppable_${item.id}`}\n                        onDrop={e => this.onDragFinish(e.name, item.id)}\n                    >\n                        <Draggable\n                            key={`draggable_${item.id}`}\n                            name={item.id}\n                        >\n                            {element}\n                        </Draggable>\n                        {(reactChildren as unknown as React.JSX.Element) || null}\n                    </Droppable>,\n                );\n            } else {\n                result.push(\n                    <Draggable\n                        key={`draggable_${item.id}`}\n                        name={item.id}\n                    >\n                        {element}\n                        {(reactChildren as unknown as React.JSX.Element) || null}\n                    </Draggable>,\n                );\n            }\n        } else {\n            result.push(element);\n            reactChildren?.forEach(e => result.push(e));\n        }\n\n        return result;\n    }\n\n    renderAllItems(items: ListElement[]): React.JSX.Element {\n        const result = items.filter(item => !item.parent).map(item => this.renderOneItem(items, item));\n\n        return (\n            <List\n                dense\n                disablePadding\n                sx={styles.mainList}\n            >\n                {result}\n            </List>\n        );\n    }\n\n    onAddNew(e?: React.MouseEvent<any>): void {\n        e?.stopPropagation();\n        let item = this.state.listItems.find(i => i.id === this.state.selected);\n        let parent = ROOT_ID;\n        while (item && item.type !== 'folder') {\n            item = this.state.listItems[item.parentIndex];\n        }\n        if (item) {\n            parent = item.id;\n        }\n\n        this.parent = parent;\n        this.setState({ choosingType: true });\n    }\n\n    onCopy(e: React.MouseEvent<any>, id: string | null): void {\n        e?.stopPropagation();\n        let item = this.state.listItems.find(i => i.id === id);\n        let parent = ROOT_ID;\n        while (item && item.type !== 'folder') {\n            item = this.state.listItems[item.parentIndex];\n        }\n        if (item) {\n            parent = item.id;\n        }\n\n        this.parent = parent;\n        this.setState({ copingScript: id || '' });\n    }\n\n    onRename(e: React.MouseEvent): void {\n        e?.stopPropagation();\n        this.setState({ renaming: this.state.selected });\n    }\n\n    getUniqueName(copyId?: string): string {\n        let i = 1;\n        let word = `${I18n.t('Script')} `;\n        if (copyId) {\n            const name = getObjectName(copyId, this.props.scripts[copyId]);\n            const m = name.match(/\\d+$/);\n            if (m) {\n                word = name.replace(/\\d+$/, '');\n                i = parseInt(m[0], 10) + 1;\n            } else {\n                word = name;\n            }\n        }\n\n        // eslint-disable-next-line\n        while (this.state.listItems.find(it => it.id === `${this.parent}.${word.replace(/\\.\\s/g, '_')}${i}`)) {\n            i++;\n        }\n\n        return word + i;\n    }\n\n    getUniqueFolderName(): string {\n        let i = 1;\n        // eslint-disable-next-line\n        while (this.state.listItems.find(it => it.id === `${this.parent}.${I18n.t('Folder')}_${i}`)) {\n            i++;\n        }\n        return `${I18n.t('Folder')} ${i}`;\n    }\n\n    onCloseMenu(cb: () => void): void {\n        this.setState({ menuOpened: false, menuAnchorEl: null, menuAnchorFilterEl: null }, cb);\n    }\n\n    /*\n    getFilterBadge() {\n        return [\n            this.state.statusFilter === true && <IconPlay style={{ ...styles.filterIcon, color: COLOR_RUN }} />,\n            this.state.statusFilter === false && <IconPause style={{ ...styles.filterIcon, color: COLOR_PAUSE }} />,\n            this.state.typeFilter === 'Blockly' && 'Bl',\n            this.state.typeFilter === 'Javascript/js' && 'JS',\n            this.state.typeFilter === 'TypeScript/ts' && 'TS',\n        ];\n    }\n    */\n\n    getMainMenu(children: ListElement[] | undefined, selectedItem: ListElement | undefined): React.JSX.Element {\n        return (\n            <Menu\n                key=\"menu\"\n                id=\"long-menu\"\n                anchorEl={this.state.menuAnchorEl}\n                open={this.state.menuOpened}\n                onClose={() => this.setState({ menuOpened: false, menuAnchorEl: null })}\n                slotProps={{\n                    paper: {\n                        style: {\n                            maxHeight: MENU_ITEM_HEIGHT * 7.5,\n                            // width: 200,\n                        },\n                    },\n                }}\n            >\n                {this.state.width <= NARROW_WIDTH ? (\n                    <MenuItem\n                        key=\"delete\"\n                        disabled={\n                            this.props.debugMode ||\n                            !this.state.selected ||\n                            this.state.selected === GLOBAL_ID ||\n                            this.state.selected === COMMON_ID ||\n                            !!children?.length\n                        }\n                        onClick={event => {\n                            event.stopPropagation();\n                            event.preventDefault();\n                            if (this.state.listItems.find(item => item.parent === this.state.selected)) {\n                                this.showError(I18n.t('Cannot delete non empty item!'));\n                                return;\n                            }\n\n                            this.setState({ menuOpened: false, menuAnchorEl: null }, () =>\n                                this.onDelete(this.state.selected).then(() => {}),\n                            );\n                        }}\n                    >\n                        <IconDelete style={{ ...styles.iconDropdownMenu, color: 'red' }} />\n                        {I18n.t('Delete')}\n                    </MenuItem>\n                ) : null}\n                <MenuItem\n                    key=\"expertMode\"\n                    disabled={this.props.debugMode}\n                    selected={this.state.expertMode}\n                    onClick={event => {\n                        event.stopPropagation();\n                        event.preventDefault();\n                        this.onCloseMenu(\n                            () =>\n                                this.props.onExpertModeChange && this.props.onExpertModeChange(!this.state.expertMode),\n                        );\n                    }}\n                >\n                    <IconExpert\n                        style={{ ...styles.iconDropdownMenu, color: this.state.expertMode ? 'orange' : 'inherit' }}\n                    />\n                    {I18n.t('Expert mode')}\n                </MenuItem>\n                {this.props.onExport && (\n                    <MenuItem\n                        key=\"exportAll\"\n                        onClick={event => {\n                            event.stopPropagation();\n                            event.preventDefault();\n                            this.onCloseMenu(() => this.props.onExport());\n                        }}\n                    >\n                        <IconExport style={styles.iconDropdownMenu} />\n                        {I18n.t('Export all scripts')}\n                    </MenuItem>\n                )}\n                {this.props.onImport && (\n                    <MenuItem\n                        disabled={this.props.debugMode}\n                        key=\"import\"\n                        onClick={event => {\n                            event.stopPropagation();\n                            event.preventDefault();\n                            this.onCloseMenu(() => this.props.onImport());\n                        }}\n                    >\n                        <IconImport style={styles.iconDropdownMenu} />\n                        {I18n.t('Import scripts')}\n                    </MenuItem>\n                )}\n                {this.props.onThemeChange && (\n                    <MenuItem\n                        key=\"dark\"\n                        onClick={() =>\n                            this.onCloseMenu(() => {\n                                if (this.props.onThemeChange) {\n                                    this.props.onThemeChange(Utils.toggleTheme(this.state.themeName));\n                                }\n                            })\n                        }\n                    >\n                        <IconDark style={styles.iconDropdownMenu} />\n                        {I18n.t('Change theme (actual \"%s\")', this.state.themeName)}\n                    </MenuItem>\n                )}\n                {this.props.onAddNew && (\n                    <MenuItem\n                        key=\"copy\"\n                        disabled={!this.state.selected || !selectedItem || selectedItem.type === 'folder'}\n                        onClick={event => {\n                            const selected = this.state.selected;\n                            this.onCloseMenu(() => this.onCopy(event, selected));\n                        }}\n                    >\n                        <IconCopy style={styles.iconDropdownMenu} />\n                        {I18n.t('Copy script')}\n                    </MenuItem>\n                )}\n                {this.state.expertMode && (\n                    <MenuItem\n                        disabled={this.props.debugMode}\n                        key=\"debugInstance\"\n                        onClick={event => {\n                            event.stopPropagation();\n                            event.preventDefault();\n                            this.onCloseMenu(() => this.setState({ showAdapterDebug: true }));\n                        }}\n                    >\n                        <IconDebug style={styles.iconDropdownMenu} />\n                        {I18n.t('Debug instance')}\n                    </MenuItem>\n                )}\n            </Menu>\n        );\n    }\n\n    // render menu and toolbar\n    getToolbarButtons(): React.JSX.Element[] {\n        const result: React.JSX.Element[] = [];\n        const reorder = this.state.reorder && !this.props.debugMode;\n        if (this.state.searchMode && !this.props.debugMode) {\n            result.push(\n                <Input\n                    key=\"searchInput\"\n                    value={this.state.searchText}\n                    style={styles.toolbarSearch}\n                    ref={this.inputRef}\n                    autoFocus\n                    placeholder={I18n.t('Search...')}\n                    onChange={e => {\n                        this.setState({ searchText: e.target.value });\n                        this.filterTimer && clearTimeout(this.filterTimer);\n                        this.filterTimer = setTimeout(() => {\n                            this.filterTimer = null;\n                            this.filterList(true);\n                            this.props.onSearch && this.props.onSearch(this.state.searchText);\n                        }, 400);\n                    }}\n                />,\n            );\n\n            result.push(\n                <IconButton\n                    key=\"disableSearch\"\n                    sx={styles.toolbarButtons}\n                    style={{ float: 'right' }}\n                    title={I18n.t('End search mode')}\n                    onClick={e => {\n                        e.stopPropagation();\n                        this.filterList(false, () => this.props.onSearch && this.props.onSearch(this.state.searchText));\n                    }}\n                    size=\"medium\"\n                >\n                    <IconClose />\n                </IconButton>,\n            );\n\n            this.state.searchText &&\n                result.push(\n                    <IconButton\n                        key=\"cleanSearch\"\n                        title={I18n.t('Clear search input')}\n                        sx={styles.toolbarButtons}\n                        style={{ marginTop: 7, float: 'right' }}\n                        onClick={e => {\n                            e.stopPropagation();\n                            this.setState({ searchText: '' }, () => {\n                                this.filterList(true);\n                                this.props.onSearch && this.props.onSearch(this.state.searchText);\n                            });\n                        }}\n                        size=\"medium\"\n                    >\n                        <IconClear fontSize=\"small\" />\n                    </IconButton>,\n                );\n        } else {\n            if (!reorder) {\n                // Open Menu\n                result.push(\n                    <IconButton\n                        key=\"menuButton\"\n                        aria-label=\"More\"\n                        aria-owns={this.state.menuOpened ? 'long-menu' : undefined}\n                        title={I18n.t('Menu')}\n                        aria-haspopup=\"true\"\n                        onClick={event => {\n                            event.stopPropagation();\n                            event.preventDefault();\n                            this.setState({ menuOpened: true, menuAnchorEl: event.currentTarget });\n                        }}\n                        size=\"medium\"\n                    >\n                        {/*<Badge style={styles.margin} badgeContent={this.getFilterBadge()}>*/}\n                        <IconMore />\n                        {/*</Badge>*/}\n                    </IconButton>,\n                );\n\n                const selectedItem: ListElement | undefined = this.state.listItems.find(\n                    it => it.id === this.state.selected,\n                );\n                let children: ListElement[] | undefined;\n                if (selectedItem && this.state.width <= NARROW_WIDTH && selectedItem.type === 'folder') {\n                    children = this.state.listItems.filter(i => i.parent === this.state.selected);\n                }\n\n                // Menu\n                result.push(this.getMainMenu(children, selectedItem));\n\n                // New Script\n                result.push(\n                    <IconButton\n                        disabled={this.props.debugMode}\n                        key=\"new-script\"\n                        title={I18n.t('Create new script')}\n                        sx={{\n                            ...styles.toolbarButtons,\n                            ...(this.props.debugMode ? styles.iconButtonsDisabled : undefined),\n                        }}\n                        style={{ color: reorder ? 'red' : 'inherit' }}\n                        onClick={e => this.onAddNew(e)}\n                        size=\"medium\"\n                    >\n                        <IconAdd />\n                    </IconButton>,\n                );\n\n                // New Folder\n                result.push(\n                    <IconButton\n                        disabled={this.props.debugMode}\n                        key=\"new-folder\"\n                        title={I18n.t('Create new folder')}\n                        sx={{\n                            ...styles.toolbarButtons,\n                            ...(this.props.debugMode ? styles.iconButtonsDisabled : undefined),\n                        }}\n                        style={{ color: reorder ? 'red' : 'inherit' }}\n                        onClick={e => this.onAddNew(e)}\n                        size=\"medium\"\n                    >\n                        <IconAddFolder />\n                    </IconButton>,\n                );\n            }\n\n            // Search\n            result.push(\n                <IconButton\n                    key=\"search\"\n                    disabled={reorder || this.props.debugMode}\n                    sx={{\n                        ...styles.toolbarButtons,\n                        ...(this.props.debugMode ? styles.iconButtonsDisabled : undefined),\n                    }}\n                    title={I18n.t('Search in scripts')}\n                    style={{ float: 'right', opacity: this.props.debugMode ? 0.5 : reorder ? 0 : 1 }}\n                    onClick={e => {\n                        e.stopPropagation();\n                        this.setState({ searchMode: true });\n                    }}\n                    size=\"medium\"\n                >\n                    <IconFind />\n                </IconButton>,\n            );\n\n            // Reorder button\n            result.push(\n                <IconButton\n                    disabled={this.props.debugMode}\n                    key=\"reorder\"\n                    title={I18n.t('Reorder scripts in folders')}\n                    sx={{\n                        ...styles.toolbarButtons,\n                        ...(this.props.debugMode ? styles.iconButtonsDisabled : undefined),\n                    }}\n                    style={{ color: reorder ? 'red' : 'inherit', float: 'right' }}\n                    onClick={e => {\n                        e.stopPropagation();\n                        this.setState({ reorder: !this.state.reorder });\n                    }}\n                    size=\"medium\"\n                >\n                    <IconReorder />\n                </IconButton>,\n            );\n\n            if (\n                !reorder &&\n                this.state.selected &&\n                this.state.selected !== GLOBAL_ID &&\n                this.state.selected !== COMMON_ID\n            ) {\n                // Rename\n                result.push(\n                    <IconButton\n                        sx={{\n                            ...styles.toolbarButtons,\n                            ...(this.props.debugMode ? styles.iconButtonsDisabled : undefined),\n                        }}\n                        disabled={this.props.debugMode}\n                        title={I18n.t('Rename')}\n                        key=\"rename\"\n                        onClick={e => this.onRename(e)}\n                        size=\"medium\"\n                    >\n                        <IconEdit />\n                    </IconButton>,\n                );\n\n                // const selectedItem = this.state.listItems.find(i => i.id === this.state.selected);\n                // if (selectedItem && selectedItem.type !== 'folder') {\n                //     // Restart\n                //     result.push((<IconButton sx={styles.toolbarButtons}\n                //          key=\"restart\"\n                //          onClick={e => {\n                //              e.stopPropagation();\n                //              this.props.onEnableDisable && this.props.onEnableDisable();\n                //          }}\n                //     ><IconRestart/></IconButton>));\n                // }\n            }\n            result.push(\n                <span\n                    key=\"version\"\n                    style={{ opacity: 0.5, fontSize: 10 }}\n                >\n                    v{this.props.version}\n                </span>,\n            );\n        }\n        return result;\n    }\n\n    getFolders(): { id: string; name: string }[] {\n        const folders: { id: string; name: string }[] = [{ id: ROOT_ID, name: I18n.t('Root folder') }];\n        this.state.listItems.forEach(item => {\n            if (item.type === 'folder' && item.id !== ROOT_ID) {\n                // root has been added above\n                if (!item.id.startsWith(GLOBAL_ID) || this.state.expertMode) {\n                    folders.push({ id: item.id, name: item.title });\n                }\n            }\n        });\n        return folders;\n    }\n\n    onCollapseAll(): void {\n        this.setState({ expanded: [] });\n        this.saveExpanded([]);\n    }\n\n    onExpandAll(): void {\n        const expanded: string[] = [];\n        this.state.listItems.forEach(\n            item => this.state.listItems.find(it => it.parent === item.id) && expanded.push(item.id),\n        );\n        this.setState({ expanded });\n        this.saveExpanded(expanded);\n    }\n\n    getBottomButtons(): React.JSX.Element[] | null {\n        if (this.state.reorder || this.props.debugMode) {\n            return null;\n        }\n        return [\n            <Box\n                key=\"filterByRunning\"\n                sx={styles.footerButtons}\n            >\n                <IconPause\n                    style={{\n                        color: COLOR_RUN,\n                        opacity: this.state.statusFilter === 'running' ? 1 : 0.3,\n                        background: this.state.statusFilter === 'running' ? 'gray' : 'inherit',\n                    }}\n                    title={I18n.t('Show only running scripts')}\n                    onClick={event => {\n                        event.stopPropagation();\n                        event.preventDefault();\n                        const statusFilter = this.state.statusFilter === 'running' ? '' : 'running';\n                        window.localStorage && window.localStorage.setItem('SideMenu.statusFilter', statusFilter);\n                        this.setState({ statusFilter });\n                    }}\n                />\n            </Box>,\n            <Box\n                key=\"filterByPaused\"\n                sx={styles.footerButtons}\n            >\n                <IconPlay\n                    title={I18n.t('Show only paused scripts')}\n                    style={{\n                        color: COLOR_PAUSE,\n                        opacity: this.state.statusFilter === 'paused' ? 1 : 0.3,\n                        background: this.state.statusFilter === 'paused' ? 'gray' : 'inherit',\n                    }}\n                    onClick={() => {\n                        const statusFilter = this.state.statusFilter === 'paused' ? '' : 'paused';\n                        window.localStorage && window.localStorage.setItem('SideMenu.statusFilter', statusFilter);\n                        this.setState({ statusFilter });\n                    }}\n                />\n            </Box>,\n            <Box\n                sx={styles.footerButtons}\n                style={{ marginRight: 16 }}\n                key=\"filterByProblem\"\n            >\n                <IconPause\n                    title={I18n.t('Show only scripts with problems')}\n                    style={{\n                        color: COLOR_PROBLEM,\n                        opacity: this.state.statusFilter === 'problems' ? 1 : 0.3,\n                        background: this.state.statusFilter === 'problems' ? 'gray' : 'inherit',\n                    }}\n                    onClick={() => {\n                        const statusFilter = this.state.statusFilter === 'problems' ? '' : 'problems';\n                        window.localStorage && window.localStorage.setItem('SideMenu.statusFilter', statusFilter);\n                        this.setState({ statusFilter });\n                    }}\n                />\n            </Box>,\n            <Box\n                sx={styles.footerButtons}\n                key=\"filterBlockly\"\n            >\n                <img\n                    alt=\"Blockly\"\n                    style={{\n                        opacity: this.state.typeFilter === 'Blockly' ? 1 : 0.3,\n                        background: this.state.typeFilter === 'Blockly' ? 'gray' : 'inherit',\n                    }}\n                    src={images.Blockly || images.def}\n                    onClick={() => {\n                        const typeFilter = this.state.typeFilter === 'Blockly' ? '' : 'Blockly';\n                        window.localStorage && window.localStorage.setItem('SideMenu.typeFilter', typeFilter);\n                        this.setState({ typeFilter });\n                    }}\n                />\n            </Box>,\n            <Box\n                key=\"filterJS\"\n                sx={styles.footerButtons}\n            >\n                <img\n                    alt=\"Javascript\"\n                    style={{\n                        opacity: this.state.typeFilter === 'Javascript/js' ? 1 : 0.3,\n                        background: this.state.typeFilter === 'Javascript/js' ? 'gray' : 'inherit',\n                    }}\n                    src={images['Javascript/js'] || images.def}\n                    onClick={() => {\n                        const typeFilter = this.state.typeFilter === 'Javascript/js' ? '' : 'Javascript/js';\n                        window.localStorage && window.localStorage.setItem('SideMenu.typeFilter', typeFilter);\n                        this.setState({ typeFilter });\n                    }}\n                />\n            </Box>,\n            <Box\n                key=\"filterTS\"\n                sx={styles.footerButtons}\n            >\n                <img\n                    alt=\"TypeScript\"\n                    style={{\n                        opacity: this.state.typeFilter === 'TypeScript/ts' ? 1 : 0.3,\n                        background: this.state.typeFilter === 'TypeScript/ts' ? 'gray' : 'inherit',\n                    }}\n                    src={images['TypeScript/ts'] || images.def}\n                    onClick={() => {\n                        const typeFilter = this.state.typeFilter === 'TypeScript/ts' ? '' : 'TypeScript/ts';\n                        window.localStorage && window.localStorage.setItem('SideMenu.typeFilter', typeFilter);\n                        this.setState({ typeFilter });\n                    }}\n                />\n            </Box>,\n            <Box\n                key=\"filterRules\"\n                sx={styles.footerButtons}\n            >\n                <img\n                    alt=\"Rules\"\n                    style={{\n                        opacity: this.state.typeFilter === 'Rules' ? 1 : 0.3,\n                        background: this.state.typeFilter === 'Rules' ? 'gray' : 'inherit',\n                    }}\n                    src={images.Rules || images.def}\n                    onClick={() => {\n                        const typeFilter = this.state.typeFilter === 'Rules' ? '' : 'Rules';\n                        window.localStorage && window.localStorage.setItem('SideMenu.typeFilter', typeFilter);\n                        this.setState({ typeFilter });\n                    }}\n                />\n            </Box>,\n            <div\n                key=\"padding\"\n                style={{ flexGrow: 1 }}\n            />,\n            <Box\n                key=\"expandAll\"\n                sx={styles.footerButtons}\n            >\n                <IconExpandAll\n                    style={styles.footerButtonsRight}\n                    title={I18n.t('Expand all')}\n                    onClick={() => this.onExpandAll()}\n                />\n            </Box>,\n            this.state.expanded.length ? (\n                <Box\n                    key=\"collapseAll\"\n                    sx={styles.footerButtons}\n                >\n                    <IconCollapseAll\n                        style={styles.footerButtonsRight}\n                        title={I18n.t('Collapse all')}\n                        onClick={() => this.onCollapseAll()}\n                    />\n                </Box>\n            ) : (\n                <div style={{ height: 22, width: 24 }} />\n            ),\n        ];\n    }\n\n    getAdapterDebugDialog(): React.JSX.Element | null {\n        if (this.state.showAdapterDebug) {\n            return (\n                <DialogAdapterDebug\n                    key=\"debug\"\n                    socket={this.props.socket}\n                    onClose={() => this.setState({ showAdapterDebug: false })}\n                    onDebug={(instance, adapter) =>\n                        this.setState({ showAdapterDebug: false }, () =>\n                            this.props.onDebugInstance({ instance, adapter }),\n                        )\n                    }\n                />\n            );\n        }\n        return null;\n    }\n\n    render(): (React.JSX.Element | null)[] {\n        const renamingItem: ListElement | undefined = this.state.renaming\n            ? this.state.listItems.find(i => i.id === this.state.renaming)\n            : undefined;\n        const copingItem: ioBroker.ScriptObject | undefined =\n            this.state.copingScript && this.props.scripts[this.state.copingScript].type === 'script'\n                ? (this.props.scripts[this.state.copingScript] as ioBroker.ScriptObject)\n                : undefined;\n\n        return [\n            <Drawer\n                key=\"drawer\"\n                variant=\"permanent\"\n                style={styles.menu}\n                sx={{ '& .MuiDrawer-paper': styles.drawerPaper }}\n                anchor=\"left\"\n                onClick={() => this.onClick({ id: '' } as ListElement)}\n            >\n                <Box sx={styles.toolbar}>{this.getToolbarButtons()}</Box>\n\n                <Divider />\n\n                <DragDropContext backend={HTML5Backend}>\n                    <div style={styles.innerMenu}>{this.renderAllItems(this.state.listItems)}</div>\n                </DragDropContext>\n\n                <Divider />\n\n                <div style={styles.footer}>{this.getBottomButtons()}</div>\n            </Drawer>,\n\n            renamingItem ? (\n                <DialogRename\n                    key=\"dialog-rename\"\n                    name={renamingItem.title}\n                    id={this.state.renaming || ''}\n                    folder={renamingItem.type === 'folder'}\n                    instance={(renamingItem as ListElementScript).instance}\n                    instances={this.props.instances}\n                    onClose={() => this.setState({ renaming: null })}\n                    onRename={(oldId, newId, newName, newInstance) =>\n                        this.props.onRename && this.props.onRename(oldId, newId, newName, newInstance)\n                    }\n                />\n            ) : null,\n\n            this.state.deleting ? (\n                <DialogDelete\n                    key=\"dialog-delete\"\n                    name={(this.state.listItems.find(i => i.id === this.state.deleting) as ListElement).title}\n                    id={this.state.deleting}\n                    onClose={() => this.setState({ deleting: null })}\n                    onDelete={id => this.props.onDelete && this.props.onDelete(id)}\n                />\n            ) : null,\n\n            this.state.choosingType ? (\n                <DialogAddNewScript\n                    key=\"dialog-script-type\"\n                    onClose={type => {\n                        const newState: Partial<SideDrawerState> = { choosingType: false };\n                        if (type) {\n                            newState.creatingScript = type;\n                        }\n                        this.setState(newState as SideDrawerState);\n                    }}\n                />\n            ) : null,\n\n            this.state.creatingScript ? (\n                <DialogNew\n                    key=\"dialog-new-script\"\n                    onClose={() => this.setState({ creatingScript: null })}\n                    title={I18n.t('Create new script')}\n                    name={this.getUniqueName()}\n                    parents={this.getFolders()}\n                    folder={false}\n                    existingItems={this.state.listItems.map(item => item.id)}\n                    instance={this.props.instances[0] || 0}\n                    instances={this.props.instances}\n                    type={this.state.creatingScript}\n                    parent={this.parent as string}\n                    onAdd={(id, name, instance, type) =>\n                        this.props.onAddNew && this.props.onAddNew(id, name, false, instance, type)\n                    }\n                />\n            ) : null,\n\n            this.state.copingScript ? (\n                <DialogNew\n                    key=\"dialog-copy-script\"\n                    onClose={() => this.setState({ copingScript: '' })}\n                    title={I18n.t('Copy script')}\n                    name={this.getUniqueName(this.state.copingScript)}\n                    parents={this.getFolders()}\n                    folder={false}\n                    instance={parseInt(copingItem?.common?.engine?.split('.').pop() as string, 10) || 0}\n                    instances={this.props.instances}\n                    type={(copingItem?.common?.engineType as ScriptType) || 'Javascript/js'}\n                    parent={this.parent as string}\n                    onAdd={(id, name, instance, type) => {\n                        const copingItem: ioBroker.ScriptObject | undefined =\n                            this.state.copingScript && this.props.scripts[this.state.copingScript].type === 'script'\n                                ? (this.props.scripts[this.state.copingScript] as ioBroker.ScriptObject)\n                                : undefined;\n                        if (copingItem?.common) {\n                            // disable script by coping\n                            copingItem.common.enabled = false;\n                        }\n                        this.props.onAddNew &&\n                            this.props.onAddNew(id, name, false, instance, type, copingItem?.common?.source);\n                    }}\n                />\n            ) : null,\n\n            this.state.creatingFolder ? (\n                <DialogNew\n                    key=\"dialog-new-folder\"\n                    onClose={() => this.setState({ creatingFolder: false })}\n                    title={I18n.t('Create new folder')}\n                    parents={this.getFolders()}\n                    name={this.getUniqueFolderName()}\n                    parent={this.parent as string}\n                    onAdd={(id, name) => this.props.onAddNew && this.props.onAddNew(id, name, true)}\n                />\n            ) : null,\n\n            this.state.errorText ? (\n                <DialogError\n                    key=\"error\"\n                    onClose={() => this.setState({ errorText: '' })}\n                    text={this.state.errorText}\n                />\n            ) : null,\n\n            this.getAdapterDebugDialog(),\n        ];\n    }\n}\n\nexport default SideDrawer;\n","import React from 'react';\n\nimport { Box, IconButton } from '@mui/material';\n\nimport {\n    MdDeleteForever as IconDelete,\n    MdVerticalAlignBottom as IconBottom,\n    MdContentCopy as IconCopy,\n    MdVisibilityOff as IconHide,\n} from 'react-icons/md';\n\nimport { type AdminConnection, I18n, type IobTheme, Utils } from '@iobroker/adapter-react-v5';\nimport type { LogMessage } from '@/types';\n\n// replace later with MdHorizontalSplit and MdVerticalSplit\nconst IconVerticalSplit =\n    'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgAQMAAADYVuV7AAAABlBMVEUAAAAzMzPI8eYgAAAAAXRSTlMAQObYZgAAACFJREFUeAFjAIJRwP////8PYIKWHCigNQdKj/pn1D+jAABTG16wVQqVpQAAAABJRU5ErkJggg==';\nconst IconHorizontalSplit =\n    'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgAQMAAADYVuV7AAAABlBMVEUAAAAzMzPI8eYgAAAAAXRSTlMAQObYZgAAABtJREFUeAFjAIJRwP8fCj7QkENn/4z6Z5QzCgBjbWaoyx1PqQAAAABJRU5ErkJggg==';\n\nfunction getTimeString(d: Date): string {\n    let text;\n    let i: number | string = d.getHours();\n    if (i < 10) {\n        i = `0${i.toString()}`;\n    }\n    text = `${i}:`;\n\n    i = d.getMinutes();\n    if (i < 10) {\n        i = `0${i.toString()}`;\n    }\n    text += `${i}:`;\n    i = d.getSeconds();\n    if (i < 10) {\n        i = `0${i.toString()}`;\n    }\n    text += `${i}.`;\n    i = d.getMilliseconds();\n    if (i < 10) {\n        i = `00${i.toString()}`;\n    } else if (i < 100) {\n        i = `0${i.toString()}`;\n    }\n    text += i;\n    return text;\n}\nconst TOOLBOX_WIDTH = 34;\n\nconst styles: Record<string, any> = {\n    logBox: {\n        width: '100%',\n        height: '100%',\n        position: 'relative',\n        overflow: 'hidden',\n    },\n    logBoxInner: (theme: IobTheme): React.CSSProperties => ({\n        display: 'inline-block',\n        color: theme.palette.mode === 'dark' ? 'white' : 'black',\n        width: `calc(100% - ${TOOLBOX_WIDTH}px)`,\n        height: '100%',\n        //marginLeft: TOOLBOX_WIDTH,\n        overflow: 'auto',\n        position: 'relative',\n        verticalAlign: 'top',\n    }),\n    info: (theme: IobTheme): React.CSSProperties => ({\n        background: theme.palette.mode === 'dark' ? 'darkgrey' : 'lightgrey',\n        color: theme.palette.mode === 'dark' ? 'black' : 'black',\n    }),\n    error: (theme: IobTheme): React.CSSProperties => ({\n        background: '#FF0000',\n        color: theme.palette.mode === 'dark' ? 'black' : 'white',\n    }),\n    warn: (theme: IobTheme): React.CSSProperties => ({\n        background: '#FF8000',\n        color: theme.palette.mode === 'dark' ? 'black' : 'white',\n    }),\n    debug: (theme: IobTheme): React.CSSProperties => ({\n        background: 'gray',\n        opacity: 0.8,\n        color: theme.palette.mode === 'dark' ? 'black' : 'white',\n    }),\n    silly: (theme: IobTheme): React.CSSProperties => ({\n        background: 'gray',\n        opacity: 0.6,\n        color: theme.palette.mode === 'dark' ? 'black' : 'white',\n    }),\n    table: {\n        fontFamily: 'monospace',\n        width: '100%',\n    },\n    toolbox: {\n        width: TOOLBOX_WIDTH,\n        height: '100%',\n        boxShadow:\n            '2px 0px 4px -1px rgba(0, 0, 0, 0.2), 4px 0px 5px 0px rgba(0, 0, 0, 0.14), 1px 0px 10px 0px rgba(0, 0, 0, 0.12)',\n        display: 'inline-block',\n        verticalAlign: 'top',\n        overflow: 'hidden',\n    },\n    trFrom: {\n        width: 90,\n    },\n    trTime: {\n        width: 90,\n    },\n    trSeverity: {\n        width: 40,\n        fontWeight: 'bold',\n    },\n    trPreMessage: {\n        padding: 0,\n        margin: 0,\n    },\n    iconButtons: {\n        width: 32,\n        height: 32,\n        padding: 4,\n    },\n    layoutIcon: (theme: IobTheme): any => ({\n        '& img': {\n            width: 24,\n            height: 24,\n            background: theme.palette.mode === 'dark' ? '#9d9d9d' : undefined,\n            borderRadius: theme.palette.mode === 'dark' ? '30px' : undefined,\n        },\n    }),\n};\n\nfunction paddingMs(ms: number): string {\n    if (ms < 10) {\n        return `00${ms}`;\n    }\n    if (ms < 100) {\n        return `0${ms}`;\n    }\n    return ms.toString();\n}\n\nconst gText: Record<string, string[]> = {};\n\ninterface LogProps {\n    selected: string | null;\n    socket: AdminConnection;\n    onLayoutChange?: () => void;\n    verticalLayout: boolean;\n    editing?: string[];\n    onHideLog: () => void;\n}\n\ninterface LogState {\n    lines: Record<string, React.JSX.Element[]>;\n    goBottom: boolean;\n    selected: string | null;\n    editing: string[];\n}\n\nclass Log extends React.Component<LogProps, LogState> {\n    private readonly messagesEnd: React.RefObject<HTMLDivElement>;\n\n    constructor(props: LogProps) {\n        super(props);\n        this.state = {\n            lines: {},\n            goBottom: true,\n            selected: null,\n            editing: this.props.editing || [],\n        };\n        this.messagesEnd = React.createRef<HTMLDivElement>();\n    }\n\n    static generateLine(row: LogMessage, scriptName: string): React.JSX.Element {\n        let message = row.message || '';\n\n        if (typeof message !== 'object') {\n            const regExp = new RegExp(\n                `${row.from.replace('.', '\\\\.').replace(')', '\\\\)').replace('(', '\\\\(')} \\\\(\\\\d+\\\\) `,\n                'g',\n            );\n            const matches = message.match(regExp);\n\n            if (matches) {\n                message = message.replace(matches[0], '');\n            } else {\n                message = message.replace(`${row.from} `, '');\n            }\n        }\n\n        if (message.startsWith(`${scriptName}: `)) {\n            message = message.substring(scriptName.length + 2);\n        }\n\n        return (\n            <Box\n                component=\"tr\"\n                key={`tr_${row.ts}_${row.message.substring(row.message.length - 10)}`}\n                sx={styles[row.severity]}\n            >\n                <td style={styles.trFrom}>{row.from}</td>\n                <td style={styles.trTime}>{getTimeString(new Date(row.ts))}</td>\n                <td style={styles.trSeverity}>{row.severity}</td>\n                <td>\n                    <pre style={styles.trPreMessage}>{message}</pre>\n                </td>\n            </Box>\n        );\n    }\n\n    scrollToBottom(): void {\n        this.messagesEnd?.current?.scrollIntoView({ behavior: 'smooth' });\n    }\n\n    logHandler = (message: LogMessage): void => {\n        const allLines = this.state.lines;\n        const scripts = this.state.editing.filter(id => message.message.includes(id));\n        let selected: string | null = null;\n        if (!scripts.length) {\n            return;\n        }\n        if (scripts.length === 1) {\n            selected = scripts[0];\n        } else {\n            // try to get the script with the longest common substring\n            scripts.sort();\n            selected = scripts[scripts.length - 1];\n        }\n        if (!selected) {\n            return;\n        }\n\n        const lines: React.JSX.Element[] = allLines[selected] || [];\n        const text: string[] = gText[selected] || [];\n\n        lines.push(Log.generateLine(message, selected));\n        let severity = message.severity;\n        if (severity === 'info' || severity === 'warn') {\n            severity += ' ';\n        }\n        const date = new Date(message.ts);\n        text.push(`${date.toLocaleString()}.${paddingMs(date.getMilliseconds())}\\t[${severity}]: ${message.message}`);\n        if (lines.length > 300) {\n            lines.splice(0, lines.length - 300);\n            text.splice(0, lines.length - 300);\n        }\n        gText[selected] = text;\n        allLines[selected] = lines;\n\n        this.setState({ lines: allLines });\n    };\n\n    componentDidMount(): void {\n        this.props.socket.registerLogHandler(this.logHandler);\n    }\n\n    componentWillUnmount(): void {\n        this.props.socket.unregisterLogHandler(this.logHandler);\n    }\n\n    componentDidUpdate(): void {\n        this.state.goBottom && this.scrollToBottom();\n    }\n\n    static getDerivedStateFromProps(props: LogProps, state: LogState): Partial<LogState> | null {\n        let changed = false;\n        const newState: Partial<LogState> = {};\n\n        if (props.selected !== state.selected) {\n            const selected = props.selected;\n            const allLines = state.lines;\n            if (selected) {\n                allLines[selected] = allLines[selected] || [];\n                gText[selected] = gText[selected] || [];\n            }\n            newState.selected = selected;\n            changed = true;\n        }\n\n        if (JSON.stringify(props.editing) !== JSON.stringify(state.editing)) {\n            const editing = JSON.parse(JSON.stringify(props.editing));\n            changed = true;\n            const allLines = state.lines;\n\n            for (const id in gText) {\n                if (Object.prototype.hasOwnProperty.call(gText, id)) {\n                    if (!editing.includes(id)) {\n                        delete gText[id];\n                        delete allLines[id];\n                    }\n                }\n            }\n\n            newState.editing = editing;\n        }\n        return changed ? newState : null;\n    }\n\n    onCopy(): void {\n        Utils.copyToClipboard((gText[this.state.selected as string] || []).join('\\n'));\n    }\n\n    clearLog(): void {\n        const allLines = this.state.lines;\n        if (allLines[this.state.selected as string]) {\n            allLines[this.state.selected as string] = [];\n        }\n        if (gText[this.state.selected as string]) {\n            gText[this.state.selected as string] = [];\n        }\n        this.setState({ lines: allLines });\n    }\n\n    renderLogList(lines: (React.JSX.Element | null)[] | null): React.JSX.Element {\n        if (this.state.selected && lines?.length) {\n            return (\n                <Box\n                    sx={styles.logBoxInner}\n                    key=\"logList\"\n                >\n                    <table\n                        key=\"logTable\"\n                        style={styles.table}\n                    >\n                        <tbody>{lines}</tbody>\n                    </table>\n                    <div\n                        key=\"logScrollPoint\"\n                        ref={this.messagesEnd}\n                        style={{ float: 'left', clear: 'both' }}\n                    />\n                </Box>\n            );\n        }\n\n        return (\n            <Box\n                key=\"logList\"\n                sx={styles.logBoxInner}\n                style={{ paddingLeft: 10 }}\n            >\n                {I18n.t('Log outputs')}\n            </Box>\n        );\n    }\n\n    render(): React.JSX.Element {\n        const lines = this.state.selected ? this.state.lines[this.state.selected] : null;\n        return (\n            <div style={styles.logBox}>\n                <div\n                    style={styles.toolbox}\n                    key=\"toolbox\"\n                >\n                    <IconButton\n                        style={styles.iconButtons}\n                        onClick={() => this.setState({ goBottom: !this.state.goBottom })}\n                        color={this.state.goBottom ? 'secondary' : undefined}\n                        size=\"medium\"\n                    >\n                        <IconBottom />\n                    </IconButton>\n                    {lines?.length ? (\n                        <IconButton\n                            style={styles.iconButtons}\n                            onClick={() => this.clearLog()}\n                            size=\"medium\"\n                        >\n                            <IconDelete />\n                        </IconButton>\n                    ) : null}\n                    {lines?.length ? (\n                        <IconButton\n                            style={styles.iconButtons}\n                            onClick={() => this.onCopy()}\n                            size=\"medium\"\n                        >\n                            <IconCopy />\n                        </IconButton>\n                    ) : null}\n                    {this.props.onLayoutChange ? (\n                        <IconButton\n                            style={styles.iconButtons}\n                            onClick={() => this.props.onLayoutChange && this.props.onLayoutChange()}\n                            title={I18n.t('Change layout')}\n                            size=\"medium\"\n                            sx={styles.layoutIcon}\n                        >\n                            <img\n                                alt=\"split\"\n                                src={this.props.verticalLayout ? IconVerticalSplit : IconHorizontalSplit}\n                            />\n                        </IconButton>\n                    ) : null}\n                    <IconButton\n                        style={styles.iconButtons}\n                        onClick={() => this.props.onHideLog()}\n                        title={I18n.t('Hide logs')}\n                        size=\"medium\"\n                    >\n                        <IconHide />\n                    </IconButton>\n                </div>\n                {this.renderLogList(lines)}\n            </div>\n        );\n    }\n}\n\nexport default Log;\n","var _defs, _title, _title2, _title3, _title4, _title5;\nconst _excluded = [\"title\", \"titleId\"];\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nfunction _objectWithoutProperties(e, t) { if (null == e) return {}; var o, r, i = _objectWithoutPropertiesLoose(e, t); if (Object.getOwnPropertySymbols) { var s = Object.getOwnPropertySymbols(e); for (r = 0; r < s.length; r++) o = s[r], t.includes(o) || {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]); } return i; }\nfunction _objectWithoutPropertiesLoose(r, e) { if (null == r) return {}; var t = {}; for (var n in r) if ({}.hasOwnProperty.call(r, n)) { if (e.includes(n)) continue; t[n] = r[n]; } return t; }\nimport * as React from \"react\";\nfunction SvgBlockly2Js(_ref, svgRef) {\n  let {\n      title,\n      titleId\n    } = _ref,\n    props = _objectWithoutProperties(_ref, _excluded);\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 1536 512\",\n    width: \"96px\",\n    height: \"32px\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _defs || (_defs = /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"path\", {\n    id: \"path-2\",\n    d: \"M 82.97724,29.300104 C 82.790583,28.201973 82.006921,27.299698 80.945743,26.961124 79.884564,26.62255 78.723152,26.904241 77.935,27.691354 L 62.465677,43.197917 50.303229,20.042344 C 49.78815,19.063276 48.772957,18.45025 47.666667,18.45025 c -1.106291,0 -2.121484,0.613026 -2.636563,1.592094 L 38.379115,32.703802 21.695781,1.5864062 C 21.090714,0.45617231 19.83044,-0.16023716 18.566804,0.05600004 17.303168,0.27223724 16.319565,1.2726256 16.12474,2.5397396 L 0,105.76042 43.123438,129.93635 c 2.707936,1.51195 6.006125,1.51195 8.714062,0 l 43.495833,-24.17593 z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    id: \"path-4\",\n    d: \"m 106.68711,35.274174 c -0.186,-1.097652 -0.96693,-1.999535 -2.02439,-2.337961 -1.05747,-0.338426 -2.21482,-0.05686 -3.00022,0.729912 L 86.247266,49.165925 74.127344,26.020451 C 73.614066,25.04181 72.602423,24.429052 71.5,24.429052 c -1.102423,0 -2.114066,0.612758 -2.627344,1.591399 L 62.244922,38.676387 45.619922,7.5725628 C 45.01697,6.4428218 43.761103,5.8266812 42.501885,6.0428241 41.242667,6.258967 40.262504,7.2589191 40.068359,8.5254804 L 24,111.70114 66.972656,135.86653 c 2.698469,1.51129 5.985125,1.51129 8.683594,0 L 119,111.70114 Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    id: \"path-1\",\n    d: \"M 82.97724,29.300104 C 82.790583,28.201973 82.006921,27.299698 80.945743,26.961124 79.884564,26.62255 78.723152,26.904241 77.935,27.691354 L 62.465677,43.197917 50.303229,20.042344 C 49.78815,19.063276 48.772957,18.45025 47.666667,18.45025 c -1.106291,0 -2.121484,0.613026 -2.636563,1.592094 L 38.379115,32.703802 21.695781,1.5864062 C 21.090714,0.45617231 19.83044,-0.16023716 18.566804,0.05600004 17.303168,0.27223724 16.319565,1.2726256 16.12474,2.5397396 L 0,105.76042 43.123438,129.93635 c 2.707936,1.51195 6.006125,1.51195 8.714062,0 l 43.495833,-24.17593 z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    id: \"path-3\",\n    d: \"m 106.68711,35.274174 c -0.186,-1.097652 -0.96693,-1.999535 -2.02439,-2.337961 -1.05747,-0.338426 -2.21482,-0.05686 -3.00022,0.729912 L 86.247266,49.165925 74.127344,26.020451 C 73.614066,25.04181 72.602423,24.429052 71.5,24.429052 c -1.102423,0 -2.114066,0.612758 -2.627344,1.591399 L 62.244922,38.676387 45.619922,7.5725628 C 45.01697,6.4428218 43.761103,5.8266812 42.501885,6.0428241 41.242667,6.258967 40.262504,7.2589191 40.068359,8.5254804 L 24,111.70114 66.972656,135.86653 c 2.698469,1.51129 5.985125,1.51129 8.683594,0 L 119,111.70114 Z\"\n  }))), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"blocklyPath\",\n    fill: \"#5b80a5\",\n    d: \"M 125.927 91.541 L 1148.095 91.541 L 1148.095 420.459 L 125.927 420.459 L 125.927 344.559 C 125.927 218.048 24.719 445.762 24.719 249.678 C 24.719 53.584 125.927 281.303 125.927 154.797 L 125.927 91.541 Z\",\n    style: {\n      strokeWidth: 5\n    }\n  }, _title || (_title = /*#__PURE__*/React.createElement(\"title\", null, \"Brick\"))), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M 1494.567 91.523 C 1495.672 91.523 1496.567 92.418 1496.567 93.523 L 1496.567 418.433 C 1496.567 419.538 1495.672 420.433 1494.567 420.433 L 1089.542 420.433 C 1088.437 420.433 1087.542 419.538 1087.542 418.433 L 1087.542 392.145 L 1168.093 91.523 Z\",\n    fill: \"#f7df1e\",\n    style: {\n      strokeWidth: 5\n    }\n  }, _title2 || (_title2 = /*#__PURE__*/React.createElement(\"title\", null, \"JS-Rect\"))), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M 1355.681 296.404 C 1364.385 310.617 1375.71 321.064 1395.739 321.064 C 1412.565 321.064 1423.314 312.654 1423.314 301.034 C 1423.314 287.11 1412.27 282.178 1393.75 274.077 L 1383.598 269.721 C 1354.295 257.237 1334.828 241.598 1334.828 208.536 C 1334.828 178.08 1358.033 154.896 1394.299 154.896 C 1420.117 154.896 1438.679 163.881 1452.054 187.409 L 1420.433 207.713 C 1413.471 195.229 1405.96 190.311 1394.299 190.311 C 1382.405 190.311 1374.866 197.856 1374.866 207.713 C 1374.866 219.895 1382.411 224.827 1399.834 232.372 L 1409.986 236.721 C 1444.489 251.517 1463.969 266.6 1463.969 300.513 C 1463.969 337.073 1435.249 357.103 1396.679 357.103 C 1358.966 357.103 1334.602 339.131 1322.68 315.576 L 1355.681 296.404 Z M 1212.231 299.923 C 1218.61 311.241 1224.413 320.81 1238.365 320.81 C 1251.706 320.81 1260.123 315.59 1260.123 295.293 L 1260.123 157.214 L 1300.73 157.214 L 1300.73 295.842 C 1300.73 337.89 1276.078 357.027 1240.094 357.027 C 1207.58 357.027 1188.751 340.201 1179.176 319.935 L 1212.231 299.923 Z\",\n    style: {}\n  }, _title3 || (_title3 = /*#__PURE__*/React.createElement(\"title\", null, \"JS\"))), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"blocklyPath\",\n    d: \"M 1168.088 91.541 L 1168.093 91.523 L 1184.595 91.523 L 1096.457 420.459 L 1051.626 420.459 L 1139.759 91.541 Z\",\n    style: {\n      strokeWidth: 5\n    }\n  }, _title4 || (_title4 = /*#__PURE__*/React.createElement(\"title\", null, \"Slash\"))), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M 301.727 331.831 L 229.969 331.831 L 229.969 173.491 L 306.883 173.491 C 326.29 173.778 340.04 179.399 348.133 190.356 C 353.003 197.088 355.438 205.145 355.438 214.526 C 355.438 224.194 353.003 231.964 348.133 237.837 C 345.411 241.131 341.401 244.139 336.102 246.86 C 344.194 249.797 350.299 254.452 354.417 260.825 C 358.535 267.199 360.594 274.933 360.594 284.028 C 360.594 293.41 358.23 301.825 353.504 309.272 C 350.496 314.214 346.736 318.368 342.225 321.733 C 337.14 325.6 331.142 328.25 324.232 329.683 C 317.32 331.115 309.819 331.831 301.727 331.831 Z M 300.975 262.114 L 261.551 262.114 L 261.551 304.331 L 300.438 304.331 C 307.384 304.331 312.791 303.4 316.658 301.538 C 323.676 298.101 327.186 291.512 327.186 281.772 C 327.186 273.537 323.784 267.879 316.981 264.8 C 313.185 263.081 307.849 262.186 300.975 262.114 Z M 317.41 231.929 C 321.707 229.35 323.856 224.731 323.856 218.071 C 323.856 210.695 320.991 205.825 315.262 203.462 C 310.32 201.815 304.018 200.991 296.356 200.991 L 261.551 200.991 L 261.551 235.903 L 300.438 235.903 C 307.384 235.903 313.042 234.578 317.41 231.929 Z M 386.477 173.491 L 417.092 173.491 L 417.092 331.831 L 386.477 331.831 L 386.477 173.491 Z M 544.605 229.565 C 554.487 241.954 559.429 256.6 559.429 273.501 C 559.429 290.688 554.487 305.387 544.605 317.598 C 534.722 329.808 519.719 335.913 499.595 335.913 C 479.471 335.913 464.468 329.808 454.585 317.598 C 444.702 305.387 439.761 290.688 439.761 273.501 C 439.761 256.6 444.702 241.954 454.585 229.565 C 464.468 217.176 479.471 210.981 499.595 210.981 C 519.719 210.981 534.722 217.176 544.605 229.565 Z M 499.488 236.87 C 490.536 236.87 483.643 240.039 478.809 246.377 C 473.975 252.715 471.558 261.756 471.558 273.501 C 471.558 285.246 473.975 294.305 478.809 300.679 C 483.643 307.052 490.536 310.239 499.488 310.239 C 508.439 310.239 515.314 307.052 520.113 300.679 C 524.911 294.305 527.31 285.246 527.31 273.501 C 527.31 261.756 524.911 252.715 520.113 246.377 C 515.314 240.039 508.439 236.87 499.488 236.87 Z M 682.638 256.743 L 651.271 256.743 C 650.697 252.374 649.229 248.436 646.867 244.927 C 643.429 240.2 638.093 237.837 630.861 237.837 C 620.548 237.837 613.494 242.957 609.699 253.198 C 607.693 258.641 606.691 265.874 606.691 274.897 C 606.691 283.491 607.693 290.402 609.699 295.63 C 613.351 305.369 620.226 310.239 630.324 310.239 C 637.485 310.239 642.569 308.305 645.577 304.438 C 648.585 300.571 650.411 295.558 651.056 289.399 L 682.316 289.399 C 681.6 298.709 678.234 307.518 672.218 315.825 C 662.622 329.217 648.406 335.913 629.572 335.913 C 610.737 335.913 596.879 330.327 587.999 319.155 C 579.119 307.983 574.679 293.481 574.679 275.649 C 574.679 255.526 579.584 239.878 589.396 228.706 C 599.207 217.534 612.742 211.948 630.001 211.948 C 644.682 211.948 656.695 215.242 666.041 221.831 C 675.387 228.42 680.919 240.057 682.638 256.743 Z M 811.113 331.831 L 774.16 331.831 L 746.123 281.772 L 733.447 294.985 L 733.447 331.831 L 703.369 331.831 L 703.369 174.028 L 733.447 174.028 L 733.447 259.321 L 771.582 215.278 L 809.502 215.278 L 768.574 260.073 L 811.113 331.831 Z M 826.688 173.491 L 857.303 173.491 L 857.303 331.831 L 826.688 331.831 L 826.688 173.491 Z M 934.748 301.108 L 958.918 214.741 L 991.467 214.741 L 951.291 329.897 C 943.557 352.098 937.434 365.866 932.922 371.201 C 928.41 376.536 919.387 379.204 905.852 379.204 C 903.13 379.204 900.946 379.186 899.299 379.15 C 897.651 379.115 895.181 378.989 891.887 378.774 L 891.887 354.282 L 895.754 354.497 C 898.762 354.64 901.626 354.533 904.348 354.175 C 907.069 353.817 909.361 352.993 911.223 351.704 C 913.013 350.487 914.678 347.944 916.218 344.077 C 917.758 340.21 918.384 337.846 918.098 336.987 L 875.129 214.741 L 909.182 214.741 L 934.748 301.108 Z\",\n    style: {\n      fill: \"rgb(255, 255, 255)\"\n    }\n  }, _title5 || (_title5 = /*#__PURE__*/React.createElement(\"title\", null, \"Blockly\"))));\n}\nconst ForwardRef = /*#__PURE__*/React.forwardRef(SvgBlockly2Js);\nexport default __webpack_public_path__ + \"static/media/blockly2js.8fb8f9319a060341c081277b7b760c74.svg\";\nexport { ForwardRef as ReactComponent };","var _defs, _title, _title2, _title3, _title4, _title5;\nconst _excluded = [\"title\", \"titleId\"];\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nfunction _objectWithoutProperties(e, t) { if (null == e) return {}; var o, r, i = _objectWithoutPropertiesLoose(e, t); if (Object.getOwnPropertySymbols) { var s = Object.getOwnPropertySymbols(e); for (r = 0; r < s.length; r++) o = s[r], t.includes(o) || {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]); } return i; }\nfunction _objectWithoutPropertiesLoose(r, e) { if (null == r) return {}; var t = {}; for (var n in r) if ({}.hasOwnProperty.call(r, n)) { if (e.includes(n)) continue; t[n] = r[n]; } return t; }\nimport * as React from \"react\";\nfunction SvgRules2Js(_ref, svgRef) {\n  let {\n      title,\n      titleId\n    } = _ref,\n    props = _objectWithoutProperties(_ref, _excluded);\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 1536 512\",\n    width: \"96px\",\n    height: \"32px\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _defs || (_defs = /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"path\", {\n    id: \"path-2\",\n    d: \"M 82.97724,29.300104 C 82.790583,28.201973 82.006921,27.299698 80.945743,26.961124 79.884564,26.62255 78.723152,26.904241 77.935,27.691354 L 62.465677,43.197917 50.303229,20.042344 C 49.78815,19.063276 48.772957,18.45025 47.666667,18.45025 c -1.106291,0 -2.121484,0.613026 -2.636563,1.592094 L 38.379115,32.703802 21.695781,1.5864062 C 21.090714,0.45617231 19.83044,-0.16023716 18.566804,0.05600004 17.303168,0.27223724 16.319565,1.2726256 16.12474,2.5397396 L 0,105.76042 43.123438,129.93635 c 2.707936,1.51195 6.006125,1.51195 8.714062,0 l 43.495833,-24.17593 z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    id: \"path-4\",\n    d: \"m 106.68711,35.274174 c -0.186,-1.097652 -0.96693,-1.999535 -2.02439,-2.337961 -1.05747,-0.338426 -2.21482,-0.05686 -3.00022,0.729912 L 86.247266,49.165925 74.127344,26.020451 C 73.614066,25.04181 72.602423,24.429052 71.5,24.429052 c -1.102423,0 -2.114066,0.612758 -2.627344,1.591399 L 62.244922,38.676387 45.619922,7.5725628 C 45.01697,6.4428218 43.761103,5.8266812 42.501885,6.0428241 41.242667,6.258967 40.262504,7.2589191 40.068359,8.5254804 L 24,111.70114 66.972656,135.86653 c 2.698469,1.51129 5.985125,1.51129 8.683594,0 L 119,111.70114 Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    id: \"path-1\",\n    d: \"M 82.97724,29.300104 C 82.790583,28.201973 82.006921,27.299698 80.945743,26.961124 79.884564,26.62255 78.723152,26.904241 77.935,27.691354 L 62.465677,43.197917 50.303229,20.042344 C 49.78815,19.063276 48.772957,18.45025 47.666667,18.45025 c -1.106291,0 -2.121484,0.613026 -2.636563,1.592094 L 38.379115,32.703802 21.695781,1.5864062 C 21.090714,0.45617231 19.83044,-0.16023716 18.566804,0.05600004 17.303168,0.27223724 16.319565,1.2726256 16.12474,2.5397396 L 0,105.76042 43.123438,129.93635 c 2.707936,1.51195 6.006125,1.51195 8.714062,0 l 43.495833,-24.17593 z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    id: \"path-3\",\n    d: \"m 106.68711,35.274174 c -0.186,-1.097652 -0.96693,-1.999535 -2.02439,-2.337961 -1.05747,-0.338426 -2.21482,-0.05686 -3.00022,0.729912 L 86.247266,49.165925 74.127344,26.020451 C 73.614066,25.04181 72.602423,24.429052 71.5,24.429052 c -1.102423,0 -2.114066,0.612758 -2.627344,1.591399 L 62.244922,38.676387 45.619922,7.5725628 C 45.01697,6.4428218 43.761103,5.8266812 42.501885,6.0428241 41.242667,6.258967 40.262504,7.2589191 40.068359,8.5254804 L 24,111.70114 66.972656,135.86653 c 2.698469,1.51129 5.985125,1.51129 8.683594,0 L 119,111.70114 Z\"\n  }))), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"blocklyPath\",\n    d: \"M 125.927 91.541 L 1148.095 91.541 L 1148.095 420.459 L 125.927 420.459 L 125.927 344.559 C 125.927 218.048 24.719 445.762 24.719 249.678 C 24.719 53.584 125.927 281.303 125.927 154.797 L 125.927 91.541 Z\",\n    style: {\n      strokeWidth: 5,\n      fill: \"rgb(1, 35, 92)\"\n    }\n  }, _title || (_title = /*#__PURE__*/React.createElement(\"title\", null, \"Brick\"))), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M 1494.567 91.523 C 1495.672 91.523 1496.567 92.418 1496.567 93.523 L 1496.567 418.433 C 1496.567 419.538 1495.672 420.433 1494.567 420.433 L 1089.542 420.433 C 1088.437 420.433 1087.542 419.538 1087.542 418.433 L 1087.542 392.145 L 1168.093 91.523 Z\",\n    fill: \"#f7df1e\",\n    style: {\n      strokeWidth: 5\n    }\n  }, _title2 || (_title2 = /*#__PURE__*/React.createElement(\"title\", null, \"JS-Rect\"))), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M 1355.681 296.404 C 1364.385 310.617 1375.71 321.064 1395.739 321.064 C 1412.565 321.064 1423.314 312.654 1423.314 301.034 C 1423.314 287.11 1412.27 282.178 1393.75 274.077 L 1383.598 269.721 C 1354.295 257.237 1334.828 241.598 1334.828 208.536 C 1334.828 178.08 1358.033 154.896 1394.299 154.896 C 1420.117 154.896 1438.679 163.881 1452.054 187.409 L 1420.433 207.713 C 1413.471 195.229 1405.96 190.311 1394.299 190.311 C 1382.405 190.311 1374.866 197.856 1374.866 207.713 C 1374.866 219.895 1382.411 224.827 1399.834 232.372 L 1409.986 236.721 C 1444.489 251.517 1463.969 266.6 1463.969 300.513 C 1463.969 337.073 1435.249 357.103 1396.679 357.103 C 1358.966 357.103 1334.602 339.131 1322.68 315.576 L 1355.681 296.404 Z M 1212.231 299.923 C 1218.61 311.241 1224.413 320.81 1238.365 320.81 C 1251.706 320.81 1260.123 315.59 1260.123 295.293 L 1260.123 157.214 L 1300.73 157.214 L 1300.73 295.842 C 1300.73 337.89 1276.078 357.027 1240.094 357.027 C 1207.58 357.027 1188.751 340.201 1179.176 319.935 L 1212.231 299.923 Z\",\n    style: {}\n  }, _title3 || (_title3 = /*#__PURE__*/React.createElement(\"title\", null, \"JS\"))), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"blocklyPath\",\n    d: \"M 1168.088 91.541 L 1168.093 91.523 L 1184.595 91.523 L 1096.457 420.459 L 1051.626 420.459 L 1139.759 91.541 Z\",\n    style: {\n      strokeWidth: 5\n    }\n  }, _title4 || (_title4 = /*#__PURE__*/React.createElement(\"title\", null, \"Slash\"))), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M 296.678 269.741 L 262.518 269.741 L 262.518 331.831 L 230.184 331.831 L 230.184 173.491 L 307.85 173.491 Q 324.5 173.813 333.47 177.573 Q 342.44 181.333 348.67 188.638 Q 353.826 194.653 356.834 201.958 Q 359.842 209.263 359.842 218.608 Q 359.842 229.888 354.149 240.791 Q 348.455 251.694 335.35 256.206 Q 346.307 260.61 350.872 268.721 Q 355.438 276.831 355.438 293.481 L 355.438 304.116 Q 355.438 314.966 356.297 318.833 Q 357.586 324.956 362.313 327.856 L 362.313 331.831 L 325.897 331.831 Q 324.393 326.567 323.748 323.345 Q 322.459 316.685 322.352 309.702 L 322.137 294.985 Q 321.922 279.839 316.605 274.79 Q 311.287 269.741 296.678 269.741 Z M 316.766 240.952 Q 326.649 236.44 326.649 223.12 Q 326.649 208.726 317.088 203.784 Q 311.717 200.991 300.975 200.991 L 262.518 200.991 L 262.518 243.53 L 300.008 243.53 Q 311.18 243.53 316.766 240.952 Z M 481.977 270.815 L 481.977 173.491 L 515.6 173.491 L 515.6 270.815 Q 515.6 296.06 507.758 310.132 Q 493.148 335.913 452.006 335.913 Q 410.863 335.913 396.147 310.132 Q 388.305 296.06 388.305 270.815 L 388.305 173.491 L 421.928 173.491 L 421.928 270.815 Q 421.928 287.143 425.795 294.663 Q 431.811 307.983 452.006 307.983 Q 472.094 307.983 478.109 294.663 Q 481.977 287.143 481.977 270.815 Z M 547.184 173.491 L 580.27 173.491 L 580.27 303.364 L 658.688 303.364 L 658.688 331.831 L 547.184 331.831 Z M 791.781 262.651 L 714.867 262.651 L 714.867 303.364 L 802.524 303.364 L 802.524 331.831 L 682.533 331.831 L 682.533 173.491 L 798.656 173.491 L 798.656 201.528 L 714.867 201.528 L 714.867 235.151 L 791.781 235.151 Z M 885.775 308.95 Q 897.484 308.95 904.789 306.372 Q 918.647 301.431 918.647 288.003 Q 918.647 280.161 911.772 275.864 Q 904.897 271.675 890.18 268.452 L 873.422 264.692 Q 848.715 259.106 839.262 252.554 Q 823.256 241.597 823.256 218.286 Q 823.256 197.017 838.725 182.944 Q 854.193 168.872 884.164 168.872 Q 909.193 168.872 926.864 182.139 Q 944.535 195.405 945.395 220.649 L 913.598 220.649 Q 912.738 206.362 901.137 200.347 Q 893.402 196.372 881.908 196.372 Q 869.125 196.372 861.498 201.528 Q 853.871 206.685 853.871 215.923 Q 853.871 224.409 861.391 228.599 Q 866.225 231.392 882.016 235.151 L 909.301 241.704 Q 927.24 246.001 936.371 253.198 Q 950.551 264.37 950.551 285.532 Q 950.551 307.231 933.954 321.572 Q 917.357 335.913 887.065 335.913 Q 856.127 335.913 838.402 321.787 Q 820.678 307.661 820.678 282.954 L 852.26 282.954 Q 853.764 293.804 858.168 299.175 Q 866.225 308.95 885.775 308.95 Z\",\n    style: {\n      fill: \"rgb(255, 255, 255)\"\n    }\n  }, _title5 || (_title5 = /*#__PURE__*/React.createElement(\"title\", null, \"RULES\"))));\n}\nconst ForwardRef = /*#__PURE__*/React.forwardRef(SvgRules2Js);\nexport default __webpack_public_path__ + \"static/media/rules2js.a3f8ea14eb2673da17e7611b2299af6f.svg\";\nexport { ForwardRef as ReactComponent };","import React from 'react';\nimport type * as monacoEditor from 'monaco-editor';\n\nimport { Fab } from '@mui/material';\n\nimport { MdGTranslate as IconNoCheck } from 'react-icons/md';\n\nimport { type AdminConnection, I18n } from '@iobroker/adapter-react-v5';\nimport type { DebuggerLocation, SetBreakpointParameterType } from './Debugger/types';\n\nfunction isIdOfGlobalScript(id: string): boolean {\n    return /^script\\.js\\.global\\./.test(id);\n}\n\nlet index = 0;\n\ninterface ScriptEditorProps {\n    adapterName: string;\n    socket: AdminConnection;\n    runningInstances: Record<string, boolean>;\n    name: string;\n    onChange?: (code: string) => void;\n    onForceSave?: () => void;\n    onInserted?: () => void;\n    isDark?: boolean;\n    readOnly?: boolean;\n    code?: string;\n    language?: 'javascript' | 'typescript';\n    onRegisterSelect?: (cb: (() => string | undefined) | null) => void;\n    searchText?: string;\n    checkJs?: boolean;\n    changed?: boolean;\n    insert?: string;\n    style?: React.CSSProperties;\n\n    breakpoints?: SetBreakpointParameterType[];\n    location?: DebuggerLocation | null;\n    onToggleBreakpoint?: (lineNumber: number) => void;\n}\n\ninterface ScriptEditorState {\n    name: string;\n    isDark: boolean;\n    language: 'javascript' | 'typescript';\n    readOnly: boolean;\n    alive: boolean;\n    check: boolean;\n    searchText: string;\n    typingsLoaded: boolean;\n}\n\nclass ScriptEditor extends React.Component<ScriptEditorProps, ScriptEditorState> {\n    private readonly monacoDiv: React.RefObject<HTMLDivElement> | null = null;\n\n    private editor: monacoEditor.editor.IStandaloneCodeEditor | null = null;\n\n    private monaco: typeof monacoEditor | null = (window as any).monaco as typeof monacoEditor | null;\n\n    private insert: string = '';\n\n    private originalCode: string;\n\n    private runningInstancesStr: string;\n\n    private monacoCounter: number = 0;\n\n    private location: DebuggerLocation | undefined;\n\n    private breakpoints: SetBreakpointParameterType[] | undefined;\n\n    private lastSearch: string = '';\n\n    // TypeScript declarations\n    private typings: Record<string, string> = {};\n\n    private decorations: string[] = [];\n\n    constructor(props: ScriptEditorProps) {\n        super(props);\n        this.state = {\n            name: 'current',\n            isDark: props.isDark || false,\n            language: props.language || 'javascript',\n            readOnly: props.readOnly || false,\n            alive: true,\n            check: false,\n            searchText: this.props.searchText || '',\n            typingsLoaded: false,\n        };\n        this.runningInstancesStr = JSON.stringify(this.props.runningInstances);\n        this.originalCode = props.code || '';\n        this.monacoDiv = React.createRef<HTMLDivElement>();\n    }\n\n    waitForMonaco(cb: () => void): void {\n        let monacoLoaded = !!this.monaco?.languages?.typescript?.typescriptDefaults?.getCompilerOptions;\n        if (!monacoLoaded || !this.props.runningInstances) {\n            this.monaco = (window as any).monaco as typeof monacoEditor | null;\n            monacoLoaded = !!this.monaco?.languages?.typescript?.typescriptDefaults?.getCompilerOptions;\n            this.monacoCounter++;\n            if (!monacoLoaded && this.monacoCounter < 20) {\n                console.log('wait for monaco loaded');\n                setTimeout(() => this.waitForMonaco(cb), 200);\n                return;\n            }\n            if (this.monacoCounter >= 20) {\n                console.error('Cannot load monaco!');\n            }\n        } else {\n            cb && cb();\n        }\n    }\n\n    loadTypings(runningInstances?: Record<string, boolean>): void {\n        if (!this.editor) {\n            return;\n        }\n        runningInstances = runningInstances || this.props.runningInstances;\n\n        const scriptAdapterInstance =\n            runningInstances && Object.keys(runningInstances).find(id => runningInstances && runningInstances[id]);\n\n        if (scriptAdapterInstance) {\n            void this.props.socket\n                .sendTo(scriptAdapterInstance.replace('system.adapter.', ''), 'loadTypings', null)\n                .then(result => {\n                    this.setState({ alive: true, check: true, typingsLoaded: true });\n                    this.setTypeCheck(true);\n                    if (result.typings) {\n                        this.typings = result.typings;\n                        this.setEditorTypings(this.state.name);\n                    } else {\n                        console.error(`failed to load typings: ${result.error}`);\n                    }\n                });\n        }\n    }\n\n    componentDidMount(): void {\n        let monacoLoaded = !!this.monaco?.languages?.typescript?.typescriptDefaults?.getCompilerOptions;\n        if (!monacoLoaded || !this.props.runningInstances) {\n            this.monaco = (window as any).monaco as typeof monacoEditor | null;\n            monacoLoaded = !!this.monaco?.languages?.typescript?.typescriptDefaults?.getCompilerOptions;\n            if (!monacoLoaded) {\n                console.log('wait for monaco loaded...');\n                this.waitForMonaco(() => this.componentDidMount());\n\n                return;\n            }\n        }\n        if (!this.editor && monacoLoaded && this.monaco) {\n            console.log('Init editor');\n            if (this.props.onRegisterSelect) {\n                this.props.onRegisterSelect((): string | undefined => {\n                    if (this.editor) {\n                        const selection = this.editor.getSelection();\n                        if (selection) {\n                            return this.editor.getModel()?.getValueInRange(selection);\n                        }\n                    }\n                    return undefined;\n                });\n            }\n            // For some reason, we have to get the original compiler options\n            // and assign new properties one by one\n            const compilerOptions = this.monaco.languages.typescript.typescriptDefaults.getCompilerOptions();\n            // compilerOptions.target = this.monaco.languages.typescript.ScriptTarget.ES2020;\n            compilerOptions.allowJs = true;\n            compilerOptions.checkJs = this.props.checkJs !== false;\n            compilerOptions.noLib = true;\n            compilerOptions.lib = [];\n            compilerOptions.useUnknownInCatchVariables = false;\n            compilerOptions.moduleResolution = this.monaco.languages.typescript.ModuleResolutionKind.NodeJs;\n            compilerOptions.target = this.monaco.languages.typescript.ScriptTarget.ESNext;\n            compilerOptions.module = this.monaco.languages.typescript.ModuleKind.ESNext;\n            compilerOptions.allowNonTsExtensions = true;\n\n            this.monaco.languages.typescript.typescriptDefaults.setCompilerOptions(compilerOptions);\n\n            this.setTypeCheck(false);\n\n            if (this.monacoDiv?.current) {\n                // Create the editor instances\n                this.editor = this.monaco.editor.create(this.monacoDiv?.current, {\n                    lineNumbers: 'on',\n                    scrollBeyondLastLine: false,\n                    automaticLayout: true,\n                    glyphMargin: !!this.props.breakpoints,\n                    colorDecorators: true,\n                });\n\n                this.editor.onDidChangeModelContent(() => this.onChange());\n\n                // Load typings for the JS editor\n                this.loadTypings();\n\n                if (this.props.onForceSave) {\n                    this.editor.addCommand(\n                        this.monaco.KeyMod.CtrlCmd | this.monaco.KeyCode.KeyS,\n                        () => this.props.onForceSave && this.props.onForceSave(),\n                    );\n                }\n\n                setTimeout(() => {\n                    this.highlightText(this.state.searchText);\n                    this.location = this.props.location || undefined;\n                    this.breakpoints = this.props.breakpoints;\n                    this.showDecorators();\n                });\n            }\n        }\n\n        const options = {\n            selectOnLineNumbers: true,\n            scrollBeyondLastLine: false,\n            automaticLayout: true,\n            readOnly: this.state.readOnly,\n            language: this.state.language,\n            isDark: this.state.isDark,\n        };\n\n        this.setEditorOptions(options);\n        if (this.editor) {\n            this.editor.focus();\n            this.editor.setValue(this.originalCode);\n\n            if (this.props.onToggleBreakpoint) {\n                // add onMouseDown listener to toggle breakpoints\n                this.editor.onMouseDown((e: monacoEditor.editor.IEditorMouseEvent) => {\n                    const target: monacoEditor.editor.IMouseTargetMargin =\n                        e.target as monacoEditor.editor.IMouseTargetMargin;\n                    if (\n                        this.props.onToggleBreakpoint &&\n                        target.detail?.glyphMarginLeft !== undefined &&\n                        target.position\n                    ) {\n                        this.props.onToggleBreakpoint(target.position.lineNumber - 1);\n                    }\n                });\n            } else {\n                // remove onMouseDown listener\n                this.editor.onMouseDown(() => {\n                    /* nop */\n                });\n            }\n        }\n    }\n\n    /**\n     * Sets some options of the code editor\n     *\n     * @param options The editor options to change\n     */\n    setEditorOptions(\n        options: Partial<{\n            readOnly: boolean;\n            lineWrap: boolean;\n            language: 'javascript' | 'typescript';\n            typeCheck: boolean;\n            isDark: boolean;\n        }>,\n    ): void {\n        if (options) {\n            if (options.language) {\n                this.setEditorLanguage(options.language);\n            }\n            if (this.editor) {\n                if (options.readOnly !== undefined) {\n                    this.editor.updateOptions({ readOnly: options.readOnly });\n                }\n                if (options.lineWrap !== undefined) {\n                    this.editor.updateOptions({ wordWrap: options.lineWrap ? 'on' : 'off' });\n                }\n            }\n            if (options.typeCheck !== undefined) {\n                this.setTypeCheck(options.typeCheck);\n            }\n            if (options.isDark !== undefined) {\n                this.monaco?.editor.setTheme(options.isDark ? 'vs-dark' : 'vs');\n            }\n        }\n    }\n\n    componentWillUnmount(): void {\n        if (this.editor) {\n            this.props.onRegisterSelect && this.props.onRegisterSelect(null);\n            this.editor.dispose();\n            this.editor = null;\n        }\n    }\n\n    /**\n     * Sets the language of the code editor\n     */\n    setEditorLanguage(language: 'javascript' | 'typescript'): void {\n        // we need to recreate the model when changing languages,\n        // so remember its settings\n        if (!this.editor) {\n            return;\n        }\n        const model = this.editor.getModel();\n        if (model) {\n            const code = model.getValue();\n            const uri = model.uri.path;\n\n            const filenameWithoutExtension =\n                typeof uri === 'string' && uri.includes('.') ? uri.substring(0, uri.lastIndexOf('.')) : 'index';\n\n            const extension = language === 'javascript' ? 'js' : language === 'typescript' ? 'ts' : language;\n\n            // get rid of the original model\n            model.dispose();\n\n            // Both JS and TS need the model to work in TypeScript as the script type\n            // is inferred from the file extension\n            const newLanguage = language === 'javascript' || language === 'typescript' ? 'typescript' : language;\n\n            const newModel = this.monaco?.editor.createModel(\n                code,\n                newLanguage,\n                this.monaco.Uri.from({\n                    scheme: window.location.protocol.replace(':', ''),\n                    path: `${filenameWithoutExtension}${index++}.${extension}`,\n                }),\n            );\n\n            if (newModel) {\n                this.editor.setModel(newModel);\n            }\n        }\n    }\n\n    /**\n     * Enables or disables the type checking in the editor\n     *\n     * @param enabled - Whether type checking is enabled or not\n     */\n    setTypeCheck(enabled: boolean): void {\n        const options = {\n            noSemanticValidation: !this.state.alive || !enabled, // toggle the type checking\n            noSyntaxValidation: !this.state.alive, // always check the syntax\n        };\n        this.monaco?.languages.typescript.typescriptDefaults.setDiagnosticsOptions(options);\n\n        this.monaco?.languages.typescript.javascriptDefaults.setDiagnosticsOptions({\n            noSemanticValidation: !this.state.alive || !enabled,\n            noSyntaxValidation: !this.state.alive,\n        });\n    }\n\n    /**\n     * @param currentScriptName The name of the current script\n     */\n    setEditorTypings(currentScriptName = ''): void {\n        const isGlobalScript = isIdOfGlobalScript(currentScriptName);\n        // The filename of the declarations this script can see if it is a global script\n        const partialDeclarationsPath = `${currentScriptName}.d.ts`;\n        const wantedTypings = [];\n        for (const path of Object.keys(this.typings)) {\n            // global scripts don't get to see all other global scripts\n            // but only a part of them\n            if (isGlobalScript) {\n                if (path === 'global.d.ts') {\n                    continue;\n                }\n                if (path.startsWith('script.js.global') && path !== partialDeclarationsPath) {\n                    continue;\n                }\n            }\n            wantedTypings.push({\n                filePath: path,\n                content: this.typings[path],\n            });\n        }\n\n        // TODO BF: check https://microsoft.github.io/monaco-editor/playground.html#extending-language-services-semantic-tokens-provider-example\n        // to support 0.21.0\n\n        if (this.monaco?.languages?.typescript?.typescriptDefaults?.setExtraLibs) {\n            this.monaco.languages.typescript.typescriptDefaults.setExtraLibs(wantedTypings);\n        } else if (this.monaco?.languages?.typescript?.typescriptDefaults?.addExtraLib) {\n            const existingLibs = this.monaco.languages.typescript.typescriptDefaults.getExtraLibs();\n            wantedTypings.forEach(lib => {\n                if (!existingLibs[lib.filePath] && this.monaco) {\n                    this.monaco.languages.typescript.typescriptDefaults.addExtraLib(lib.content, lib.filePath);\n                }\n            });\n        }\n    }\n\n    /**\n     * Inserts some text into the given editor\n     *\n     * @param text The text to add\n     */\n    insertTextIntoEditor(text: string): void {\n        if (!this.editor || !this.monaco) {\n            return;\n        }\n        const selection = this.editor.getSelection();\n        if (selection) {\n            const range = new this.monaco.Range(\n                selection.startLineNumber,\n                selection.startColumn,\n                selection.endLineNumber,\n                selection.endColumn,\n            );\n            this.editor.executeEdits('', [{ range, text, forceMoveMarkers: true }]);\n        }\n        this.editor.focus();\n    }\n\n    highlightText(text: string): void {\n        if (!this.editor || !this.monaco) {\n            return;\n        }\n\n        const range: monacoEditor.editor.FindMatch[] | undefined = text\n            ? this.editor.getModel()?.findMatches(text, true, false, false, null, true)\n            : undefined;\n        if (range?.length) {\n            range.forEach(r => this.editor?.setSelection(r.range));\n            this.editor.revealLine(range[0].range.startLineNumber);\n        } else {\n            const pos = this.editor.getPosition();\n            if (pos) {\n                const row = pos.lineNumber;\n                const col = pos.column;\n                this.editor.setSelection(new this.monaco.Range(row, col, row, col));\n            }\n        }\n    }\n\n    showDecorators(): void {\n        const decorations = [];\n        if (this.location && this.monaco) {\n            decorations.push({\n                range: new this.monaco.Range(\n                    this.location.lineNumber + 1,\n                    (this.location.columnNumber || 0) + 1,\n                    this.location.lineNumber + 1,\n                    1000,\n                ),\n                options: {\n                    isWholeLine: false,\n                    className: this.props.isDark ? 'monacoCurrentLineDark' : 'monacoCurrentLine',\n                },\n            });\n            decorations.push({\n                range: new this.monaco.Range(this.location.lineNumber + 1, 0, this.location.lineNumber + 1, 0),\n                options: {\n                    isWholeLine: true,\n                    className: this.props.isDark ? 'monacoCurrentFullLineDark' : 'monacoCurrentFullLine',\n                },\n            });\n        }\n\n        this.breakpoints?.forEach(bp => {\n            if (this.monaco) {\n                decorations.push({\n                    range: new this.monaco.Range(bp.location.lineNumber + 1, 0, bp.location.lineNumber + 1, 100),\n                    options: {\n                        isWholeLine: true,\n                        glyphMarginClassName: this.props.isDark ? 'monacoBreakPointDark' : 'monacoBreakPoint',\n                    },\n                });\n            }\n        });\n        if (this.editor) {\n            const editorModel = this.editor.getModel();\n            if (editorModel) {\n                this.decorations = editorModel.deltaDecorations(this.decorations, decorations);\n                // this.decorations = this.editor.createDecorationsCollection(decorations);\n            }\n        }\n    }\n\n    initNewScript(name: string, code: string | undefined): void {\n        this.setState({ name });\n        this.originalCode = code || '';\n        this.editor?.setValue(code || '');\n        this.highlightText(this.lastSearch);\n        this.showDecorators();\n        // this.setEditorLanguage();\n        // Update the typings because global scripts need different typings than normal scripts\n        // and each global script has different typings\n        this.setEditorTypings(name);\n    }\n\n    scrollToLineIfNeeded(lineNumber: number): void {\n        if (this.editor) {\n            const ranges = this.editor.getVisibleRanges();\n            if (\n                !ranges ||\n                !ranges[0] ||\n                ranges[0].startLineNumber > lineNumber ||\n                lineNumber > ranges[0].endLineNumber\n            ) {\n                this.editor.revealLineInCenter(lineNumber);\n            }\n        }\n    }\n\n    // TODO\n    UNSAFE_componentWillReceiveProps(nextProps: ScriptEditorProps): void {\n        const options: Partial<{\n            readOnly: boolean;\n            lineWrap: boolean;\n            language: 'javascript' | 'typescript';\n            typeCheck: boolean;\n            isDark: boolean;\n        }> = {};\n        if (this.state.name !== nextProps.name) {\n            // A different script was selected\n            this.initNewScript(nextProps.name, nextProps.code);\n        }\n\n        // if some running instance is found and\n        if (JSON.stringify(nextProps.runningInstances) !== this.runningInstancesStr) {\n            this.runningInstancesStr = JSON.stringify(nextProps.runningInstances);\n            if (!this.state.typingsLoaded) {\n                this.loadTypings(nextProps.runningInstances);\n            }\n        }\n\n        // if the code not yet changed, update the new code\n        if (\n            this.editor &&\n            !nextProps.changed &&\n            (nextProps.code !== this.originalCode || nextProps.code !== this.editor.getValue())\n        ) {\n            this.originalCode = nextProps.code || '';\n            this.editor.setValue(this.originalCode);\n            this.showDecorators();\n            this.location && this.scrollToLineIfNeeded(this.location.lineNumber + 1);\n        }\n\n        if (nextProps.searchText !== this.lastSearch) {\n            this.lastSearch = nextProps.searchText || '';\n            this.highlightText(this.lastSearch);\n        }\n\n        if (\n            JSON.stringify(nextProps.location) !== JSON.stringify(this.location) &&\n            JSON.stringify(nextProps.breakpoints) !== JSON.stringify(this.breakpoints)\n        ) {\n            this.location = nextProps.location || undefined;\n            this.breakpoints = nextProps.breakpoints;\n            this.showDecorators();\n            this.editor && this.location && this.scrollToLineIfNeeded(this.location.lineNumber + 1);\n            // this.editor && this.location && this.editor.setPosition(this.location.lineNumber + 1, this.location.columnNumber + 1);\n        } else if (JSON.stringify(nextProps.breakpoints) !== JSON.stringify(this.breakpoints)) {\n            this.breakpoints = nextProps.breakpoints;\n            this.showDecorators();\n        } else if (JSON.stringify(nextProps.location) !== JSON.stringify(this.location)) {\n            this.location = nextProps.location || undefined;\n            this.showDecorators();\n            this.editor && this.location && this.scrollToLineIfNeeded(this.location.lineNumber + 1);\n            // this.editor && this.location && this.editor.setPosition(this.location.lineNumber + 1, this.location.columnNumber + 1);\n        }\n\n        if (this.state.language !== (nextProps.language || 'javascript')) {\n            this.setState({ language: nextProps.language || 'javascript' });\n            options.language = nextProps.language || 'javascript';\n        } else if (this.state.readOnly !== (nextProps.readOnly || false)) {\n            this.setState({ readOnly: nextProps.readOnly || false });\n            options.readOnly = nextProps.readOnly;\n        } else if (this.state.isDark !== (nextProps.isDark || false)) {\n            this.setState({ isDark: nextProps.isDark || false });\n            options.isDark = nextProps.isDark;\n        }\n\n        this.setEditorOptions(options);\n\n        if (this.insert !== nextProps.insert) {\n            this.insert = nextProps.insert || '';\n            if (this.insert) {\n                console.log(`Insert text: ${this.insert}`);\n                setTimeout(\n                    insert => {\n                        this.insertTextIntoEditor(insert);\n                        setTimeout(() => this.props.onInserted && this.props.onInserted(), 100);\n                    },\n                    100,\n                    this.insert,\n                );\n            }\n        }\n    }\n\n    onChange(): void {\n        if (!this.props.readOnly && this.editor) {\n            this.props.onChange && this.props.onChange(this.editor.getValue());\n        }\n    }\n\n    render(): React.JSX.Element | null {\n        if (!this.monaco?.languages?.typescript?.typescriptDefaults || !this.props.runningInstances) {\n            setTimeout(() => {\n                this.monaco = (window as any).monaco as typeof monacoEditor | null;\n                this.forceUpdate();\n            }, 200);\n            return null;\n        }\n\n        return (\n            <div\n                ref={this.monacoDiv}\n                style={{ ...this.props.style, width: '100%', height: '100%', overflow: 'hidden', position: 'relative' }}\n            >\n                {!this.state.check && (\n                    <Fab\n                        size=\"small\"\n                        title={I18n.t('Check is not active, because javascript adapter is disabled')}\n                        style={{\n                            bottom: 10,\n                            right: 10,\n                            opacity: 0.5,\n                            position: 'absolute',\n                            zIndex: 1,\n                            background: 'red',\n                            color: 'white',\n                        }}\n                        color=\"secondary\"\n                    >\n                        <IconNoCheck />\n                    </Fab>\n                )}\n            </div>\n        );\n    }\n}\n\nexport default ScriptEditor;\n","import React from 'react';\n\nimport { Button, DialogTitle, DialogContent, DialogActions, Dialog, Popper, Fade, Paper } from '@mui/material';\n\nimport { FileCopy as IconCopy, Cancel as IconCancel } from '@mui/icons-material';\nimport { FaFileExport as IconExport } from 'react-icons/fa';\n\nimport { I18n, type ThemeType, Utils } from '@iobroker/adapter-react-v5';\n\nconst styles: Record<string, React.CSSProperties> = {\n    textArea: {\n        width: '100%',\n        height: '100%',\n        overflow: 'auto',\n    },\n    textAreaLight: {\n        background: 'lightgray',\n    },\n    dialog: {\n        height: '95%',\n    },\n    typography: {\n        padding: 16,\n    },\n    overflowY: {\n        overflowY: 'hidden',\n    },\n};\n\ninterface DialogExportProps {\n    onClose: () => void;\n    text: string;\n    scriptId: string;\n    themeType: ThemeType;\n}\ninterface DialogExportState {\n    anchorEl: null | HTMLElement;\n    popper: string;\n}\n\nclass DialogExport extends React.Component<DialogExportProps, DialogExportState> {\n    constructor(props: DialogExportProps) {\n        super(props);\n        this.state = {\n            anchorEl: null,\n            popper: '',\n        };\n    }\n\n    handleCancel(): void {\n        this.props.onClose();\n    }\n\n    onCopy(event: React.MouseEvent<HTMLButtonElement>): void {\n        Utils.copyToClipboard(this.props.text);\n        const anchorEl = event.currentTarget;\n\n        setTimeout(() => {\n            this.setState({ popper: I18n.t('Copied'), anchorEl });\n            setTimeout(() => this.setState({ popper: '', anchorEl: null }), 1000);\n        }, 50);\n    }\n\n    render(): React.JSX.Element {\n        const file = new Blob([this.props.text], { type: 'application/xml' });\n        const fileName = `${this.props.scriptId.substring('scripts.js'.length)}.xml`;\n\n        return (\n            <Dialog\n                key=\"export-dialog\"\n                onClose={() => false}\n                maxWidth=\"lg\"\n                sx={{ '& .MuiDialog-paper': styles.dialog }}\n                fullWidth\n                open={!0}\n                aria-labelledby=\"export-dialog-title\"\n            >\n                <DialogTitle id=\"export-dialog-title\">{I18n.t('Export selected blocks')}</DialogTitle>\n                <DialogContent style={styles.overflowY}>\n                    <pre\n                        id=\"export-text\"\n                        style={{\n                            ...styles.textArea,\n                            ...(this.props.themeType === 'dark' ? undefined : styles.textAreaLight),\n                        }}\n                    >\n                        {this.props.text}\n                    </pre>\n                </DialogContent>\n                <DialogActions>\n                    <Button\n                        variant=\"contained\"\n                        color=\"secondary\"\n                        startIcon={<IconExport />}\n                    >\n                        <a\n                            download={fileName}\n                            target=\"_blank\"\n                            rel=\"noreferrer\"\n                            href={URL.createObjectURL(file)}\n                            style={{\n                                textDecoration: 'inherit',\n                                color: 'inherit',\n                            }}\n                        >\n                            {I18n.t('Download as file')}\n                        </a>\n                    </Button>\n                    <Button\n                        variant=\"contained\"\n                        onClick={event => this.onCopy(event)}\n                        color=\"secondary\"\n                        startIcon={<IconCopy />}\n                    >\n                        {I18n.t('Copy to clipboard')}\n                    </Button>\n                    <Button\n                        variant=\"contained\"\n                        onClick={() => this.handleCancel()}\n                        color=\"primary\"\n                        startIcon={<IconCancel />}\n                    >\n                        {I18n.t('Close')}\n                    </Button>\n\n                    <Popper\n                        id=\"popper\"\n                        style={{ zIndex: 10000 }}\n                        open={!!this.state.popper}\n                        placement=\"top\"\n                        anchorEl={this.state.anchorEl}\n                        transition\n                    >\n                        {({ TransitionProps }) => (\n                            <Fade\n                                {...TransitionProps}\n                                timeout={350}\n                            >\n                                <Paper>\n                                    <p style={styles.typography}>{this.state.popper}</p>\n                                </Paper>\n                            </Fade>\n                        )}\n                    </Popper>\n                    <textarea\n                        id=\"copy_input\"\n                        readOnly\n                        style={{ position: 'absolute', left: -9999 }}\n                        tabIndex={-1}\n                        aria-hidden\n                        value={this.props.text}\n                    />\n                </DialogActions>\n            </Dialog>\n        );\n    }\n}\n\nexport default DialogExport;\n","import React from 'react';\nimport Dropzone, { type FileRejection } from 'react-dropzone';\n\nimport { Button, DialogTitle, DialogContent, DialogActions, Dialog } from '@mui/material';\n\nimport { Check as IconOk, Cancel as IconCancel } from '@mui/icons-material';\nimport { MdFileUpload as IconUpload, MdCancel as IconNo, MdAdd as IconPlus } from 'react-icons/md';\n\nimport { I18n } from '@iobroker/adapter-react-v5';\n\nconst styles: Record<string, React.CSSProperties> = {\n    textArea: {\n        width: 'calc(100% - 10px)',\n        height: '80%',\n        resize: 'none',\n        fontFamily: 'monospace',\n        fontSize: '1em',\n    },\n    dropzone: {\n        marginTop: 20,\n        width: '100%',\n        borderWidth: 5,\n        borderStyle: 'dashed',\n        borderColor: '#d0cccc',\n        textAlign: 'center',\n        boxSizing: 'border-box',\n        paddingTop: 45,\n        borderRadius: 10,\n        height: 'calc(100% - 10px)',\n    },\n    dropzoneDiv: {\n        width: '100%',\n        height: '20%',\n        position: 'relative',\n    },\n    dropzoneRejected: {\n        borderColor: '#970000',\n    },\n    dropzoneAccepted: {\n        borderColor: '#17cd02',\n    },\n    icon: {\n        height: '30%',\n        width: '30%',\n        color: '#eeeeee',\n        position: 'absolute',\n        top: '50%',\n        left: '50%',\n        transform: 'translate(-50%,-50%)',\n        zIndex: 0,\n    },\n    iconError: {\n        color: '#ffc3c6',\n    },\n    iconOk: {\n        color: '#aaeebc',\n    },\n    text: {\n        top: '50%',\n        left: '50%',\n        transform: 'translate(-50%,-50%)',\n        color: '#868686',\n        position: 'absolute',\n        zIndex: 1,\n    },\n    dialog: {\n        height: '95%',\n    },\n    fullHeight: {\n        height: '100%',\n        overflow: 'hidden',\n    },\n};\n\ninterface DialogImportProps {\n    onClose: (text?: string) => void;\n}\n\ninterface DialogImportState {\n    text: string;\n    imageStatus: 'accepted' | 'rejected' | 'wait' | '';\n    error?: string;\n}\n\nclass DialogImport extends React.Component<DialogImportProps, DialogImportState> {\n    constructor(props: DialogImportProps) {\n        super(props);\n        this.state = {\n            text: '',\n            imageStatus: '',\n            error: '',\n        };\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    componentDidMount(): void {\n        setTimeout(() => {\n            try {\n                window.document.getElementById('import-text-area')?.focus();\n            } catch {\n                // ignore\n            }\n        }, 100);\n    }\n\n    static readFileDataUrl(\n        file: File,\n        cb: (error: string | null, result?: { data: string | ArrayBuffer | null; name: string }) => void,\n    ): void {\n        const reader = new FileReader();\n        reader.onload = () => {\n            cb(null, { data: reader.result, name: file.name });\n        };\n        reader.onabort = () => {\n            console.error('file reading was aborted');\n            cb(I18n.t('file reading was aborted'));\n        };\n        reader.onerror = e => {\n            console.error('file reading has failed');\n            cb(I18n.t('file reading has failed: %s', e));\n        };\n\n        reader.readAsText(file);\n    }\n\n    handleDropFile(files: File[]): void {\n        if (!files?.length) {\n            return;\n        }\n\n        const file = files[files.length - 1];\n\n        if (!file) {\n            return;\n        }\n\n        DialogImport.readFileDataUrl(\n            file,\n            (err: string | null, result?: { data: string | ArrayBuffer | null; name: string }): void => {\n                if (err || !result) {\n                    this.setState({ error: err || 'No data' });\n                } else {\n                    this.setState({ text: result.data?.toString() || '' });\n                }\n            },\n        );\n    }\n\n    handleCancel(): void {\n        this.props.onClose();\n    }\n\n    handleOk(): void {\n        this.props.onClose(this.state.text);\n    }\n\n    onChange(e: React.ChangeEvent<HTMLTextAreaElement>): void {\n        this.setState({ text: e.target.value });\n    }\n\n    render(): React.JSX.Element {\n        const style = {\n            ...styles.dropzone,\n            ...(this.state.imageStatus === 'accepted'\n                ? styles.dropzoneAccepted\n                : this.state.imageStatus === 'rejected'\n                  ? styles.dropzoneRejected\n                  : undefined),\n        };\n\n        return (\n            <Dialog\n                onClose={() => false}\n                maxWidth=\"lg\"\n                sx={{ '& .MuiDialog-paper': styles.dialog }}\n                fullWidth\n                open={!0}\n                aria-labelledby=\"import-dialog-title\"\n            >\n                <DialogTitle id=\"import-dialog-title\">{I18n.t('Import blocks')}</DialogTitle>\n                <DialogContent style={styles.fullHeight}>\n                    <textarea\n                        autoFocus\n                        id=\"import-text-area\"\n                        style={styles.textArea}\n                        onChange={(e: React.ChangeEvent<HTMLTextAreaElement>) => this.onChange(e)}\n                        value={this.state.text}\n                    />\n                    <Dropzone\n                        maxSize={50000000}\n                        onDrop={(acceptedFiles: File[], errors: FileRejection[]) => {\n                            if (!acceptedFiles.length) {\n                                window.alert(errors?.[0]?.errors?.[0]?.message || I18n.t('ra_Cannot upload'));\n                            } else {\n                                this.handleDropFile(acceptedFiles);\n                            }\n                        }}\n                        multiple={false}\n                        accept={{ 'text/plain': [], 'text/xml': [], 'application/xml': [] }}\n                    >\n                        {({ getRootProps, getInputProps, isDragActive, isDragReject }) => {\n                            if (isDragReject) {\n                                if (this.state.imageStatus !== 'rejected') {\n                                    this.setState({ imageStatus: 'rejected' });\n                                }\n                                return (\n                                    <div\n                                        style={{\n                                            ...style,\n                                            ...styles.dropzoneDiv,\n                                        }}\n                                        {...getRootProps()}\n                                    >\n                                        <input {...getInputProps()} />\n                                        <span\n                                            key=\"text\"\n                                            style={styles.text}\n                                        >\n                                            {I18n.t('Some files will be rejected')}\n                                        </span>\n                                        <IconNo\n                                            key=\"icon\"\n                                            style={{ ...styles.icon, ...styles.iconError }}\n                                        />\n                                    </div>\n                                );\n                            }\n\n                            if (isDragActive) {\n                                if (this.state.imageStatus !== 'accepted') {\n                                    this.setState({ imageStatus: 'accepted' });\n                                }\n\n                                return (\n                                    <div\n                                        style={{\n                                            ...style,\n                                            ...styles.dropzoneDiv,\n                                        }}\n                                        {...getRootProps()}\n                                    >\n                                        <input {...getInputProps()} />\n                                        <span\n                                            key=\"text\"\n                                            style={styles.text}\n                                        >\n                                            {I18n.t('All files will be accepted')}\n                                        </span>\n                                        <IconPlus\n                                            key=\"icon\"\n                                            style={{ ...styles.icon, ...styles.iconOk }}\n                                        />\n                                    </div>\n                                );\n                            }\n\n                            if (this.state.imageStatus !== 'wait') {\n                                this.setState({ imageStatus: 'wait' });\n                            }\n                            return (\n                                <div\n                                    style={{\n                                        ...style,\n                                        ...styles.dropzoneDiv,\n                                    }}\n                                    {...getRootProps()}\n                                >\n                                    <input {...getInputProps()} />\n                                    <span\n                                        key=\"text\"\n                                        style={styles.text}\n                                    >\n                                        {I18n.t('Drop some files here or click...')}\n                                    </span>\n                                    <IconUpload\n                                        key=\"icon\"\n                                        style={styles.icon}\n                                    />\n                                </div>\n                            );\n                        }}\n                    </Dropzone>\n                </DialogContent>\n                <DialogActions>\n                    <Button\n                        variant=\"contained\"\n                        disabled={!this.state.text}\n                        onClick={() => this.handleOk()}\n                        color=\"primary\"\n                        startIcon={<IconOk />}\n                    >\n                        {I18n.t('Import')}\n                    </Button>\n                    <Button\n                        color=\"grey\"\n                        variant=\"contained\"\n                        onClick={() => this.handleCancel()}\n                        startIcon={<IconCancel />}\n                    >\n                        {I18n.t('Close')}\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        );\n    }\n}\n\nexport default DialogImport;\n","/**\n * @license\n * Copyright 2023 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Multiline text input field.\n */\n\nimport type { WorkspaceSvg } from 'blockly/core/workspace_svg';\nimport type { BlockSvg } from 'blockly/core/block_svg';\nimport type { FieldTextInputConfig, FieldTextInputValidator } from 'blockly/core/field_textinput';\nimport type { Rect } from 'blockly/core/utils/rect';\n\nconst Blockly = (window as any).Blockly;\n\nexport class UnattachedFieldError extends Error {\n    /** @internal */\n    constructor() {\n        super(`The field has not yet been attached to its input. Call appendField to attach it.`);\n    }\n}\n\n/**\n * Class for an editable text area input field.\n */\nexport class FieldMultilineInput extends Blockly.Field {\n    /**\n     * The SVG group element that will contain a text element for each text row\n     *     when initialized.\n     */\n    textGroup: SVGGElement | null = null;\n\n    protected borderRect_: SVGRectElement | null = null;\n\n    /**\n     * Defines the maximum number of lines of field.\n     * If exceeded, scrolling functionality is enabled.\n     */\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    protected maxLines_ = Infinity;\n\n    /** Whether Y overflow is currently occurring. */\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    protected isOverflowedY_ = false;\n\n    /**\n     * @param value The initial content of the field.  Should cast to a string.\n     *     Defaults to an empty string if null or undefined.  Also accepts\n     *     Field.SKIP_SETUP if you wish to skip setup (only used by subclasses\n     *     that want to handle configuration and setting the field value after\n     *     their own constructors have run).\n     * @param validator An optional function that is called to validate any\n     *     constraints on what the user entered.  Takes the new text as an\n     *     argument and returns either the accepted text, a replacement text, or\n     *     null to abort the change.\n     * @param config A map of options used to configure the field.\n     *     See the [field creation documentation]{@link\n     * https://developers.google.com/blockly/guides/create-custom-blocks/fields/built-in-fields/multiline-text-input#creation}\n     * for a list of properties this parameter supports.\n     */\n    constructor(value?: string | symbol, validator?: FieldMultilineInputValidator, config?: FieldMultilineInputConfig) {\n        super(value);\n\n        if (value === Symbol('SKIP_SETUP')) {\n            return;\n        }\n        if (config) {\n            this.configure_(config);\n        }\n\n        this.SERIALIZABLE = true;\n\n        this.setValue(value?.toString() || '');\n        if (validator) {\n            this.setValidator(validator);\n        }\n    }\n\n    /**\n     * Configure the field based on the given map of options.\n     *\n     * @param config A map of options to configure the field based on.\n     */\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    protected configure_(config: FieldMultilineInputConfig): void {\n        super.configure_(config);\n        if (config.maxLines) {\n            this.setMaxLines(config.maxLines);\n        }\n    }\n\n    /**\n     * Serializes this field's value to XML.\n     * Should only be called by Blockly.Xml.\n     *\n     * @param fieldElement The element to populate with info about the field's\n     *     state.\n     * @returns The element containing info about the field's state.\n     */\n    toXml(fieldElement: Element): Element {\n        // Replace '\\n' characters with HTML-escaped equivalent '&#10'.  This is\n        // needed so the plain-text representation of the XML produced by\n        // `Blockly.Xml.domToText` will appear on a single line (this is a\n        // limitation of the plain-text format).\n        fieldElement.textContent = (this.getValue() as string).replace(/\\n/g, '&#10;');\n        return fieldElement;\n    }\n\n    /**\n     * Sets the field's value based on the given XML element.  Should only be\n     * called by Blockly.Xml.\n     *\n     * @param fieldElement The element containing info about the field's state.\n     */\n    fromXml(fieldElement: Element): void {\n        this.setValue((fieldElement.textContent as string).replace(/&#10;/g, '\\n'));\n    }\n\n    /**\n     * Saves this field's value.\n     * This function only exists for subclasses of FieldMultilineInput which\n     * predate the load/saveState API and only define to/fromXml.\n     *\n     * @returns The state of this field.\n     */\n    saveState(): string {\n        const legacyState = this.saveLegacyState(FieldMultilineInput);\n        if (legacyState !== null) {\n            return legacyState;\n        }\n        return this.getValue();\n    }\n\n    /**\n     * Sets the field's value based on the given state.\n     * This function only exists for subclasses of FieldMultilineInput which\n     * predate the load/saveState API and only define to/fromXml.\n     *\n     * @param state The state of the variable to assign to this variable field.\n     */\n    loadState(state: unknown): void {\n        if (this.loadLegacyState(Blockly.Field, state)) {\n            return;\n        }\n        this.setValue(state);\n    }\n\n    /**\n     * Create the block UI for this field.\n     */\n    initView(): void {\n        this.createBorderRect_();\n        this.textGroup = Blockly.utils.dom.createSvgElement(\n            Blockly.utils.Svg.G,\n            {\n                class: 'blocklyEditableText',\n            },\n            this.fieldGroup_,\n        );\n    }\n\n    /**\n     * Handle key down to the editor.\n     *\n     * @param e Keyboard event.\n     */\n    protected onHtmlInputKeyDownSuper_(e: KeyboardEvent): void {\n        if (e.key === 'Enter') {\n            Blockly.WidgetDiv.hideIfOwner(this);\n            Blockly.dropDownDiv.hideWithoutAnimation();\n        } else if (e.key === 'Escape') {\n            this.setValue(this.htmlInput_!.getAttribute('data-untyped-default-value'), false);\n            Blockly.WidgetDiv.hideIfOwner(this);\n            Blockly.dropDownDiv.hideWithoutAnimation();\n        } else if (e.key === 'Tab') {\n            Blockly.WidgetDiv.hideIfOwner(this);\n            Blockly.dropDownDiv.hideWithoutAnimation();\n            // @ts-expect-error\n            (this.sourceBlock_ as BlockSvg).tab(this, !e.shiftKey);\n            e.preventDefault();\n        }\n    }\n    /**\n     * Handle a change to the editor.\n     *\n     * @param _e Keyboard event.\n     */\n    private onHtmlInputChange_(_e: Event): void {\n        // Intermediate value changes from user input are not confirmed until the\n        // user closes the editor, and may be numerous. Inhibit reporting these as\n        // normal block change events, and instead report them as special\n        // intermediate changes that do not get recorded in undo history.\n        const oldValue = this.value_;\n        // Change the field's value without firing the normal change event.\n        this.setValue(this.getValueFromEditorText_(this.htmlInput_!.value), /* fireChangeEvent= */ false);\n        if (this.sourceBlock_ && Blockly.Events.isEnabled() && this.value_ !== oldValue) {\n            // Fire a special event indicating that the value changed but the change\n            // isn't complete yet and normal field change listeners can wait.\n            Blockly.Events.fire(\n                new (Blockly.Events.get(\n                    'block_field_intermediate_change' /* EventType.BLOCK_FIELD_INTERMEDIATE_CHANGE */,\n                ))(this.sourceBlock_, this.name || null, oldValue, this.value_),\n            );\n        }\n    }\n\n    /**\n     * A callback triggered when the user is done editing the field via the UI.\n     *\n     * @param _value The new value of the field.\n     */\n    // eslint-disable-next-line class-methods-use-this\n    onFinishEditing_(_value: any): void {}\n\n    // eslint-disable-next-line class-methods-use-this\n    protected getValueFromEditorText_(text: string): any {\n        return text;\n    }\n\n    /**\n     * Bind handlers for user input on the text input field's editor.\n     *\n     * @param htmlInput The htmlInput to which event handlers will be bound.\n     */\n    protected bindInputEvents_(htmlInput: HTMLElement): void {\n        // Trap Enter without IME and Esc to hide.\n        this.onKeyDownWrapper_ = Blockly.browserEvents.conditionalBind(\n            htmlInput,\n            'keydown',\n            this,\n            this.onHtmlInputKeyDown_,\n        );\n        // Resize after every input change.\n        this.onKeyInputWrapper_ = Blockly.browserEvents.conditionalBind(\n            htmlInput,\n            'input',\n            this,\n            this.onHtmlInputChange_,\n        );\n    }\n\n    /**\n     * Get the text from this field as displayed on screen.  May differ from\n     * getText due to ellipsis, and other formatting.\n     *\n     * @returns Currently displayed text.\n     */\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    protected getDisplayText_(): string {\n        const block = this.getSourceBlock();\n        if (!block) {\n            throw new Error(`The field has not yet been attached to its input. Call appendField to attach it.`);\n        }\n        let textLines = this.getText();\n        if (!textLines) {\n            // Prevent the field from disappearing if empty.\n            return Blockly.Field.NBSP;\n        }\n        const lines = textLines.split('\\n');\n        textLines = '';\n        const displayLinesNumber = this.isOverflowedY_ ? this.maxLines_ : lines.length;\n        for (let i = 0; i < displayLinesNumber; i++) {\n            let text: string = lines[i] || '';\n            if (text.length > this.maxDisplayLength) {\n                // Truncate displayed string and add an ellipsis ('...').\n                text = `${text.substring(0, this.maxDisplayLength - 4)}...`;\n            } else if (this.isOverflowedY_ && i === displayLinesNumber - 1) {\n                text = `${text.substring(0, text.length - 3)}...`;\n            }\n            // Replace whitespace with non-breaking spaces so the text doesn't\n            // collapse.\n            text = text.replace(/\\s/g, Blockly.Field.NBSP);\n\n            textLines += text;\n            if (i !== displayLinesNumber - 1) {\n                textLines += '\\n';\n            }\n        }\n        if (block.RTL) {\n            // The SVG is LTR, force value to be RTL.\n            textLines += '\\u200F';\n        }\n        return textLines;\n    }\n\n    /**\n     * Called by setValue if the text input is valid.  Updates the value of the\n     * field, and updates the text of the field if it is not currently being\n     * edited (i.e. handled by the htmlInput_).  Is being redefined here to update\n     * overflow state of the field.\n     *\n     * @param newValue The value to be saved.  The default validator guarantees\n     *     that this is a string.\n     */\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    protected doValueUpdate_(newValue: string): void {\n        super.doValueUpdate_(newValue);\n        if (this.value_ !== null) {\n            this.isOverflowedY_ = this.value_.split('\\n').length > this.maxLines_;\n        }\n    }\n\n    /** Updates the text of the textElement. */\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    protected render_(): void {\n        const block = this.getSourceBlock();\n        if (!block) {\n            throw new Error(`The field has not yet been attached to its input. Call appendField to attach it.`);\n        }\n        // Remove all text group children.\n        let currentChild;\n        const textGroup = this.textGroup as SVGElement;\n        while ((currentChild = textGroup.firstChild)) {\n            textGroup.removeChild(currentChild);\n        }\n\n        const constants = this.getConstants();\n        // This can't happen, but TypeScript thinks it can and lint forbids `!.`.\n        if (!constants) {\n            throw Error('Constants not found');\n        }\n        // Add in text elements into the group.\n        const lines = this.getDisplayText_().split('\\n');\n        let y = 0;\n        for (let i = 0; i < lines.length; i++) {\n            const lineHeight = constants.FIELD_TEXT_HEIGHT + constants.FIELD_BORDER_RECT_Y_PADDING;\n            const span = Blockly.utils.dom.createSvgElement(\n                Blockly.utils.Svg.TEXT,\n                {\n                    class: 'blocklyText blocklyMultilineText',\n                    x: constants.FIELD_BORDER_RECT_X_PADDING,\n                    y: y + constants.FIELD_BORDER_RECT_Y_PADDING,\n                    dy: constants.FIELD_TEXT_BASELINE,\n                },\n                textGroup,\n            );\n            span.appendChild(document.createTextNode(lines[i]));\n            y += lineHeight;\n        }\n\n        if (this.isBeingEdited_) {\n            const htmlInput = this.htmlInput_ as HTMLElement;\n            if (this.isOverflowedY_) {\n                Blockly.utils.dom.addClass(htmlInput, 'blocklyHtmlTextAreaInputOverflowedY');\n            } else {\n                Blockly.utils.dom.removeClass(htmlInput, 'blocklyHtmlTextAreaInputOverflowedY');\n            }\n        }\n\n        this.updateSize_();\n\n        if (this.isBeingEdited_) {\n            if (block.RTL) {\n                // in RTL, we need to let the browser reflow before resizing\n                // in order to get the correct bounding box of the borderRect\n                // avoiding issue #2777.\n                setTimeout(this.resizeEditor_.bind(this), 0);\n            } else {\n                this.resizeEditor_();\n            }\n            const htmlInput = this.htmlInput_ as HTMLElement;\n            if (!this.isTextValid_) {\n                Blockly.utils.dom.addClass(htmlInput, 'blocklyInvalidInput');\n                Blockly.utils.aria.setState(htmlInput, Blockly.utils.aria.State.INVALID, true);\n            } else {\n                Blockly.utils.dom.removeClass(htmlInput, 'blocklyInvalidInput');\n                Blockly.utils.aria.setState(htmlInput, Blockly.utils.aria.State.INVALID, false);\n            }\n        }\n    }\n\n    /** Updates the size of the field based on the text. */\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    protected updateSize_(): void {\n        const constants = this.getConstants();\n        // This can't happen, but TypeScript thinks it can and lint forbids `!.`.\n        if (!constants) {\n            throw Error('Constants not found');\n        }\n        const nodes = (this.textGroup as SVGElement).childNodes;\n        const fontSize = constants.FIELD_TEXT_FONTSIZE;\n        const fontWeight = constants.FIELD_TEXT_FONTWEIGHT;\n        const fontFamily = constants.FIELD_TEXT_FONTFAMILY;\n        let totalWidth = 0;\n        let totalHeight = 0;\n        for (let i = 0; i < nodes.length; i++) {\n            const tspan = nodes[i] as SVGTextElement;\n            const textWidth = Blockly.utils.dom.getFastTextWidth(tspan, fontSize, fontWeight, fontFamily);\n            if (textWidth > totalWidth) {\n                totalWidth = textWidth;\n            }\n            totalHeight += constants.FIELD_TEXT_HEIGHT + (i > 0 ? constants.FIELD_BORDER_RECT_Y_PADDING : 0);\n        }\n        if (this.isBeingEdited_) {\n            // The default width is based on the longest line in the display text,\n            // but when it's being edited, width should be calculated based on the\n            // absolute longest line, even if it would be truncated after editing.\n            // Otherwise we would get wrong editor width when there are more\n            // lines than this.maxLines_.\n            const actualEditorLines = String(this.value_).split('\\n');\n            const dummyTextElement = Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.TEXT, {\n                class: 'blocklyText blocklyMultilineText',\n            });\n\n            for (let i = 0; i < actualEditorLines.length; i++) {\n                if (actualEditorLines[i].length > this.maxDisplayLength) {\n                    actualEditorLines[i] = actualEditorLines[i].substring(0, this.maxDisplayLength);\n                }\n                dummyTextElement.textContent = actualEditorLines[i];\n                const lineWidth = Blockly.utils.dom.getFastTextWidth(\n                    dummyTextElement,\n                    fontSize,\n                    fontWeight,\n                    fontFamily,\n                );\n                if (lineWidth > totalWidth) {\n                    totalWidth = lineWidth;\n                }\n            }\n\n            const htmlInput = this.htmlInput_ as HTMLElement;\n            const scrollbarWidth = htmlInput.offsetWidth - htmlInput.clientWidth;\n            totalWidth += scrollbarWidth;\n        }\n        if (this.borderRect_) {\n            totalHeight += constants.FIELD_BORDER_RECT_Y_PADDING * 2;\n            // NOTE: Adding 1 extra px to prevent wrapping. Based on browser zoom,\n            // the rounding of the calculated value can result in the line wrapping\n            // unintentionally.\n            totalWidth += constants.FIELD_BORDER_RECT_X_PADDING * 2 + 1;\n            this.borderRect_.setAttribute('width', `${totalWidth}`);\n            this.borderRect_.setAttribute('height', `${totalHeight}`);\n        }\n        this.size_.width = totalWidth;\n        this.size_.height = totalHeight;\n\n        this.positionBorderRect_();\n    }\n\n    private showInlineEditor_(quietInput: boolean): void {\n        const block = this.getSourceBlock();\n        if (!block) {\n            throw new UnattachedFieldError();\n        }\n        Blockly.WidgetDiv.show(this, block.RTL, this.widgetDispose_.bind(this), this.workspace_);\n        this.htmlInput_ = this.widgetCreate_();\n        this.isBeingEdited_ = true;\n        this.valueWhenEditorWasOpened_ = this.value_;\n\n        if (!quietInput) {\n            (this.htmlInput_ as HTMLElement).focus({\n                preventScroll: true,\n            });\n            this.htmlInput_.select();\n        }\n    }\n\n    protected getEditorText_(value: any): string {\n        return `${value}`;\n    }\n\n    /**\n     * Returns the bounding box of the rendered field, accounting for workspace\n     * scaling.\n     *\n     * @returns An object with top, bottom, left, and right in pixels relative to\n     *     the top left corner of the page (window coordinates).\n     * @internal\n     */\n    getScaledBBox(): Rect {\n        let scaledWidth;\n        let scaledHeight;\n        let xy;\n        const block = this.getSourceBlock();\n        if (!block) {\n            throw new UnattachedFieldError();\n        }\n\n        if (this.isFullBlockField()) {\n            // Browsers are inconsistent in what they return for a bounding box.\n            // - Webkit / Blink: fill-box / object bounding box\n            // - Gecko: stroke-box\n            const bBox = (this.sourceBlock_ as BlockSvg).getHeightWidth();\n            const scale = (block.workspace as WorkspaceSvg).scale;\n            xy = this.getAbsoluteXY_();\n            scaledWidth = (bBox.width + 1) * scale;\n            scaledHeight = (bBox.height + 1) * scale;\n\n            if (Blockly.utils.userAgent.GECKO) {\n                xy.x += 1.5 * scale;\n                xy.y += 1.5 * scale;\n            } else {\n                xy.x -= 0.5 * scale;\n                xy.y -= 0.5 * scale;\n            }\n        } else {\n            const bBox = this.borderRect_!.getBoundingClientRect();\n            xy = Blockly.utils.style.getPageOffset(this.borderRect_!);\n            scaledWidth = bBox.width;\n            scaledHeight = bBox.height;\n        }\n        return new Blockly.utils.Rect(xy.y, xy.y + scaledHeight, xy.x, xy.x + scaledWidth);\n    }\n\n    /** Resize the editor to fit the text. */\n    protected resizeEditor_(): void {\n        Blockly.renderManagement.finishQueuedRenders().then(() => {\n            const block = this.getSourceBlock();\n            if (!block) {\n                throw new UnattachedFieldError();\n            }\n            const div = Blockly.WidgetDiv.getDiv();\n            const bBox = this.getScaledBBox();\n            div!.style.width = `${bBox.right - bBox.left}px`;\n            div!.style.height = `${bBox.bottom - bBox.top}px`;\n\n            // In RTL mode block fields and LTR input fields the left edge moves,\n            // whereas the right edge is fixed.  Reposition the editor.\n            const x = block.RTL ? bBox.right - div!.offsetWidth : bBox.left;\n            const y = bBox.top;\n\n            div!.style.left = `${x}px`;\n            div!.style.top = `${y}px`;\n        });\n    }\n\n    /** Unbind handlers for user input and workspace size changes. */\n    protected unbindInputEvents_(): void {\n        if (this.onKeyDownWrapper_) {\n            Blockly.browserEvents.unbind(this.onKeyDownWrapper_);\n            this.onKeyDownWrapper_ = null;\n        }\n        if (this.onKeyInputWrapper_) {\n            Blockly.browserEvents.unbind(this.onKeyInputWrapper_);\n            this.onKeyInputWrapper_ = null;\n        }\n    }\n\n    /**\n     * The element to bind the click handler to. If not set explicitly, defaults\n     * to the SVG root of the field. When this element is\n     * clicked on an editable field, the editor will open.\n     *\n     * @returns Element to bind click handler to.\n     */\n    protected getClickTarget_(): Element | null {\n        return this.clickTarget_ || this.getSvgRoot();\n    }\n\n    /**\n     * Closes the editor, saves the results, and disposes of any events or\n     * DOM-references belonging to the editor.\n     */\n    protected widgetDispose_(): void {\n        // Non-disposal related things that we do when the editor closes.\n        this.isBeingEdited_ = false;\n        this.isTextValid_ = true;\n        // Make sure the field's node matches the field's internal value.\n        this.forceRerender();\n        this.onFinishEditing_(this.value_);\n\n        if (\n            this.sourceBlock_ &&\n            Blockly.Events.isEnabled() &&\n            this.valueWhenEditorWasOpened_ !== null &&\n            this.valueWhenEditorWasOpened_ !== this.value_\n        ) {\n            // When closing a field input widget, fire an event indicating that the\n            // user has completed a sequence of changes. The value may have changed\n            // multiple times while the editor was open, but this will fire an event\n            // containing the value when the editor was opened as well as the new one.\n            Blockly.Events.fire(\n                new (Blockly.Events.get('change' /* EventType.BLOCK_CHANGE */))(\n                    this.sourceBlock_,\n                    'field',\n                    this.name || null,\n                    this.valueWhenEditorWasOpened_,\n                    this.value_,\n                ),\n            );\n            this.valueWhenEditorWasOpened_ = null;\n        }\n\n        Blockly.Events.setGroup(false);\n\n        // Actual disposal.\n        this.unbindInputEvents_();\n        const style = Blockly.WidgetDiv.getDiv()!.style;\n        style.width = 'auto';\n        style.height = 'auto';\n        style.fontSize = '';\n        style.transition = '';\n        style.boxShadow = '';\n        this.htmlInput_ = null;\n\n        const clickTarget = this.getClickTarget_();\n        if (!clickTarget) {\n            throw new Error('A click target has not been set.');\n        }\n        Blockly.utils.dom.removeClass(clickTarget, 'editing');\n    }\n\n    /**\n     * Show the inline free-text editor on top of the text.\n     * Overrides the default behaviour to force rerender in order to\n     * correct block size, based on editor text.\n     *\n     * @param e Optional mouse event that triggered the field to open, or\n     *     undefined if triggered programmatically.\n     * @param quietInput True if editor should be created without focus.\n     *     Defaults to false.\n     */\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    showEditor_(e?: Event, quietInput?: boolean): void {\n        // super.showEditor_(e, quietInput);\n        this.workspace_ = (this.sourceBlock_ as BlockSvg).workspace;\n        if (\n            !quietInput &&\n            this.workspace_.options.modalInputs &&\n            (Blockly.utils.userAgent.MOBILE || Blockly.utils.userAgent.ANDROID || Blockly.utils.userAgent.IPAD)\n        ) {\n            this.showPromptEditor_();\n        } else {\n            this.showInlineEditor_(!!quietInput);\n        }\n        this.forceRerender();\n    }\n\n    /**\n     * Create the text input editor widget.\n     *\n     * @returns The newly created text input editor.\n     */\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    protected widgetCreate_(): HTMLTextAreaElement {\n        const div = Blockly.WidgetDiv.getDiv() as HTMLDivElement;\n        const scale = (this.workspace_ as WorkspaceSvg).getScale();\n        const constants = this.getConstants();\n        // This can't happen, but TypeScript thinks it can and lint forbids `!.`.\n        if (!constants) {\n            throw Error('Constants not found');\n        }\n\n        const htmlInput = document.createElement('textarea');\n        htmlInput.className = 'blocklyHtmlInput blocklyHtmlTextAreaInput';\n        htmlInput.setAttribute('spellcheck', String(this.spellcheck_));\n        const fontSize = `${constants.FIELD_TEXT_FONTSIZE * scale}pt`;\n        div.style.fontSize = fontSize;\n        htmlInput.style.fontSize = fontSize;\n        const borderRadius = `${Blockly.FieldTextInput.BORDERRADIUS * scale}px`;\n        htmlInput.style.borderRadius = borderRadius;\n        const paddingX = constants.FIELD_BORDER_RECT_X_PADDING * scale;\n        const paddingY = (constants.FIELD_BORDER_RECT_Y_PADDING * scale) / 2;\n        htmlInput.style.padding = `${paddingY}px ${paddingX}px ${paddingY}px ${paddingX}px`;\n        const lineHeight = constants.FIELD_TEXT_HEIGHT + constants.FIELD_BORDER_RECT_Y_PADDING;\n        htmlInput.style.lineHeight = `${lineHeight * scale}px`;\n\n        div.appendChild(htmlInput);\n\n        htmlInput.value = htmlInput.defaultValue = this.getEditorText_(this.value_);\n        htmlInput.setAttribute('data-untyped-default-value', String(this.value_));\n        htmlInput.setAttribute('data-old-value', '');\n        if (Blockly.utils.userAgent.GECKO) {\n            // In FF, ensure the browser reflows before resizing to avoid issue #2777.\n            setTimeout(this.resizeEditor_.bind(this), 0);\n        } else {\n            this.resizeEditor_();\n        }\n\n        this.bindInputEvents_(htmlInput);\n\n        return htmlInput;\n    }\n\n    /**\n     * Sets the maxLines config for this field.\n     *\n     * @param maxLines Defines the maximum number of lines allowed, before\n     *     scrolling functionality is enabled.\n     */\n    setMaxLines(maxLines: number): void {\n        if (typeof maxLines === 'number' && maxLines > 0 && maxLines !== this.maxLines_) {\n            this.maxLines_ = maxLines;\n            this.forceRerender();\n        }\n    }\n\n    /**\n     * Returns the maxLines config of this field.\n     *\n     * @returns The maxLines config value.\n     */\n    getMaxLines(): number {\n        return this.maxLines_;\n    }\n\n    /**\n     * Handle key down to the editor.  Override the text input definition of this\n     * so as to not close the editor when enter is typed in.\n     *\n     * @param e Keyboard event.\n     */\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    protected onHtmlInputKeyDown_(e: KeyboardEvent): void {\n        if (e.key !== 'Enter') {\n            this.onHtmlInputKeyDownSuper_(e);\n        }\n    }\n\n    /**\n     * Construct a FieldMultilineInput from a JSON arg object,\n     * dereferencing any string table references.\n     *\n     * @param options A JSON object with options (text, and spellcheck).\n     * @returns The new field instance.\n     * @nocollapse\n     */\n    static fromJson(options: FieldMultilineInputFromJsonConfig): FieldMultilineInput {\n        const text = Blockly.utils.parsing.replaceMessageReferences(options.text);\n        // `this` might be a subclass of FieldMultilineInput if that class doesn't\n        // the static fromJson method.\n        return new this(text, undefined, options);\n    }\n}\n\n/**\n * Register the field and any dependencies.\n */\nexport function registerFieldMultilineInput(): void {\n    Blockly.fieldRegistry.register('field_multilinetext', FieldMultilineInput);\n}\n\n/**\n * CSS for multiline field.\n */\nBlockly.Css.register(`\n.blocklyHtmlTextAreaInput {\n  font-family: monospace;\n  resize: none;\n  overflow: hidden;\n  height: 100%;\n  text-align: left;\n}\n\n.blocklyHtmlTextAreaInputOverflowedY {\n  overflow-y: scroll;\n}\n`);\n\n/**\n * Config options for the multiline input field.\n */\nexport interface FieldMultilineInputConfig extends FieldTextInputConfig {\n    maxLines?: number;\n}\n\n/**\n * fromJson config options for the multiline input field.\n */\nexport interface FieldMultilineInputFromJsonConfig extends FieldMultilineInputConfig {\n    text?: string;\n}\n\n/**\n * A function that is called to validate changes to the field's value before\n * they are set.\n *\n * @see {@link https://developers.google.com/blockly/guides/create-custom-blocks/fields/validators#return_values}\n * @param newValue The value to be validated.\n * @returns One of three instructions for setting the new value: `T`, `null`,\n * or `undefined`.\n *\n * - `T` to set this function's returned value instead of `newValue`.\n *\n * - `null` to invoke `doValueInvalid_` and not set a value.\n *\n * - `undefined` to set `newValue` as is.\n */\nexport type FieldMultilineInputValidator = FieldTextInputValidator;\n","/**\n * @license\n * Copyright 2024 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport type { Block } from 'blockly/core';\nimport type { JavascriptGenerator } from 'blockly/javascript';\nimport { type Generators } from './generatorsType';\nimport { registerFieldMultilineInput } from '../field_multilineinput';\n\ndeclare enum JavascriptOrder {\n    ATOMIC = 0, // 0 \"\" ...\n    NEW = 1.1, // new\n    MEMBER = 1.2, // . []\n    FUNCTION_CALL = 2, // ()\n    INCREMENT = 3, // ++\n    // eslint-disable-next-line @typescript-eslint/no-duplicate-enum-values\n    DECREMENT = 3, // --\n    BITWISE_NOT = 4.1, // ~\n    UNARY_PLUS = 4.2, // +\n    UNARY_NEGATION = 4.3, // -\n    LOGICAL_NOT = 4.4, // !\n    TYPEOF = 4.5, // typeof\n    VOID = 4.6, // void\n    DELETE = 4.7, // delete\n    AWAIT = 4.8, // await\n    EXPONENTIATION = 5, // **\n    MULTIPLICATION = 5.1, // *\n    DIVISION = 5.2, // /\n    MODULUS = 5.3, // %\n    SUBTRACTION = 6.1, // -\n    ADDITION = 6.2, // +\n    BITWISE_SHIFT = 7, // << >> >>>\n    RELATIONAL = 8, // < <= > >=\n    // eslint-disable-next-line @typescript-eslint/no-duplicate-enum-values\n    IN = 8, // in\n    // eslint-disable-next-line @typescript-eslint/no-duplicate-enum-values\n    INSTANCEOF = 8, // instanceof\n    EQUALITY = 9, // == != === !==\n    BITWISE_AND = 10, // &\n    BITWISE_XOR = 11, // ^\n    BITWISE_OR = 12, // |\n    LOGICAL_AND = 13, // &&\n    LOGICAL_OR = 14, // ||\n    CONDITIONAL = 15, // ?:\n    ASSIGNMENT = 16, // = += -= **= *= /= %= <<= >>= ...\n    YIELD = 17, // yield\n    COMMA = 18, // ,\n    NONE = 99,\n}\n\n/** The name this block is registered under. */\nexport const BLOCK_NAME = 'text_multiline';\n\n// Block for multiline text input.\nconst jsonDefinition = {\n    type: BLOCK_NAME,\n    message0: '%1 %2',\n    args0: [\n        {\n            type: 'field_image',\n            src:\n                'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAARCAYAAADpP' +\n                'U2iAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAdhgAAHYYBXaITgQAAABh0RVh0' +\n                'U29mdHdhcmUAcGFpbnQubmV0IDQuMS42/U4J6AAAAP1JREFUOE+Vks0KQUEYhjm' +\n                'RIja4ABtZ2dm5A3t3Ia6AUm7CylYuQRaUhZSlLZJiQbFAyRnPN33y01HOW08z88' +\n                '73zpwzM4F3GWOCruvGIE4/rLaV+Nq1hVGMBqzhqlxgCys4wJA65xnogMHsQ5luj' +\n                'nYHTejBBCK2mE4abjCgMGhNxHgDFWjDSG07kdfVa2pZMf4ZyMAdWmpZMfYOsLiD' +\n                'MYMjlMB+K613QISRhTnITnsYg5yUd0DETmEoMlkFOeIT/A58iyK5E18BuTBfgYX' +\n                'fwNJv4P9/oEBerLylOnRhygmGdPpTTBZAPkde61lbQe4moWUvYUZYLfUNftIY4z' +\n                'wA5X2Z9AYnQrEAAAAASUVORK5CYII=',\n            width: 12,\n            height: 17,\n            alt: '\\u00B6',\n        },\n        {\n            type: 'field_multilinetext',\n            name: 'TEXT',\n            text: '',\n        },\n    ],\n    output: 'String',\n    style: 'text_blocks',\n    helpUrl: '%{BKY_TEXT_TEXT_HELPURL}',\n    tooltip: '%{BKY_TEXT_TEXT_TOOLTIP}',\n    extensions: ['parent_tooltip_when_inline'],\n};\n\n/**\n * Javascript block generator function.\n *\n * @param block The Block instance to generate code for.\n * @param generator The JavascriptGenerator calling the function.\n * @returns A tuple containing the code string and precedence.\n */\nexport function toJavascript(block: Block, generator: JavascriptGenerator): [string, JavascriptOrder] {\n    // Text value.\n    const code = generator.multiline_quote_(block.getFieldValue('TEXT'));\n    const order = code.indexOf('+') !== -1 ? JavascriptOrder.ADDITION : JavascriptOrder.ATOMIC;\n    return [code, order];\n}\n\nconst definitionsDict = window.Blockly.common.createBlockDefinitionsFromJsonArray([jsonDefinition]);\n\n/** The text_multiline BlockDefinition. */\nexport const blockDefinition = definitionsDict[BLOCK_NAME];\n\n/**\n * Install the `text_multiline` block and all of its dependencies.\n *\n * @param gens The CodeGenerators to install per-block\n *     generators on.\n */\nexport function installBlock(gens: Generators = {}): void {\n    registerFieldMultilineInput();\n\n    window.Blockly.common.defineBlocks(definitionsDict);\n\n    if (gens.javascript) {\n        gens.javascript.forBlock[BLOCK_NAME] = toJavascript;\n    }\n}\n","/**\n * @license\n * Copyright 2023 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport * as textMultiline from './blocks/textMultiline';\n\nexport * from './field_multilineinput';\n\n// Re-export all parts of the block definition.\nexport * as textMultiline from './blocks/textMultiline';\n\n// This package currently exports a single block. More may\n// be added later.\nexport const installAllBlocks = textMultiline.installBlock;\n","/**\n * @license\n * Copyright 2023 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Colour input field.\n */\nimport type { BlockSvg } from 'blockly/core/block_svg';\nimport type { Data } from 'blockly/core/browser_events';\nimport type { FieldValidator, FieldConfig } from 'blockly/core/field';\n\nconst Blockly = (window as any).Blockly;\n\n/**\n * Class for a colour input field.\n */\nexport class FieldColour extends Blockly.Field<string> {\n    /** The field's colour picker element. */\n    private picker: HTMLElement | null = null;\n\n    /** Index of the currently highlighted element. */\n    private highlightedIndex: number | null = null;\n\n    /**\n     * Array holding info needed to unbind events.\n     * Used for disposing.\n     * Ex: [[node, name, func], [node, name, func]].\n     */\n    private boundEvents: Data[] = [];\n\n    /**\n     * Serializable fields are saved by the serializer, non-serializable fields\n     * are not.  Editable fields should also be serializable.\n     */\n    SERIALIZABLE = true;\n\n    /** Mouse cursor style when over the hotspot that initiates the editor. */\n    CURSOR = 'default';\n\n    /**\n     * Used to tell if the field needs to be rendered the next time the block is\n     * rendered.  Colour fields are statically sized, and only need to be\n     * rendered at initialization.\n     */\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    protected isDirty_ = false;\n\n    /**\n     * An array of colour strings for the palette.\n     * Copied from goog.ui.ColorPicker.SIMPLE_GRID_COLORS\n     */\n    private colours: string[] = [\n        // grays\n        '#ffffff',\n        '#cccccc',\n        '#c0c0c0',\n        '#999999',\n        '#666666',\n        '#333333',\n        '#000000',\n        // reds\n        '#ffcccc',\n        '#ff6666',\n        '#ff0000',\n        '#cc0000',\n        '#990000',\n        '#660000',\n        '#330000',\n        // oranges\n        '#ffcc99',\n        '#ff9966',\n        '#ff9900',\n        '#ff6600',\n        '#cc6600',\n        '#993300',\n        '#663300',\n        // yellows\n        '#ffff99',\n        '#ffff66',\n        '#ffcc66',\n        '#ffcc33',\n        '#cc9933',\n        '#996633',\n        '#663333',\n        // olives\n        '#ffffcc',\n        '#ffff33',\n        '#ffff00',\n        '#ffcc00',\n        '#999900',\n        '#666600',\n        '#333300',\n        // greens\n        '#99ff99',\n        '#66ff99',\n        '#33ff33',\n        '#33cc00',\n        '#009900',\n        '#006600',\n        '#003300',\n        // turquoises\n        '#99ffff',\n        '#33ffff',\n        '#66cccc',\n        '#00cccc',\n        '#339999',\n        '#336666',\n        '#003333',\n        // blues\n        '#ccffff',\n        '#66ffff',\n        '#33ccff',\n        '#3366ff',\n        '#3333ff',\n        '#000099',\n        '#000066',\n        // purples\n        '#ccccff',\n        '#9999ff',\n        '#6666cc',\n        '#6633ff',\n        '#6600cc',\n        '#333399',\n        '#330099',\n        // violets\n        '#ffccff',\n        '#ff99ff',\n        '#cc66cc',\n        '#cc33cc',\n        '#993399',\n        '#663366',\n        '#330033',\n    ];\n\n    /**\n     * An array of tooltip strings for the palette.  If not the same length as\n     * COLOURS, the colour's hex code will be used for any missing titles.\n     */\n    private titles: string[] = [];\n\n    /**\n     * Number of columns in the palette.\n     */\n    private columns = 7;\n\n    /**\n     * @param value The initial value of the field.  Should be in '#rrggbb'\n     *     format.  Defaults to the first value in the default colour array.  Also\n     *     accepts Field.SKIP_SETUP if you wish to skip setup (only used by\n     *     subclasses that want to handle configuration and setting the field\n     *     value after their own constructors have run).\n     * @param validator A function that is called to validate changes to the\n     *     field's value.  Takes in a colour string & returns a validated colour\n     *     string ('#rrggbb' format), or null to abort the change.\n     * @param config A map of options used to configure the field.\n     *     See the [field creation documentation]{@link\n     * https://developers.google.com/blockly/guides/create-custom-blocks/fields/built-in-fields/colour}\n     * for a list of properties this parameter supports.\n     */\n    constructor(value?: string | symbol, validator?: FieldColourValidator, config?: FieldColourConfig) {\n        super(value);\n\n        if (value === Symbol('SKIP_SETUP')) {\n            return;\n        }\n        if (config) {\n            this.configure_(config);\n        }\n        this.setValue(value);\n        if (validator) {\n            this.setValidator(validator);\n        }\n    }\n\n    /**\n     * Configure the field based on the given map of options.\n     *\n     * @param config A map of options to configure the field based on.\n     */\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    protected configure_(config: FieldColourConfig): void {\n        super.configure_(config);\n        if (config.colourOptions) {\n            this.colours = config.colourOptions;\n        }\n        if (config.colourTitles) {\n            this.titles = config.colourTitles;\n        }\n        if (config.columns) {\n            this.columns = config.columns;\n        }\n    }\n\n    /**\n     * Create the block UI for this colour field.\n     *\n     * @internal\n     */\n    initView(): void {\n        const constants = this.getConstants();\n        // This can't happen, but TypeScript thinks it can and lint forbids `!.`.\n        if (!constants) {\n            throw Error('Constants not found');\n        }\n        this.size_ = new Blockly.utils.Size(\n            constants.FIELD_COLOUR_DEFAULT_WIDTH,\n            constants.FIELD_COLOUR_DEFAULT_HEIGHT,\n        );\n        this.createBorderRect_();\n        this.getBorderRect().style.fillOpacity = '1';\n        this.getBorderRect().setAttribute('stroke', '#fff');\n        if (this.isFullBlockField()) {\n            this.clickTarget_ = (this.sourceBlock_ as BlockSvg).getSvgRoot();\n        }\n    }\n\n    /**\n     * Defines whether this field should take up the full block or not.\n     *\n     * @returns True if this field should take up the full block. False otherwise.\n     */\n    protected isFullBlockField(): boolean {\n        const block = this.getSourceBlock();\n        if (!block) {\n            throw new Blockly.UnattachedFieldError();\n        }\n\n        const constants = this.getConstants();\n        return this.blockIsSimpleReporter() && Boolean(constants?.FIELD_COLOUR_FULL_BLOCK);\n    }\n\n    /**\n     * @returns True if the source block is a value block with a single editable\n     *     field.\n     * @internal\n     */\n    blockIsSimpleReporter(): boolean {\n        const block = this.getSourceBlock();\n        if (!block) {\n            throw new Blockly.UnattachedFieldError();\n        }\n\n        if (!block.outputConnection) {\n            return false;\n        }\n\n        for (const input of block.inputList) {\n            if (input.connection || input.fieldRow.length > 1) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    /**\n     * Updates text field to match the colour/style of the block.\n     *\n     * @internal\n     */\n    applyColour(): void {\n        const block = this.getSourceBlock() as BlockSvg | null;\n        if (!block) {\n            throw new Blockly.UnattachedFieldError();\n        }\n\n        if (!this.fieldGroup_) {\n            return;\n        }\n\n        const borderRect = this.borderRect_;\n        if (!borderRect) {\n            throw new Error('The border rect has not been initialized');\n        }\n\n        if (!this.isFullBlockField()) {\n            borderRect.style.display = 'block';\n            borderRect.style.fill = this.getValue() as string;\n        } else {\n            borderRect.style.display = 'none';\n            // In general, do *not* let fields control the color of blocks. Having the\n            // field control the color is unexpected, and could have performance\n            // impacts.\n            block.pathObject.svgPath.setAttribute('fill', this.getValue() as string);\n            block.pathObject.svgPath.setAttribute('stroke', '#fff');\n        }\n    }\n\n    /**\n     * Returns the height and width of the field.\n     *\n     * This should *in general* be the only place render_ gets called from.\n     *\n     * @returns Height and width.\n     */\n    getSize(): any {\n        if (this.getConstants()?.FIELD_COLOUR_FULL_BLOCK) {\n            // In general, do *not* let fields control the color of blocks. Having the\n            // field control the color is unexpected, and could have performance\n            // impacts.\n            // Full block fields have more control of the block than they should\n            // (i.e. updating fill colour) so they always need to be rerendered.\n            this.render_();\n            this.isDirty_ = false;\n        }\n        return super.getSize();\n    }\n\n    /**\n     * Updates the colour of the block to reflect whether this is a full\n     * block field or not.\n     */\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    protected render_(): void {\n        super.render_();\n\n        const block = this.getSourceBlock() as BlockSvg | null;\n        if (!block) {\n            throw new Blockly.UnattachedFieldError();\n        }\n        // Calling applyColour updates the UI (full-block vs non-full-block) for the\n        // colour field, and the colour of the field/block.\n        block.applyColour();\n    }\n\n    /**\n     * Updates the size of the field based on whether it is a full block field\n     * or not.\n     *\n     * @param margin margin to use when positioning the field.\n     */\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    protected updateSize_(margin?: number): void {\n        const constants = this.getConstants();\n        if (!constants) {\n            return;\n        }\n        let totalWidth;\n        let totalHeight;\n        if (this.isFullBlockField()) {\n            const xOffset = margin ?? 0;\n            totalWidth = xOffset * 2;\n            totalHeight = constants.FIELD_TEXT_HEIGHT;\n        } else {\n            totalWidth = constants.FIELD_COLOUR_DEFAULT_WIDTH;\n            totalHeight = constants.FIELD_COLOUR_DEFAULT_HEIGHT;\n        }\n\n        this.size_.height = totalHeight;\n        this.size_.width = totalWidth;\n\n        this.positionBorderRect_();\n    }\n\n    /**\n     * Ensure that the input value is a valid colour.\n     *\n     * @param newValue The input value.\n     * @returns A valid colour, or null if invalid.\n     */\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    protected doClassValidation_(newValue: string): string | null | undefined;\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    protected doClassValidation_(newValue?: string): string | null;\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    protected doClassValidation_(newValue?: string): string | null | undefined {\n        if (typeof newValue !== 'string') {\n            return null;\n        }\n        return Blockly.utils.colour.parse(newValue);\n    }\n\n    /**\n     * Get the text for this field.  Used when the block is collapsed.\n     *\n     * @returns Text representing the value of this field.\n     */\n    getText(): string {\n        let colour = this.value_ as string;\n        // Try to use #rgb format if possible, rather than #rrggbb.\n        if (/^#(.)\\1(.)\\2(.)\\3$/.test(colour)) {\n            colour = `#${colour[1]}${colour[3]}${colour[5]}`;\n        }\n        return colour;\n    }\n\n    /**\n     * Set a custom colour grid for this field.\n     *\n     * @param colours Array of colours for this block, or null to use default\n     *     (FieldColour.COLOURS).\n     * @param titles Optional array of colour tooltips, or null to use default\n     *     (FieldColour.TITLES).\n     * @returns Returns itself (for method chaining).\n     */\n    setColours(colours: string[], titles?: string[]): FieldColour {\n        this.colours = colours;\n        if (titles) {\n            this.titles = titles;\n        }\n        return this;\n    }\n\n    /**\n     * Set a custom grid size for this field.\n     *\n     * @param columns Number of columns for this block, or 0 to use default\n     *     (FieldColour.COLUMNS).\n     * @returns Returns itself (for method chaining).\n     */\n    setColumns(columns: number): FieldColour {\n        this.columns = columns;\n        return this;\n    }\n\n    /** Create and show the colour field's editor. */\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    protected showEditor_(): void {\n        this.dropdownCreate();\n        // This can't happen, but TypeScript thinks it can and lint forbids `!.`.\n        if (!this.picker) {\n            throw Error('Picker not found');\n        }\n        Blockly.DropDownDiv.getContentDiv().appendChild(this.picker);\n\n        Blockly.DropDownDiv.showPositionedByField(this, this.dropdownDispose.bind(this));\n\n        // Focus so we can start receiving keyboard events.\n        this.picker.focus({ preventScroll: true });\n    }\n\n    /**\n     * Handle a click on a colour cell.\n     *\n     * @param e Mouse event.\n     */\n    private onClick(e: PointerEvent): void {\n        const cell = e.target as Element;\n        const colour = cell?.getAttribute('data-colour');\n        if (colour !== null) {\n            this.setValue(colour);\n            Blockly.DropDownDiv.hideIfOwner(this);\n        }\n    }\n\n    /**\n     * Handle a key down event.  Navigate around the grid with the\n     * arrow keys.  Enter selects the highlighted colour.\n     *\n     * @param e Keyboard event.\n     */\n    private onKeyDown(e: KeyboardEvent): void {\n        let handled = true;\n        let highlighted: HTMLElement | null;\n        switch (e.key) {\n            case 'ArrowUp':\n                this.moveHighlightBy(0, -1);\n                break;\n            case 'ArrowDown':\n                this.moveHighlightBy(0, 1);\n                break;\n            case 'ArrowLeft':\n                this.moveHighlightBy(-1, 0);\n                break;\n            case 'ArrowRight':\n                this.moveHighlightBy(1, 0);\n                break;\n            case 'Enter':\n                // Select the highlighted colour.\n                highlighted = this.getHighlighted();\n                if (highlighted) {\n                    const colour = highlighted.getAttribute('data-colour');\n                    if (colour !== null) {\n                        this.setValue(colour);\n                    }\n                }\n                Blockly.DropDownDiv.hideWithoutAnimation();\n                break;\n            default:\n                handled = false;\n        }\n        if (handled) {\n            e.stopPropagation();\n        }\n    }\n\n    /**\n     * Move the currently highlighted position by dx and dy.\n     *\n     * @param dx Change of x.\n     * @param dy Change of y.\n     */\n    private moveHighlightBy(dx: number, dy: number): void {\n        if (!this.highlightedIndex) {\n            return;\n        }\n\n        const colours = this.colours;\n        const columns = this.columns;\n\n        // Get the current x and y coordinates.\n        let x = this.highlightedIndex % columns;\n        let y = Math.floor(this.highlightedIndex / columns);\n\n        // Add the offset.\n        x += dx;\n        y += dy;\n\n        if (dx < 0) {\n            // Move left one grid cell, even in RTL.\n            // Loop back to the end of the previous row if we have room.\n            if (x < 0 && y > 0) {\n                x = columns - 1;\n                y--;\n            } else if (x < 0) {\n                x = 0;\n            }\n        } else if (dx > 0) {\n            // Move right one grid cell, even in RTL.\n            // Loop to the start of the next row, if there's room.\n            if (x > columns - 1 && y < Math.floor(colours.length / columns) - 1) {\n                x = 0;\n                y++;\n            } else if (x > columns - 1) {\n                x--;\n            }\n        } else if (dy < 0) {\n            // Move up one grid cell, stop at the top.\n            if (y < 0) {\n                y = 0;\n            }\n        } else if (dy > 0) {\n            // Move down one grid cell, stop at the bottom.\n            if (y > Math.floor(colours.length / columns) - 1) {\n                y = Math.floor(colours.length / columns) - 1;\n            }\n        }\n\n        // Move the highlight to the new coordinates.\n        const cell = (this.picker as HTMLElement).childNodes[y].childNodes[x] as Element;\n        const index = y * columns + x;\n        this.setHighlightedCell(cell, index);\n    }\n\n    /**\n     * Handle a mouse move event.  Highlight the hovered colour.\n     *\n     * @param e Mouse event.\n     */\n    private onMouseMove(e: PointerEvent): void {\n        const cell = e.target as Element;\n        const index = cell && Number(cell.getAttribute('data-index'));\n        if (index !== null && index !== this.highlightedIndex) {\n            this.setHighlightedCell(cell, index);\n        }\n    }\n\n    /** Handle a mouse enter event.  Focus the picker. */\n    private onMouseEnter(): void {\n        this.picker?.focus({ preventScroll: true });\n    }\n\n    /**\n     * Handle a mouse leave event.  Blur the picker and unhighlight\n     * the currently highlighted colour.\n     */\n    private onMouseLeave(): void {\n        this.picker?.blur();\n        const highlighted = this.getHighlighted();\n        if (highlighted) {\n            Blockly.utils.dom.removeClass(highlighted, 'blocklyColourHighlighted');\n        }\n    }\n\n    /**\n     * Returns the currently highlighted item (if any).\n     *\n     * @returns Highlighted item (null if none).\n     */\n    private getHighlighted(): HTMLElement | null {\n        if (!this.highlightedIndex) {\n            return null;\n        }\n\n        const x = this.highlightedIndex % this.columns;\n        const y = Math.floor(this.highlightedIndex / this.columns);\n        const row = this.picker?.childNodes[y];\n        if (!row) {\n            return null;\n        }\n        return row.childNodes[x] as HTMLElement;\n    }\n\n    /**\n     * Update the currently highlighted cell.\n     *\n     * @param cell The new cell to highlight.\n     * @param index The index of the new cell.\n     */\n    private setHighlightedCell(cell: Element, index: number): void {\n        // Un-highlight the current item.\n        const highlighted = this.getHighlighted();\n        if (highlighted) {\n            Blockly.utils.dom.removeClass(highlighted, 'blocklyColourHighlighted');\n        }\n        // Highlight new item.\n        Blockly.utils.dom.addClass(cell, 'blocklyColourHighlighted');\n        // Set new highlighted index.\n        this.highlightedIndex = index;\n\n        // Update accessibility roles.\n        const cellId = cell.getAttribute('id');\n        if (cellId && this.picker) {\n            Blockly.utils.aria.setState(this.picker, Blockly.utils.aria.State.ACTIVEDESCENDANT, cellId);\n        }\n    }\n\n    /** Create a colour picker dropdown editor. */\n    private dropdownCreate(): void {\n        const columns = this.columns;\n        const colours = this.colours;\n        const selectedColour = this.getValue();\n        // Create the palette.\n        const table = document.createElement('table');\n        table.className = 'blocklyColourTable';\n        table.tabIndex = 0;\n        table.dir = 'ltr';\n        Blockly.utils.aria.setRole(table, Blockly.utils.aria.Role.GRID);\n        Blockly.utils.aria.setState(table, Blockly.utils.aria.State.EXPANDED, true);\n        Blockly.utils.aria.setState(table, Blockly.utils.aria.State.ROWCOUNT, Math.floor(colours.length / columns));\n        Blockly.utils.aria.setState(table, Blockly.utils.aria.State.COLCOUNT, columns);\n        let row: Element | null = null;\n        for (let i = 0; i < colours.length; i++) {\n            if (i % columns === 0) {\n                row = document.createElement('tr');\n                Blockly.utils.aria.setRole(row, Blockly.utils.aria.Role.ROW);\n                table.appendChild(row);\n            }\n            const cell = document.createElement('td');\n            (row as Element).appendChild(cell);\n            // This becomes the value, if clicked.\n            cell.setAttribute('data-colour', colours[i]);\n            cell.title = this.titles[i] || colours[i];\n            cell.id = Blockly.utils.idGenerator.getNextUniqueId();\n            cell.setAttribute('data-index', `${i}`);\n            Blockly.utils.aria.setRole(cell, Blockly.utils.aria.Role.GRIDCELL);\n            Blockly.utils.aria.setState(cell, Blockly.utils.aria.State.LABEL, colours[i]);\n            Blockly.utils.aria.setState(cell, Blockly.utils.aria.State.SELECTED, colours[i] === selectedColour);\n            cell.style.backgroundColor = colours[i];\n            if (colours[i] === selectedColour) {\n                cell.className = 'blocklyColourSelected';\n                this.highlightedIndex = i;\n            }\n        }\n\n        // Configure event handler on the table to listen for any event in a cell.\n        this.boundEvents.push(Blockly.browserEvents.conditionalBind(table, 'pointerdown', this, this.onClick, true));\n        this.boundEvents.push(\n            Blockly.browserEvents.conditionalBind(table, 'pointermove', this, this.onMouseMove, true),\n        );\n        this.boundEvents.push(\n            Blockly.browserEvents.conditionalBind(table, 'pointerenter', this, this.onMouseEnter, true),\n        );\n        this.boundEvents.push(\n            Blockly.browserEvents.conditionalBind(table, 'pointerleave', this, this.onMouseLeave, true),\n        );\n        this.boundEvents.push(Blockly.browserEvents.conditionalBind(table, 'keydown', this, this.onKeyDown, false));\n\n        this.picker = table;\n    }\n\n    /** Disposes of events and DOM-references belonging to the colour editor. */\n    private dropdownDispose(): void {\n        for (const event of this.boundEvents) {\n            Blockly.browserEvents.unbind(event);\n        }\n        this.boundEvents.length = 0;\n        this.picker = null;\n        this.highlightedIndex = null;\n    }\n\n    /**\n     * Construct a FieldColour from a JSON arg object.\n     *\n     * @param options A JSON object with options (colour).\n     * @returns The new field instance.\n     * @nocollapse\n     * @internal\n     */\n    static fromJson(options: FieldColourFromJsonConfig): FieldColour {\n        // `this` might be a subclass of FieldColour if that class doesn't override\n        // the static fromJson method.\n        return new this(options.colour, undefined, options);\n    }\n}\n\n/** The default value for this field. */\nFieldColour.prototype.DEFAULT_VALUE = '#ffffff';\n\n/**\n * Register the field and any dependencies.\n */\nexport function registerFieldColour(): void {\n    Blockly.fieldRegistry.register('field_colour', FieldColour);\n}\n\n/**\n * CSS for colour picker.\n */\nBlockly.Css.register(`\n.blocklyColourTable {\n  border-collapse: collapse;\n  display: block;\n  outline: none;\n  padding: 1px;\n}\n\n.blocklyColourTable>tr>td {\n  border: 0.5px solid #888;\n  box-sizing: border-box;\n  cursor: pointer;\n  display: inline-block;\n  height: 20px;\n  padding: 0;\n  width: 20px;\n}\n\n.blocklyColourTable>tr>td.blocklyColourHighlighted {\n  border-color: #eee;\n  box-shadow: 2px 2px 7px 2px rgba(0, 0, 0, 0.3);\n  position: relative;\n}\n\n.blocklyColourSelected, .blocklyColourSelected:hover {\n  border-color: #eee !important;\n  outline: 1px solid #333;\n  position: relative;\n}\n`);\n\n/**\n * Config options for the colour field.\n */\nexport interface FieldColourConfig extends FieldConfig {\n    colourOptions?: string[];\n    colourTitles?: string[];\n    columns?: number;\n}\n\n/**\n * fromJson config options for the colour field.\n */\nexport interface FieldColourFromJsonConfig extends FieldColourConfig {\n    colour?: string;\n}\n\n/**\n * A function that is called to validate changes to the field's value before\n * they are set.\n *\n * @see {@link https://developers.google.com/blockly/guides/create-custom-blocks/fields/validators#return_values}\n * @param newValue The value to be validated.\n * @returns One of three instructions for setting the new value: `T`, `null`,\n * or `undefined`.\n *\n * - `T` to set this function's returned value instead of `newValue`.\n *\n * - `null` to invoke `doValueInvalid_` and not set a value.\n *\n * - `undefined` to set `newValue` as is.\n */\nexport type FieldColourValidator = FieldValidator<string>;\n","/**\n * @license\n * Copyright 2024 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport type { Block } from 'blockly/core';\nimport type { JavascriptGenerator } from 'blockly/javascript';\nimport { type Generators } from './generatorsType';\nimport { registerFieldColour } from '../field_colour';\n\ndeclare enum JavascriptOrder {\n    ATOMIC = 0, // 0 \"\" ...\n    NEW = 1.1, // new\n    MEMBER = 1.2, // . []\n    FUNCTION_CALL = 2, // ()\n    INCREMENT = 3, // ++\n    // eslint-disable-next-line @typescript-eslint/no-duplicate-enum-values\n    DECREMENT = 3, // --\n    BITWISE_NOT = 4.1, // ~\n    UNARY_PLUS = 4.2, // +\n    UNARY_NEGATION = 4.3, // -\n    LOGICAL_NOT = 4.4, // !\n    TYPEOF = 4.5, // typeof\n    VOID = 4.6, // void\n    DELETE = 4.7, // delete\n    AWAIT = 4.8, // await\n    EXPONENTIATION = 5, // **\n    MULTIPLICATION = 5.1, // *\n    DIVISION = 5.2, // /\n    MODULUS = 5.3, // %\n    SUBTRACTION = 6.1, // -\n    ADDITION = 6.2, // +\n    BITWISE_SHIFT = 7, // << >> >>>\n    RELATIONAL = 8, // < <= > >=\n    // eslint-disable-next-line @typescript-eslint/no-duplicate-enum-values\n    IN = 8, // in\n    // eslint-disable-next-line @typescript-eslint/no-duplicate-enum-values\n    INSTANCEOF = 8, // instanceof\n    EQUALITY = 9, // == != === !==\n    BITWISE_AND = 10, // &\n    BITWISE_XOR = 11, // ^\n    BITWISE_OR = 12, // |\n    LOGICAL_AND = 13, // &&\n    LOGICAL_OR = 14, // ||\n    CONDITIONAL = 15, // ?:\n    ASSIGNMENT = 16, // = += -= **= *= /= %= <<= >>= ...\n    YIELD = 17, // yield\n    COMMA = 18, // ,\n    NONE = 99,\n}\n\n/** The name this block is registered under. */\nexport const BLOCK_NAME = 'colour_picker';\n\n// Block for colour picker.\nconst jsonDefinition = {\n    type: BLOCK_NAME,\n    message0: '%1',\n    args0: [\n        {\n            type: 'field_colour',\n            name: 'COLOUR',\n            colour: '#ff0000',\n        },\n    ],\n    output: 'Colour',\n    helpUrl: '%{BKY_COLOUR_PICKER_HELPURL}',\n    style: 'colour_blocks',\n    tooltip: '%{BKY_COLOUR_PICKER_TOOLTIP}',\n    extensions: ['parent_tooltip_when_inline'],\n};\n\n/**\n * Javascript block generator function.\n *\n * @param block The Block instance to generate code for.\n * @param generator The JavascriptGenerator calling the function.\n * @returns A tuple containing the code string and precedence.\n */\nexport function toJavascript(block: Block, generator: JavascriptGenerator): [string, JavascriptOrder] {\n    // Colour picker.\n    const code = generator.quote_(block.getFieldValue('COLOUR'));\n    return [code, 0 /* JavascriptOrder.ATOMIC */];\n}\n\nconst definitionsDict = window.Blockly.common.createBlockDefinitionsFromJsonArray([jsonDefinition]);\n\n/** The colour_picker BlockDefinition. */\nexport const blockDefinition = definitionsDict[BLOCK_NAME];\n\n/**\n * Install the `colour_picker` block and all of its dependencies.\n *\n * @param gens The CodeGenerators to install per-block\n *     generators on.\n */\nexport function installBlock(gens: Generators = {}): void {\n    registerFieldColour();\n    window.Blockly.common.defineBlocks(definitionsDict);\n    if (gens.javascript) {\n        gens.javascript.forBlock[BLOCK_NAME] = toJavascript;\n    }\n}\n","/**\n * @license\n * Copyright 2024 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport type { Block } from 'blockly/core';\nimport type { JavascriptGenerator } from 'blockly/javascript';\nimport { type Generators } from './generatorsType';\nimport { registerFieldColour } from '../field_colour';\n\ndeclare enum JavascriptOrder {\n    ATOMIC = 0, // 0 \"\" ...\n    NEW = 1.1, // new\n    MEMBER = 1.2, // . []\n    FUNCTION_CALL = 2, // ()\n    INCREMENT = 3, // ++\n    // eslint-disable-next-line @typescript-eslint/no-duplicate-enum-values\n    DECREMENT = 3, // --\n    BITWISE_NOT = 4.1, // ~\n    UNARY_PLUS = 4.2, // +\n    UNARY_NEGATION = 4.3, // -\n    LOGICAL_NOT = 4.4, // !\n    TYPEOF = 4.5, // typeof\n    VOID = 4.6, // void\n    DELETE = 4.7, // delete\n    AWAIT = 4.8, // await\n    EXPONENTIATION = 5, // **\n    MULTIPLICATION = 5.1, // *\n    DIVISION = 5.2, // /\n    MODULUS = 5.3, // %\n    SUBTRACTION = 6.1, // -\n    ADDITION = 6.2, // +\n    BITWISE_SHIFT = 7, // << >> >>>\n    RELATIONAL = 8, // < <= > >=\n    // eslint-disable-next-line @typescript-eslint/no-duplicate-enum-values\n    IN = 8, // in\n    // eslint-disable-next-line @typescript-eslint/no-duplicate-enum-values\n    INSTANCEOF = 8, // instanceof\n    EQUALITY = 9, // == != === !==\n    BITWISE_AND = 10, // &\n    BITWISE_XOR = 11, // ^\n    BITWISE_OR = 12, // |\n    LOGICAL_AND = 13, // &&\n    LOGICAL_OR = 14, // ||\n    CONDITIONAL = 15, // ?:\n    ASSIGNMENT = 16, // = += -= **= *= /= %= <<= >>= ...\n    YIELD = 17, // yield\n    COMMA = 18, // ,\n    NONE = 99,\n}\n\n/** The name this block is registered under. */\nexport const BLOCK_NAME = 'colour_random';\n\n// Block for random colour.\nconst jsonDefinition = {\n    type: BLOCK_NAME,\n    message0: '%{BKY_COLOUR_RANDOM_TITLE}',\n    output: 'Colour',\n    helpUrl: '%{BKY_COLOUR_RANDOM_HELPURL}',\n    style: 'colour_blocks',\n    tooltip: '%{BKY_COLOUR_RANDOM_TOOLTIP}',\n};\n\n/**\n * Javascript block generator function.\n *\n * @param block The Block instance to generate code for.\n * @param generator The JavascriptGenerator calling the function.\n * @returns A tuple containing the code string and precedence.\n */\nexport function toJavascript(block: Block, generator: JavascriptGenerator): [string, JavascriptOrder] {\n    // Generate a random colour.\n    const functionName = generator.provideFunction_(\n        'colourRandom',\n        `\nfunction ${generator.FUNCTION_NAME_PLACEHOLDER_}() {\n  var num = Math.floor(Math.random() * 0x1000000);\n  return '#' + ('00000' + num.toString(16)).substr(-6);\n}\n`,\n    );\n    const code = `${functionName}()`;\n    return [code, 2 /* JavascriptOrder.FUNCTION_CALL */];\n}\n\nconst definitionsDict = window.Blockly.common.createBlockDefinitionsFromJsonArray([jsonDefinition]);\n\n/** The colour_random BlockDefinition. */\nexport const blockDefinition = definitionsDict[BLOCK_NAME];\n\n/**\n * Install the `colour_picker` block and all of its dependencies.\n *\n * @param gens The CodeGenerators to install per-block\n *     generators on.\n */\nexport function installBlock(gens: Generators = {}): void {\n    registerFieldColour();\n    window.Blockly.common.defineBlocks(definitionsDict);\n    if (gens.javascript) {\n        gens.javascript.forBlock[BLOCK_NAME] = toJavascript;\n    }\n}\n","/**\n * @license\n * Copyright 2024 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport type { Block } from 'blockly/core';\nimport type { JavascriptGenerator } from 'blockly/javascript';\nimport { type Generators } from './generatorsType';\nimport { registerFieldColour } from '../field_colour';\n\ndeclare enum JavascriptOrder {\n    ATOMIC = 0, // 0 \"\" ...\n    NEW = 1.1, // new\n    MEMBER = 1.2, // . []\n    FUNCTION_CALL = 2, // ()\n    INCREMENT = 3, // ++\n    // eslint-disable-next-line @typescript-eslint/no-duplicate-enum-values\n    DECREMENT = 3, // --\n    BITWISE_NOT = 4.1, // ~\n    UNARY_PLUS = 4.2, // +\n    UNARY_NEGATION = 4.3, // -\n    LOGICAL_NOT = 4.4, // !\n    TYPEOF = 4.5, // typeof\n    VOID = 4.6, // void\n    DELETE = 4.7, // delete\n    AWAIT = 4.8, // await\n    EXPONENTIATION = 5, // **\n    MULTIPLICATION = 5.1, // *\n    DIVISION = 5.2, // /\n    MODULUS = 5.3, // %\n    SUBTRACTION = 6.1, // -\n    ADDITION = 6.2, // +\n    BITWISE_SHIFT = 7, // << >> >>>\n    RELATIONAL = 8, // < <= > >=\n    // eslint-disable-next-line @typescript-eslint/no-duplicate-enum-values\n    IN = 8, // in\n    // eslint-disable-next-line @typescript-eslint/no-duplicate-enum-values\n    INSTANCEOF = 8, // instanceof\n    EQUALITY = 9, // == != === !==\n    BITWISE_AND = 10, // &\n    BITWISE_XOR = 11, // ^\n    BITWISE_OR = 12, // |\n    LOGICAL_AND = 13, // &&\n    LOGICAL_OR = 14, // ||\n    CONDITIONAL = 15, // ?:\n    ASSIGNMENT = 16, // = += -= **= *= /= %= <<= >>= ...\n    YIELD = 17, // yield\n    COMMA = 18, // ,\n    NONE = 99,\n}\n\n/** The name this block is registered under. */\nexport const BLOCK_NAME = 'colour_rgb';\n\n// Block for composing a colour from RGB components.\nconst jsonDefinition = {\n    type: BLOCK_NAME,\n    message0: '%{BKY_COLOUR_RGB_TITLE} %{BKY_COLOUR_RGB_RED} %1 %{BKY_COLOUR_RGB_GREEN} %2 %{BKY_COLOUR_RGB_BLUE} %3',\n    args0: [\n        {\n            type: 'input_value',\n            name: 'RED',\n            check: 'Number',\n            align: 'RIGHT',\n        },\n        {\n            type: 'input_value',\n            name: 'GREEN',\n            check: 'Number',\n            align: 'RIGHT',\n        },\n        {\n            type: 'input_value',\n            name: 'BLUE',\n            check: 'Number',\n            align: 'RIGHT',\n        },\n    ],\n    output: 'Colour',\n    helpUrl: '%{BKY_COLOUR_RGB_HELPURL}',\n    style: 'colour_blocks',\n    tooltip: '%{BKY_COLOUR_RGB_TOOLTIP}',\n};\n\n/**\n * Javascript block generator function.\n *\n * @param block The Block instance to generate code for.\n * @param generator The JavascriptGenerator calling the function.\n * @returns A tuple containing the code string and precedence.\n */\nexport function toJavascript(block: Block, generator: JavascriptGenerator): [string, JavascriptOrder] {\n    // Compose a colour from RGB components expressed as percentages.\n    const red = generator.valueToCode(block, 'RED', 99 /* JavascriptOrder.NONE */) || 0;\n    const green = generator.valueToCode(block, 'GREEN', 99 /* JavascriptOrder.NONE */) || 0;\n    const blue = generator.valueToCode(block, 'BLUE', 99 /* JavascriptOrder.NONE */) || 0;\n    const functionName = generator.provideFunction_(\n        'colourRgb',\n        `\nfunction ${generator.FUNCTION_NAME_PLACEHOLDER_}(r, g, b) {\n  r = Math.max(Math.min(Number(r), 100), 0) * 2.55;\n  g = Math.max(Math.min(Number(g), 100), 0) * 2.55;\n  b = Math.max(Math.min(Number(b), 100), 0) * 2.55;\n  r = ('0' + (Math.round(r) || 0).toString(16)).slice(-2);\n  g = ('0' + (Math.round(g) || 0).toString(16)).slice(-2);\n  b = ('0' + (Math.round(b) || 0).toString(16)).slice(-2);\n  return '#' + r + g + b;\n}\n`,\n    );\n    const code = `${functionName}(${red}, ${green}, ${blue})`;\n    return [code, 2 /* JavascriptOrder.FUNCTION_CALL*/];\n}\n\nconst definitionsDict = window.Blockly.common.createBlockDefinitionsFromJsonArray([jsonDefinition]);\n\n/** The colour_rgb BlockDefinition. */\nexport const blockDefinition = definitionsDict[BLOCK_NAME];\n\n/**\n * Install the `colour_rgb` block and all of its dependencies.\n *\n * @param gens The CodeGenerators to install per-block\n *     generators on.\n */\nexport function installBlock(gens: Generators = {}): void {\n    registerFieldColour();\n    window.Blockly.common.defineBlocks(definitionsDict);\n    if (gens.javascript) {\n        gens.javascript.forBlock[BLOCK_NAME] = toJavascript;\n    }\n}\n","/**\n * @license\n * Copyright 2024 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport type { Block } from 'blockly/core';\nimport type { JavascriptGenerator } from 'blockly/javascript';\nimport { type Generators } from './generatorsType';\nimport { registerFieldColour } from '../field_colour';\n\ndeclare enum JavascriptOrder {\n    ATOMIC = 0, // 0 \"\" ...\n    NEW = 1.1, // new\n    MEMBER = 1.2, // . []\n    FUNCTION_CALL = 2, // ()\n    INCREMENT = 3, // ++\n    // eslint-disable-next-line @typescript-eslint/no-duplicate-enum-values\n    DECREMENT = 3, // --\n    BITWISE_NOT = 4.1, // ~\n    UNARY_PLUS = 4.2, // +\n    UNARY_NEGATION = 4.3, // -\n    LOGICAL_NOT = 4.4, // !\n    TYPEOF = 4.5, // typeof\n    VOID = 4.6, // void\n    DELETE = 4.7, // delete\n    AWAIT = 4.8, // await\n    EXPONENTIATION = 5, // **\n    MULTIPLICATION = 5.1, // *\n    DIVISION = 5.2, // /\n    MODULUS = 5.3, // %\n    SUBTRACTION = 6.1, // -\n    ADDITION = 6.2, // +\n    BITWISE_SHIFT = 7, // << >> >>>\n    RELATIONAL = 8, // < <= > >=\n    // eslint-disable-next-line @typescript-eslint/no-duplicate-enum-values\n    IN = 8, // in\n    // eslint-disable-next-line @typescript-eslint/no-duplicate-enum-values\n    INSTANCEOF = 8, // instanceof\n    EQUALITY = 9, // == != === !==\n    BITWISE_AND = 10, // &\n    BITWISE_XOR = 11, // ^\n    BITWISE_OR = 12, // |\n    LOGICAL_AND = 13, // &&\n    LOGICAL_OR = 14, // ||\n    CONDITIONAL = 15, // ?:\n    ASSIGNMENT = 16, // = += -= **= *= /= %= <<= >>= ...\n    YIELD = 17, // yield\n    COMMA = 18, // ,\n    NONE = 99,\n}\n\n/** The name this block is registered under. */\nexport const BLOCK_NAME = 'colour_blend';\n\n// Block for blending two colours together.\nconst jsonDefinition = {\n    type: BLOCK_NAME,\n    message0:\n        '%{BKY_COLOUR_BLEND_TITLE} %{BKY_COLOUR_BLEND_COLOUR1} ' +\n        '%1 %{BKY_COLOUR_BLEND_COLOUR2} %2 %{BKY_COLOUR_BLEND_RATIO} %3',\n    args0: [\n        {\n            type: 'input_value',\n            name: 'COLOUR1',\n            check: 'Colour',\n            align: 'RIGHT',\n        },\n        {\n            type: 'input_value',\n            name: 'COLOUR2',\n            check: 'Colour',\n            align: 'RIGHT',\n        },\n        {\n            type: 'input_value',\n            name: 'RATIO',\n            check: 'Number',\n            align: 'RIGHT',\n        },\n    ],\n    output: 'Colour',\n    helpUrl: '%{BKY_COLOUR_BLEND_HELPURL}',\n    style: 'colour_blocks',\n    tooltip: '%{BKY_COLOUR_BLEND_TOOLTIP}',\n};\n\n/**\n * Javascript block generator function.\n *\n * @param block The Block instance to generate code for.\n * @param generator The JavascriptGenerator calling the function.\n * @returns A tuple containing the code string and precedence.\n */\nexport function toJavascript(block: Block, generator: JavascriptGenerator): [string, JavascriptOrder] {\n    // Blend two colours together.\n    const colour1 = generator.valueToCode(block, 'COLOUR1', 99 /* JavascriptOrder.NONE */) || \"'#000000'\";\n    const colour2 = generator.valueToCode(block, 'COLOUR2', 99 /* JavascriptOrder.NONE */) || \"'#000000'\";\n    const ratio = generator.valueToCode(block, 'RATIO', 99 /* JavascriptOrder.NONE */) || 0.5;\n    const functionName = generator.provideFunction_(\n        'colourBlend',\n        `\nfunction ${generator.FUNCTION_NAME_PLACEHOLDER_}(c1, c2, ratio) {\n  ratio = Math.max(Math.min(Number(ratio), 1), 0);\n  var r1 = parseInt(c1.substring(1, 3), 16);\n  var g1 = parseInt(c1.substring(3, 5), 16);\n  var b1 = parseInt(c1.substring(5, 7), 16);\n  var r2 = parseInt(c2.substring(1, 3), 16);\n  var g2 = parseInt(c2.substring(3, 5), 16);\n  var b2 = parseInt(c2.substring(5, 7), 16);\n  var r = Math.round(r1 * (1 - ratio) + r2 * ratio);\n  var g = Math.round(g1 * (1 - ratio) + g2 * ratio);\n  var b = Math.round(b1 * (1 - ratio) + b2 * ratio);\n  r = ('0' + (r || 0).toString(16)).slice(-2);\n  g = ('0' + (g || 0).toString(16)).slice(-2);\n  b = ('0' + (b || 0).toString(16)).slice(-2);\n  return '#' + r + g + b;\n}\n`,\n    );\n    const code = `${functionName}(${colour1}, ${colour2}, ${ratio})`;\n    return [code, 2 /* JavascriptOrder.FUNCTION_CALL */];\n}\n\nconst definitionsDict = window.Blockly.common.createBlockDefinitionsFromJsonArray([jsonDefinition]);\n\n/** The colour_blend BlockDefinition. */\nexport const blockDefinition = definitionsDict[BLOCK_NAME];\n\n/**\n * Install the `colour_blend` block and all of its dependencies.\n *\n * @param gens The CodeGenerators to install per-block\n *     generators on.\n */\nexport function installBlock(gens: Generators = {}): void {\n    registerFieldColour();\n    window.Blockly.common.defineBlocks(definitionsDict);\n    if (gens.javascript) {\n        gens.javascript.forBlock[BLOCK_NAME] = toJavascript;\n    }\n}\n","import React from 'react';\n\nimport { Button, Dialog, DialogActions, DialogContent, DialogTitle, TextField } from '@mui/material';\nimport { Cancel as IconCancel, Check as IconOk } from '@mui/icons-material';\n\nimport { I18n, Message as DialogMessage, type ThemeType } from '@iobroker/adapter-react-v5';\n\nimport DialogError from '../Dialogs/Error';\nimport DialogExport from '../Dialogs/Export';\nimport DialogImport from '../Dialogs/Import';\nimport { type BlocklyType, type BlockSvg, type WorkspaceSvg, type CustomBlock, initBlockly } from './blockly-plugins';\n\nlet languageBlocklyLoaded = false;\nlet languageOwnLoaded = false;\nlet toolboxText: string | null = null;\nlet toolboxXml: Element | null = null;\nconst scriptsLoaded: string[] = [];\n\n// BF (2020-10-31) I have no Idea, why it does not work as static in BlocklyEditor, but outside BlocklyEditor it works\nfunction searchXml(root: Element, text: string, _id?: string, _result?: string[]): string[] {\n    _result = _result || [];\n    if (root.tagName === 'BLOCK' || root.tagName === 'block') {\n        _id = root.id;\n    }\n    if (root.tagName === 'FIELD' || root.tagName === 'field') {\n        for (let a = 0; a < root.attributes.length; a++) {\n            const val = (root.attributes[a].value || '').toLowerCase();\n            if (root.attributes[a].nodeName === 'name' && (val === 'oid' || val === 'text' || val === 'var')) {\n                if (_id && root.innerHTML?.toLowerCase().includes(text)) {\n                    _result.push(_id);\n                }\n            }\n        }\n    }\n    root.childNodes.forEach(node => searchXml(node as HTMLElement, text, _id, _result));\n\n    return _result;\n}\n\ninterface BlocklyEditorProps {\n    command: '' | 'check' | 'export' | 'import';\n    onChange: (code: string) => void;\n    searchText: string;\n    code: string;\n    scriptId: string;\n    themeType: ThemeType;\n}\n\ninterface BlocklyEditorState {\n    languageOwnLoaded: boolean;\n    languageBlocklyLoaded: boolean;\n    changed: boolean;\n    message: string | { text: string; title: string };\n    error: string | { text: string; title: string };\n    themeType: ThemeType;\n    exportText: string;\n    importText: boolean;\n    searchText: string;\n    showInputPrompt: null | {\n        promptText: string;\n        defaultText: string;\n        callback: (p1: string | null) => void;\n        value: string;\n    };\n}\n\nclass BlocklyEditor extends React.Component<BlocklyEditorProps, BlocklyEditorState> {\n    private blockly: HTMLElement | null = null;\n    private blocklyWorkspace: WorkspaceSvg | null = null;\n    private originalCode: string;\n    private someSelected: string[] | null = null;\n    private changeTimer: ReturnType<typeof setTimeout> | null = null;\n    private someSelectedTime: number = 0;\n    private ignoreChanges: boolean = false;\n    private darkTheme: any;\n    private blinkBlock: any;\n    private readonly onResizeBind: () => void;\n    private didUpdate: ReturnType<typeof setTimeout> | null = null;\n    private lastCommand = '';\n    private lastSearch: string;\n    public static Blockly: BlocklyType = window.Blockly;\n\n    constructor(props: BlocklyEditorProps) {\n        super(props);\n\n        this.state = {\n            languageOwnLoaded,\n            languageBlocklyLoaded,\n            changed: false,\n            message: '',\n            error: '',\n            themeType: this.props.themeType,\n            exportText: '',\n            importText: false,\n            searchText: this.props.searchText || '',\n            showInputPrompt: null,\n        };\n        this.originalCode = props.code || '';\n\n        this.someSelected = null;\n\n        this.onResizeBind = this.onResize.bind(this);\n\n        this.lastSearch = this.props.searchText || '';\n        this.blinkBlock = null;\n\n        initBlockly();\n        BlocklyEditor.Blockly.dialog.setPrompt(this.onShowNameDialog);\n\n        this.loadLanguages();\n    }\n\n    onShowNameDialog = (promptText: string, defaultText: string, callback: (p1: string | null) => void): void => {\n        this.setState({ showInputPrompt: { promptText, defaultText, callback, value: defaultText } });\n    };\n\n    static loadJS(url: string, callback: () => void, location?: HTMLElement): void {\n        const scriptTag = document.createElement('script');\n        try {\n            scriptTag.src = url;\n\n            scriptTag.onload = callback;\n            scriptTag.onerror = callback;\n\n            (location || window.document.body).appendChild(scriptTag);\n        } catch (e) {\n            console.error(`Cannot load ${url}: ${e}`);\n            if (callback) {\n                callback();\n            }\n        }\n    }\n\n    static loadScripts(scripts: string[], callback: () => void): void {\n        if (!scripts?.length) {\n            if (callback) {\n                callback();\n            }\n            return;\n        }\n        const adapter = scripts.pop();\n        if (adapter && !scriptsLoaded.includes(adapter)) {\n            scriptsLoaded.push(adapter);\n            BlocklyEditor.loadJS(`../../adapter/${adapter}/blockly.js`, (/*data, textStatus, jqxhr*/) =>\n                setTimeout(() => BlocklyEditor.loadScripts(scripts, callback), 0),);\n        } else {\n            setTimeout(() => BlocklyEditor.loadScripts(scripts, callback), 0);\n        }\n    }\n\n    static loadCustomBlockly(adapters: Record<string, ioBroker.AdapterObject>, callback: () => void): void {\n        // get all adapters, that can have blockly\n        const toLoad: string[] = [];\n        for (const id in adapters) {\n            if (\n                !Object.prototype.hasOwnProperty.call(adapters, id) ||\n                !adapters[id] ||\n                !id.match(/^system\\.adapter\\./) ||\n                adapters[id].type !== 'adapter'\n            ) {\n                continue;\n            }\n\n            if (adapters[id].common?.blockly) {\n                console.log(`Detected custom blockly: ${adapters[id].common.name}`);\n                toLoad.push(adapters[id].common.name);\n            }\n        }\n\n        BlocklyEditor.loadScripts(toLoad, callback);\n    }\n\n    static loadXMLDoc(text: string): Document | null {\n        let parseXml;\n        if (window.DOMParser) {\n            parseXml = (xmlStr: string): Document => new window.DOMParser().parseFromString(xmlStr, 'text/xml');\n        } else if (typeof window.ActiveXObject !== 'undefined' && new window.ActiveXObject('Microsoft.XMLDOM')) {\n            parseXml = (xmlStr: string): Document => {\n                const xmlDoc = new window.ActiveXObject('Microsoft.XMLDOM');\n                xmlDoc.async = 'false';\n                xmlDoc.loadXML(xmlStr);\n                return xmlDoc;\n            };\n        } else {\n            parseXml = () => null;\n        }\n        return parseXml(text);\n    }\n\n    searchBlocks(text: string): string[] {\n        if (this.blocklyWorkspace) {\n            const dom: Element = BlocklyEditor.Blockly.Xml.workspaceToDom(this.blocklyWorkspace);\n            const ids = searchXml(dom, text.toLowerCase());\n\n            console.log(`Search \"${text}\" found blocks: ${ids.length ? JSON.stringify(ids) : 'none'}`);\n\n            return ids;\n        }\n\n        return [];\n    }\n\n    searchId(): void {\n        const ids = this.lastSearch ? this.searchBlocks(this.lastSearch) : null;\n        if (ids?.length) {\n            this.someSelected = ids;\n            this.someSelected.forEach(id => this.blocklyWorkspace?.highlightBlock(id, true));\n            this.someSelectedTime = Date.now();\n        } else if (this.someSelected) {\n            // remove selection\n            this.someSelected.forEach(id => this.blocklyWorkspace?.highlightBlock(id, false));\n            this.someSelected = null;\n        }\n    }\n\n    UNSAFE_componentWillReceiveProps(nextProps: BlocklyEditorProps): void {\n        if (nextProps.command && this.lastCommand !== nextProps.command) {\n            this.lastCommand = nextProps.command;\n            setTimeout(() => (this.lastCommand = ''), 300);\n            if (this.lastCommand === 'check') {\n                this.blocklyCheckBlocks((err, badBlock) => {\n                    if (!err) {\n                        this.setState({ message: I18n.t('Ok') });\n                    } else {\n                        badBlock && BlocklyEditor.blocklyBlinkBlock(badBlock);\n                        this.setState({ error: { text: I18n.t(err), title: I18n.t('Error was found') } });\n                        this.blinkBlock = badBlock;\n                    }\n                });\n            } else if (this.lastCommand === 'export') {\n                this.exportBlocks();\n            } else if (this.lastCommand === 'import') {\n                this.importBlocks();\n            }\n        }\n\n        if (nextProps.searchText !== this.lastSearch) {\n            this.lastSearch = nextProps.searchText;\n            this.searchId();\n        }\n\n        if (this.state.themeType !== nextProps.themeType) {\n            this.setState({ themeType: nextProps.themeType }, () => this.updateBackground());\n        }\n\n        if (this.originalCode !== nextProps.code) {\n            this.originalCode = nextProps.code || '';\n            this.loadCode();\n            this.searchId();\n        }\n    }\n\n    loadLanguages(): void {\n        // load blockly language\n        if (!languageBlocklyLoaded) {\n            const fileLang = window.document.createElement('script');\n            fileLang.setAttribute('type', 'text/javascript');\n            fileLang.setAttribute('src', `google-blockly/msg/js/${I18n.getLanguage()}.js`);\n\n            // most browsers\n            fileLang.onload = () => {\n                languageBlocklyLoaded = true;\n                this.setState({ languageBlocklyLoaded });\n            };\n            window.document.getElementsByTagName('head')[0].appendChild(fileLang);\n        }\n        if (!languageOwnLoaded) {\n            const fileCustom = window.document.createElement('script');\n            fileCustom.setAttribute('type', 'text/javascript');\n            fileCustom.setAttribute('src', `google-blockly/own/msg/${I18n.getLanguage()}.js`);\n            // most browsers\n            fileCustom.onload = () => {\n                languageOwnLoaded = true;\n                this.setState({ languageOwnLoaded });\n            };\n            window.document.getElementsByTagName('head')[0].appendChild(fileCustom);\n        }\n    }\n\n    onResize(): void {\n        if (this.blocklyWorkspace) {\n            BlocklyEditor.Blockly.svgResize(this.blocklyWorkspace);\n        }\n    }\n\n    static jsCode2Blockly(text: string | undefined): string | null {\n        text = text || '';\n        const lines = text.split(/[\\r\\n]+|\\r|\\n/g);\n        let xml = '';\n        for (let l = lines.length - 1; l >= 0; l--) {\n            if (lines[l].substring(0, 2) === '//') {\n                xml = lines[l].substring(2);\n                break;\n            }\n        }\n        if (xml.substring(0, 4) === '<xml') {\n            return xml;\n        }\n\n        let code;\n        try {\n            code = window.decodeURIComponent(window.atob(xml));\n        } catch (e) {\n            code = null;\n            console.error(`cannot decode: ${xml}`);\n            console.error(e);\n        }\n        return code;\n    }\n\n    static blocklyBlinkBlock(block: BlockSvg): void {\n        for (let i = 300; i < 3000; i += 300) {\n            setTimeout(() => block.select(), i);\n            setTimeout(() => block.unselect(), i + 150);\n        }\n    }\n\n    blocklyRemoveOrphanedShadows(): void {\n        if (this.blocklyWorkspace) {\n            const blocks = this.blocklyWorkspace.getAllBlocks();\n            let block;\n            for (let i = 0; (block = blocks[i]); i++) {\n                if (block.isShadow()) {\n                    const connections = block.getConnections_(true);\n                    let conn;\n                    for (let j = 0; (conn = connections[j]); j++) {\n                        if (!conn.targetConnection) {\n                            // remove it\n                            block.dispose();\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n    blocklyCheckBlocks(cb: (warningText?: string, badBlock?: BlockSvg) => void): boolean {\n        let warningText;\n        if (!this.blocklyWorkspace || this.blocklyWorkspace.getAllBlocks().length === 0) {\n            cb && cb('no blocks found');\n            return false;\n        }\n        let badBlock = this.blocklyGetUnconnectedBlock();\n        if (badBlock) {\n            warningText = 'not properly connected';\n        } else {\n            badBlock = this.blocklyGetBlockWithWarning();\n            if (badBlock) {\n                warningText = 'warning on this block';\n            }\n        }\n\n        if (badBlock) {\n            if (cb) {\n                cb(warningText, badBlock);\n            } else {\n                BlocklyEditor.blocklyBlinkBlock(badBlock);\n            }\n            return false;\n        }\n\n        cb();\n\n        return true;\n    }\n\n    // get unconnected block\n    blocklyGetUnconnectedBlock(): BlockSvg | null {\n        const blocks: BlockSvg[] | undefined = this.blocklyWorkspace?.getAllBlocks();\n        let block;\n        if (blocks) {\n            for (let i = 0; (block = blocks[i]); i++) {\n                const connections = block.getConnections_(true);\n                let conn;\n                for (let j = 0; (conn = connections[j]); j++) {\n                    if (\n                        !conn.sourceBlock_ ||\n                        ((conn.type === BlocklyEditor.Blockly.INPUT_VALUE ||\n                            conn.type === BlocklyEditor.Blockly.OUTPUT_VALUE) &&\n                            !conn.targetConnection &&\n                            // @ts-expect-error Check it later\n                            !conn._optional)\n                    ) {\n                        return block;\n                    }\n                }\n            }\n        }\n        return null;\n    }\n\n    // get block with warning\n    blocklyGetBlockWithWarning(): BlockSvg | null {\n        const blocks = this.blocklyWorkspace?.getAllBlocks();\n        let block;\n        if (blocks) {\n            for (let i = 0; (block = blocks[i]); i++) {\n                // @ts-expect-error fix later\n                if (block.warning) {\n                    return block;\n                }\n            }\n        }\n        return null;\n    }\n\n    blocklyCode2JSCode(oneWay?: boolean): string {\n        if (!this.blocklyWorkspace) {\n            return '';\n        }\n        let code = BlocklyEditor.Blockly.JavaScript.workspaceToCode(this.blocklyWorkspace);\n        if (!oneWay) {\n            code += '\\n';\n            const dom = BlocklyEditor.Blockly.Xml.workspaceToDom(this.blocklyWorkspace);\n            const text = BlocklyEditor.Blockly.Xml.domToText(dom);\n            code += `//${btoa(encodeURIComponent(text))}`;\n        }\n\n        return code;\n    }\n\n    exportBlocks(): void {\n        if (!this.blocklyWorkspace) {\n            return;\n        }\n        let exportText: string;\n        const selectedBlocks: BlockSvg | null = BlocklyEditor.Blockly.getSelected() as BlockSvg | null;\n        if (selectedBlocks) {\n            const xmlBlock: Element = BlocklyEditor.Blockly.Xml.blockToDom(selectedBlocks) as Element;\n            // @1ts-expect-error fix later. TODO!!!!\n            // if (BlocklyEditor.Blockly.dragMode_ !== BlocklyEditor.Blockly.DRAG_FREE) {\n            //    BlocklyEditor.Blockly.Xml.deleteNext(xmlBlock);\n            // }\n            // Encode start position in XML.\n            const xy = selectedBlocks.getRelativeToSurfaceXY();\n            xmlBlock.setAttribute('x', (selectedBlocks.RTL ? -xy.x : xy.x).toString());\n            xmlBlock.setAttribute('y', xy.y.toString());\n\n            exportText = BlocklyEditor.Blockly.Xml.domToPrettyText(xmlBlock);\n        } else {\n            const dom = BlocklyEditor.Blockly.Xml.workspaceToDom(this.blocklyWorkspace);\n            exportText = BlocklyEditor.Blockly.Xml.domToPrettyText(dom);\n        }\n        this.setState({ exportText });\n    }\n\n    importBlocks(): void {\n        this.setState({ importText: true });\n    }\n\n    onImportBlocks(xml: string | undefined): void {\n        if (!this.blocklyWorkspace) {\n            return;\n        }\n        xml = (xml || '').trim();\n        if (xml) {\n            try {\n                if (!xml.startsWith('<xml')) {\n                    xml = `<xml xmlns=\"https://developers.google.com/blockly/xml\">${xml}</xml>`;\n                }\n                /*\n                // TODO: WHY?!\n                const variables = xml.replace(/[\\n\\r]/g, '').match(/<variables>(.*)<\\/variables>/);\n                if (variables) {\n                    const parser = new DOMParser();\n                    const vars = parser.parseFromString(`<variables>${variables[1]}</variables>`, 'text/xml').firstChild;\n                    for (const child of vars.children) {\n                        if (child.tagName === 'variable') {\n                            // e.g. timeout or interval\n                            const varType = child.getAttribute('type');\n                            if (varType) {\n                                this.blocklyWorkspace.createVariable(child.getAttribute('id'), varType);\n                            }\n                        }\n                    }\n                }\n                */\n                xml = xml.replace(/[\\n\\r]/g, '').replace(/<variables>.*<\\/variables>/g, '');\n                window.scripts.loading = true;\n\n                const xmlBlocks = BlocklyEditor.Blockly.utils.xml.textToDom(xml);\n                if (xmlBlocks.nodeName === 'xml') {\n                    for (let b = 0; b < xmlBlocks.children.length; b++) {\n                        // @ts-expect-error fix later\n                        this.blocklyWorkspace.paste(xmlBlocks.children[b]);\n                    }\n                } else {\n                    // @ts-expect-error fix later\n                    this.blocklyWorkspace.paste(xmlBlocks);\n                }\n\n                window.scripts.loading = false;\n\n                this.onBlocklyChanged();\n            } catch (e) {\n                this.setState({ error: { text: (e as Error).toString(), title: I18n.t('Import error') } });\n            }\n        }\n    }\n\n    loadCode(): void {\n        if (!this.blocklyWorkspace) {\n            return;\n        }\n\n        this.ignoreChanges = true;\n        this.blocklyWorkspace.clear();\n\n        try {\n            const xml =\n                BlocklyEditor.jsCode2Blockly(this.originalCode) ||\n                '<xml xmlns=\"https://developers.google.com/blockly/xml\"></xml>';\n            window.scripts.loading = true;\n            const dom = BlocklyEditor.Blockly.utils.xml.textToDom(xml);\n            BlocklyEditor.Blockly.Xml.domToWorkspace(dom, this.blocklyWorkspace);\n            window.scripts.loading = false;\n        } catch (e) {\n            console.error(e);\n            setTimeout(() => this.setState({ error: I18n.t('Cannot extract Blockly code!') }));\n        }\n        setTimeout(() => (this.ignoreChanges = false), 100);\n    }\n\n    onBlocklyChanged(): void {\n        this.blocklyRemoveOrphanedShadows();\n        this.setState({ changed: true });\n        this.onChange();\n    }\n\n    async componentDidUpdate(): Promise<void> {\n        if (!this.blockly) {\n            return;\n        }\n        if (this.didUpdate) {\n            clearTimeout(this.didUpdate);\n            this.didUpdate = null;\n        }\n\n        if (this.blocklyWorkspace) {\n            return;\n        }\n\n        window.addEventListener('resize', this.onResizeBind, false);\n        toolboxText = toolboxText || (await this.getToolbox());\n        toolboxXml = toolboxXml || BlocklyEditor.Blockly.utils.xml.textToDom(toolboxText);\n\n        this.darkTheme = BlocklyEditor.Blockly.Theme.defineTheme('dark', {\n            name: 'dark',\n            base: BlocklyEditor.Blockly.Themes.Classic,\n            componentStyles: {\n                workspaceBackgroundColour: '#1e1e1e',\n                toolboxBackgroundColour: 'blackBackground',\n                toolboxForegroundColour: '#fff',\n                flyoutBackgroundColour: '#252526',\n                flyoutForegroundColour: '#ccc',\n                flyoutOpacity: 1,\n                scrollbarColour: '#797979',\n                insertionMarkerColour: '#fff',\n                insertionMarkerOpacity: 0.3,\n                scrollbarOpacity: 0.4,\n                cursorColour: '#d0d0d0',\n            },\n        });\n\n        // https://developers.google.com/blockly/reference/js/blockly.blocklyoptions_interface.md\n        this.blocklyWorkspace = BlocklyEditor.Blockly.inject(this.blockly, {\n            renderer: 'thrasos',\n            theme: 'classic',\n            media: 'google-blockly/media/',\n            toolbox: toolboxXml,\n            zoom: {\n                controls: true,\n                wheel: false,\n                startScale: 1.0,\n                maxScale: 3,\n                minScale: 0.3,\n                scaleSpeed: 1.2,\n                pinch: true,\n            },\n            move: {\n                scrollbars: {\n                    horizontal: true,\n                    vertical: true,\n                },\n                drag: true,\n                wheel: true,\n            },\n            trashcan: true,\n            grid: {\n                spacing: 25,\n                length: 1,\n                snap: true,\n            },\n            sounds: false, // disable sounds\n        });\n        // for blockly itself\n        window.scripts = {\n            blocklyWorkspace: this.blocklyWorkspace,\n        };\n\n        // Workaround: Replace procedure category flyout\n        this.blocklyWorkspace.registerToolboxCategoryCallback('PROCEDURE', window.Blockly.Procedures.flyoutCategoryNew);\n\n        // Listen to events on master workspace.\n        this.blocklyWorkspace.addChangeListener(masterEvent => {\n            if (this.someSelected && Date.now() - this.someSelectedTime > 500) {\n                const allBlocks = this.blocklyWorkspace?.getAllBlocks();\n                this.someSelected = null;\n                allBlocks?.forEach(b => b.removeSelect());\n            }\n\n            if (\n                [\n                    BlocklyEditor.Blockly.Events.UI,\n                    BlocklyEditor.Blockly.Events.CREATE,\n                    BlocklyEditor.Blockly.Events.VIEWPORT_CHANGE,\n                ].includes(masterEvent.type as 'ui' | 'create' | 'viewport_change')\n            ) {\n                return; // Don't mirror UI events.\n            }\n            if (this.ignoreChanges) {\n                return;\n            }\n\n            this.changeTimer && clearTimeout(this.changeTimer);\n            this.changeTimer = setTimeout(() => {\n                this.changeTimer = null;\n                this.onBlocklyChanged();\n            }, 200);\n        });\n        this.loadCode();\n        this.onResize();\n        // Move toolbar to the valid position\n        const toolbar = document.getElementsByClassName('blocklyToolboxDiv')[0];\n        this.blockly.appendChild(toolbar);\n\n        this.updateBackground();\n        setTimeout(() => this.searchId(), 200); // select found blocks\n    }\n\n    updateBackground(): void {\n        if (this.state.themeType === 'dark') {\n            this.blocklyWorkspace?.setTheme(this.darkTheme);\n        } else if (this.blocklyWorkspace) {\n            this.blocklyWorkspace.getThemeManager();\n            this.blocklyWorkspace.setTheme(BlocklyEditor.Blockly.Themes.Classic);\n        }\n    }\n\n    componentWillUnmount(): void {\n        if (!this.blocklyWorkspace) {\n            return;\n        }\n\n        this.blocklyWorkspace.dispose();\n        this.blocklyWorkspace = null;\n        this.changeTimer && clearTimeout(this.changeTimer);\n        this.changeTimer = null;\n        window.removeEventListener('resize', this.onResizeBind);\n    }\n\n    onChange(): void {\n        this.originalCode = this.blocklyCode2JSCode();\n        this.props.onChange && this.props.onChange(this.originalCode);\n    }\n\n    async getToolbox(retry?: boolean): Promise<string> {\n        // Interpolate translated messages into toolbox.\n        const el = window.document.getElementById('toolbox');\n        let toolboxText = el?.outerHTML;\n        if (!toolboxText) {\n            if (!retry) {\n                return new Promise(resolve => {\n                    setTimeout(() => resolve(this.getToolbox(true)), 500);\n                });\n            }\n\n            console.error('Cannot load blocks!');\n            return '';\n        }\n        toolboxText = toolboxText.replace(/{(\\w+)}/g, (m, p1) => window.MSG[p1]);\n\n        if (window.Blockly.CustomBlocks) {\n            let blocks = '';\n            const lang = I18n.getLanguage();\n            for (let cb = 0; cb < window.Blockly.CustomBlocks.length; cb++) {\n                const name = window.Blockly.CustomBlocks[cb];\n                // add blocks\n                const _block: CustomBlock = (window.Blockly as unknown as Record<string, CustomBlock>)[name];\n                blocks += `<category name=\"${window.Blockly.Words[name][lang]}\" colour=\"${_block.HUE}\">`;\n                for (const _b in _block.blocks) {\n                    if (Object.prototype.hasOwnProperty.call(_block.blocks, _b)) {\n                        blocks += _block.blocks[_b];\n                    }\n                }\n                blocks += '</category>';\n            }\n            toolboxText = toolboxText.replace('<category><block>%%CUSTOM_BLOCKS%%</block></category>', blocks);\n        }\n\n        return toolboxText;\n    }\n\n    renderMessageDialog(): React.JSX.Element | null {\n        return this.state.message ? (\n            <DialogMessage\n                key=\"dialogMessage\"\n                text={typeof this.state.message === 'object' ? this.state.message.text : this.state.message}\n                title={typeof this.state.message === 'object' ? this.state.message.title : ''}\n                onClose={() => this.setState({ message: '' })}\n            />\n        ) : null;\n    }\n\n    renderErrorDialog(): React.JSX.Element | null {\n        return this.state.error ? (\n            <DialogError\n                key=\"dialogError\"\n                text={typeof this.state.error === 'object' ? this.state.error.text.toString() : this.state.error}\n                title={typeof this.state.error === 'object' ? this.state.error.title : ''}\n                onClose={() => {\n                    if (this.blinkBlock) {\n                        BlocklyEditor.blocklyBlinkBlock(this.blinkBlock);\n                        this.blinkBlock = null;\n                    }\n                    this.setState({ error: '' });\n                }}\n            />\n        ) : null;\n    }\n\n    renderExportDialog(): React.JSX.Element | null {\n        return this.state.exportText ? (\n            <DialogExport\n                key=\"dialogExport\"\n                themeType={this.state.themeType}\n                onClose={() => this.setState({ exportText: '' })}\n                text={this.state.exportText}\n                scriptId={this.props.scriptId}\n            />\n        ) : null;\n    }\n\n    renderImportDialog(): React.JSX.Element | null {\n        return this.state.importText ? (\n            <DialogImport\n                key=\"dialogImport\"\n                onClose={(text: string | undefined) => {\n                    this.setState({ importText: false });\n                    this.onImportBlocks(text);\n                }}\n            />\n        ) : null;\n    }\n\n    renderDialogPrompt(): React.JSX.Element | null {\n        if (!this.state.showInputPrompt) {\n            return null;\n        }\n        return (\n            <Dialog\n                key=\"inputDialog\"\n                onClose={() => {\n                    const cb = this.state.showInputPrompt?.callback;\n                    if (cb) {\n                        cb(null);\n                    }\n                    this.setState({ showInputPrompt: null });\n                }}\n                maxWidth=\"sm\"\n                fullWidth\n                open={!0}\n            >\n                <DialogTitle>{this.state.showInputPrompt.promptText}</DialogTitle>\n                <DialogContent>\n                    <TextField\n                        variant=\"standard\"\n                        fullWidth\n                        value={this.state.showInputPrompt.value}\n                        onKeyUp={e => {\n                            if (e.key === 'Enter') {\n                                const cb = this.state.showInputPrompt?.callback;\n                                const value = this.state.showInputPrompt?.value;\n                                if (cb) {\n                                    cb(value === undefined ? null : value);\n                                }\n                                this.setState({ showInputPrompt: null });\n                            }\n                        }}\n                        onChange={e => {\n                            const showInputPrompt: {\n                                promptText: string;\n                                defaultText: string;\n                                callback: (p1: string | null) => void;\n                                value: string;\n                            } = { ...this.state.showInputPrompt } as {\n                                promptText: string;\n                                defaultText: string;\n                                callback: (p1: string | null) => void;\n                                value: string;\n                            };\n                            if (this.state.showInputPrompt?.callback) {\n                                showInputPrompt.callback = this.state.showInputPrompt?.callback;\n                            }\n                            showInputPrompt.value = e.target.value;\n                            this.setState({ showInputPrompt });\n                        }}\n                    />\n                </DialogContent>\n                <DialogActions>\n                    <Button\n                        variant=\"contained\"\n                        disabled={!this.state.showInputPrompt.value}\n                        onClick={() => {\n                            const cb = this.state.showInputPrompt?.callback;\n                            const value = this.state.showInputPrompt?.value;\n                            if (cb) {\n                                cb(value === undefined ? null : value);\n                            }\n                            this.setState({ showInputPrompt: null });\n                        }}\n                        color=\"primary\"\n                        startIcon={<IconOk />}\n                    >\n                        {I18n.t('Apply')}\n                    </Button>\n                    <Button\n                        color=\"grey\"\n                        variant=\"contained\"\n                        onClick={() => {\n                            const cb = this.state.showInputPrompt?.callback;\n                            if (cb) {\n                                cb(null);\n                            }\n                            this.setState({ showInputPrompt: null });\n                        }}\n                        startIcon={<IconCancel />}\n                    >\n                        {I18n.t('Close')}\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        );\n    }\n\n    render(): (React.JSX.Element | null)[] | null {\n        if (this.state.languageBlocklyLoaded && this.state.languageOwnLoaded) {\n            this.didUpdate = setTimeout(() => {\n                this.didUpdate = null;\n                void this.componentDidUpdate();\n            }, 100);\n\n            return [\n                <div\n                    key=\"blocklyDOM\"\n                    ref={el => (this.blockly = el)}\n                    style={{\n                        // marginLeft: 180,\n                        width: '100%', // 'calc(100% - 180px)',\n                        height: '100%',\n                        // overflow: 'hidden',\n                        position: 'relative',\n                    }}\n                />,\n\n                this.renderDialogPrompt(),\n                this.renderMessageDialog(),\n                this.renderErrorDialog(),\n                this.renderExportDialog(),\n                this.renderImportDialog(),\n            ];\n        }\n\n        return null;\n    }\n}\n\nexport default BlocklyEditor;\n","// Used only types of blockly, no code\nimport type { WorkspaceSvg as WorkspaceSvgType } from 'blockly/core/workspace_svg';\nimport type { BlockSvg as BlockSvgType } from 'blockly/core/block_svg';\nimport type { FlyoutDefinition } from 'blockly/core/utils/toolbox';\nimport type { Block as BlockType, BlocklyOptions, ISelectable, Theme } from 'blockly';\nimport type { ConnectionType } from 'blockly/core';\nimport type { ITheme } from 'blockly/core/theme';\nimport type { JavascriptGenerator as JavascriptGeneratorType } from 'blockly/javascript';\nimport type { RegistrableField } from 'blockly/core/field_registry';\n\n// Multiline is now plugin. Together with FieldColor\nimport { FieldMultilineInput } from './field-multilineinput/src';\nimport { FieldColour } from './field-colour/src';\nimport { toJavascript as toJavascriptMultiline } from './field-multilineinput/src/blocks/textMultiline';\nimport { toJavascript as toJavascriptColourBlend } from './field-colour/src/blocks/colourBlend';\nimport { toJavascript as toJavascriptColourRandom } from './field-colour/src/blocks/colourRandom';\nimport { toJavascript as toJavascriptColourPicker } from './field-colour/src/blocks/colourPicker';\nimport { toJavascript as toJavascriptColourRgb } from './field-colour/src/blocks/colourRgb';\n\nexport type JavascriptGenerator = JavascriptGeneratorType;\nexport type BlockSvg = BlockSvgType;\nexport type WorkspaceSvg = WorkspaceSvgType;\nexport type Block = BlockType;\n\nexport interface CustomBlock {\n    HUE: number;\n    blocks: Record<string, string>;\n}\n\nexport interface BlocklyType {\n    CustomBlocks: string[];\n    Words: Record<string, Record<ioBroker.Languages, string>>;\n    Action: CustomBlock;\n    Blocks: Record<string, BlockSvgType>;\n    JavaScript: JavascriptGeneratorType;\n    Procedures: {\n        flyoutCategoryNew: (workspace: WorkspaceSvg) => FlyoutDefinition;\n    };\n    Xml: {\n        workspaceToDom: (workspace: WorkspaceSvg) => Element;\n        domToText: (dom: Node) => string;\n        blockToDom: (block: BlockType, opt_noId?: boolean) => Element | DocumentFragment;\n        domToPrettyText: (dom: Node) => string;\n        domToWorkspace: (xml: Element, workspace: WorkspaceSvg) => string[];\n    };\n    svgResize: (workspace: WorkspaceSvg) => void;\n    INPUT_VALUE: ConnectionType.INPUT_VALUE;\n    OUTPUT_VALUE: ConnectionType.OUTPUT_VALUE;\n    NEXT_STATEMENT: ConnectionType.NEXT_STATEMENT;\n    PREVIOUS_STATEMENT: ConnectionType.PREVIOUS_STATEMENT;\n    getSelected(): ISelectable | null;\n    utils: {\n        xml: {\n            textToDom: (text: string) => Element;\n        };\n    };\n    Theme: {\n        defineTheme: (name: string, themeObj: ITheme) => Theme;\n    };\n    inject: (container: Element | string, opt_options?: BlocklyOptions) => WorkspaceSvg;\n    Themes: {\n        Classic: Theme;\n    };\n    Events: {\n        VIEWPORT_CHANGE: 'viewport_change';\n        CREATE: 'create';\n        UI: 'ui';\n    };\n    FieldMultilineInput: typeof FieldMultilineInput;\n    FieldColour: typeof FieldColour;\n    dialog: {\n        prompt: (promptText: string, defaultText: string, callback: (p1: string | null) => void) => void;\n        setPrompt: (promptFunction: (p1: string, p2: string, p3: (p1: string | null) => void) => void) => void;\n    };\n    fieldRegistry: {\n        register: (type: string, fieldClass: RegistrableField) => void;\n        unregister: (type: string) => void;\n    };\n    common: {\n        createBlockDefinitionsFromJsonArray: (jsonArray: any[]) => Record<string, any>;\n        defineBlocks: (blocks: { [key: string]: any }) => void;\n    };\n}\n\ndeclare global {\n    interface Window {\n        ActiveXObject: any;\n        MSG: string[];\n        scripts: {\n            loading?: boolean;\n            blocklyWorkspace: WorkspaceSvg;\n            scripts?: string[];\n        };\n        Blockly: BlocklyType;\n    }\n}\n\nexport function initBlockly(): void {\n    if (!window.Blockly.FieldMultilineInput) {\n        window.Blockly.fieldRegistry.register(\n            'field_multilinetext',\n            FieldMultilineInput as unknown as RegistrableField,\n        );\n        window.Blockly.JavaScript.forBlock.text_multiline = toJavascriptMultiline;\n\n        window.Blockly.FieldMultilineInput = FieldMultilineInput;\n\n        Object.assign(\n            window.Blockly.Blocks,\n            window.Blockly.common.createBlockDefinitionsFromJsonArray([\n                {\n                    type: 'text_multiline',\n                    message0: '%1 %2',\n                    args0: [\n                        {\n                            type: 'field_image',\n                            src:\n                                'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAARCAYAAADpP' +\n                                'U2iAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAdhgAAHYYBXaITgQAAABh0RVh0' +\n                                'U29mdHdhcmUAcGFpbnQubmV0IDQuMS42/U4J6AAAAP1JREFUOE+Vks0KQUEYhjm' +\n                                'RIja4ABtZ2dm5A3t3Ia6AUm7CylYuQRaUhZSlLZJiQbFAyRnPN33y01HOW08z88' +\n                                '73zpwzM4F3GWOCruvGIE4/rLaV+Nq1hVGMBqzhqlxgCys4wJA65xnogMHsQ5luj' +\n                                'nYHTejBBCK2mE4abjCgMGhNxHgDFWjDSG07kdfVa2pZMf4ZyMAdWmpZMfYOsLiD' +\n                                'MYMjlMB+K613QISRhTnITnsYg5yUd0DETmEoMlkFOeIT/A58iyK5E18BuTBfgYX' +\n                                'fwNJv4P9/oEBerLylOnRhygmGdPpTTBZAPkde61lbQe4moWUvYUZYLfUNftIY4z' +\n                                'wA5X2Z9AYnQrEAAAAASUVORK5CYII=',\n                            width: 12,\n                            height: 17,\n                            alt: '\\u00B6',\n                        },\n                        {\n                            type: 'field_multilinetext',\n                            name: 'TEXT',\n                            text: '',\n                        },\n                    ],\n                    output: 'String',\n                    style: 'text_blocks',\n                    helpUrl: '%{BKY_TEXT_TEXT_HELPURL}',\n                    tooltip: '%{BKY_TEXT_TEXT_TOOLTIP}',\n                    extensions: ['parent_tooltip_when_inline'],\n                },\n            ]),\n        );\n    }\n    if (!window.Blockly.FieldColour) {\n        window.Blockly.fieldRegistry.register('field_colour', FieldColour as unknown as RegistrableField);\n        window.Blockly.JavaScript.forBlock.colour_picker = toJavascriptColourPicker;\n        window.Blockly.JavaScript.forBlock.colour_blend = toJavascriptColourBlend;\n        window.Blockly.JavaScript.forBlock.colour_random = toJavascriptColourRandom;\n        window.Blockly.JavaScript.forBlock.colour_rgb = toJavascriptColourRgb;\n\n        window.Blockly.FieldColour = FieldColour;\n        Object.assign(\n            window.Blockly.Blocks,\n            window.Blockly.common.createBlockDefinitionsFromJsonArray([\n                {\n                    type: 'colour_picker',\n                    message0: '%1',\n                    args0: [\n                        {\n                            type: 'field_colour',\n                            name: 'COLOUR',\n                            colour: '#ff0000',\n                        },\n                    ],\n                    output: 'Colour',\n                    helpUrl: '%{BKY_COLOUR_PICKER_HELPURL}',\n                    style: 'colour_blocks',\n                    tooltip: '%{BKY_COLOUR_PICKER_TOOLTIP}',\n                    extensions: ['parent_tooltip_when_inline'],\n                },\n            ]),\n        );\n\n        Object.assign(\n            window.Blockly.Blocks,\n            window.Blockly.common.createBlockDefinitionsFromJsonArray([\n                {\n                    type: 'colour_random',\n                    message0: '%{BKY_COLOUR_RANDOM_TITLE}',\n                    output: 'Colour',\n                    helpUrl: '%{BKY_COLOUR_RANDOM_HELPURL}',\n                    style: 'colour_blocks',\n                    tooltip: '%{BKY_COLOUR_RANDOM_TOOLTIP}',\n                },\n            ]),\n        );\n        Object.assign(\n            window.Blockly.Blocks,\n            window.Blockly.common.createBlockDefinitionsFromJsonArray([\n                {\n                    type: 'colour_rgb',\n                    message0:\n                        '%{BKY_COLOUR_RGB_TITLE} %{BKY_COLOUR_RGB_RED} %1 %{BKY_COLOUR_RGB_GREEN} %2 %{BKY_COLOUR_RGB_BLUE} %3',\n                    args0: [\n                        {\n                            type: 'input_value',\n                            name: 'RED',\n                            check: 'Number',\n                            align: 'RIGHT',\n                        },\n                        {\n                            type: 'input_value',\n                            name: 'GREEN',\n                            check: 'Number',\n                            align: 'RIGHT',\n                        },\n                        {\n                            type: 'input_value',\n                            name: 'BLUE',\n                            check: 'Number',\n                            align: 'RIGHT',\n                        },\n                    ],\n                    output: 'Colour',\n                    helpUrl: '%{BKY_COLOUR_RGB_HELPURL}',\n                    style: 'colour_blocks',\n                    tooltip: '%{BKY_COLOUR_RGB_TOOLTIP}',\n                },\n            ]),\n        );\n        Object.assign(\n            window.Blockly.Blocks,\n            window.Blockly.common.createBlockDefinitionsFromJsonArray([\n                {\n                    type: 'colour_blend',\n                    message0:\n                        '%{BKY_COLOUR_BLEND_TITLE} %{BKY_COLOUR_BLEND_COLOUR1} ' +\n                        '%1 %{BKY_COLOUR_BLEND_COLOUR2} %2 %{BKY_COLOUR_BLEND_RATIO} %3',\n                    args0: [\n                        {\n                            type: 'input_value',\n                            name: 'COLOUR1',\n                            check: 'Colour',\n                            align: 'RIGHT',\n                        },\n                        {\n                            type: 'input_value',\n                            name: 'COLOUR2',\n                            check: 'Colour',\n                            align: 'RIGHT',\n                        },\n                        {\n                            type: 'input_value',\n                            name: 'RATIO',\n                            check: 'Number',\n                            align: 'RIGHT',\n                        },\n                    ],\n                    output: 'Colour',\n                    helpUrl: '%{BKY_COLOUR_BLEND_HELPURL}',\n                    style: 'colour_blocks',\n                    tooltip: '%{BKY_COLOUR_BLEND_TOOLTIP}',\n                },\n            ]),\n        );\n    }\n}\n","import React from 'react';\n\nimport { Button, DialogTitle, DialogContent, DialogActions, Dialog, Box } from '@mui/material';\n\nimport { Save as IconSave, Cancel as IconCancel } from '@mui/icons-material';\n\nimport { type AdminConnection, I18n, type IobTheme, type ThemeType } from '@iobroker/adapter-react-v5';\n\nimport ScriptEditorComponent from '../Components/ScriptEditorVanilaMonaco';\n\nconst styles: Record<string, any> = {\n    textArea: {\n        width: 'calc(100% - 10px)',\n        resize: 'none',\n    },\n    dialog: {\n        height: '95%',\n    },\n    fullHeight: {\n        height: '100%',\n        overflow: 'hidden',\n    },\n    args: (theme: IobTheme): React.CSSProperties => ({\n        color: theme.palette.mode === 'dark' ? 'white' : 'black',\n        height: 30,\n        width: '100%',\n        fontSize: 16,\n    }),\n    argsTitle: (theme: IobTheme): React.CSSProperties => ({\n        color: theme.palette.mode === 'dark' ? 'white' : 'black',\n        fontWeight: 'bold',\n    }),\n};\n\ninterface DialogScriptEditorProps {\n    onClose: (source: string | false) => void;\n    source: string;\n    args: string;\n    isReturn: boolean;\n    themeType: ThemeType;\n    adapterName: string;\n    runningInstances: Record<string, boolean>;\n    socket: AdminConnection;\n}\n\ninterface DialogScriptEditorState {\n    changed: boolean;\n    source: string;\n}\n\nclass DialogScriptEditor extends React.Component<DialogScriptEditorProps, DialogScriptEditorState> {\n    constructor(props: DialogScriptEditorProps) {\n        super(props);\n        this.state = {\n            changed: false,\n            source: !this.state.source && this.props.isReturn ? '\\nreturn false' : this.props.source,\n        };\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    componentDidMount(): void {\n        setTimeout(() => {\n            try {\n                window.document.getElementById('source-text-area')?.focus();\n            } catch {\n                // ignore\n            }\n        }, 100);\n    }\n\n    handleCancel(): void {\n        this.props.onClose(false);\n    }\n\n    handleOk(): void {\n        if (!this.props.isReturn || this.state.source.includes('return ')) {\n            this.props.onClose(this.state.source);\n        }\n    }\n\n    onChange(value: string): void {\n        this.setState({ changed: true, source: value });\n    }\n\n    render(): React.JSX.Element {\n        return (\n            <Dialog\n                onClose={() => false}\n                maxWidth=\"lg\"\n                sx={{ '& .MuiDialog-paper': styles.dialog }}\n                fullWidth\n                open={!0}\n                aria-labelledby=\"source-dialog-title\"\n            >\n                <DialogTitle id=\"source-dialog-title\">{I18n.t('Function editor')}</DialogTitle>\n                <DialogContent style={styles.fullHeight}>\n                    {this.props.args && (\n                        <Box\n                            key=\"arguments\"\n                            sx={styles.args}\n                        >\n                            <Box\n                                component=\"span\"\n                                sx={styles.argsTitle}\n                            >\n                                {I18n.t('function (')}\n                            </Box>\n                            {this.props.args}\n                            <Box\n                                component=\"span\"\n                                sx={styles.argsTitle}\n                            >\n                                )\n                            </Box>\n                        </Box>\n                    )}\n                    <ScriptEditorComponent\n                        adapterName={this.props.adapterName}\n                        runningInstances={this.props.runningInstances}\n                        style={{ ...styles.textArea, height: this.props.args ? 'calc(100% - 30px)' : '100%' }}\n                        key=\"scriptEditor\"\n                        name=\"blockly\"\n                        socket={this.props.socket}\n                        readOnly={false}\n                        checkJs={false}\n                        changed={this.state.changed}\n                        code={this.state.source}\n                        isDark={this.props.themeType === 'dark'}\n                        onChange={(newValue: string) => this.onChange(newValue)}\n                        language={'javascript'}\n                    />\n                </DialogContent>\n                <DialogActions>\n                    <Button\n                        variant=\"contained\"\n                        onClick={() => this.handleOk()}\n                        color=\"primary\"\n                        startIcon={<IconSave />}\n                    >\n                        {I18n.t('Save')}\n                    </Button>\n                    <Button\n                        color=\"grey\"\n                        variant=\"contained\"\n                        onClick={() => this.handleCancel()}\n                        startIcon={<IconCancel />}\n                    >\n                        {I18n.t('Cancel')}\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        );\n    }\n}\n\nexport default DialogScriptEditor;\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapperRules\":\"style_wrapperRules__9Mkfr\",\"rootWrapper\":\"style_rootWrapper__bwzCE\",\"addClass\":\"style_addClass__VtLJG\"};","// extracted by mini-css-extract-plugin\nexport default {\"switchesItem\":\"style_switchesItem__H96H0\",\"switchesItemActive\":\"style_switchesItemActive__9UirQ\",\"iconTheme\":\"style_iconTheme__owH9u\"};","import React, { useState, useEffect } from 'react';\nimport {\n    Shuffle,\n    Apps,\n    Functions,\n    Language,\n    AddBox,\n    Pause,\n    Subject,\n    PlayForWork,\n    Brightness3,\n    HelpOutline,\n    Storage,\n    AccessTime,\n    PlayArrow,\n    FlashOn,\n    Help,\n    type SvgIconComponent,\n} from '@mui/icons-material';\nimport type { AdminConnection } from '@iobroker/adapter-react-v5';\n\nconst ICON_CACHE: Record<string, Promise<ioBroker.AdapterObject | null | undefined>> = {};\n\nconst objIcon: Record<string, SvgIconComponent> = {\n    Shuffle,\n    Apps,\n    Functions,\n    Language,\n    AddBox,\n    Pause,\n    Subject,\n    PlayForWork,\n    Brightness3,\n    HelpOutline,\n    Storage,\n    AccessTime,\n    PlayArrow,\n    FlashOn,\n};\n\ninterface MaterialDynamicIconProps {\n    iconName: string | undefined;\n    className?: string;\n    adapter?: string;\n    socket?: AdminConnection | null;\n    onClick?: (e: React.MouseEvent) => void;\n    style?: React.CSSProperties;\n}\n\nfunction MaterialDynamicIcon({\n    iconName,\n    className,\n    adapter,\n    socket,\n    onClick,\n    style,\n}: MaterialDynamicIconProps): React.JSX.Element {\n    const [url, setUrl] = useState('');\n\n    useEffect(() => {\n        if (adapter && socket) {\n            if (!(ICON_CACHE[adapter] instanceof Promise)) {\n                ICON_CACHE[adapter] = socket.getObject(`system.adapter.${adapter}`);\n            }\n            void ICON_CACHE[adapter].then(\n                obj => obj?.common?.icon && setUrl(`../../adapter/${adapter}/${obj.common.icon}`),\n            );\n        }\n    }, [adapter, socket]);\n\n    if (adapter) {\n        return (\n            <img\n                onClick={e => onClick && onClick(e)}\n                src={url || ''}\n                className={className}\n                style={style}\n                alt=\"\"\n            />\n        );\n    }\n    const Element = (iconName && objIcon[iconName]) || Help;\n\n    return (\n        <Element\n            className={className}\n            style={style}\n            onClick={e => onClick && onClick(e)}\n        />\n    );\n}\n\nexport default MaterialDynamicIcon;\n","import React from 'react';\n\nimport { type AdminConnection, I18n, Utils } from '@iobroker/adapter-react-v5';\n\nimport cls from './style.module.scss';\nimport MaterialDynamicIcon from '../../helpers/MaterialDynamicIcon';\n\ninterface CardMenuProps {\n    name: string;\n    id: string;\n    active?: boolean;\n    icon?: string | undefined;\n    adapter?: string;\n    socket: AdminConnection | null;\n    onDoubleClick: () => void;\n    title?: string;\n    onTouchMove: (e: React.TouchEvent) => void;\n    style?: React.CSSProperties;\n}\n\nconst CardMenu = ({\n    name,\n    id,\n    active,\n    icon,\n    adapter,\n    socket,\n    onDoubleClick,\n    title,\n    onTouchMove,\n    style,\n}: CardMenuProps): React.JSX.Element => (\n    <div\n        onDoubleClick={onDoubleClick}\n        onTouchMove={onTouchMove}\n        key={id}\n        title={title ? I18n.t(title) : undefined}\n        className={Utils.clsx(cls.switchesItem, active && cls.switchesItemActive, `block-${id}`)}\n    >\n        <MaterialDynamicIcon\n            iconName={icon}\n            className={cls.iconTheme}\n            adapter={adapter}\n            socket={socket}\n            style={style}\n        />\n        <span>{name ? I18n.t(name) : ''}</span>\n    </div>\n);\n\nexport default CardMenu;\n","// extracted by mini-css-extract-plugin\nexport default {\"cardStyle\":\"style_cardStyle__sbK+x\",\"cardStyleActive\":\"style_cardStyleActive__8xzoO\",\"controlMenu\":\"style_controlMenu__9fYxw\",\"closeBtn\":\"style_closeBtn__arMpu\",\"isDelete\":\"style_isDelete__Csmq4\",\"drag_mobile\":\"style_drag_mobile__nios4\"};","import type { BlockValue, RuleBlockType, RuleUserRules } from '../types';\n\nexport function deepCopy(\n    name: RuleBlockType,\n    userRules: RuleUserRules,\n    additionalParameter?: BlockValue,\n): RuleUserRules {\n    let newItemsSwitches: RuleUserRules;\n\n    switch (name) {\n        case 'actions':\n            if (additionalParameter === 'else') {\n                newItemsSwitches = {\n                    ...userRules,\n                    actions: {\n                        ...userRules[name],\n                        else: [...userRules[name].else],\n                    },\n                };\n                return newItemsSwitches;\n            }\n            if (additionalParameter === 'then') {\n                newItemsSwitches = {\n                    ...userRules,\n                    actions: {\n                        ...userRules[name],\n                        then: [...userRules[name].then],\n                    },\n                };\n                return newItemsSwitches;\n            }\n\n            console.error(`Unknown additionalParameter: ${additionalParameter}`);\n            throw new Error(`Unknown additionalParameter: ${additionalParameter}`);\n\n        case 'triggers':\n            newItemsSwitches = {\n                ...userRules,\n                triggers: [...userRules.triggers],\n            };\n            return newItemsSwitches;\n\n        case 'conditions':\n            newItemsSwitches = {\n                ...userRules,\n                conditions: [...userRules.conditions],\n            };\n            return newItemsSwitches;\n\n        default:\n            throw new Error(`Unknown name: ${name}`);\n    }\n}\n","import type { BlockValue, RuleUserRules } from '@/Components/RulesEditor/types';\n\nexport function filterElement(\n    name: string,\n    userRules: RuleUserRules,\n    additionalParameter: BlockValue,\n    _id: number,\n): RuleUserRules {\n    switch (name) {\n        case 'actions':\n            userRules.actions[additionalParameter as 'then' | 'else'] = userRules.actions[\n                additionalParameter as 'then' | 'else'\n            ].filter(el => el._id !== _id);\n            return userRules;\n\n        case 'conditions':\n            userRules.conditions[additionalParameter as number] = userRules.conditions[\n                additionalParameter as number\n            ]?.filter(el => el._id !== _id);\n            return userRules;\n\n        case 'triggers':\n        default:\n            userRules.triggers = userRules.triggers.filter(el => el._id !== _id);\n            return userRules;\n    }\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"cardStyle\":\"style_cardStyle__gyPdh\",\"nameCard\":\"style_nameCard__qmoBu\",\"cardStyleActive\":\"style_cardStyleActive__CjBvZ\",\"iconThemCard\":\"style_iconThemCard__hBxOi\",\"iconThemCardSelectable\":\"style_iconThemCardSelectable__3eFsi\",\"iconHelp\":\"style_iconHelp__PC-NZ\",\"inputCard\":\"style_inputCard__uG81F\",\"blockName\":\"style_blockName__qK0SL\",\"controlMenu\":\"style_controlMenu__CcUzM\",\"closeBtn\":\"style_closeBtn__G35z2\",\"controlMenuTop\":\"style_controlMenuTop__r2+NG\",\"debugInfo\":\"style_debugInfo__+sZTD\",\"fadeIn\":\"style_fadeIn__TF9-i\",\"tagCard\":\"style_tagCard__7qI1z\",\"displayFlex\":\"style_displayFlex__PbbA-\",\"blockMarginTop\":\"style_blockMarginTop__neNMp\",\"nameBlock\":\"style_nameBlock__pkgVp\",\"frontText\":\"style_frontText__q0avS\",\"backText\":\"style_backText__jb+9b\",\"iconTag\":\"style_iconTag__7vr9j\",\"displayItalic\":\"style_displayItalic__DP-PW\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"style_root__fynCs\",\"square\":\"style_square__9vXRe\",\"icon\":\"style_icon__wn4FS\"};","import { Button } from '@mui/material';\nimport React from 'react';\n\nimport { Utils, Icon as CustomIcon } from '@iobroker/adapter-react-v5';\n\nimport cls from './style.module.scss';\n\ninterface CustomButtonProps {\n    fullWidth?: boolean;\n    size?: 'small' | 'medium' | 'large';\n    onClick?: () => void;\n    style?: React.CSSProperties;\n    className?: string;\n    value: string;\n    square?: boolean;\n    icon?: string;\n}\n\nconst CustomButton = ({\n    fullWidth,\n    size,\n    onClick,\n    style,\n    className,\n    value,\n    square,\n    icon,\n}: CustomButtonProps): React.JSX.Element => {\n    return (\n        <Button\n            variant=\"outlined\"\n            color=\"primary\"\n            onClick={onClick}\n            fullWidth={fullWidth}\n            style={style}\n            className={Utils.clsx(cls.root, className, square ? cls.square : '')}\n            size={size || 'medium'}\n        >\n            {icon ? (\n                <CustomIcon\n                    className={cls.icon}\n                    src={icon}\n                />\n            ) : (\n                value\n            )}\n        </Button>\n    );\n};\n\nexport default CustomButton;\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"style_root__I7Kxv\"};","import React, { memo, useState } from 'react';\n\nimport { Checkbox } from '@mui/material';\n\nimport { Utils } from '@iobroker/adapter-react-v5';\n\nimport cls from './style.module.scss';\n\ninterface CustomCheckboxProps {\n    title?: string;\n    size?: 'small' | 'medium';\n    value: boolean;\n    onChange?: (value: boolean) => void;\n    className?: string;\n    customValue?: boolean;\n    disabled?: boolean;\n}\n\nconst CustomCheckbox = ({\n    size,\n    value,\n    title,\n    onChange,\n    className,\n    customValue,\n    disabled,\n}: CustomCheckboxProps): React.JSX.Element => {\n    const [switchChecked, setSwitchChecked] = useState(false);\n\n    return (\n        <>\n            <Checkbox\n                disabled={disabled}\n                checked={Boolean(customValue ? value : switchChecked)}\n                className={Utils.clsx(cls.root, className)}\n                onChange={e => {\n                    customValue && setSwitchChecked(e.target.checked);\n                    onChange && onChange(e.target.checked);\n                }}\n                size={size || 'medium'}\n            />\n            {title || null}\n        </>\n    );\n};\n\nexport default memo(CustomCheckbox);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"style_root__qX8hT\"};","import React, { useState } from 'react';\n\nimport { TextField, InputAdornment } from '@mui/material';\n\nimport { Utils, Icon as CustomIcon } from '@iobroker/adapter-react-v5';\n\nimport cls from './style.module.scss';\n\ninterface CustomInputProps {\n    autoFocus?: boolean;\n    fullWidth?: boolean;\n    disabled?: boolean;\n    multiline?: boolean;\n    rows?: number;\n    autoComplete?: string;\n    label?: string;\n    error?: string;\n    size?: 'small' | 'medium';\n    variant?: 'standard' | 'filled' | 'outlined';\n    value: string | number | undefined;\n    type?: string;\n    style?: React.CSSProperties;\n    onChange?: (value: string | number) => void;\n    className?: string;\n    customValue?: boolean;\n    icon?: string;\n}\n\nconst CustomInput = (props: CustomInputProps): React.JSX.Element => {\n    const [inputText, setInputText] = useState('');\n    const {\n        value,\n        type,\n        error,\n        className,\n        icon,\n        label,\n        style,\n        onChange,\n        fullWidth,\n        autoComplete,\n        customValue,\n        autoFocus,\n        rows,\n        size,\n        variant,\n        multiline,\n        disabled,\n    }: CustomInputProps = Object.assign(\n        {\n            value: '',\n            type: 'text',\n            error: '',\n            className: null,\n            table: false,\n            native: {},\n            variant: 'standard',\n            size: 'medium',\n            component: null,\n            styleComponentBlock: null,\n            fullWidth: false,\n            autoComplete: '',\n            customValue: false,\n            autoFocus: false,\n            rows: 1,\n        },\n        props,\n    );\n\n    return (\n        <TextField\n            error={!!error}\n            autoFocus={autoFocus}\n            fullWidth={fullWidth}\n            label={label}\n            disabled={disabled}\n            variant={variant}\n            multiline={multiline}\n            rows={rows}\n            value={customValue ? value : inputText}\n            type={type}\n            helperText={error}\n            style={style}\n            className={Utils.clsx(cls.root, className)}\n            autoComplete={autoComplete}\n            onChange={e => {\n                !customValue && setInputText(e.target.value);\n                onChange && onChange(e.target.value);\n            }}\n            slotProps={{\n                input: {\n                    endAdornment: icon ? (\n                        <InputAdornment position=\"end\">\n                            <CustomIcon\n                                className={cls.icon}\n                                src={icon}\n                            />\n                        </InputAdornment>\n                    ) : null,\n                },\n            }}\n            margin=\"normal\"\n            size={size}\n        />\n    );\n};\n\nexport default CustomInput;\n","import React, { useEffect, useState } from 'react';\n\nimport { FormControl, FormHelperText, Input, MenuItem, Select } from '@mui/material';\n\nimport { type AdminConnection, I18n } from '@iobroker/adapter-react-v5';\n\nconst styles: Record<string, any> = {\n    formControl: {\n        m: '10px 0',\n        '& .MuiFormControl-marginNormal': {\n            mt: 0,\n            mb: 0,\n        },\n        '& > *': {\n            color: '#2d0440 !important',\n        },\n        '& .MuiSelect-icon': {\n            color: '#81688c',\n        },\n        '& label.Mui-focused': {\n            color: '#81688c',\n        },\n        '& .MuiInput-underline:after': {\n            borderBottomColor: '#510573',\n        },\n        '& .MuiInput-underline:before': {\n            borderBottomColor: '#81688c',\n        },\n        '& .MuiInput-underline:hover:before': {\n            borderBottomColor: '#81688c',\n        },\n    },\n};\n\ninterface CustomInstanceProps {\n    multiple?: boolean;\n    value: string | string[];\n    customValue: boolean;\n    socket: AdminConnection;\n    title?: string;\n    attr: string;\n    adapter: string;\n    style?: React.CSSProperties;\n    onChange: (value: string | string[]) => void;\n    onInstanceHide: (value: string) => void;\n}\n\nconst CustomInstance = ({\n    multiple,\n    value,\n    customValue,\n    socket,\n    title,\n    attr,\n    adapter,\n    style,\n    onChange,\n    onInstanceHide,\n}: CustomInstanceProps): React.JSX.Element => {\n    const [inputText, setInputText] = useState(value || 'test1');\n    const [options, setOptions] = useState<{ value: string; title: string }[]>([]);\n\n    useEffect(() => {\n        void socket?.getAdapterInstances(adapter).then(instances => {\n            const _options = instances.map(obj => ({\n                value: obj._id.replace('system.adapter.', ''),\n                title: obj._id.replace('system.adapter.', ''),\n            }));\n            if (_options.length === 1) {\n                onInstanceHide(_options[0].value);\n            } else {\n                _options.unshift({ value: adapter, title: I18n.t('All') });\n            }\n            setOptions(_options);\n        });\n    }, [socket, adapter, onInstanceHide]);\n\n    return (\n        <FormControl\n            sx={styles.formControl}\n            fullWidth\n            style={style}\n        >\n            <Select\n                variant=\"standard\"\n                value={(customValue ? value : inputText) || '_'}\n                fullWidth\n                multiple={multiple}\n                renderValue={(selected: string | string[]): React.JSX.Element | string =>\n                    multiple && Array.isArray(selected) ? selected.join(', ') : (selected as string)\n                }\n                onChange={e => {\n                    !customValue && setInputText(e.target.value);\n                    onChange(e.target.value);\n                }}\n                input={\n                    attr ? (\n                        <Input\n                            name={attr}\n                            id={`${attr}-helper`}\n                        />\n                    ) : (\n                        <Input name={attr} />\n                    )\n                }\n            >\n                {options.map(item => (\n                    <MenuItem\n                        style={{ placeContent: 'space-between' }}\n                        key={`key-${item.value}`}\n                        value={item.value || '_'}\n                    >\n                        {I18n.t(item.title)}\n                    </MenuItem>\n                ))}\n            </Select>\n            {title ? <FormHelperText>{I18n.t(title)}</FormHelperText> : null}\n        </FormControl>\n    );\n};\n\nexport default CustomInstance;\n","// extracted by mini-css-extract-plugin\nexport default {\"modalContentWrapper\":\"style_modalContentWrapper__lQo4R\",\"modalButtonBlock\":\"style_modalButtonBlock__9f1Kp\",\"modalButtonBlockTwo\":\"style_modalButtonBlockTwo__Bdli0\",\"modalWrapper\":\"style_modalWrapper__aHlP0\",\"modalDialog\":\"style_modalDialog__FIPy8\",\"close\":\"style_close__w7RHQ\"};","import React, { useState } from 'react';\n\nimport { Button, Dialog, DialogActions, DialogContent } from '@mui/material';\nimport { I18n } from '@iobroker/adapter-react-v5';\n\nimport cls from './style.module.scss';\nimport CustomInput from '../CustomInput';\n\ninterface CustomModalProps {\n    onClose: () => void;\n    children?: React.JSX.Element[] | React.JSX.Element | null;\n    titleButtonApply?: string;\n    titleButtonClose?: string;\n    onApply: (value: string | number | null) => void;\n    className?: string;\n    textInput?: boolean;\n    defaultValue?: string | number;\n}\n\nconst CustomModal = ({\n    onClose,\n    children,\n    titleButtonApply,\n    titleButtonClose,\n    onApply,\n    className,\n    textInput,\n    defaultValue,\n}: CustomModalProps): React.JSX.Element => {\n    const [value, setValue] = useState<string | number>(defaultValue || '');\n    const [originalValue] = useState<string | number>(defaultValue || '');\n\n    return (\n        <Dialog\n            open={!0}\n            maxWidth=\"md\"\n            disableEscapeKeyDown={false}\n            onClose={onClose}\n            classes={{ paper: cls.modalDialog /*paper: classes.background*/ }}\n            className={cls.modalWrapper}\n        >\n            <DialogContent>\n                {textInput && (\n                    <CustomInput\n                        className={className}\n                        autoComplete=\"off\"\n                        fullWidth\n                        variant=\"outlined\"\n                        size=\"medium\"\n                        rows={10}\n                        multiline\n                        value={value}\n                        onChange={setValue}\n                        customValue\n                    />\n                )}\n                {!textInput && children}\n            </DialogContent>\n            <DialogActions>\n                <Button\n                    disabled={originalValue === value}\n                    onClick={() => onApply(textInput ? value : null)}\n                    variant=\"contained\"\n                    color=\"primary\"\n                >\n                    {I18n.t(titleButtonApply || 'Ok')}\n                </Button>\n                <Button\n                    color=\"grey\"\n                    onClick={onClose}\n                    variant=\"contained\"\n                >\n                    {I18n.t(titleButtonClose || 'Cancel')}\n                </Button>\n            </DialogActions>\n        </Dialog>\n    );\n};\n\nexport default CustomModal;\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"style_root__53pwE\"};","import React, { useState } from 'react';\nimport { FormControl, FormHelperText, Input, MenuItem, Select } from '@mui/material';\n\nimport { I18n, Utils } from '@iobroker/adapter-react-v5';\n\nimport cls from './style.module.scss';\nimport CustomCheckbox from '../CustomCheckbox';\n\ninterface CustomSelectProps {\n    multiple?: boolean;\n    value?: string | string[] | number;\n    customValue?: boolean;\n    title?: string;\n    attr: string;\n    options: { title: string; titleShort?: string; title2?: string; value: string | number; only?: boolean }[];\n    style?: React.CSSProperties;\n    onChange: (value: string | string[] | number, attr: string) => void;\n    className?: string;\n    doNotTranslate?: boolean;\n    doNotTranslate2?: boolean;\n}\n\nconst CustomSelect = ({\n    multiple,\n    value,\n    customValue,\n    title,\n    attr,\n    options,\n    style,\n    onChange,\n    className,\n    doNotTranslate,\n    doNotTranslate2,\n}: CustomSelectProps): React.JSX.Element => {\n    const [inputText, setInputText] = useState(value === undefined ? options[0].value : value);\n\n    const v = customValue ? value : inputText;\n    const text = v === '' || v === null || v === undefined ? '_' : v;\n\n    return (\n        <FormControl\n            variant=\"standard\"\n            className={Utils.clsx(cls.root, className)}\n            fullWidth\n            style={style}\n        >\n            <Select\n                variant=\"standard\"\n                value={text}\n                fullWidth\n                multiple={multiple}\n                renderValue={selected => {\n                    if (multiple && Array.isArray(selected)) {\n                        // sort\n                        selected.sort();\n                        let pos = selected.indexOf('0');\n                        if (pos !== -1) {\n                            selected.splice(pos, 1);\n                            selected.push('0');\n                        }\n                        pos = selected.indexOf('_');\n                        if (pos !== -1) {\n                            selected.splice(pos, 1);\n                            selected.unshift('_');\n                        }\n\n                        const onlyItem = options.find(el => el.only);\n\n                        if (onlyItem && selected.includes(onlyItem.value as string)) {\n                            return onlyItem.titleShort\n                                ? doNotTranslate\n                                    ? onlyItem.titleShort\n                                    : I18n.t(onlyItem.titleShort)\n                                : doNotTranslate\n                                  ? onlyItem.title\n                                  : I18n.t(onlyItem.title);\n                        }\n\n                        const titles = selected\n                            .map(\n                                sel =>\n                                    options.find(item => item.value === sel || (sel === '_' && item.value === '')) ||\n                                    sel,\n                            )\n                            .map(item =>\n                                typeof item === 'object'\n                                    ? item.titleShort\n                                        ? doNotTranslate\n                                            ? item.titleShort\n                                            : I18n.t(item.titleShort)\n                                        : doNotTranslate\n                                          ? item.title\n                                          : I18n.t(item.title)\n                                    : doNotTranslate\n                                      ? item\n                                      : I18n.t(item),\n                            );\n\n                        return titles.join(', ');\n                    }\n                    const item = options\n                        ? options.find(item => item.value === selected || (selected === '_' && item.value === ''))\n                        : null;\n                    return item?.title ? (doNotTranslate ? item?.title : I18n.t(item?.title)) : selected;\n                }}\n                onChange={e => {\n                    !customValue && setInputText(e.target.value);\n                    if (multiple) {\n                        const values = e.target.value as string[];\n                        const onlyItem = options.find(el => el.only);\n\n                        if (onlyItem) {\n                            const valueOnly = onlyItem.value as string;\n\n                            if (values.length === options.length - 1 && values.includes(valueOnly)) {\n                                return onChange(\n                                    values.filter(el => el !== valueOnly),\n                                    attr,\n                                );\n                            }\n\n                            if (values.includes(valueOnly)) {\n                                return onChange(options.map(el => el.value) as string[], attr);\n                            }\n                        }\n                    }\n                    onChange(e.target.value, attr);\n                }}\n                input={\n                    attr ? (\n                        <Input\n                            name={attr}\n                            id={`${attr}-helper`}\n                        />\n                    ) : (\n                        <Input name={attr} />\n                    )\n                }\n            >\n                {!multiple &&\n                    options &&\n                    options.map(item => (\n                        <MenuItem\n                            style={{ placeContent: 'space-between' }}\n                            key={`key-${item.value}`}\n                            value={\n                                item.value === '' || item.value === null || item.value === undefined ? '_' : item.value\n                            }\n                        >\n                            {doNotTranslate ? item.title : I18n.t(item.title)}\n                            {item.title2 && <div>{doNotTranslate2 ? item.title2 : I18n.t(item.title2)}</div>}\n                        </MenuItem>\n                    ))}\n                {multiple &&\n                    options?.map(item => (\n                        <MenuItem\n                            style={{ placeContent: 'space-between' }}\n                            key={`key-${item.value}`}\n                            value={item.value || '_'}\n                        >\n                            {doNotTranslate ? item.title : I18n.t(item.title)}{' '}\n                            <CustomCheckbox\n                                customValue\n                                value={(value as string[])?.includes(item.value as string)}\n                            />\n                        </MenuItem>\n                    ))}\n            </Select>\n            {title ? <FormHelperText>{I18n.t(title)}</FormHelperText> : null}\n        </FormControl>\n    );\n};\n\nexport default CustomSelect;\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"style_root__Dac9D\",\"mark\":\"style_mark__jIiAb\"};","import React, { useState } from 'react';\n\nimport { Slider } from '@mui/material';\n\nimport { Utils } from '@iobroker/adapter-react-v5';\n\nimport cls from './style.module.scss';\n\ninterface CustomSliderProps {\n    autoComplete?: string;\n    label?: string;\n    error?: string;\n    size?: 'small' | 'medium';\n    variant?: 'standard' | 'filled' | 'outlined';\n    value?: number;\n    type?: string;\n    style?: object;\n    onChange: (newValue: number) => void;\n    className?: string;\n    customValue?: boolean;\n    min?: number;\n    max?: number;\n    step?: number;\n    unit?: string;\n}\n\nconst CustomSlider = ({\n    size,\n    value,\n    style,\n    onChange,\n    className,\n    customValue,\n    min,\n    max,\n    step,\n    unit,\n}: CustomSliderProps): React.JSX.Element => {\n    const [inputText, setInputText] = useState(0);\n    min = min !== undefined ? min : 0;\n    max = max !== undefined ? max : 0;\n    step = step !== undefined ? step : (max - min) / 100;\n\n    const marks = [\n        {\n            value: min,\n            label: min + (unit || ''),\n        },\n        {\n            value: max,\n            label: max + (unit || ''),\n        },\n    ];\n\n    return (\n        <Slider\n            defaultValue={customValue ? value : inputText}\n            // getAriaValueText={customValue ? value : inputText}\n            aria-labelledby=\"discrete-slider\"\n            valueLabelDisplay=\"auto\"\n            classes={{ mark: cls.mark }}\n            marks={marks}\n            step={step}\n            min={min}\n            max={max}\n            // error={error || ''}\n            // label={label}\n            // variant={variant || 'standard'}\n            value={customValue ? value : inputText}\n            // type={type || 'text'}\n            // helperText={error || ''}\n            style={style}\n            className={Utils.clsx(cls.root, className)}\n            // autoComplete={autoComplete || ''}\n            onChange={(e, newValue) => {\n                if (Array.isArray(newValue)) {\n                    !customValue && setInputText(newValue[0]);\n                    onChange(newValue[0]);\n                } else {\n                    !customValue && setInputText(newValue);\n                    onChange(newValue);\n                }\n            }}\n            // margin=\"normal\"\n            size={size || 'medium'}\n        />\n    );\n};\n\nexport default CustomSlider;\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"style_root__IHpZL\"};","import React, { memo, useState } from 'react';\n\nimport { FormControlLabel, Switch } from '@mui/material';\n\nimport cls from './style.module.scss';\n\ninterface CustomSwitchProps {\n    label: string;\n    size?: 'small' | 'medium';\n    value: boolean;\n    style?: React.CSSProperties;\n    onChange: (value: boolean) => void;\n    className?: string;\n    customValue?: boolean;\n}\n\nconst CustomSwitch = ({\n    label,\n    size,\n    value,\n    style,\n    onChange,\n    className,\n    customValue,\n}: CustomSwitchProps): React.JSX.Element => {\n    const [switchChecked, setSwitchChecked] = useState(false);\n    return (\n        <FormControlLabel\n            className={cls.root}\n            control={\n                <Switch\n                    checked={customValue ? value : switchChecked}\n                    style={style}\n                    className={className}\n                    onChange={e => {\n                        if (!customValue) {\n                            setSwitchChecked(e.target.checked);\n                        }\n                        onChange(e.target.checked);\n                    }}\n                    size={size || 'medium'}\n                />\n            }\n            label={label || 'all'}\n        />\n    );\n};\n\nexport default memo(CustomSwitch);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"style_root__AGlQI\"};","import React from 'react';\n\nimport { TextField } from '@mui/material';\n\nimport { Utils } from '@iobroker/adapter-react-v5';\n\nimport cls from './style.module.scss';\n\ninterface CustomTimeProps {\n    value: string;\n    style?: React.CSSProperties;\n    onChange: (value: string) => void;\n    className?: string;\n}\n\nconst CustomTime = ({ value, style, onChange, className }: CustomTimeProps): React.JSX.Element => {\n    return (\n        <TextField\n            variant=\"standard\"\n            id=\"time\"\n            type=\"time\"\n            onChange={e => onChange(e.currentTarget.value)}\n            value={value}\n            className={Utils.clsx(cls.root, className)}\n            fullWidth\n            style={style}\n            slotProps={{\n                htmlInput: {\n                    step: 300, // 5 min\n                },\n                inputLabel: {\n                    shrink: true,\n                },\n            }}\n        />\n    );\n};\n\nexport default CustomTime;\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"style_root__VQQAI\"};","import React from 'react';\n\nimport { FormControl, MenuItem, Select } from '@mui/material';\n\nimport { I18n, Utils } from '@iobroker/adapter-react-v5';\n\nimport cls from './style.module.scss';\n\nconst DAYS: number[] = [\n    31, // 1\n    29, // 2\n    31, // 3\n    30, // 4\n    31, // 5\n    30, // 6\n    31, // 7\n    31, // 8\n    30, // 9\n    31, // 10\n    30, // 11\n    31, // 12\n];\n\ninterface CustomDateProps {\n    value: string;\n    onChange: (value: string) => void;\n    className?: string;\n    style?: React.CSSProperties;\n}\n\nconst CustomDate = ({ value, onChange, className, style }: CustomDateProps): React.JSX.Element => {\n    const [monthStr, dateStr] = (value || '01.01').toString().split('.');\n    let date = parseInt(dateStr, 10) || 0;\n    let month = parseInt(monthStr, 10) || 0;\n    if (month > 12) {\n        month = 12;\n    } else if (month < 0) {\n        month = 0;\n    }\n\n    if (date > DAYS[month]) {\n        date = DAYS[month];\n    } else if (date < 0) {\n        date = 0;\n    }\n\n    const days: number[] = [];\n    for (let i = 0; i < DAYS[month]; i++) {\n        days.push(i + 1);\n    }\n\n    return (\n        <div>\n            <FormControl\n                variant=\"standard\"\n                className={Utils.clsx(cls.root, className)}\n                style={style}\n            >\n                <Select\n                    variant=\"standard\"\n                    className={Utils.clsx(cls.root, className)}\n                    margin=\"dense\"\n                    label={I18n.t('Month')}\n                    onChange={e =>\n                        onChange(`${e.target.value.toString().padStart(2, '0')}.${date.toString().padStart(2, '0')}`)\n                    }\n                    value={month}\n                >\n                    <MenuItem\n                        style={{ placeContent: 'space-between' }}\n                        key={0}\n                        value={0}\n                    >\n                        {I18n.t('Any month')}\n                    </MenuItem>\n                    <MenuItem\n                        style={{ placeContent: 'space-between' }}\n                        key={1}\n                        value={1}\n                    >\n                        {I18n.t('January')}\n                    </MenuItem>\n                    <MenuItem\n                        style={{ placeContent: 'space-between' }}\n                        key={2}\n                        value={2}\n                    >\n                        {I18n.t('February')}\n                    </MenuItem>\n                    <MenuItem\n                        style={{ placeContent: 'space-between' }}\n                        key={3}\n                        value={3}\n                    >\n                        {I18n.t('March')}\n                    </MenuItem>\n                    <MenuItem\n                        style={{ placeContent: 'space-between' }}\n                        key={4}\n                        value={4}\n                    >\n                        {I18n.t('April')}\n                    </MenuItem>\n                    <MenuItem\n                        style={{ placeContent: 'space-between' }}\n                        key={5}\n                        value={5}\n                    >\n                        {I18n.t('May')}\n                    </MenuItem>\n                    <MenuItem\n                        style={{ placeContent: 'space-between' }}\n                        key={6}\n                        value={6}\n                    >\n                        {I18n.t('June')}\n                    </MenuItem>\n                    <MenuItem\n                        style={{ placeContent: 'space-between' }}\n                        key={7}\n                        value={7}\n                    >\n                        {I18n.t('July')}\n                    </MenuItem>\n                    <MenuItem\n                        style={{ placeContent: 'space-between' }}\n                        key={8}\n                        value={8}\n                    >\n                        {I18n.t('August')}\n                    </MenuItem>\n                    <MenuItem\n                        style={{ placeContent: 'space-between' }}\n                        key={9}\n                        value={9}\n                    >\n                        {I18n.t('September')}\n                    </MenuItem>\n                    <MenuItem\n                        style={{ placeContent: 'space-between' }}\n                        key={10}\n                        value={10}\n                    >\n                        {I18n.t('October')}\n                    </MenuItem>\n                    <MenuItem\n                        style={{ placeContent: 'space-between' }}\n                        key={11}\n                        value={11}\n                    >\n                        {I18n.t('November')}\n                    </MenuItem>\n                    <MenuItem\n                        style={{ placeContent: 'space-between' }}\n                        key={12}\n                        value={12}\n                    >\n                        {I18n.t('December')}\n                    </MenuItem>\n                </Select>\n            </FormControl>\n            <FormControl\n                variant=\"standard\"\n                className={Utils.clsx(cls.root, className)}\n                style={style}\n            >\n                <Select\n                    variant=\"standard\"\n                    className={Utils.clsx(cls.root, className)}\n                    margin=\"dense\"\n                    label={I18n.t('Date')}\n                    onChange={e =>\n                        onChange(`${month.toString().padStart(2, '0')}.${e.target.value.toString().padStart(2, '0')}`)\n                    }\n                    value={date}\n                >\n                    <MenuItem\n                        style={{ placeContent: 'space-between' }}\n                        key={'A'}\n                        value={0}\n                    >\n                        {I18n.t('Any')}\n                    </MenuItem>\n                    {days.map(i => (\n                        <MenuItem\n                            style={{ placeContent: 'space-between' }}\n                            key={i}\n                            value={i}\n                        >\n                            {i}\n                        </MenuItem>\n                    ))}\n                </Select>\n            </FormControl>\n        </div>\n    );\n};\n\nexport default CustomDate;\n","import { I18n } from '@iobroker/adapter-react-v5';\n\nlet lang: ioBroker.Languages | undefined;\nexport function getName(obj: undefined | ioBroker.StringOrTranslated | null): string {\n    lang = lang || I18n.getLanguage();\n    if (obj && typeof obj === 'object') {\n        return obj[lang] || obj.en;\n    }\n    return obj || '';\n}\n\nexport function renderValue(val: any): string {\n    if (val === null) {\n        return 'null';\n    }\n    if (val === undefined) {\n        return 'undefined';\n    }\n    if (Array.isArray(val)) {\n        return val.join(', ');\n    }\n    if (typeof val === 'object') {\n        return JSON.stringify(val);\n    }\n\n    return val.toString();\n}\n","const STEPS = {\n    selectTriggers: 0,\n    addScheduleByDoubleClick: 1,\n    openTagsMenu: 2,\n    selectIntervalTag: 3,\n    selectActions: 4,\n    addActionPrintText: 5,\n    showJavascript: 6,\n    switchBackToRules: 7,\n    saveTheScript: 8,\n};\n\nconst steps: { selector: string; content: string }[] = [\n    {\n        // 0\n        selector: '.blocks-triggers',\n        content: 'Select triggers',\n    },\n    {\n        // 1\n        selector: '.block-TriggerScheduleBlock',\n        content: 'Double click to add the block',\n    },\n    {\n        // 2\n        selector: '.tag-card',\n        content: 'Open drop down menu',\n    },\n    {\n        // 3\n        selector: '.tag-card-interval',\n        content: 'Select interval',\n    },\n    {\n        // 4\n        selector: '.blocks-actions',\n        content: 'Select action blocks',\n    },\n    {\n        // 5\n        selector: '.block-ActionPrintText',\n        content: 'Double click to add the block',\n    },\n    {\n        // 6\n        selector: '.button-js-code',\n        content: 'Check the script',\n    },\n    {\n        // 7\n        selector: '.button-js-code',\n        content: 'Switch back to rules',\n    },\n    {\n        // 8\n        selector: '.button-save',\n        content: 'Save the script',\n    },\n];\n\nexport { STEPS };\n\nexport default steps;\n","import React, { PureComponent, Fragment } from 'react';\nimport cls from './style.module.scss';\n\nimport { Menu, MenuItem, IconButton } from '@mui/material';\nimport { HelpOutline as IconHelp } from '@mui/icons-material';\n\nimport {\n    getSelectIdIcon,\n    I18n,\n    Utils,\n    SelectID as DialogSelectID,\n    Error as DialogError,\n    Message as DialogMessage,\n    type AdminConnection,\n    type IobTheme,\n} from '@iobroker/adapter-react-v5';\n\nimport CustomButton from '../CustomButton';\nimport CustomCheckbox from '../CustomCheckbox';\nimport CustomInput from '../CustomInput';\nimport CustomInstance from '../CustomInstance';\nimport CustomModal from '../CustomModal';\nimport CustomSelect from '../CustomSelect';\nimport CustomSlider from '../CustomSlider';\nimport CustomSwitch from '../CustomSwitch';\nimport CustomTime from '../CustomTime';\nimport CustomDate from '../CustomDate';\n\nimport MaterialDynamicIcon from '../../helpers/MaterialDynamicIcon';\nimport { getName } from '../../helpers/utils';\nimport { STEPS } from '../../helpers/Tour';\nimport type {\n    RuleBlockConfig,\n    RuleBlockDescription,\n    RuleContext,\n    RuleInputAny,\n    RuleInputButton,\n    RuleInputCheckbox,\n    RuleInputColor,\n    RuleInputNameText,\n    RuleInputNumber,\n    RuleInputSlider,\n    RuleInputSwitch,\n    RuleInputText,\n    RuleInputAll,\n    RuleTagCard,\n    RuleTagCardTitle,\n    RuleUserRules,\n    RuleInputObjectID,\n    RuleInputTime,\n    RuleInputSelect,\n    RuleInputInstance,\n    RuleInputDialog,\n    RuleInputModalInput,\n    RuleInputDate,\n    RuleInputCron,\n    RuleInputWizard,\n    DebugMessage,\n    RuleBlockConfigTriggerState,\n} from '../../types';\n\nexport interface GenericBlockProps<Settings> {\n    _id: number;\n    name?: string;\n    icon?: string;\n    adapter?: string;\n    socket: AdminConnection;\n    userRules?: RuleUserRules;\n    classes?: {\n        valueAck: string;\n        valueNotAck: string;\n    };\n    settings?: Settings;\n    onChange: (settings: Settings) => void;\n    onDebugMessage?: DebugMessage[];\n    enableSimulation: boolean;\n    theme: IobTheme;\n    className?: string;\n    style?: React.CSSProperties;\n    inputs?: RuleInputAny[];\n    notFound?: boolean;\n    isTourOpen?: boolean;\n    tourStep?: number;\n    setTourStep?: (step: number) => void;\n    setOnUpdate?: (value: boolean) => void;\n    helpDialog?: string;\n    acceptedBy?: string;\n    onUpdate?: boolean;\n}\n\nexport interface GenericBlockState<Settings> {\n    inputs: RuleInputAny[];\n    name: string;\n    icon: string;\n    adapter: string;\n    helpDialog: string;\n    tagCardArray: (RuleTagCard | RuleTagCardTitle)[];\n    openTagMenu: any;\n    openModal: boolean;\n    iconTag: boolean;\n    error: string;\n    helpText: string;\n    instanceSelectionOptions: any[];\n    instanceSelectionDef: string;\n    hideAttributes: string[];\n    settings: Settings;\n    debugMessage: any;\n    enableSimulation: boolean;\n}\n\nexport abstract class GenericBlock<\n    Settings extends RuleBlockConfig = RuleBlockConfig,\n    TState extends GenericBlockState<Settings> = GenericBlockState<Settings>,\n> extends PureComponent<GenericBlockProps<Settings>, TState> {\n    private debugHideTimeout: ReturnType<typeof setTimeout> | null = null;\n\n    private lastObjectIdChange: number = 0;\n    private enableSimulationProcessing = false;\n    private lastDebugMessage = 0;\n    private debugMessageTimeout: ReturnType<typeof setTimeout> | null = null;\n\n    static getStaticData(): RuleBlockDescription {\n        return {\n            acceptedBy: 'actions',\n            name: 'Not found',\n            id: 'ActionEmpty',\n            icon: 'Shuffle',\n        };\n    }\n\n    static compile(_config: RuleBlockConfig, _context: RuleContext): string {\n        return '';\n    }\n\n    protected constructor(props: GenericBlockProps<Settings>, item: RuleBlockDescription) {\n        super(props);\n        item = item || {};\n        const settings: Settings =\n            props.settings ||\n            ({\n                tagCard: item.tagCardArray\n                    ? typeof item.tagCardArray[0] !== 'string'\n                        ? item.tagCardArray[0].title\n                        : item.tagCardArray[0]\n                    : '',\n            } as Settings);\n\n        if (!settings.tagCard && item.tagCardArray) {\n            settings.tagCard =\n                typeof item.tagCardArray[0] !== 'string' ? item.tagCardArray[0].title : item.tagCardArray[0];\n        }\n\n        // @ts-expect-error fix later\n        this.state = {\n            inputs: item.inputs || props.inputs || [],\n            name: item.name || props.name || '',\n            icon: item.icon || props.icon || '',\n            adapter: item.adapter || props.adapter || '',\n            helpDialog: item.helpDialog || props.helpDialog || '',\n\n            tagCardArray: item.tagCardArray || [],\n\n            openTagMenu: false,\n            openModal: false,\n            iconTag: false,\n            error: '',\n            helpText: '',\n\n            instanceSelectionOptions: [],\n            instanceSelectionDef: '',\n\n            hideAttributes: [], // e.g. instance\n\n            settings,\n            debugMessage: null,\n            enableSimulation: this.props.enableSimulation,\n        } satisfies GenericBlockState<Settings>;\n    }\n\n    static getDerivedStateFromProps(\n        nextProps: GenericBlockProps<any>,\n        state: GenericBlockState<any>,\n    ): Partial<GenericBlockState<any>> | null {\n        if (!nextProps || !nextProps.settings) {\n            console.log(JSON.stringify(nextProps));\n            return null;\n        }\n\n        const settings: any = JSON.parse(JSON.stringify(nextProps.settings));\n        if (!settings.tagCard && state.tagCardArray && state.tagCardArray.length) {\n            settings.tagCard =\n                typeof state.tagCardArray[0] !== 'string' ? state.tagCardArray[0].title : state.tagCardArray[0];\n        }\n\n        if (JSON.stringify(settings) !== JSON.stringify(state.settings)) {\n            return { settings };\n        }\n\n        return null;\n    }\n\n    componentWillUnmount(): void {\n        if (this.debugMessageTimeout) {\n            clearTimeout(this.debugMessageTimeout);\n            this.debugMessageTimeout = null;\n        }\n        if (this.debugHideTimeout) {\n            clearTimeout(this.debugHideTimeout);\n            this.debugHideTimeout = null;\n        }\n    }\n\n    // called every time, the tagCard changes or at start\n    onTagChange(\n        _tagCard?: RuleTagCardTitle | null,\n        cb?: () => void,\n        _value?: any,\n        _toggle?: boolean,\n        _useTrigger?: boolean,\n    ): void {\n        // analyse inputs and fill the attributes with default values\n        let changed = false;\n        const settings: Settings = JSON.parse(JSON.stringify(this.state.settings));\n        this.state.inputs.forEach(input => {\n            const attr: string | undefined = (input as RuleInputAll).attr;\n            const defaultValue: any = (input as RuleInputAll).defaultValue;\n\n            if (attr && defaultValue !== undefined) {\n                if (attr && (settings as Record<string, any>)[attr] === undefined) {\n                    changed = true;\n                    (settings as Record<string, any>)[attr] = defaultValue;\n                }\n            }\n        });\n        if (changed) {\n            this.setState({ settings }, () => cb && cb());\n            this.props.onChange(settings);\n        } else {\n            cb && cb();\n        }\n    }\n\n    // called if trigger added or removed\n    // eslint-disable-next-line class-methods-use-this\n    onUpdate(): void {\n        // do nothing, but blocks can overwrite it\n    }\n\n    // called every time if some attribute changes\n    // eslint-disable-next-line class-methods-use-this\n    onValueChanged(_value: any, _attr: string): void {\n        // do nothing, but blocks can overwrite it\n    }\n\n    // eslint-disable-next-line react/no-unused-class-component-methods\n    renderText = (input: RuleInputText, value: string, onChange: (value: string) => void): React.JSX.Element => {\n        const { className } = this.props;\n        const { attr, frontText, backText, nameBlock, name, doNotTranslate, doNotTranslateBack } = input;\n        return (\n            <Fragment key={attr}>\n                <div className={Utils.clsx(cls.displayFlex, cls.blockMarginTop)}>\n                    {frontText && <div className={cls.frontText}>{doNotTranslate ? frontText : I18n.t(frontText)}</div>}\n                    <CustomInput\n                        className={className}\n                        autoComplete=\"off\"\n                        label={getName(name)}\n                        variant=\"outlined\"\n                        size=\"small\"\n                        fullWidth\n                        value={value}\n                        onChange={onChange as (value: string | number) => void}\n                        customValue\n                    />\n                    {backText && <div className={cls.backText}>{doNotTranslateBack ? backText : I18n.t(backText)}</div>}\n                </div>\n                {nameBlock && <div className={cls.nameBlock}>{I18n.t(nameBlock)}</div>}\n            </Fragment>\n        );\n    };\n\n    // eslint-disable-next-line react/no-unused-class-component-methods\n    renderSwitch = (input: RuleInputSwitch, value: boolean, onChange: (value: boolean) => void): React.JSX.Element => {\n        const { className } = this.props;\n        const { attr, frontText, backText, nameBlock, doNotTranslate, doNotTranslateBack } = input;\n        return (\n            <div key={attr}>\n                <div className={Utils.clsx(cls.displayFlex, cls.blockMarginTop)}>\n                    {frontText && <div className={cls.frontText}>{doNotTranslate ? frontText : I18n.t(frontText)}</div>}\n                    <CustomSwitch\n                        className={className}\n                        label=\"\"\n                        customValue\n                        value={value}\n                        onChange={onChange}\n                    />\n                    {backText && <div className={cls.backText}>{doNotTranslateBack ? backText : I18n.t(backText)}</div>}\n                </div>\n                {nameBlock && <div className={cls.nameBlock}>{I18n.t(nameBlock)}</div>}\n            </div>\n        );\n    };\n\n    // eslint-disable-next-line react/no-unused-class-component-methods,class-methods-use-this\n    renderNameText = (\n        { attr, signature, doNotTranslate, defaultValue }: RuleInputNameText,\n        value: string,\n    ): React.JSX.Element => (\n        <div\n            className={Utils.clsx(signature ? cls.displayItalic : cls.displayFlex, cls.blockMarginTop)}\n            key={attr}\n        >\n            {value ? (doNotTranslate ? value : I18n.t(value)) : doNotTranslate ? defaultValue : I18n.t(defaultValue)}\n        </div>\n    );\n\n    // eslint-disable-next-line react/no-unused-class-component-methods\n    renderNumber = (\n        input: RuleInputNumber,\n        value: number,\n        onChange: (value: number | string) => void,\n    ): React.JSX.Element | null => {\n        const { className } = this.props;\n        const { settings } = this.state;\n        const { attr, backText, frontText, openCheckbox, doNotTranslate, doNotTranslateBack } = input;\n        let visibility = true;\n        if (openCheckbox) {\n            visibility =\n                typeof (settings as Record<string, any>).offset === 'boolean'\n                    ? (settings as Record<string, any>).offset\n                    : true;\n        }\n        return visibility ? (\n            <div\n                key={attr}\n                className={Utils.clsx(cls.displayFlex, cls.blockMarginTop)}\n            >\n                {frontText && <div className={cls.frontText}>{doNotTranslate ? frontText : I18n.t(frontText)}</div>}\n                <CustomInput\n                    className={Utils.clsx(className, input.className)}\n                    fullWidth\n                    autoComplete=\"off\"\n                    label={input.noHelperText ? '' : 'number'}\n                    variant=\"outlined\"\n                    size=\"small\"\n                    type=\"number\"\n                    value={value}\n                    onChange={onChange}\n                    customValue\n                />\n                {backText && <div className={cls.backText}>{doNotTranslateBack ? backText : I18n.t(backText)}</div>}\n            </div>\n        ) : null;\n    };\n\n    // eslint-disable-next-line react/no-unused-class-component-methods\n    renderColor = (input: RuleInputColor, value: string, onChange: (value: string) => void): React.JSX.Element => {\n        const { className } = this.props;\n        const { attr, backText, frontText, doNotTranslate, doNotTranslateBack } = input;\n        return (\n            <div\n                key={attr}\n                className={Utils.clsx(cls.displayFlex, cls.blockMarginTop)}\n            >\n                {frontText && <div className={cls.frontText}>{doNotTranslate ? frontText : I18n.t(frontText)}</div>}\n                <CustomInput\n                    className={className}\n                    autoComplete=\"off\"\n                    fullWidth\n                    variant=\"outlined\"\n                    size=\"small\"\n                    type=\"color\"\n                    value={value}\n                    onChange={onChange as (value: string | number) => void}\n                />\n                {backText && <div className={cls.backText}>{doNotTranslateBack ? backText : I18n.t(backText)}</div>}\n            </div>\n        );\n    };\n\n    // eslint-disable-next-line react/no-unused-class-component-methods\n    renderCheckbox = (\n        input: RuleInputCheckbox,\n        value: boolean,\n        onChange: (value: boolean) => void,\n    ): React.JSX.Element => {\n        const { className } = this.props;\n        const { settings } = this.state;\n        const { attr, backText, frontText, defaultValue, doNotTranslate, doNotTranslateBack } = input;\n        return (\n            <div\n                key={attr}\n                className={cls.displayFlex}\n            >\n                {frontText && <div className={cls.frontText}>{doNotTranslate ? frontText : I18n.t(frontText)}</div>}\n                <CustomCheckbox\n                    className={className}\n                    size=\"small\"\n                    value={\n                        typeof (settings as Record<string, any>)[attr] === 'boolean'\n                            ? !!(settings as Record<string, any>)[attr]\n                            : !!defaultValue\n                    }\n                    customValue\n                    onChange={onChange}\n                />\n                {backText && (\n                    <div\n                        onClick={() =>\n                            onChange(\n                                typeof (settings as Record<string, any>)[attr] === 'boolean'\n                                    ? !(settings as Record<string, any>)[attr]\n                                    : !defaultValue,\n                            )\n                        }\n                        className={cls.backText}\n                    >\n                        {doNotTranslateBack ? backText : I18n.t(backText)}\n                    </div>\n                )}\n            </div>\n        );\n    };\n\n    // eslint-disable-next-line react/no-unused-class-component-methods\n    renderSlider = (input: RuleInputSlider, value: number, onChange: (value: number) => void): React.JSX.Element => {\n        const { className } = this.props;\n        const { attr, frontText, backText, nameBlock, min, max, step, unit, doNotTranslate, doNotTranslateBack } =\n            input;\n        return (\n            <div key={attr}>\n                <div\n                    className={cls.displayFlex}\n                    style={{ marginRight: 20 }}\n                >\n                    {frontText && <div className={cls.frontText}>{doNotTranslate ? frontText : I18n.t(frontText)}</div>}\n                    <CustomSlider\n                        customValue\n                        min={min}\n                        max={max}\n                        step={step}\n                        unit={unit}\n                        className={className}\n                        autoComplete=\"off\"\n                        label=\"number\"\n                        variant=\"outlined\"\n                        size=\"small\"\n                        value={value}\n                        onChange={val => {\n                            console.log(val);\n                            onChange(val);\n                        }}\n                    />\n                    {backText && (\n                        <div\n                            style={{ marginLeft: 20 }}\n                            className={cls.backText}\n                        >\n                            {doNotTranslateBack ? backText : I18n.t(backText)}\n                        </div>\n                    )}\n                </div>\n                {nameBlock && <div className={cls.nameBlock}>{I18n.t(nameBlock)}</div>}\n            </div>\n        );\n    };\n\n    // eslint-disable-next-line react/no-unused-class-component-methods\n    renderButton = (input: RuleInputButton, value: boolean, onChange: (bValue: boolean) => void): React.JSX.Element => {\n        const { className } = this.props;\n        const { attr, frontText, backText, doNotTranslate, doNotTranslateBack } = input;\n        return (\n            <div\n                key={attr}\n                className={Utils.clsx(cls.displayFlex, cls.blockMarginTop)}\n            >\n                {frontText && <div className={cls.frontText}>{doNotTranslate ? frontText : I18n.t(frontText)}</div>}\n                <CustomButton\n                    fullWidth\n                    value={value.toString()}\n                    className={className}\n                    onClick={() => onChange(value)}\n                />\n                {backText && <div className={cls.backText}>{doNotTranslateBack ? backText : I18n.t(backText)}</div>}\n            </div>\n        );\n    };\n\n    findIcon(obj: ioBroker.Object | null | undefined): Promise<string | null> {\n        if (!obj) {\n            return Promise.resolve(null);\n        }\n\n        if (obj.common?.icon) {\n            return Promise.resolve(getSelectIdIcon(obj, '../..'));\n        }\n\n        if (obj.type === 'state' || obj.type === 'channel') {\n            const parts = obj._id.split('.');\n            parts.pop();\n            const newId = parts.join('.');\n\n            return this.props.socket\n                .getObject(newId)\n                .then(o => this.findIcon(o))\n                .catch(() => null);\n        }\n        return Promise.resolve(null);\n    }\n\n    // eslint-disable-next-line react/no-unused-class-component-methods\n    renderObjectID = (\n        input: RuleInputObjectID,\n        value: string,\n        onChange: (value: Record<string, any>, cb: () => void) => void,\n    ): React.JSX.Element | null => {\n        const { attr, openCheckbox, checkReadOnly } = input;\n        const { settings } = this.state;\n        const showSelectId = (this.state as Record<string, any>)[`showSelectId${attr}`];\n        const { className, socket, style } = this.props;\n        let visibility = true;\n        if (openCheckbox) {\n            visibility =\n                typeof (settings as Record<string, any>).offset === 'boolean'\n                    ? (settings as Record<string, any>).offset\n                    : true;\n        }\n\n        const oid: string | undefined = (settings as Record<string, any>)[attr];\n        const iobObj: ioBroker.Object | null | undefined | false = oid\n            ? (this.state as Record<string, ioBroker.Object | null | undefined | false>)[oid]\n            : undefined;\n\n        if (oid && !iobObj && iobObj !== false) {\n            setTimeout(\n                async (_attrStr: string): Promise<void> => {\n                    const obj = await socket.getObject(value);\n                    const icon = await this.findIcon(obj);\n                    const newState: Partial<TState> = {\n                        [_attrStr]: obj || false,\n                        [`${_attrStr}___icon`]: icon,\n                        error:\n                            checkReadOnly &&\n                            this.lastObjectIdChange &&\n                            Date.now() - this.lastObjectIdChange < 1000 &&\n                            obj?.common?.write === false\n                                ? I18n.t('Read only ID selected: %s', (settings as Record<string, any>)[_attrStr])\n                                : '',\n                    } as Partial<TState>;\n\n                    this.setState(newState as TState);\n                },\n                0,\n                oid,\n            );\n        }\n\n        // return null\n        return visibility ? (\n            <div\n                className={cls.blockMarginTop}\n                key={attr}\n            >\n                <div className={cls.displayFlex}>\n                    {input.title ? <div>{I18n.t(input.title)}</div> : null}\n                    <CustomInput\n                        className={className}\n                        style={style}\n                        autoComplete=\"off\"\n                        fullWidth\n                        disabled\n                        variant=\"outlined\"\n                        size=\"small\"\n                        value={value}\n                        customValue\n                    />\n                    <CustomButton\n                        icon={(this.state as Record<string, any>)[`${oid}___icon`]}\n                        square\n                        style={{ ...(style || undefined), marginLeft: 7 }}\n                        value=\"...\"\n                        className={className}\n                        onClick={() => {\n                            const settings: Partial<TState> = {};\n                            (settings as Record<string, any>)[`showSelectId${attr}`] = true;\n                            this.setState(settings as TState);\n                        }}\n                    />\n                </div>\n                {iobObj ? (\n                    <div className={Utils.clsx(cls.nameBlock, cls.displayItalic)}>\n                        {Utils.getObjectNameFromObj(iobObj, I18n.getLanguage())}\n                    </div>\n                ) : null}\n                {showSelectId ? (\n                    <DialogSelectID\n                        theme={this.props.theme}\n                        imagePrefix=\"../..\"\n                        dialogName=\"javascript\"\n                        themeType={Utils.getThemeName()}\n                        socket={socket}\n                        selected={value}\n                        onClose={() => {\n                            const settings: Partial<TState> = {};\n                            (settings as Record<string, any>)[`showSelectId${attr}`] = false;\n                            this.setState(settings as TState);\n                        }}\n                        onOk={(selected: string | string[] | undefined, _name: string): void => {\n                            const settings: Partial<TState> = {};\n                            (settings as Record<string, any>)[`showSelectId${attr}`] = false;\n                            const oid = Array.isArray(selected) ? selected[0] : selected;\n\n                            this.setState(settings as TState, async () => {\n                                // read type of object\n                                const obj = oid ? await socket.getObject(oid) : undefined;\n                                this.lastObjectIdChange = Date.now();\n                                onChange(\n                                    {\n                                        [attr]: selected,\n                                        [`${attr}Role`]: obj?.common?.role,\n                                        [`${attr}Type`]: obj?.common?.type,\n                                        [`${attr}Unit`]: obj?.common?.unit,\n                                        [`${attr}States`]: obj?.common?.states,\n                                        [`${attr}Min`]: obj?.common?.min,\n                                        [`${attr}Max`]: obj?.common?.max,\n                                        [`${attr}Step`]: obj?.common?.step,\n                                        [`${attr}Def`]: obj?.common?.def,\n                                        [`${attr}Write`]: obj?.common?.write,\n                                        [`${attr}Read`]: obj?.common?.read,\n                                    },\n                                    () => this.props.setOnUpdate && this.props.setOnUpdate(true),\n                                );\n                            });\n                        }}\n                    />\n                ) : null}\n            </div>\n        ) : null;\n    };\n\n    renderIconTag = (): React.JSX.Element => {\n        return (\n            <div\n                className={cls.iconTag}\n                onClick={e => {\n                    if (this.state.settings.tagCard) {\n                        if (this.state.tagCardArray.length < 3) {\n                            this.onChangeTag();\n                        } else {\n                            this.setState({ openTagMenu: e.currentTarget });\n                        }\n                    }\n                }}\n            >\n                {this.state.settings.tagCard}\n            </div>\n        );\n    };\n\n    // eslint-disable-next-line react/no-unused-class-component-methods,class-methods-use-this\n    renderTime = (input: RuleInputTime, value: string, onChange: (value: string) => void): React.JSX.Element => {\n        const { attr, backText, frontText, doNotTranslate, doNotTranslateBack } = input;\n        return (\n            <div\n                key={attr}\n                className={cls.displayFlex}\n                style={{ whiteSpace: 'nowrap' }}\n            >\n                {frontText && <div className={cls.frontText}>{doNotTranslate ? frontText : I18n.t(frontText)}</div>}\n                <CustomTime\n                    value={value}\n                    onChange={onChange}\n                />\n                {backText && <div className={cls.backText}>{doNotTranslateBack ? backText : I18n.t(backText)}</div>}\n            </div>\n        );\n    };\n\n    // eslint-disable-next-line react/no-unused-class-component-methods,class-methods-use-this\n    renderSelect = (\n        input: RuleInputSelect,\n        value: any,\n        onChange: (value: any, attr: string) => void,\n    ): React.JSX.Element => {\n        const { className, style } = this.props;\n        const {\n            name,\n            options,\n            frontText,\n            backText,\n            attr,\n            multiple,\n            doNotTranslate,\n            doNotTranslate2,\n            doNotTranslateBack,\n        } = input;\n        return (\n            <div\n                key={attr}\n                className={Utils.clsx(cls.displayFlex, cls.blockMarginTop)}\n                style={{ whiteSpace: 'nowrap' }}\n            >\n                {frontText && <div className={cls.frontText}>{I18n.t(frontText)}</div>}\n                <CustomSelect\n                    attr={attr}\n                    doNotTranslate={doNotTranslate}\n                    doNotTranslate2={doNotTranslate2}\n                    title={name}\n                    className={className}\n                    style={style}\n                    options={options}\n                    value={value}\n                    onChange={onChange}\n                    multiple={multiple}\n                    customValue\n                />\n                {backText && <div className={cls.backText}>{doNotTranslateBack ? backText : I18n.t(backText)}</div>}\n            </div>\n        );\n    };\n\n    // eslint-disable-next-line react/no-unused-class-component-methods\n    renderInstance = (\n        input: RuleInputInstance,\n        value: string,\n        onChange: (value: string) => void,\n    ): React.JSX.Element | null => {\n        const { socket } = this.props;\n        const { name, frontText, backText, attr, adapter, doNotTranslate, doNotTranslateBack } = input;\n        if (this.state.hideAttributes.includes(attr)) {\n            return null;\n        }\n        return (\n            <div\n                key={attr}\n                className={Utils.clsx(cls.displayFlex, cls.blockMarginTop)}\n                style={{ whiteSpace: 'nowrap' }}\n            >\n                {frontText && <div className={cls.frontText}>{doNotTranslate ? frontText : I18n.t(frontText)}</div>}\n                <CustomInstance\n                    attr={attr}\n                    socket={socket}\n                    adapter={adapter}\n                    title={name}\n                    value={value}\n                    onChange={(value: string | string[]): void => {\n                        onChange(Array.isArray(value) ? value[0] : value);\n                    }}\n                    customValue\n                    onInstanceHide={value =>\n                        this.setState({ hideAttributes: [...this.state.hideAttributes, attr] }, () => onChange(value))\n                    } // hide instance if only exactly one exists\n                />\n                {backText && <div className={cls.backText}>{doNotTranslateBack ? backText : I18n.t(backText)}</div>}\n            </div>\n        );\n    };\n\n    // eslint-disable-next-line react/no-unused-class-component-methods,class-methods-use-this\n    renderDialog = (input: RuleInputDialog): React.JSX.Element => {\n        const { onShowDialog, frontText, backText, attr, icon, doNotTranslate, doNotTranslateBack } = input;\n        return (\n            <div\n                key={attr}\n                className={Utils.clsx(cls.displayFlex, cls.blockMarginTop)}\n                style={{ whiteSpace: 'nowrap' }}\n            >\n                {frontText && <div className={cls.frontText}>{doNotTranslate ? frontText : I18n.t(frontText)}</div>}\n                <MaterialDynamicIcon\n                    iconName={icon}\n                    className={Utils.clsx(cls.iconDialog)}\n                    onClick={() => onShowDialog && onShowDialog()}\n                />\n                {backText && <div className={cls.backText}>{doNotTranslateBack ? backText : I18n.t(backText)}</div>}\n            </div>\n        );\n    };\n\n    // eslint-disable-next-line react/no-unused-class-component-methods,class-methods-use-this\n    renderModalInput = (\n        input: RuleInputModalInput,\n        value: string | number,\n        onChange: (value: string | number) => void,\n    ): React.JSX.Element => {\n        const { openModal } = this.state;\n        const { className } = this.props;\n        const { attr, nameBlock, frontText, backText, noTextEdit, doNotTranslate, doNotTranslateBack } = input;\n        return (\n            <div key={attr}>\n                <div className={Utils.clsx(cls.displayFlex, cls.blockMarginTop)}>\n                    {frontText && <div className={cls.frontText}>{doNotTranslate ? frontText : I18n.t(frontText)}</div>}\n                    <CustomInput\n                        disabled={!!noTextEdit}\n                        className={className}\n                        autoComplete=\"off\"\n                        fullWidth\n                        variant=\"outlined\"\n                        size=\"small\"\n                        value={value}\n                        onChange={onChange}\n                        customValue\n                    />\n                    <CustomButton\n                        square\n                        // fullWidth\n                        style={{ marginLeft: 5 }}\n                        value=\"...\"\n                        className={className}\n                        onClick={() => this.setState({ openModal: true })}\n                    />\n                    {backText && <div className={cls.backText}>{doNotTranslateBack ? backText : I18n.t(backText)}</div>}\n                </div>\n                {openModal ? (\n                    <CustomModal\n                        onApply={val =>\n                            this.setState(\n                                { openModal: false },\n                                () => val !== null && val !== undefined && onChange(val),\n                            )\n                        }\n                        onClose={() => this.setState({ openModal: false })}\n                        defaultValue={value}\n                        textInput\n                    />\n                ) : null}\n                {nameBlock && <div className={cls.nameBlock}>{I18n.t(nameBlock)}</div>}\n            </div>\n        );\n    };\n\n    // eslint-disable-next-line react/no-unused-class-component-methods,class-methods-use-this\n    renderDate = (input: RuleInputDate, value: string, onChange: (value: string) => void): React.JSX.Element => {\n        const { attr, backText, frontText, doNotTranslate, doNotTranslateBack } = input;\n        return (\n            <div\n                key={attr}\n                className={cls.displayFlex}\n                style={{ whiteSpace: 'nowrap' }}\n            >\n                {frontText && <div className={cls.frontText}>{doNotTranslate ? frontText : I18n.t(frontText)}</div>}\n                <CustomDate\n                    value={value}\n                    onChange={onChange}\n                />\n                {backText && <div className={cls.backText}>{doNotTranslateBack ? backText : I18n.t(backText)}</div>}\n            </div>\n        );\n    };\n\n    static getReplacesInText(context: RuleContext): string {\n        let value = '';\n        if ((context.trigger as RuleBlockConfigTriggerState)?.oidType) {\n            value =\n                '.replace(/%s/g, obj.state.val).replace(/%id/g, obj.id).replace(/%name/g, obj.common && obj.common.name).replace(/%old/g, obj.oldState.val)';\n        } else if (context.conditionsStates.length) {\n            value = `.replace(/%s/g, ${context.conditionsStates[0].name}).replace(/%id/g, \"${context.conditionsStates[0].id}\")`;\n        }\n        return value;\n    }\n\n    /////////////////////////////\n    renderTags(): React.JSX.Element | string | undefined {\n        const { tagCardArray, openTagMenu } = this.state;\n        const { tagCard } = this.state.settings;\n        let result: React.JSX.Element | string | undefined =\n            tagCard !== '=' &&\n            tagCard !== '<>' &&\n            tagCard !== '>=' &&\n            tagCard !== '()' &&\n            tagCard !== '.' &&\n            tagCard !== '<=' &&\n            tagCard !== '<' &&\n            tagCard !== '>' &&\n            tagCard\n                ? I18n.t(tagCard)\n                : tagCard;\n\n        if (tagCardArray.length >= 3) {\n            result = (\n                <div>\n                    <div\n                        aria-controls=\"simple-menu\"\n                        aria-haspopup=\"true\"\n                        onClick={e => {\n                            this.setState({ openTagMenu: e.currentTarget }, () => {\n                                this.props.isTourOpen &&\n                                    this.props.tourStep === STEPS.openTagsMenu &&\n                                    setTimeout(\n                                        () => this.props.setTourStep && this.props.setTourStep(STEPS.selectIntervalTag),\n                                        300,\n                                    );\n                            });\n                        }}\n                    >\n                        {result}\n                    </div>\n                    <Menu\n                        id=\"simple-menu\"\n                        anchorEl={openTagMenu}\n                        keepMounted\n                        open={Boolean(openTagMenu)}\n                        onClose={() => this.setState({ openTagMenu: null })}\n                    >\n                        {tagCardArray.map((el, i) => {\n                            let tag: RuleTagCardTitle;\n                            if (typeof el !== 'string') {\n                                tag = el.title;\n                            } else {\n                                tag = el;\n                            }\n                            return (\n                                <MenuItem\n                                    key={`${tag}_${i}`}\n                                    selected={tag === tagCard}\n                                    className={`tag-card-${tag}`}\n                                    style={{ placeContent: 'space-between' }}\n                                    onClick={() => {\n                                        const settings = { ...this.state.settings, tagCard: tag };\n                                        this.setState({ openTagMenu: null, settings }, () => {\n                                            this.props.onChange(settings);\n                                            this.onTagChange(tag);\n                                        });\n                                        this.props.isTourOpen &&\n                                            (this.props.tourStep === STEPS.openTagsMenu ||\n                                                this.props.tourStep === STEPS.selectIntervalTag) &&\n                                            tag === 'interval' &&\n                                            setTimeout(\n                                                () =>\n                                                    this.props.setTourStep &&\n                                                    this.props.setTourStep(STEPS.selectActions),\n                                                500,\n                                            );\n                                    }}\n                                >\n                                    {tag.search(/>|<|<>|<=|>=|=/) !== -1 ? tag : I18n.t(tag)}\n                                    {typeof el !== 'string' && el.title2 && (\n                                        <div style={{ marginLeft: 4 }}>{I18n.t(el.title2)}</div>\n                                    )}\n                                </MenuItem>\n                            );\n                        })}\n                    </Menu>\n                </div>\n            );\n        }\n\n        return result;\n    }\n\n    // will be overwritten\n    // eslint-disable-next-line react/no-unused-class-component-methods,class-methods-use-this\n    getData(): RuleBlockDescription {\n        return {\n            acceptedBy: 'triggers',\n            name: '',\n            id: '',\n        };\n    }\n\n    onChangeTag = (): void => {\n        const {\n            tagCardArray,\n            settings,\n            settings: { tagCard },\n        } = this.state;\n        let newTagCardArray: RuleTagCardTitle[];\n        if (typeof tagCardArray[0] !== 'string') {\n            newTagCardArray = (tagCardArray as RuleTagCard[]).map(el => el.title);\n        } else {\n            newTagCardArray = [...(tagCardArray as RuleTagCardTitle[])];\n        }\n\n        if (tagCard && newTagCardArray.length < 3) {\n            const newSettings = { ...settings };\n            const newTagCard = newTagCardArray[(newTagCardArray.indexOf(tagCard) + 1) % newTagCardArray.length];\n            newSettings.tagCard = newTagCard;\n            this.setState({ settings: newSettings }, () => {\n                this.props.onChange(newSettings);\n                this.onTagChange(newTagCard);\n            });\n        }\n    };\n\n    componentDidMount = (): void => {\n        this.onTagChange();\n        // detect changes\n    };\n\n    componentDidUpdate(): void {\n        if (this.props.acceptedBy !== 'triggers' && this.props.onUpdate) {\n            setTimeout(() => this.onUpdate(), 0);\n        }\n    }\n\n    onChangeInput = (attribute: string): ((value: any, attr?: string | (() => void), cb?: () => void) => void) => {\n        return (value: any, attr?: string | (() => void), cb?: () => void): void => {\n            const settings = JSON.parse(JSON.stringify(this.state.settings));\n\n            if (typeof value === 'object' && (!attr || typeof attr === 'function')) {\n                Object.keys(value).forEach(_attr => (settings[_attr] = value[_attr]));\n                if (typeof attr === 'function') {\n                    cb = attr;\n                    attr = undefined;\n                }\n            } else {\n                settings[(attr as string) || attribute] = value;\n            }\n\n            settings.id = this.getData().id;\n            settings._id = this.props._id;\n\n            this.setState({ settings }, () => {\n                this.onValueChanged(value, (attr as string) || attribute);\n                this.props.onChange(settings);\n                cb && cb();\n            });\n        };\n    };\n\n    // eslint-disable-next-line class-methods-use-this\n    renderSpecific(): React.JSX.Element | null {\n        return null; // it can be overloaded\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    renderDebug(_message?: any): React.JSX.Element | string {\n        return '';\n    }\n\n    renderDebugInfo(): React.JSX.Element | null {\n        if (this.state.debugMessage) {\n            return (\n                <div\n                    className={cls.debugInfo}\n                    key={this.state.debugMessage.ts}\n                    style={{ opacity: 1, height: 22, bottom: -22 }}\n                >\n                    {this.renderDebug ? this.renderDebug(this.state.debugMessage) : I18n.t('executed')}\n                </div>\n            );\n        }\n        return null;\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    renderCron(\n        _input: RuleInputCron,\n        _value: string,\n        _onChange: (value: string, attr?: string, cb?: () => void) => void,\n    ): React.JSX.Element | null {\n        return null;\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    renderWizard(\n        _input: RuleInputWizard,\n        _value: string,\n        _onChange: (newData: Record<string, any> | string) => void,\n    ): React.JSX.Element | null {\n        return null;\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    renderWriteState(): React.JSX.Element[] | null {\n        return null;\n    }\n\n    renderInputElement(input: RuleInputAny, index: number): React.JSX.Element | React.JSX.Element[] | null {\n        const { nameRender, defaultValue, attr } = input as RuleInputAll;\n        const { settings } = this.state;\n        let value: any = attr ? (settings as Record<string, any>)[attr] : undefined;\n        if (value === undefined) {\n            value = defaultValue;\n        }\n\n        switch (nameRender) {\n            case 'renderTime':\n                if (attr) {\n                    return this.renderTime(input as RuleInputTime, value as string, this.onChangeInput(attr));\n                }\n                return <div key={`invalid_${index}`}>{I18n.t('Invalid renderTime')}</div>;\n\n            case 'renderNameText':\n                return this.renderNameText(input as RuleInputNameText, value);\n\n            case 'renderSelect':\n                if (attr) {\n                    return this.renderSelect(input as RuleInputSelect, value, this.onChangeInput(attr));\n                }\n                return <div key={`invalid_${index}`}>{I18n.t('Invalid renderSelect')}</div>;\n            case 'renderModalInput':\n                if (attr) {\n                    return this.renderModalInput(input as RuleInputModalInput, value, this.onChangeInput(attr));\n                }\n                return <div key={`invalid_${index}`}>{I18n.t('Invalid renderModalInput')}</div>;\n            case 'renderObjectID':\n                if (attr) {\n                    return this.renderObjectID(input as RuleInputObjectID, value, this.onChangeInput(attr));\n                }\n                return <div key={`invalid_${index}`}>{I18n.t('Invalid renderObjectID')}</div>;\n            case 'renderDialog':\n                if (attr) {\n                    return this.renderDialog(input as RuleInputDialog);\n                }\n                return <div key={`invalid_${index}`}>{I18n.t('Invalid renderDialog')}</div>;\n            case 'renderInstance':\n                if (attr) {\n                    return this.renderInstance(input as RuleInputInstance, value, this.onChangeInput(attr));\n                }\n                return <div key={`invalid_${index}`}>{I18n.t('Invalid renderInstance')}</div>;\n            case 'renderText':\n                if (attr) {\n                    return this.renderText(input as RuleInputText, value, this.onChangeInput(attr));\n                }\n                return <div key={`invalid_${index}`}>{I18n.t('Invalid renderText')}</div>;\n            case 'renderSlider':\n                if (attr) {\n                    return this.renderSlider(input as RuleInputSlider, value, this.onChangeInput(attr));\n                }\n                return <div key={`invalid_${index}`}>{I18n.t('Invalid renderSlider')}</div>;\n            case 'renderCheckbox':\n                if (attr) {\n                    return this.renderCheckbox(input as RuleInputCheckbox, value, this.onChangeInput(attr));\n                }\n                return <div key={`invalid_${index}`}>{I18n.t('Invalid renderCheckbox')}</div>;\n            case 'renderButton':\n                if (attr) {\n                    return this.renderButton(input as RuleInputButton, value, this.onChangeInput(attr));\n                }\n                return <div key={`invalid_${index}`}>{I18n.t('Invalid renderButton')}</div>;\n            case 'renderColor':\n                if (attr) {\n                    return this.renderColor(input as RuleInputColor, value, this.onChangeInput(attr));\n                }\n                return <div key={`invalid_${index}`}>{I18n.t('Invalid renderColor')}</div>;\n            case 'renderSwitch':\n                if (attr) {\n                    return this.renderSwitch(input as RuleInputSwitch, value, this.onChangeInput(attr));\n                }\n                return <div key={`invalid_${index}`}>{I18n.t('Invalid renderSwitch')}</div>;\n            case 'renderDate':\n                if (attr) {\n                    return this.renderDate(input as RuleInputDate, value, this.onChangeInput(attr));\n                }\n                return <div key={`invalid_${index}`}>{I18n.t('Invalid renderDate')}</div>;\n            case 'renderCron':\n                if (attr) {\n                    return this.renderCron(input as RuleInputCron, value, this.onChangeInput(attr));\n                }\n                return <div key={`invalid_${index}`}>{I18n.t('Invalid renderCron')}</div>;\n            case 'renderWizard':\n                if (attr) {\n                    return this.renderWizard(input as RuleInputWizard, value, this.onChangeInput(attr));\n                }\n                return <div key={`invalid_${index}`}>{I18n.t('Invalid renderWizard')}</div>;\n            case 'renderWriteState':\n                return this.renderWriteState();\n            case 'renderNumber':\n                if (attr) {\n                    return this.renderNumber(input as RuleInputNumber, value, this.onChangeInput(attr));\n                }\n                return <div key={`invalid_${index}`}>{I18n.t('Invalid renderNumber')}</div>;\n            default:\n                if (this[nameRender]) {\n                    // @ts-expect-error ignore error as it is special case\n                    return this[nameRender](input, value, attr ? this.onChangeInput(attr) : null);\n                }\n                return <div key={`invalid_${index}`}>{I18n.t('Invalid input type: %s', nameRender)}</div>;\n        }\n    }\n\n    render(): React.JSX.Element {\n        const {\n            inputs,\n            name,\n            icon,\n            iconTag,\n            settings,\n            adapter,\n            settings: { tagCard },\n            helpDialog,\n        } = this.state;\n        const { socket, notFound } = this.props;\n\n        // Detect changing of simulation\n        if (this.state.enableSimulation !== this.props.enableSimulation && !this.enableSimulationProcessing) {\n            this.enableSimulationProcessing = true;\n            setTimeout(() => {\n                this.setState({ enableSimulation: this.props.enableSimulation }, () => {\n                    this.enableSimulationProcessing = false;\n                });\n            }, 50);\n        }\n\n        // Try to find latest message for this block\n        let debugMsg;\n        if (this.props.onDebugMessage) {\n            for (let d = this.props.onDebugMessage.length - 1; d >= 0; d--) {\n                const msg = this.props.onDebugMessage[d];\n                if (msg.blockId === this.props._id && msg.ts > this.lastDebugMessage && msg.ts > Date.now() - 1000) {\n                    debugMsg = msg;\n                    break;\n                }\n            }\n        }\n\n        if (debugMsg) {\n            // Get the last message\n            this.lastDebugMessage = debugMsg.ts;\n            if (this.debugMessageTimeout) {\n                clearTimeout(this.debugMessageTimeout);\n            }\n            if (this.debugHideTimeout) {\n                clearTimeout(this.debugHideTimeout);\n                this.debugHideTimeout = null;\n            }\n            this.debugMessageTimeout = setTimeout(\n                (debugMessageStr: string): void => {\n                    const debugMessage: DebugMessage = JSON.parse(debugMessageStr);\n                    const hideTimeout: number = debugMessage.hideTimeout || 5000;\n                    this.debugMessageTimeout = null;\n                    this.setState({ debugMessage }, () => {\n                        if (this.debugHideTimeout) {\n                            clearTimeout(this.debugHideTimeout);\n                        }\n                        this.debugHideTimeout = setTimeout(() => {\n                            this.debugHideTimeout = null;\n                            this.setState({ debugMessage: null });\n                        }, hideTimeout);\n                    });\n                },\n                50,\n                JSON.stringify(debugMsg),\n            );\n        }\n\n        return (\n            <Fragment>\n                {iconTag ? (\n                    this.renderIconTag()\n                ) : (\n                    <MaterialDynamicIcon\n                        iconName={icon}\n                        className={Utils.clsx(\n                            cls.iconThemCard,\n                            tagCard && this.state.tagCardArray.length && cls.iconThemCardSelectable,\n                        )}\n                        adapter={adapter}\n                        socket={socket}\n                        onClick={e => {\n                            if (tagCard) {\n                                if (this.state.tagCardArray.length < 3) {\n                                    this.onChangeTag();\n                                } else {\n                                    this.setState({ openTagMenu: e.currentTarget });\n                                }\n                            }\n                        }}\n                    />\n                )}\n                <div className={cls.blockName}>\n                    <span className={cls.nameCard}>\n                        {I18n.t(name)}\n                        {notFound ? I18n.t(`%s not found`, settings.id) : ''}\n                        {helpDialog ? (\n                            <IconButton\n                                className={cls.iconHelp}\n                                size=\"small\"\n                                onClick={() => this.setState({ helpText: I18n.t(helpDialog) })}\n                            >\n                                <IconHelp />\n                            </IconButton>\n                        ) : null}\n                    </span>\n                    {inputs.map((input, index) => this.renderInputElement(input, index))}\n                </div>\n                {tagCard && (\n                    <div\n                        className={cls.controlMenuTop}\n                        style={{ opacity: 1, height: 22, top: -22 }}\n                    >\n                        <div\n                            onClick={() => this.onChangeTag()}\n                            className={Utils.clsx(cls.tagCard, 'tag-card')}\n                        >\n                            {this.renderTags()}\n                        </div>\n                    </div>\n                )}\n                {this.renderDebugInfo()}\n                {this.state.error ? (\n                    <DialogError\n                        title={I18n.t('Warning')}\n                        text={this.state.error}\n                        onClose={() => this.setState({ error: '' })}\n                    />\n                ) : null}\n                {this.state.helpText ? (\n                    <DialogMessage\n                        title={I18n.t('Instructions')}\n                        text={this.state.helpText}\n                        onClose={() => this.setState({ helpText: '' })}\n                    />\n                ) : null}\n                {this.renderSpecific()}\n            </Fragment>\n        );\n    }\n}\n","import { I18n } from '@iobroker/adapter-react-v5';\nimport { GenericBlock, type GenericBlockProps } from '../GenericBlock';\nimport type { RuleBlockConfigActionSayText, RuleBlockDescription, RuleContext } from '@/Components/RulesEditor/types';\n\n// copied from https://github.com/ioBroker/ioBroker.sayit/blob/master/admin/blockly.js#L37\nconst sayitEngines = {\n    en: { name: 'Google - English', engine: 'google', params: [] },\n    de: { name: 'Google - Deutsch', engine: 'google', params: [] },\n    ru: { name: 'Google - ', engine: 'google', params: [] },\n    it: { name: 'Google - Italiano', engine: 'google', params: [] },\n    es: { name: 'Google - Espaniol', engine: 'google', params: [] },\n    fr: { name: 'Google - Franais', engine: 'google', params: [] },\n    ru_YA: {\n        name: 'Yandex - ',\n        engine: 'yandex',\n        params: ['key', 'voice', 'emotion', 'ill', 'drunk', 'robot'],\n        voice: ['jane', 'zahar'],\n        emotion: ['none', 'good', 'neutral', 'evil', 'mixed'],\n    },\n    ru_YA_CLOUD: {\n        name: 'Yandex Cloud - ',\n        engine: 'yandexCloud',\n        params: ['key', 'folderID', 'voice', 'emotion'],\n        voice: ['alyss', 'oksana', 'jane', 'zahar'],\n        emotion: ['good', 'neutral', 'evil'],\n    },\n\n    'en-US': { name: 'PicoTTS - Englisch US', engine: 'PicoTTS', params: [] },\n    'en-GB': { name: 'PicoTTS - Englisch GB', engine: 'PicoTTS', params: [] },\n    'de-DE': { name: 'PicoTTS - Deutsch', engine: 'PicoTTS', params: [] },\n    'it-IT': { name: 'PicoTTS - Italiano', engine: 'PicoTTS', params: [] },\n    'es-ES': { name: 'PicoTTS - Espaniol', engine: 'PicoTTS', params: [] },\n    'fr-FR': { name: 'PicoTTS - Franais', engine: 'PicoTTS', params: [] },\n\n    'ru-RU_CLOUD_Female': {\n        gender: 'Female',\n        engine: 'cloud',\n        params: ['cloud'],\n        language: 'ru-RU',\n        ename: 'Tatyana',\n        ssml: true,\n        name: 'Cloud -  - ',\n    },\n    'ru-RU_CLOUD_Male': {\n        gender: 'Male',\n        engine: 'cloud',\n        params: ['cloud'],\n        language: 'ru-RU',\n        ename: 'Maxim',\n        ssml: true,\n        name: 'Cloud -  - ',\n    },\n    'de-DE_CLOUD_Female': {\n        gender: 'Female',\n        engine: 'cloud',\n        params: ['cloud'],\n        language: 'de-DE',\n        ename: 'Marlene',\n        ssml: true,\n        name: 'Cloud - Deutsch - Marlene',\n    },\n    'de-DE_CLOUD_Male': {\n        gender: 'Male',\n        engine: 'cloud',\n        params: ['cloud'],\n        language: 'de-DE',\n        ename: 'Hans',\n        ssml: true,\n        name: 'Cloud - Deutsch - Hans',\n    },\n    'en-US_CLOUD_Female': {\n        gender: 'Female',\n        engine: 'cloud',\n        params: ['cloud'],\n        language: 'en-US',\n        ename: 'Salli',\n        ssml: true,\n        name: 'Cloud - en-US - Female - Salli',\n    },\n    'en-US_CLOUD_Male': {\n        gender: 'Male',\n        engine: 'cloud',\n        params: ['cloud'],\n        language: 'en-US',\n        ename: 'Joey',\n        ssml: true,\n        name: 'Cloud - en-US - Male - Joey',\n    },\n    'da-DK_CLOUD_Female': {\n        gender: 'Female',\n        engine: 'cloud',\n        params: ['cloud'],\n        language: 'da-DK',\n        ename: 'Naja',\n        ssml: true,\n        name: 'Cloud - da-DK - Female - Naja',\n    },\n    'da-DK_CLOUD_Male': {\n        gender: 'Male',\n        engine: 'cloud',\n        params: ['cloud'],\n        language: 'da-DK',\n        ename: 'Mads',\n        ssml: true,\n        name: 'Cloud - da-DK - Male - Mads',\n    },\n    'en-AU_CLOUD_Female': {\n        gender: 'Female',\n        engine: 'cloud',\n        params: ['cloud'],\n        language: 'en-AU',\n        ename: 'Nicole',\n        ssml: true,\n        name: 'Cloud - en-AU - Female - Nicole',\n    },\n    'en-AU_CLOUD_Male': {\n        gender: 'Male',\n        engine: 'cloud',\n        params: ['cloud'],\n        language: 'en-AU',\n        ename: 'Russell',\n        ssml: true,\n        name: 'Cloud - en-AU - Male - Russell',\n    },\n    'en-GB_CLOUD_Female_Amy': {\n        gender: 'Female',\n        engine: 'cloud',\n        params: ['cloud'],\n        language: 'en-GB',\n        ename: 'Amy',\n        ssml: true,\n        name: 'Cloud - en-GB - Female - Amy',\n    },\n    'en-GB_CLOUD_Male': {\n        gender: 'Male',\n        engine: 'cloud',\n        params: ['cloud'],\n        language: 'en-GB',\n        ename: 'Brian',\n        ssml: true,\n        name: 'Cloud - en-GB - Male - Brian',\n    },\n    'en-GB_CLOUD_Female_Emma': {\n        gender: 'Female',\n        engine: 'cloud',\n        params: ['cloud'],\n        language: 'en-GB',\n        ename: 'Emma',\n        ssml: true,\n        name: 'Cloud - en-GB - Female - Emma',\n    },\n    'en-GB-WLS_CLOUD_Female': {\n        gender: 'Female',\n        engine: 'cloud',\n        params: ['cloud'],\n        language: 'en-GB-WLS',\n        ename: 'Gwyneth',\n        ssml: true,\n        name: 'Cloud - en-GB-WLS - Female - Gwyneth',\n    },\n    'en-GB-WLS_CLOUD_Male': {\n        gender: 'Male',\n        engine: 'cloud',\n        params: ['cloud'],\n        language: 'en-GB-WLS',\n        ename: 'Geraint',\n        ssml: true,\n        name: 'Cloud - en-GB-WLS - Male - Geraint',\n    },\n    'cy-GB_CLOUD_Female': {\n        gender: 'Female',\n        engine: 'cloud',\n        params: ['cloud'],\n        language: 'cy-GB',\n        ename: 'Gwyneth',\n        ssml: true,\n        name: 'Cloud - cy-GB - Female - Gwyneth',\n    },\n    'cy-GB_CLOUD_Male': {\n        gender: 'Male',\n        engine: 'cloud',\n        params: ['cloud'],\n        language: 'cy-GB',\n        ename: 'Geraint',\n        ssml: true,\n        name: 'Cloud - cy-GB - Male - Geraint',\n    },\n    'en-IN_CLOUD_Female': {\n        gender: 'Female',\n        engine: 'cloud',\n        params: ['cloud'],\n        language: 'en-IN',\n        ename: 'Raveena',\n        ssml: true,\n        name: 'Cloud - en-IN - Female - Raveena',\n    },\n    'en-US_CLOUD_Male_Chipmunk': {\n        gender: 'Male',\n        engine: 'cloud',\n        params: ['cloud'],\n        language: 'en-US',\n        ename: 'Chipmunk',\n        ssml: true,\n        name: 'Cloud - en-US - Male - Chipmunk',\n    },\n    'en-US_CLOUD_Male_Eric': {\n        gender: 'Male',\n        engine: 'cloud',\n        params: ['cloud'],\n        language: 'en-US',\n        ename: 'Eric',\n        ssml: true,\n        name: 'Cloud - en-US - Male - Eric',\n    },\n    'en-US_CLOUD_Female_Ivy': {\n        gender: 'Female',\n        engine: 'cloud',\n        params: ['cloud'],\n        language: 'en-US',\n        ename: 'Ivy',\n        ssml: true,\n        name: 'Cloud - en-US - Female - Ivy',\n    },\n    'en-US_CLOUD_Female_Jennifer': {\n        gender: 'Female',\n        engine: 'cloud',\n        params: ['cloud'],\n        language: 'en-US',\n        ename: 'Jennifer',\n        ssml: true,\n        name: 'Cloud - en-US - Female - Jennifer',\n    },\n    'en-US_CLOUD_Male_Justin': {\n        gender: 'Male',\n        engine: 'cloud',\n        params: ['cloud'],\n        language: 'en-US',\n        ename: 'Justin',\n        ssml: true,\n        name: 'Cloud - en-US - Male - Justin',\n    },\n    'en-US_CLOUD_Female_Kendra': {\n        gender: 'Female',\n        engine: 'cloud',\n        params: ['cloud'],\n        language: 'en-US',\n        ename: 'Kendra',\n        ssml: true,\n        name: 'Cloud - en-US - Female - Kendra',\n    },\n    'en-US_CLOUD_Female_Kimberly': {\n        gender: 'Female',\n        engine: 'cloud',\n        params: ['cloud'],\n        language: 'en-US',\n        ename: 'Kimberly',\n        ssml: true,\n        name: 'Cloud - en-US - Female - Kimberly',\n    },\n    'es-ES_CLOUD_Female': {\n        gender: 'Female',\n        engine: 'cloud',\n        params: ['cloud'],\n        language: 'es-ES',\n        ename: 'Conchita',\n        ssml: true,\n        name: 'Cloud - es-ES - Female - Conchita',\n    },\n    'es-ES_CLOUD_Male': {\n        gender: 'Male',\n        engine: 'cloud',\n        params: ['cloud'],\n        language: 'es-ES',\n        ename: 'Enrique',\n        ssml: true,\n        name: 'Cloud - es-ES - Male - Enrique',\n    },\n    'es-US_CLOUD_Female': {\n        gender: 'Female',\n        engine: 'cloud',\n        params: ['cloud'],\n        language: 'es-US',\n        ename: 'Penelope',\n        ssml: true,\n        name: 'Cloud - es-US - Female - Penelope',\n    },\n    'es-US_CLOUD_Male': {\n        gender: 'Male',\n        engine: 'cloud',\n        params: ['cloud'],\n        language: 'es-US',\n        ename: 'Miguel',\n        ssml: true,\n        name: 'Cloud - es-US - Male - Miguel',\n    },\n    'fr-CA_CLOUD_Female': {\n        gender: 'Female',\n        engine: 'cloud',\n        params: ['cloud'],\n        language: 'fr-CA',\n        ename: 'Chantal',\n        ssml: true,\n        name: 'Cloud - fr-CA - Female - Chantal',\n    },\n    'fr-FR_CLOUD_Female': {\n        gender: 'Female',\n        engine: 'cloud',\n        params: ['cloud'],\n        language: 'fr-FR',\n        ename: 'Celine',\n        ssml: true,\n        name: 'Cloud - fr-FR - Female - Celine',\n    },\n    'fr-FR_CLOUD_Male': {\n        gender: 'Male',\n        engine: 'cloud',\n        params: ['cloud'],\n        language: 'fr-FR',\n        ename: 'Mathieu',\n        ssml: true,\n        name: 'Cloud - fr-FR - Male - Mathieu',\n    },\n    'is-IS_CLOUD_Female': {\n        gender: 'Female',\n        engine: 'cloud',\n        params: ['cloud'],\n        language: 'is-IS',\n        ename: 'Dora',\n        ssml: true,\n        name: 'Cloud - is-IS - Female - Dora',\n    },\n    'is-IS_CLOUD_Male': {\n        gender: 'Male',\n        engine: 'cloud',\n        params: ['cloud'],\n        language: 'is-IS',\n        ename: 'Karl',\n        ssml: true,\n        name: 'Cloud - is-IS - Male - Karl',\n    },\n    'it-IT_CLOUD_Female': {\n        gender: 'Female',\n        engine: 'cloud',\n        params: ['cloud'],\n        language: 'it-IT',\n        ename: 'Carla',\n        ssml: true,\n        name: 'Cloud - it-IT - Female - Carla',\n    },\n    'it-IT_CLOUD_Male': {\n        gender: 'Male',\n        engine: 'cloud',\n        params: ['cloud'],\n        language: 'it-IT',\n        ename: 'Giorgio',\n        ssml: true,\n        name: 'Cloud - it-IT - Male - Giorgio',\n    },\n    'nb-NO_CLOUD_Female': {\n        gender: 'Female',\n        engine: 'cloud',\n        params: ['cloud'],\n        language: 'nb-NO',\n        ename: 'Liv',\n        ssml: true,\n        name: 'Cloud - nb-NO - Female - Liv',\n    },\n    'nl-NL_CLOUD_Female': {\n        gender: 'Female',\n        engine: 'cloud',\n        params: ['cloud'],\n        language: 'nl-NL',\n        ename: 'Lotte',\n        ssml: true,\n        name: 'Cloud - nl-NL - Female - Lotte',\n    },\n    'nl-NL_CLOUD_Male': {\n        gender: 'Male',\n        engine: 'cloud',\n        params: ['cloud'],\n        language: 'nl-NL',\n        ename: 'Ruben',\n        ssml: true,\n        name: 'Cloud - nl-NL - Male - Ruben',\n    },\n    'pl-PL_CLOUD_Female_Agnieszka': {\n        gender: 'Female',\n        engine: 'cloud',\n        params: ['cloud'],\n        language: 'pl-PL',\n        ename: 'Agnieszka',\n        ssml: true,\n        name: 'Cloud - pl-PL - Female - Agnieszka',\n    },\n    'pl-PL_CLOUD_Male_Jacek': {\n        gender: 'Male',\n        engine: 'cloud',\n        params: ['cloud'],\n        language: 'pl-PL',\n        ename: 'Jacek',\n        ssml: true,\n        name: 'Cloud - pl-PL - Male - Jacek',\n    },\n    'pl-PL_CLOUD_Female_Ewa': {\n        gender: 'Female',\n        engine: 'cloud',\n        params: ['cloud'],\n        language: 'pl-PL',\n        ename: 'Ewa',\n        ssml: true,\n        name: 'Cloud - pl-PL - Female - Ewa',\n    },\n    'pl-PL_CLOUD_Male_Jan': {\n        gender: 'Male',\n        engine: 'cloud',\n        params: ['cloud'],\n        language: 'pl-PL',\n        ename: 'Jan',\n        ssml: true,\n        name: 'Cloud - pl-PL - Male - Jan',\n    },\n    'pl-PL_CLOUD_Female': {\n        gender: 'Female',\n        engine: 'cloud',\n        params: ['cloud'],\n        language: 'pl-PL',\n        ename: 'Maja',\n        ssml: true,\n        name: 'Cloud - pl-PL - Female - Maja',\n    },\n    'pt-BR_CLOUD_Female': {\n        gender: 'Female',\n        engine: 'cloud',\n        params: ['cloud'],\n        language: 'pt-BR',\n        ename: 'Vitoria',\n        ssml: true,\n        name: 'Cloud - pt-BR - Female - Vitoria',\n    },\n    'pt-BR_CLOUD_Male': {\n        gender: 'Male',\n        engine: 'cloud',\n        params: ['cloud'],\n        language: 'pt-BR',\n        ename: 'Ricardo',\n        ssml: true,\n        name: 'Cloud - pt-BR - Male - Ricardo',\n    },\n    'pt-PT_CLOUD_Male': {\n        gender: 'Male',\n        engine: 'cloud',\n        params: ['cloud'],\n        language: 'pt-PT',\n        ename: 'Cristiano',\n        ssml: true,\n        name: 'Cloud - pt-PT - Male - Cristiano',\n    },\n    'pt-PT_CLOUD_Female': {\n        gender: 'Female',\n        engine: 'cloud',\n        params: ['cloud'],\n        language: 'pt-PT',\n        ename: 'Ines',\n        ssml: true,\n        name: 'Cloud - pt-PT - Female - Ines',\n    },\n    'ro-RO_CLOUD_Female': {\n        gender: 'Female',\n        engine: 'cloud',\n        params: ['cloud'],\n        language: 'ro-RO',\n        ename: 'Carmen',\n        ssml: true,\n        name: 'Cloud - ro-RO - Female - Carmen',\n    },\n    'sv-SE_CLOUD_Female': {\n        gender: 'Female',\n        engine: 'cloud',\n        params: ['cloud'],\n        language: 'sv-SE',\n        ename: 'Astrid',\n        ssml: true,\n        name: 'Cloud - sv-SE - Female - Astrid',\n    },\n    'tr-TR_CLOUD_Female': {\n        gender: 'Female',\n        engine: 'cloud',\n        params: ['cloud'],\n        language: 'tr-TR',\n        ename: 'Filiz',\n        ssml: true,\n        name: 'Cloud - tr-TR - Female - Filiz',\n    },\n\n    'ru-RU_AP_Female': {\n        gender: 'Female',\n        engine: 'polly',\n        params: ['accessKey', 'secretKey', 'region'],\n        language: 'ru-RU',\n        ename: 'Tatyana',\n        ssml: true,\n        name: 'AWS Polly -  - ',\n    },\n    'ru-RU_AP_Male': {\n        gender: 'Male',\n        engine: 'polly',\n        params: ['accessKey', 'secretKey', 'region'],\n        language: 'ru-RU',\n        ename: 'Maxim',\n        ssml: true,\n        name: 'AWS Polly -  - ',\n    },\n    'de-DE_AP_Female': {\n        gender: 'Female',\n        engine: 'polly',\n        params: ['accessKey', 'secretKey', 'region'],\n        language: 'de-DE',\n        ename: 'Marlene',\n        ssml: true,\n        name: 'AWS Polly - Deutsch - Marlene',\n    },\n    'de-DE_AP_Female_Vicky': {\n        gender: 'Female',\n        engine: 'polly',\n        params: ['accessKey', 'secretKey', 'region'],\n        language: 'de-DE',\n        ename: 'Vicky',\n        ssml: true,\n        name: 'AWS Polly - Deutsch - Vicky',\n    },\n    'de-DE_AP_Male': {\n        gender: 'Male',\n        engine: 'polly',\n        params: ['accessKey', 'secretKey', 'region'],\n        language: 'de-DE',\n        ename: 'Hans',\n        ssml: true,\n        name: 'AWS Polly - Deutsch - Hans',\n    },\n    'en-US_AP_Female': {\n        gender: 'Female',\n        engine: 'polly',\n        params: ['accessKey', 'secretKey', 'region'],\n        language: 'en-US',\n        ename: 'Salli',\n        ssml: true,\n        name: 'AWS Polly - en-US - Female - Salli',\n    },\n    'en-US_AP_Male': {\n        gender: 'Male',\n        engine: 'polly',\n        params: ['accessKey', 'secretKey', 'region'],\n        language: 'en-US',\n        ename: 'Joey',\n        ssml: true,\n        name: 'AWS Polly - en-US - Male - Joey',\n    },\n    'da-DK_AP_Female': {\n        gender: 'Female',\n        engine: 'polly',\n        params: ['accessKey', 'secretKey', 'region'],\n        language: 'da-DK',\n        ename: 'Naja',\n        ssml: true,\n        name: 'AWS Polly - da-DK - Female - Naja',\n    },\n    'da-DK_AP_Male': {\n        gender: 'Male',\n        engine: 'polly',\n        params: ['accessKey', 'secretKey', 'region'],\n        language: 'da-DK',\n        ename: 'Mads',\n        ssml: true,\n        name: 'AWS Polly - da-DK - Male - Mads',\n    },\n    'en-AU_AP_Female': {\n        gender: 'Female',\n        engine: 'polly',\n        params: ['accessKey', 'secretKey', 'region'],\n        language: 'en-AU',\n        ename: 'Nicole',\n        ssml: true,\n        name: 'AWS Polly - en-AU - Female - Nicole',\n    },\n    'en-AU_AP_Male': {\n        gender: 'Male',\n        engine: 'polly',\n        params: ['accessKey', 'secretKey', 'region'],\n        language: 'en-AU',\n        ename: 'Russell',\n        ssml: true,\n        name: 'AWS Polly - en-AU - Male - Russell',\n    },\n    'en-GB_AP_Female_Amy': {\n        gender: 'Female',\n        engine: 'polly',\n        params: ['accessKey', 'secretKey', 'region'],\n        language: 'en-GB',\n        ename: 'Amy',\n        ssml: true,\n        name: 'AWS Polly - en-GB - Female - Amy',\n    },\n    'en-GB_AP_Male': {\n        gender: 'Male',\n        engine: 'polly',\n        params: ['accessKey', 'secretKey', 'region'],\n        language: 'en-GB',\n        ename: 'Brian',\n        ssml: true,\n        name: 'AWS Polly - en-GB - Male - Brian',\n    },\n    'en-GB_AP_Female_Emma': {\n        gender: 'Female',\n        engine: 'polly',\n        params: ['accessKey', 'secretKey', 'region'],\n        language: 'en-GB',\n        ename: 'Emma',\n        ssml: true,\n        name: 'AWS Polly - en-GB - Female - Emma',\n    },\n    'en-GB-WLS_AP_Female': {\n        gender: 'Female',\n        engine: 'polly',\n        params: ['accessKey', 'secretKey', 'region'],\n        language: 'en-GB-WLS',\n        ename: 'Gwyneth',\n        ssml: true,\n        name: 'AWS Polly - en-GB-WLS - Female - Gwyneth',\n    },\n    'en-GB-WLS_AP_Male': {\n        gender: 'Male',\n        engine: 'polly',\n        params: ['accessKey', 'secretKey', 'region'],\n        language: 'en-GB-WLS',\n        ename: 'Geraint',\n        ssml: true,\n        name: 'AWS Polly - en-GB-WLS - Male - Geraint',\n    },\n    'cy-GB_AP_Female': {\n        gender: 'Female',\n        engine: 'polly',\n        params: ['accessKey', 'secretKey', 'region'],\n        language: 'cy-GB',\n        ename: 'Gwyneth',\n        ssml: true,\n        name: 'AWS Polly - cy-GB - Female - Gwyneth',\n    },\n    'cy-GB_AP_Male': {\n        gender: 'Male',\n        engine: 'polly',\n        params: ['accessKey', 'secretKey', 'region'],\n        language: 'cy-GB',\n        ename: 'Geraint',\n        ssml: true,\n        name: 'AWS Polly - cy-GB - Male - Geraint',\n    },\n    'en-IN_AP_Female': {\n        gender: 'Female',\n        engine: 'polly',\n        params: ['accessKey', 'secretKey', 'region'],\n        language: 'en-IN',\n        ename: 'Raveena',\n        ssml: true,\n        name: 'AWS Polly - en-IN - Female - Raveena',\n    },\n    'en-US_AP_Male_Chipmunk': {\n        gender: 'Male',\n        engine: 'polly',\n        params: ['accessKey', 'secretKey', 'region'],\n        language: 'en-US',\n        ename: 'Chipmunk',\n        ssml: true,\n        name: 'AWS Polly - en-US - Male - Chipmunk',\n    },\n    'en-US_AP_Male_Eric': {\n        gender: 'Male',\n        engine: 'polly',\n        params: ['accessKey', 'secretKey', 'region'],\n        language: 'en-US',\n        ename: 'Eric',\n        ssml: true,\n        name: 'AWS Polly - en-US - Male - Eric',\n    },\n    'en-US_AP_Female_Ivy': {\n        gender: 'Female',\n        engine: 'polly',\n        params: ['accessKey', 'secretKey', 'region'],\n        language: 'en-US',\n        ename: 'Ivy',\n        ssml: true,\n        name: 'AWS Polly - en-US - Female - Ivy',\n    },\n    'en-US_AP_Female_Jennifer': {\n        gender: 'Female',\n        engine: 'polly',\n        params: ['accessKey', 'secretKey', 'region'],\n        language: 'en-US',\n        ename: 'Jennifer',\n        ssml: true,\n        name: 'AWS Polly - en-US - Female - Jennifer',\n    },\n    'en-US_AP_Male_Justin': {\n        gender: 'Male',\n        engine: 'polly',\n        params: ['accessKey', 'secretKey', 'region'],\n        language: 'en-US',\n        ename: 'Justin',\n        ssml: true,\n        name: 'AWS Polly - en-US - Male - Justin',\n    },\n    'en-US_AP_Female_Kendra': {\n        gender: 'Female',\n        engine: 'polly',\n        params: ['accessKey', 'secretKey', 'region'],\n        language: 'en-US',\n        ename: 'Kendra',\n        ssml: true,\n        name: 'AWS Polly - en-US - Female - Kendra',\n    },\n    'en-US_AP_Female_Kimberly': {\n        gender: 'Female',\n        engine: 'polly',\n        params: ['accessKey', 'secretKey', 'region'],\n        language: 'en-US',\n        ename: 'Kimberly',\n        ssml: true,\n        name: 'AWS Polly - en-US - Female - Kimberly',\n    },\n    'es-ES_AP_Female': {\n        gender: 'Female',\n        engine: 'polly',\n        params: ['accessKey', 'secretKey', 'region'],\n        language: 'es-ES',\n        ename: 'Conchita',\n        ssml: true,\n        name: 'AWS Polly - es-ES - Female - Conchita',\n    },\n    'es-ES_AP_Male': {\n        gender: 'Male',\n        engine: 'polly',\n        params: ['accessKey', 'secretKey', 'region'],\n        language: 'es-ES',\n        ename: 'Enrique',\n        ssml: true,\n        name: 'AWS Polly - es-ES - Male - Enrique',\n    },\n    'es-US_AP_Female': {\n        gender: 'Female',\n        engine: 'polly',\n        params: ['accessKey', 'secretKey', 'region'],\n        language: 'es-US',\n        ename: 'Penelope',\n        ssml: true,\n        name: 'AWS Polly - es-US - Female - Penelope',\n    },\n    'es-US_AP_Male': {\n        gender: 'Male',\n        engine: 'polly',\n        params: ['accessKey', 'secretKey', 'region'],\n        language: 'es-US',\n        ename: 'Miguel',\n        ssml: true,\n        name: 'AWS Polly - es-US - Male - Miguel',\n    },\n    'fr-CA_AP_Female': {\n        gender: 'Female',\n        engine: 'polly',\n        params: ['accessKey', 'secretKey', 'region'],\n        language: 'fr-CA',\n        ename: 'Chantal',\n        ssml: true,\n        name: 'AWS Polly - fr-CA - Female - Chantal',\n    },\n    'fr-FR_AP_Female': {\n        gender: 'Female',\n        engine: 'polly',\n        params: ['accessKey', 'secretKey', 'region'],\n        language: 'fr-FR',\n        ename: 'Celine',\n        ssml: true,\n        name: 'AWS Polly - fr-FR - Female - Celine',\n    },\n    'fr-FR_AP_Male': {\n        gender: 'Male',\n        engine: 'polly',\n        params: ['accessKey', 'secretKey', 'region'],\n        language: 'fr-FR',\n        ename: 'Mathieu',\n        ssml: true,\n        name: 'AWS Polly - fr-FR - Male - Mathieu',\n    },\n    'is-IS_AP_Female': {\n        gender: 'Female',\n        engine: 'polly',\n        params: ['accessKey', 'secretKey', 'region'],\n        language: 'is-IS',\n        ename: 'Dora',\n        ssml: true,\n        name: 'AWS Polly - is-IS - Female - Dora',\n    },\n    'is-IS_AP_Male': {\n        gender: 'Male',\n        engine: 'polly',\n        params: ['accessKey', 'secretKey', 'region'],\n        language: 'is-IS',\n        ename: 'Karl',\n        ssml: true,\n        name: 'AWS Polly - is-IS - Male - Karl',\n    },\n    'it-IT_AP_Female': {\n        gender: 'Female',\n        engine: 'polly',\n        params: ['accessKey', 'secretKey', 'region'],\n        language: 'it-IT',\n        ename: 'Carla',\n        ssml: true,\n        name: 'AWS Polly - it-IT - Female - Carla',\n    },\n    'it-IT_AP_Male': {\n        gender: 'Male',\n        engine: 'polly',\n        params: ['accessKey', 'secretKey', 'region'],\n        language: 'it-IT',\n        ename: 'Giorgio',\n        ssml: true,\n        name: 'AWS Polly - it-IT - Male - Giorgio',\n    },\n    'nb-NO_AP_Female': {\n        gender: 'Female',\n        engine: 'polly',\n        params: ['accessKey', 'secretKey', 'region'],\n        language: 'nb-NO',\n        ename: 'Liv',\n        ssml: true,\n        name: 'AWS Polly - nb-NO - Female - Liv',\n    },\n    'nl-NL_AP_Female': {\n        gender: 'Female',\n        engine: 'polly',\n        params: ['accessKey', 'secretKey', 'region'],\n        language: 'nl-NL',\n        ename: 'Lotte',\n        ssml: true,\n        name: 'AWS Polly - nl-NL - Female - Lotte',\n    },\n    'nl-NL_AP_Male': {\n        gender: 'Male',\n        engine: 'polly',\n        params: ['accessKey', 'secretKey', 'region'],\n        language: 'nl-NL',\n        ename: 'Ruben',\n        ssml: true,\n        name: 'AWS Polly - nl-NL - Male - Ruben',\n    },\n    'pl-PL_AP_Female_Agnieszka': {\n        gender: 'Female',\n        engine: 'polly',\n        params: ['accessKey', 'secretKey', 'region'],\n        language: 'pl-PL',\n        ename: 'Agnieszka',\n        ssml: true,\n        name: 'AWS Polly - pl-PL - Female - Agnieszka',\n    },\n    'pl-PL_AP_Male_Jacek': {\n        gender: 'Male',\n        engine: 'polly',\n        params: ['accessKey', 'secretKey', 'region'],\n        language: 'pl-PL',\n        ename: 'Jacek',\n        ssml: true,\n        name: 'AWS Polly - pl-PL - Male - Jacek',\n    },\n    'pl-PL_AP_Female_Ewa': {\n        gender: 'Female',\n        engine: 'polly',\n        params: ['accessKey', 'secretKey', 'region'],\n        language: 'pl-PL',\n        ename: 'Ewa',\n        ssml: true,\n        name: 'AWS Polly - pl-PL - Female - Ewa',\n    },\n    'pl-PL_AP_Male_Jan': {\n        gender: 'Male',\n        engine: 'polly',\n        params: ['accessKey', 'secretKey', 'region'],\n        language: 'pl-PL',\n        ename: 'Jan',\n        ssml: true,\n        name: 'AWS Polly - pl-PL - Male - Jan',\n    },\n    'pl-PL_AP_Female': {\n        gender: 'Female',\n        engine: 'polly',\n        params: ['accessKey', 'secretKey', 'region'],\n        language: 'pl-PL',\n        ename: 'Maja',\n        ssml: true,\n        name: 'AWS Polly - pl-PL - Female - Maja',\n    },\n    'pt-BR_AP_Female': {\n        gender: 'Female',\n        engine: 'polly',\n        params: ['accessKey', 'secretKey', 'region'],\n        language: 'pt-BR',\n        ename: 'Vitoria',\n        ssml: true,\n        name: 'AWS Polly - pt-BR - Female - Vitoria',\n    },\n    'pt-BR_AP_Male': {\n        gender: 'Male',\n        engine: 'polly',\n        params: ['accessKey', 'secretKey', 'region'],\n        language: 'pt-BR',\n        ename: 'Ricardo',\n        ssml: true,\n        name: 'AWS Polly - pt-BR - Male - Ricardo',\n    },\n    'pt-PT_AP_Male': {\n        gender: 'Male',\n        engine: 'polly',\n        params: ['accessKey', 'secretKey', 'region'],\n        language: 'pt-PT',\n        ename: 'Cristiano',\n        ssml: true,\n        name: 'AWS Polly - pt-PT - Male - Cristiano',\n    },\n    'pt-PT_AP_Female': {\n        gender: 'Female',\n        engine: 'polly',\n        params: ['accessKey', 'secretKey', 'region'],\n        language: 'pt-PT',\n        ename: 'Ines',\n        ssml: true,\n        name: 'AWS Polly - pt-PT - Female - Ines',\n    },\n    'ro-RO_AP_Female': {\n        gender: 'Female',\n        engine: 'polly',\n        params: ['accessKey', 'secretKey', 'region'],\n        language: 'ro-RO',\n        ename: 'Carmen',\n        ssml: true,\n        name: 'AWS Polly - ro-RO - Female - Carmen',\n    },\n    'sv-SE_AP_Female': {\n        gender: 'Female',\n        engine: 'polly',\n        params: ['accessKey', 'secretKey', 'region'],\n        language: 'sv-SE',\n        ename: 'Astrid',\n        ssml: true,\n        name: 'AWS Polly - sv-SE - Female - Astrid',\n    },\n    'tr-TR_AP_Female': {\n        gender: 'Female',\n        engine: 'polly',\n        params: ['accessKey', 'secretKey', 'region'],\n        language: 'tr-TR',\n        ename: 'Filiz',\n        ssml: true,\n        name: 'AWS Polly - tr-TR - Female - Filiz',\n    },\n};\n\nclass ActionSayText extends GenericBlock<RuleBlockConfigActionSayText> {\n    constructor(props: GenericBlockProps<RuleBlockConfigActionSayText>) {\n        super(props, ActionSayText.getStaticData());\n    }\n\n    static compile(config: RuleBlockConfigActionSayText, context: RuleContext): string {\n        if (!config.text) {\n            return `// no text defined\n_sendToFrontEnd(${config._id}, {text: 'No text defined'});`;\n        }\n        return `// Sayit ${config.text || ''}\n\\t\\tconst subActionVar${config._id} = \"${config.language && config.language !== '_' ? `${config.language};` : ''}${config.volume ? `${config.volume};` : ''}${(config.text || '').replace(/\"/g, '\\\\\"')}\"${GenericBlock.getReplacesInText(context)};\n\\t\\t_sendToFrontEnd(${config._id}, {text: subActionVar${config._id}});\n\\t\\tawait setStateAsync(\"${config.instance}.tts.text\", subActionVar${config._id});`;\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    renderDebug(debugMessage: { data: { text: string } }): string {\n        return `${I18n.t('Say:')} ${debugMessage.data.text}`;\n    }\n\n    onTagChange(): void {\n        const lang = I18n.getLanguage();\n        const languages = Object.keys(sayitEngines).filter(l => l.startsWith(lang));\n        const options = languages.map(lang => ({\n            title: (sayitEngines as Record<string, { name: string }>)[lang].name,\n            value: lang,\n        }));\n        options.unshift({ title: 'Default', value: '_' });\n\n        this.setState(\n            {\n                inputs: [\n                    {\n                        attr: 'instance',\n                        nameRender: 'renderInstance',\n                        adapter: 'sayit',\n                        defaultValue: 'sayit.0',\n                        frontText: 'Instance:',\n                    },\n                    {\n                        nameRender: 'renderSelect',\n                        frontText: 'Language:',\n                        options,\n                        defaultValue: '_',\n                        attr: 'language',\n                    },\n                    {\n                        nameRender: 'renderNameText',\n                        defaultValue: 'Volume',\n                        attr: 'textVol',\n                    },\n                    {\n                        nameRender: 'renderSlider',\n                        attr: 'volume',\n                        defaultValue: 100,\n                        min: 0,\n                        max: 100,\n                    },\n                    {\n                        attr: 'text',\n                        nameRender: 'renderModalInput',\n                        defaultValue: 'Hallo',\n                        nameBlock: '',\n                        frontText: 'Text:',\n                    },\n                ],\n            },\n            () => super.onTagChange(),\n        );\n    }\n\n    static getStaticData(): RuleBlockDescription {\n        return {\n            acceptedBy: 'actions',\n            name: 'Say It',\n            id: 'ActionSayText',\n            adapter: 'sayit',\n            title: 'Say some text via sayit adapter',\n            helpDialog:\n                'You can use %s in the text to display current trigger value or %id to display the triggered object ID',\n        };\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getData(): RuleBlockDescription {\n        return ActionSayText.getStaticData();\n    }\n}\n\nexport default ActionSayText;\n","import { I18n } from '@iobroker/adapter-react-v5';\nimport { GenericBlock, type GenericBlockProps } from '../GenericBlock';\nimport type { RuleBlockConfigActionSendEmail, RuleBlockDescription, RuleContext } from '@/Components/RulesEditor/types';\n\nclass ActionSendEmail extends GenericBlock<RuleBlockConfigActionSendEmail> {\n    constructor(props: GenericBlockProps<RuleBlockConfigActionSendEmail>) {\n        super(props, ActionSendEmail.getStaticData());\n    }\n\n    static compile(config: RuleBlockConfigActionSendEmail, context: RuleContext): string {\n        if (!config.recipients) {\n            return `// no recipients defined'\n_sendToFrontEnd(${config._id}, {text: 'No recipients defined'});`;\n        }\n        return `// Send Email ${config.text || ''}\n\\t\\tconst subActionVar${config._id} = \"${(config.text || '').replace(/\"/g, '\\\\\"')}\"${GenericBlock.getReplacesInText(context)};\n\\t\\t_sendToFrontEnd(${config._id}, {text: subActionVar${config._id}});\n\\t\\tsendTo(\"${config.instance || 'email.0'}\", {\n\\t\\t    to:      \"${config.recipients || ''}\",\n\\t\\t    subject: \"${(config.subject || 'ioBroker').replace(/\"/g, '\\\\\"')}\"${GenericBlock.getReplacesInText(context)},\n\\t\\t    text:    subActionVar${config._id}\n\\t\\t});`;\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    renderDebug(debugMessage: { data: { text: string } }): string {\n        return `${I18n.t('Sent:')} ${debugMessage.data.text}`;\n    }\n\n    onTagChange(): void {\n        this.setState(\n            {\n                inputs: [\n                    {\n                        attr: 'instance',\n                        nameRender: 'renderInstance',\n                        defaultValue: 'email.0',\n                        frontText: 'Instance:',\n                        adapter: 'email',\n                    },\n                    {\n                        attr: 'recipients',\n                        nameRender: 'renderText',\n                        defaultValue: 'user@mail.ru',\n                        frontText: 'To:',\n                    },\n                    {\n                        attr: 'subject',\n                        nameRender: 'renderText',\n                        defaultValue: 'Email from iobroker',\n                        nameBlock: '',\n                        frontText: 'Subject:',\n                    },\n                    {\n                        attr: 'text',\n                        nameRender: 'renderModalInput',\n                        defaultValue: 'Email from iobroker',\n                        nameBlock: '',\n                        frontText: 'Body:',\n                    },\n                ],\n            },\n            () => super.onTagChange(),\n        );\n    }\n\n    static getStaticData(): RuleBlockDescription {\n        return {\n            acceptedBy: 'actions',\n            name: 'Send email',\n            id: 'ActionSendEmail',\n            adapter: 'email',\n            title: 'Sends an email',\n            helpDialog:\n                'You can use %s in the text to display current trigger value or %id to display the triggered object ID',\n        };\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getData(): RuleBlockDescription {\n        return ActionSendEmail.getStaticData();\n    }\n}\n\nexport default ActionSendEmail;\n","import { I18n } from '@iobroker/adapter-react-v5';\nimport { GenericBlock, type GenericBlockProps } from '../GenericBlock';\nimport type { RuleBlockConfigActionTelegram, RuleBlockDescription, RuleContext } from '@/Components/RulesEditor/types';\n\nclass ActionTelegram extends GenericBlock<RuleBlockConfigActionTelegram> {\n    private readonly cachePromises: Record<string, Promise<ioBroker.State | null | undefined>>;\n\n    constructor(props: GenericBlockProps<RuleBlockConfigActionTelegram>) {\n        super(props, ActionTelegram.getStaticData());\n        this.cachePromises = {};\n    }\n\n    static compile(config: RuleBlockConfigActionTelegram, context: RuleContext): string {\n        const text = (config.text || '').replace(/\"/g, '\\\\\"');\n        if (!text) {\n            return `// no text defined\n_sendToFrontEnd(${config._id}, {text: 'No text defined'});`;\n        }\n        return `// Telegram ${text || ''}\n\\t\\tconst subActionVar${config._id} = \"${(text || '').replace(/\"/g, '\\\\\"')}\"${GenericBlock.getReplacesInText(context)};\n\\t\\t_sendToFrontEnd(${config._id}, {text: subActionVar${config._id}});\n\\t\\tsendTo(\"${config.instance}\", \"send\", ${config.user && config.user !== '_' ? `{user: \"${(config.user || '').replace(/\"/g, '\\\\\"')}\", text: subActionVar${config._id}}` : `subActionVar${config._id}`});`;\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    renderDebug(debugMessage: { data: { text: string } }): string {\n        return `${I18n.t('Sent:')} ${debugMessage.data.text}`;\n    }\n\n    onValueChanged(value: any, attr: string): void {\n        if (attr === 'instance') {\n            this._setUsers(value);\n        }\n    }\n\n    _setUsers(instance?: string): void {\n        instance = instance || this.state.settings.instance || 'telegram.0';\n        if (!(this.cachePromises[instance] instanceof Promise)) {\n            this.cachePromises[instance] = this.props.socket.getState(`${instance}.communicate.users`);\n        }\n        if (!this.state.settings._id) {\n            return this.setState(\n                {\n                    inputs: [\n                        {\n                            nameRender: 'renderSelect',\n                            adapter: 'telegram',\n                            frontText: 'Instance:',\n                            defaultValue: 'telegram.0',\n                            attr: 'instance',\n                        },\n                        {\n                            nameRender: 'renderSelect',\n                            attr: 'user',\n                            options: [{ title: 'telegram.0', value: 'telegram.0' }],\n                            defaultValue: '',\n                            frontText: 'User:',\n                        },\n                        {\n                            nameRender: 'renderModalInput',\n                            attr: 'text',\n                            defaultValue: 'Hallo',\n                            nameBlock: '',\n                            frontText: 'Text:',\n                        },\n                    ],\n                },\n                () => super.onTagChange(),\n            );\n        }\n\n        void this.cachePromises[instance].then((usersObj: ioBroker.State | null | undefined) => {\n            let users: { title: string; value: string }[];\n            try {\n                const usersA = usersObj?.val ? JSON.parse(usersObj.val as string) : null;\n                users = usersA\n                    ? Object.keys(usersA).map(user => ({\n                          title: usersA[user].userName || usersA[user].firstName,\n                          value: user,\n                      }))\n                    : [];\n                users = users || [];\n                users.unshift({ title: 'all', value: '' });\n            } catch {\n                users = [{ title: 'all', value: '' }];\n            }\n\n            this.setState(\n                {\n                    inputs: [\n                        {\n                            nameRender: 'renderInstance',\n                            adapter: 'telegram',\n                            frontText: 'Instance:',\n                            defaultValue: 'telegram.0',\n                            attr: 'instance',\n                        },\n                        {\n                            nameRender: 'renderSelect',\n                            attr: 'user',\n                            options: users,\n                            defaultValue: '_',\n                            frontText: 'User:',\n                        },\n                        {\n                            nameRender: 'renderModalInput',\n                            attr: 'text',\n                            defaultValue: 'Hallo',\n                            nameBlock: '',\n                            frontText: 'Text:',\n                        },\n                    ],\n                },\n                () => super.onTagChange(),\n            );\n        });\n    }\n\n    onTagChange(): void {\n        this._setUsers();\n    }\n\n    static getStaticData(): RuleBlockDescription {\n        return {\n            acceptedBy: 'actions',\n            name: 'Telegram',\n            id: 'ActionTelegram',\n            adapter: 'telegram',\n            title: 'Sends message via telegram',\n            helpDialog:\n                'You can use %s in the text to display current trigger value or %id to display the triggered object ID',\n        };\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getData(): RuleBlockDescription {\n        return ActionTelegram.getStaticData();\n    }\n}\n\nexport default ActionTelegram;\n","import { GenericBlock, type GenericBlockProps } from '../GenericBlock';\nimport type { RuleBlockConfigActionPushover, RuleBlockDescription, RuleContext } from '@/Components/RulesEditor/types';\n\nclass ActionPushover extends GenericBlock<RuleBlockConfigActionPushover> {\n    constructor(props: GenericBlockProps<RuleBlockConfigActionPushover>) {\n        super(props, ActionPushover.getStaticData());\n    }\n\n    static compile(config: RuleBlockConfigActionPushover, context: RuleContext): string {\n        const text = (config.text || '').replace(/\"/g, '\\\\\"');\n        if (!text) {\n            return `// no text defined\n_sendToFrontEnd(${config._id}, {text: 'No text defined'});`;\n        }\n        return `// Pushover ${config.text || ''}\n\\t\\tconst subActionVar${config._id} = \"${text}\"${GenericBlock.getReplacesInText(context)};\n\\t\\t_sendToFrontEnd(${config._id}, {text: subActionVar${config._id}});            \n\\t\\tsendTo(\"${config.instance}\", \"send\", {\n\\t\\t    message: subActionVar${config._id},\n\\t\\t    title: \"${(config.title || '').replace(/\"/g, '\\\\\"')}\"${GenericBlock.getReplacesInText(context)},\n\\t\\t    sound: \"${config.sound}\",\n\\t\\t    priority: ${config.priority}\n\\t\\t});`;\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    renderDebug(debugMessage: { data: { text: string } }): string {\n        return `Sent: ${debugMessage.data.text}`;\n    }\n\n    onTagChange(): void {\n        this.setState(\n            {\n                inputs: [\n                    {\n                        nameRender: 'renderInstance',\n                        adapter: 'pushover',\n                        frontText: 'Instance:',\n                        defaultValue: 'pushover.0',\n                        attr: 'instance',\n                    },\n                    {\n                        nameRender: 'renderModalInput',\n                        attr: 'text',\n                        defaultValue: 'Hello',\n                        nameBlock: '',\n                        frontText: 'Text:',\n                    },\n                    {\n                        nameRender: 'renderText',\n                        attr: 'title',\n                        defaultValue: 'ioBroker',\n                        frontText: 'Title:',\n                    },\n                    {\n                        nameRender: 'renderSelect',\n                        attr: 'sound',\n                        defaultValue: 'magic',\n                        frontText: 'Sound:',\n                        doNotTranslate: true,\n                        options: [\n                            { value: 'pushover', title: 'pushover' },\n                            { value: 'bike', title: 'bike' },\n                            { value: 'bugle', title: 'bugle' },\n                            { value: 'cashregister', title: 'cashregister' },\n                            { value: 'classical', title: 'classical' },\n                            { value: 'cosmic', title: 'cosmic' },\n                            { value: 'falling', title: 'falling' },\n                            { value: 'gamelan', title: 'gamelan' },\n                            { value: 'incoming', title: 'incoming' },\n                            { value: 'intermission', title: 'intermission' },\n                            { value: 'magic', title: 'magic' },\n                            { value: 'mechanical', title: 'mechanical' },\n                            { value: 'pianobar', title: 'pianobar' },\n                            { value: 'siren', title: 'siren' },\n                            { value: 'spacealarm', title: 'spacealarm' },\n                            { value: 'tugboat', title: 'tugboat' },\n                            { value: 'alien', title: 'alien' },\n                            { value: 'climb', title: 'climb' },\n                            { value: 'persistent', title: 'persistent' },\n                            { value: 'echo', title: 'echo' },\n                            { value: 'updown', title: 'updown' },\n                            { value: 'none', title: 'none' },\n                        ],\n                    },\n                    {\n                        nameRender: 'renderSelect',\n                        attr: 'priority',\n                        defaultValue: -1,\n                        frontText: 'Priority:',\n                        options: [\n                            { value: -1, title: 'quiet' },\n                            { value: 0, title: 'normal' },\n                            { value: 1, title: 'high-priority' },\n                            { value: 2, title: 'acknowledgment' },\n                        ],\n                    },\n                ],\n            },\n            () => super.onTagChange(),\n        );\n    }\n\n    static getStaticData(): RuleBlockDescription {\n        return {\n            acceptedBy: 'actions',\n            name: 'Pushover',\n            id: 'ActionPushover',\n            adapter: 'pushover',\n            title: 'Sends message via pushover',\n            helpDialog:\n                'You can use %s in the text to display current trigger value or %id to display the triggered object ID',\n        };\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getData(): RuleBlockDescription {\n        return ActionPushover.getStaticData();\n    }\n}\n\nexport default ActionPushover;\n","import { I18n } from '@iobroker/adapter-react-v5';\nimport { GenericBlock, type GenericBlockProps } from '../GenericBlock';\nimport type {\n    RuleBlockConfigActionWhatsappcmb,\n    RuleBlockDescription,\n    RuleContext,\n} from '@/Components/RulesEditor/types';\n\nclass ActionWhatsappcmb extends GenericBlock<RuleBlockConfigActionWhatsappcmb> {\n    constructor(props: GenericBlockProps<RuleBlockConfigActionWhatsappcmb>) {\n        super(props, ActionWhatsappcmb.getStaticData());\n    }\n\n    static compile(config: RuleBlockConfigActionWhatsappcmb, context: RuleContext): string {\n        const text = (config.text || '').replace(/\"/g, '\\\\\"');\n        if (!text) {\n            return `// no text defined\n_sendToFrontEnd(${config._id}, {text: 'No text defined'});`;\n        }\n        return `// whatsapp ${text || ''}\n\\t\\tconst subActionVar${config._id} = \"${(text || '').replace(/\"/g, '\\\\\"')}\"${GenericBlock.getReplacesInText(context)};\n\\t\\t_sendToFrontEnd(${config._id}, {text: subActionVar${config._id}});\n\\t\\tsendTo(\"${config.instance}\", \"send\", {text: subActionVar${config._id}${config.phone ? `, phone: \"${config.phone.replace(/\"/g, '\\\\\"')}\"` : ''}});`;\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    renderDebug(debugMessage: { data: { text: string } }): string {\n        return `${I18n.t('Sent:')} ${debugMessage.data.text}`;\n    }\n\n    onTagChange(): void {\n        this.setState(\n            {\n                inputs: [\n                    {\n                        nameRender: 'renderInstance',\n                        adapter: 'whatsapp-cmb',\n                        frontText: 'Instance:',\n                        defaultValue: 'whatsapp-cmb.0',\n                        attr: 'instance',\n                    },\n                    {\n                        nameRender: 'renderModalInput',\n                        attr: 'text',\n                        defaultValue: 'Hello',\n                        nameBlock: '',\n                        frontText: 'Text:',\n                    },\n                    {\n                        nameRender: 'renderText',\n                        attr: 'phone',\n                        defaultValue: '',\n                        frontText: 'Phone:',\n                        backText: '(optional)',\n                    },\n                ],\n            },\n            () => super.onTagChange(),\n        );\n    }\n\n    static getStaticData(): RuleBlockDescription {\n        return {\n            acceptedBy: 'actions',\n            name: 'Whatsapp-cmb',\n            id: 'ActionWhatsappcmb',\n            adapter: 'whatsapp-cmb',\n            title: 'Sends message via whatsapp-cmb',\n            helpDialog:\n                'You can use %s in the text to display current trigger value or %id to display the triggered object ID',\n        };\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getData(): RuleBlockDescription {\n        return ActionWhatsappcmb.getStaticData();\n    }\n}\n\nexport default ActionWhatsappcmb;\n","import { GenericBlock, type GenericBlockProps } from '../GenericBlock';\nimport type { RuleBlockConfigActionPushsafer, RuleBlockDescription, RuleContext } from '@/Components/RulesEditor/types';\n\nclass ActionPushsafer extends GenericBlock<RuleBlockConfigActionPushsafer> {\n    constructor(props: GenericBlockProps<RuleBlockConfigActionPushsafer>) {\n        super(props, ActionPushsafer.getStaticData());\n    }\n\n    static compile(config: RuleBlockConfigActionPushsafer, context: RuleContext): string {\n        const text = (config.text || '').replace(/\"/g, '\\\\\"');\n        if (!text) {\n            return `// no text defined\n_sendToFrontEnd(${config._id}, {text: 'No text defined'});`;\n        }\n        return `// Pushsafer ${config.text || ''}\n\\t\\tconst subActionVar${config._id} = \"${text}\"${GenericBlock.getReplacesInText(context)};\n\\t\\t_sendToFrontEnd(${config._id}, {text: subActionVar${config._id}});            \n\\t\\tsendTo(\"${config.instance}\", \"send\", {\n\\t\\t    message: subActionVar${config._id},\n\\t\\t    title: \"${(config.title || '').replace(/\"/g, '\\\\\"')}\"${GenericBlock.getReplacesInText(context)},\n\\t\\t    ${config.sound && config.sound !== '_' ? `sound: \"${config.sound}\",` : ''}\n\\t\\t    priority: ${config.priority},\n\\t\\t    ${config.vibration && config.vibration !== '_' ? `vibration: ${config.vibration},` : ''}\n\\t\\t});`;\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    renderDebug(debugMessage: { data: { text: string } }): string {\n        return `Sent: ${debugMessage.data.text}`;\n    }\n\n    onTagChange(): void {\n        this.setState(\n            {\n                inputs: [\n                    {\n                        nameRender: 'renderInstance',\n                        adapter: 'pushsafer',\n                        frontText: 'Instance:',\n                        defaultValue: 'pushsafer.0',\n                        attr: 'instance',\n                    },\n                    {\n                        nameRender: 'renderModalInput',\n                        attr: 'text',\n                        defaultValue: 'Hello',\n                        nameBlock: '',\n                        frontText: 'Text:',\n                    },\n                    {\n                        nameRender: 'renderText',\n                        attr: 'title',\n                        defaultValue: 'ioBroker',\n                        frontText: 'Title:',\n                    },\n                    {\n                        nameRender: 'renderSelect',\n                        attr: 'sound',\n                        defaultValue: 'magic',\n                        frontText: 'Sound:',\n                        doNotTranslate: true,\n                        options: [\n                            { value: '_', title: 'Device Default' },\n                            { value: '0', title: 'Silent' },\n                            { value: '1', title: 'Ahem (IM)' },\n                            { value: '2', title: 'Applause (Mail)' },\n                            { value: '3', title: 'Arrow (Reminder)' },\n                            { value: '4', title: 'Baby (SMS)' },\n                            { value: '5', title: 'Bell (Alarm)' },\n                            { value: '6', title: 'Bicycle (Alarm2)' },\n                            { value: '7', title: 'Boing (Alarm3)' },\n                            { value: '8', title: 'Buzzer (Alarm4)' },\n                            { value: '9', title: 'Camera (Alarm5)' },\n                            { value: '10', title: 'Car Horn (Alarm6)' },\n                            { value: '11', title: 'Cash Register (Alarm7)' },\n                            { value: '12', title: 'Chime (Alarm8)' },\n                            { value: '13', title: 'Creaky Door (Alarm9)' },\n                            { value: '14', title: 'Cuckoo Clock (Alarm10)' },\n                            { value: '15', title: 'Disconnect (Call)' },\n                            { value: '16', title: 'Dog (Call2)' },\n                            { value: '17', title: 'Doorbell (Call3)' },\n                            { value: '18', title: 'Fanfare (Call4)' },\n                            { value: '19', title: 'Gun Shot (Call5)' },\n                            { value: '20', title: 'Honk (Call6)' },\n                            { value: '21', title: 'Jaw Harp (Call7)' },\n                            { value: '22', title: 'Morse (Call8)' },\n                            { value: '23', title: 'Electricity (Call9)' },\n                            { value: '24', title: 'Radio Tuner (Call10)' },\n                            { value: '25', title: 'Sirens' },\n                            { value: '26', title: 'Military Trumpets' },\n                            { value: '27', title: 'Ufo' },\n                            { value: '28', title: 'Whah Whah Whah' },\n                            { value: '29', title: 'Man Saying Goodbye' },\n                            { value: '30', title: 'Man Saying Hello' },\n                            { value: '31', title: 'Man Saying No' },\n                            { value: '32', title: 'Man Saying Ok' },\n                            { value: '33', title: 'Man Saying Ooohhhweee' },\n                            { value: '34', title: 'Man Saying Warning' },\n                            { value: '35', title: 'Man Saying Welcome' },\n                            { value: '36', title: 'Man Saying Yeah' },\n                            { value: '37', title: 'Man Saying Yes' },\n                            { value: '38', title: 'Beep short' },\n                            { value: '39', title: 'Weeeee short' },\n                            { value: '40', title: 'Cut in and out short' },\n                            { value: '41', title: 'Finger flicking glas short' },\n                            { value: '42', title: 'Wa Wa Waaaa short' },\n                            { value: '43', title: 'Laser short' },\n                            { value: '44', title: 'Wind Chime short' },\n                            { value: '45', title: 'Echo short' },\n                            { value: '46', title: 'Zipper short' },\n                            { value: '47', title: 'HiHat short' },\n                            { value: '48', title: 'Beep 2 short' },\n                            { value: '49', title: 'Beep 3 short' },\n                            { value: '50', title: 'Beep 4 short' },\n                            { value: '51', title: 'The Alarm is armed' },\n                            { value: '52', title: 'The Alarm is disarmed' },\n                            { value: '53', title: 'The Backup is ready' },\n                            { value: '54', title: 'The Door is closed' },\n                            { value: '55', title: 'The Door is opend' },\n                            { value: '56', title: 'The Window is closed' },\n                            { value: '57', title: 'The Window is open' },\n                            { value: '58', title: 'The Light is off' },\n                            { value: '59', title: 'The Light is on' },\n                            { value: '60', title: 'The Doorbell rings' },\n                            { value: '61', title: 'Pager short' },\n                            { value: '62', title: 'Pager long' },\n                        ],\n                    },\n                    {\n                        nameRender: 'renderSelect',\n                        attr: 'priority',\n                        defaultValue: 0,\n                        frontText: 'Priority:',\n                        options: [\n                            { value: -2, title: 'lowest priority' },\n                            { value: -1, title: 'lower priority' },\n                            { value: 0, title: 'normal priority' },\n                            { value: 1, title: 'high priority' },\n                            { value: 2, title: 'highest priority' },\n                        ],\n                    },\n                    {\n                        nameRender: 'renderSelect',\n                        attr: 'vibration',\n                        defaultValue: 0,\n                        frontText: 'Vibration:',\n                        options: [\n                            { value: '_', title: 'default' },\n                            { value: 1, title: '1' },\n                            { value: 2, title: '2' },\n                            { value: 3, title: '3' },\n                        ],\n                    },\n                ],\n            },\n            () => super.onTagChange(),\n        );\n    }\n\n    static getStaticData(): RuleBlockDescription {\n        return {\n            acceptedBy: 'actions',\n            name: 'Pushsafer',\n            id: 'ActionPushsafer',\n            adapter: 'pushsafer',\n            title: 'Sends message via Pushsafer',\n            helpDialog:\n                'You can use %s in the text to display current trigger value or %id to display the triggered object ID',\n        };\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getData(): RuleBlockDescription {\n        return ActionPushsafer.getStaticData();\n    }\n}\n\nexport default ActionPushsafer;\n","import type { RuleBlockConfig, RuleContext, RuleUserConditionsSaved, RuleUserRules } from '../types';\nimport type { GenericBlock } from '../components/GenericBlock';\n\nexport const STANDARD_FUNCTION_STATE = `async function (obj) {\n    \"__%%DEBUG_TRIGGER%%__\";\n    __%%CONDITIONS_VARS%%__\n    const _cond = __%%CONDITION%%__;\n    \n    \"__%%DEBUG_CONDITIONS%%__\";\n    \n    if (_cond) {\n__%%THEN%%__\n    } else {\n__%%ELSE%%__\n    }\n}`;\nexport const STANDARD_FUNCTION_STATE_ONCHANGE = `async function (obj) {\n    \"__%%DEBUG_TRIGGER%%__\";\n    __%%CONDITIONS_VARS%%__\n    const _cond = __%%CONDITION%%__;\n    \n    \"__%%DEBUG_CONDITIONS%%__\";\n    \n    if (__%%STATE%%__ === false && _cond) {\n        __%%STATE%%__ = true;    \n__%%THEN%%__\n    } else if (__%%STATE%%__ === true && !_cond) {\n        __%%STATE%%__ = false;    \n__%%ELSE%%__\n    }\n}`;\nexport const STANDARD_FUNCTION = `async function () {\n    \"__%%DEBUG_TRIGGER%%__\";\n    __%%CONDITIONS_VARS%%__\n    const _cond = __%%CONDITION%%__;\n    \n    \"__%%DEBUG_CONDITIONS%%__\";\n    \n    if (_cond) {\n__%%THEN%%__\n    } else {\n__%%ELSE%%__\n    }\n}`;\n\nexport const STANDARD_FUNCTION_ONCHANGE = `async function () {\n    \"__%%DEBUG_TRIGGER%%__\";\n    __%%CONDITIONS_VARS%%__\n    const _cond = __%%CONDITION%%__;\n    \n    \"__%%DEBUG_CONDITIONS%%__\";\n    \n    if (__%%STATE%%__ === false && _cond) {\n        __%%STATE%%__ = true;    \n__%%THEN%%__\n    } else if (__%%STATE%%__ === true && !_cond) {\n        __%%STATE%%__ = false;    \n__%%ELSE%%__\n    }\n}`;\n\nexport const NO_FUNCTION = `\"__%%DEBUG_TRIGGER%%__\";\n__%%CONDITIONS_VARS%%__\nconst _cond = __%%CONDITION%%__;\n\n\"__%%DEBUG_CONDITIONS%%__\";\n\nif (_cond) {\n__%%THEN%%__\n} else {\n__%%ELSE%%__\n}`;\n\nconst DEFAULT_RULE: RuleUserRules = {\n    triggers: [],\n    conditions: [[]],\n    justCheck: false,\n    actions: {\n        then: [],\n        else: [],\n    },\n};\n\nfunction compileTriggers(\n    json: RuleUserRules,\n    _context: RuleContext | null,\n    blocks: (typeof GenericBlock<any>)[],\n): string {\n    const triggers: string[] = [];\n    let jsonTriggers = json.triggers;\n    if (!jsonTriggers.length) {\n        jsonTriggers = [{ id: 'TriggerScriptSave' } as RuleBlockConfig];\n    }\n\n    const vars: string[] = [];\n    const prelines: string[] = [];\n    const hist = json.conditions.find(conds => conds.find(cond => cond.tagCard === '()'));\n\n    jsonTriggers.forEach((trigger, i) => {\n        const found = findBlock(trigger.id, blocks);\n        if (found) {\n            const _context: RuleContext = {\n                trigger,\n                condition: { index: 0 },\n                justCheck: hist ? false : json.justCheck || !json.conditions.length || !json.conditions[0].length,\n                conditionsDebug: [],\n                conditionsVars: [],\n                conditionsStates: [],\n            };\n            const text = found.compile(trigger, _context);\n            const conditions = compileConditions(json.conditions, _context, blocks);\n            const then = compileActions(json.actions.then, _context, blocks);\n            const _else = compileActions(json.actions.else, _context, blocks);\n\n            // find indent\n            vars.push(`cond${i}`);\n\n            if (_context.prelines?.length) {\n                _context.prelines.forEach(line => prelines.push(line));\n            }\n\n            if (text.includes('    __%%CONDITIONS_VARS%%__')) {\n                _context.conditionsVars = _context.conditionsVars.map((v, i) => (i ? `    ${v}` : v));\n                _context.conditionsDebug = _context.conditionsDebug.map((v, i) => (i ? `    ${v}` : v));\n            }\n\n            triggers.push(\n                text\n                    .replace('__%%CONDITIONS_VARS%%__', _context.conditionsVars.join('\\n'))\n                    .replace('\"__%%DEBUG_CONDITIONS%%__\";', _context.conditionsDebug.join('\\n'))\n                    .replace('__%%CONDITION%%__', conditions)\n                    .replace('__%%THEN%%__', then || '// ignore')\n                    .replace('__%%ELSE%%__', _else || '// ignore')\n                    .replace(/__%%STATE%%__/g, `cond${i}`),\n            );\n        }\n    });\n\n    let text = triggers.join('\\n\\n');\n\n    if (!json.justCheck || hist) {\n        text = `${vars.map(v => `let ${v} = false;`).join('\\n')}\\n\\n${text}`;\n    }\n    if (prelines) {\n        text = `${prelines.join('\\n')}\\n\\n${text}`;\n    }\n\n    return text;\n}\n\nfunction findBlock(type: string, blocks: (typeof GenericBlock<any>)[]): typeof GenericBlock<any> | undefined {\n    return blocks.find(block => block.getStaticData && block.getStaticData().id === type);\n}\n\nfunction compileActions(\n    actions: RuleBlockConfig[],\n    context: RuleContext,\n    blocks: (typeof GenericBlock<any>)[],\n): string {\n    const result: string[] = [];\n    actions?.forEach(action => {\n        const found = findBlock(action.id, blocks);\n        if (found) {\n            result.push(found.compile(action, context));\n        }\n    });\n    return `\\t\\t${result.join('\\n\\n\\t\\t')}`;\n}\n\nfunction compileConditions(\n    conditions: RuleUserConditionsSaved,\n    context: RuleContext,\n    blocks: (typeof GenericBlock<any>)[],\n): string {\n    const result: string[] = [];\n    let i = 0;\n    conditions?.forEach(ors => {\n        const _ors: string[] = [];\n        ors?.forEach(block => {\n            const found = findBlock(block.id, blocks);\n            if (found) {\n                context.condition.index = i++;\n                _ors.push(found.compile(block, context));\n            }\n        });\n        result.push(`(${_ors.join(') &&\\n                  (')})`);\n    });\n\n    if (!result.length) {\n        return 'true';\n    }\n    if (result.length === 1) {\n        return result[0] || 'true';\n    }\n    return `(${result.join(') || (')})`;\n}\n\nexport function compile(json: RuleUserRules, blocks: (typeof GenericBlock<any>)[]): string {\n    return compileTriggers(json, null, blocks);\n}\n\n// eslint-disable-next-line no-unused-vars\nexport function code2json(code: string): RuleUserRules {\n    if (!code) {\n        return DEFAULT_RULE;\n    }\n    const lines = code.split('\\n');\n    try {\n        const jsonStr = (lines.pop() || '').replace(/^\\/\\//, '');\n        let json: RuleUserRules = JSON.parse(jsonStr);\n        if (!json.triggers) {\n            json = DEFAULT_RULE;\n        }\n        return json;\n    } catch {\n        return DEFAULT_RULE;\n    }\n}\n\nexport function json2code(json: RuleUserRules, blocks: (typeof GenericBlock<any>)[]): string {\n    let code = '';\n\n    const compiled = compile(json, blocks);\n    code += compiled;\n\n    code += `\\n/*\\nconst demo = ${JSON.stringify(json, null, 2).replace(/\\*\\//g, '* /')};\\n*/\\n`;\n\n    return `${code}\\n//${JSON.stringify(json)}`;\n}\n","import { I18n } from '@iobroker/adapter-react-v5';\nimport { GenericBlock, type GenericBlockProps } from '../GenericBlock';\nimport { NO_FUNCTION } from '../../helpers/Compile';\nimport type {\n    RuleBlockConfigTriggerScriptSave,\n    RuleBlockDescription,\n    RuleContext,\n    RuleTagCardTitle,\n} from '../../types';\n\nclass TriggerScriptSave extends GenericBlock<RuleBlockConfigTriggerScriptSave> {\n    constructor(props: GenericBlockProps<RuleBlockConfigTriggerScriptSave>) {\n        super(props, TriggerScriptSave.getStaticData());\n    }\n\n    static compile(config: RuleBlockConfigTriggerScriptSave, _context: RuleContext): string {\n        return NO_FUNCTION.replace('\"__%%DEBUG_TRIGGER%%__\"', `_sendToFrontEnd(${config._id}, {trigger: true})`);\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    renderDebug(/* debugMessage */): string {\n        return I18n.t('Triggered');\n    }\n\n    onTagChange(_tagCard: RuleTagCardTitle): void {\n        this.setState(\n            {\n                inputs: [\n                    {\n                        nameRender: 'renderNameText',\n                        defaultValue: 'On script save or adapter start',\n                        attr: 'script',\n                    },\n                ],\n            },\n            () => super.onTagChange(),\n        );\n    }\n\n    static getStaticData(): RuleBlockDescription {\n        return {\n            acceptedBy: 'triggers',\n            name: 'Start script',\n            id: 'TriggerScriptSave',\n            icon: 'PlayArrow',\n            title: 'Triggers the on script saving or the javascript instance restart',\n        };\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getData(): RuleBlockDescription {\n        return TriggerScriptSave.getStaticData();\n    }\n}\n\nexport default TriggerScriptSave;\n","import React from 'react';\n// @ts-expect-error no types in suncalc2\nimport SunCalc from 'suncalc2';\n\nimport { ComplexCron, Schedule, I18n, convertCronToText } from '@iobroker/adapter-react-v5';\n\nimport { GenericBlock, type GenericBlockProps, type GenericBlockState } from '../GenericBlock';\nimport { STANDARD_FUNCTION_STATE, STANDARD_FUNCTION_STATE_ONCHANGE } from '../../helpers/Compile';\nimport CustomInput from '../CustomInput';\nimport CustomButton from '../CustomButton';\nimport CustomModal from '../CustomModal';\nimport type {\n    RuleBlockConfigTriggerSchedule,\n    RuleBlockDescription,\n    RuleContext,\n    RuleInputAny,\n    RuleInputCron,\n    RuleInputNameText,\n    RuleInputText,\n    RuleInputWizard,\n    RuleTagCardTitle,\n} from '@/Components/RulesEditor/types';\n\nconst DEFAULT_WIZARD = '{\"time\":{\"start\":\"00:00\",\"end\":\"24:00\",\"mode\":\"hours\",\"interval\":1},\"period\":{\"days\":1}}';\n\n// todo use from adapter-react-v5\nexport interface ScheduleConfig {\n    time: {\n        exactTime: boolean;\n        start: string;\n        end: string;\n        mode: string;\n        interval: number;\n    };\n    period: {\n        once: string;\n        days: number;\n        dows: string;\n        dates: string;\n        weeks: number;\n        months: string | number;\n        years: number;\n        yearMonth: number;\n        yearDate: number;\n    };\n    valid: {\n        from: string;\n        to?: string;\n    };\n}\n\ninterface TriggerScheduleBlockState extends GenericBlockState<RuleBlockConfigTriggerSchedule> {\n    openDialog?: boolean;\n}\n\nclass TriggerScheduleBlock extends GenericBlock<RuleBlockConfigTriggerSchedule, TriggerScheduleBlockState> {\n    private coordinates: { latitude: number; longitude: number } | null = null;\n\n    constructor(props: GenericBlockProps<RuleBlockConfigTriggerSchedule>) {\n        super(props, TriggerScheduleBlock.getStaticData());\n    }\n\n    static compile(config: RuleBlockConfigTriggerSchedule, context: RuleContext): string {\n        let text = '';\n        let func = context.justCheck ? STANDARD_FUNCTION_STATE : STANDARD_FUNCTION_STATE_ONCHANGE;\n        func = func.replace('\"__%%DEBUG_TRIGGER%%__\"', `_sendToFrontEnd(${config._id}, {trigger: true})`);\n\n        if (config.tagCard === 'interval') {\n            text = `setInterval(${func}, ${config.interval || 1} * ${config.unit === 's' ? 1000 : config.unit === 'm' ? 60000 : 3600000});`;\n        } else if (config.tagCard === 'cron') {\n            text = `schedule(\"${config.cron}\", ${func});`;\n        } else if (config.tagCard === 'at') {\n            const [hours, minutes] = (config.at || '').split(':');\n            let dow = '*';\n            if (config?.dow?.length && !config.dow.includes('_')) {\n                const _dow = [...config.dow].map(item => parseInt(item, 10));\n                _dow.sort();\n\n                const intervals: string[] = [];\n                let start = _dow[0];\n                let i = 1;\n                for (; i < _dow.length; i++) {\n                    if (_dow[i] - _dow[i - 1] > 1) {\n                        if (start === _dow[i - 1]) {\n                            intervals.push(start.toString());\n                        } else if (_dow[i - 1] - start === 1) {\n                            intervals.push(`${start},${_dow[i - 1]}`);\n                        } else {\n                            intervals.push(`${start}-${_dow[i - 1]}`);\n                        }\n\n                        start = _dow[i];\n                    } else if (i === _dow.length - 1) {\n                        if (start === _dow[i - 1] || _dow[i] - start === 1) {\n                            intervals.push(`${start},${_dow[i]}`);\n                        } else {\n                            intervals.push(`${start}-${_dow[i]}`);\n                        }\n                    }\n                }\n\n                dow = intervals.join(',');\n            }\n            text = `schedule(\"${minutes || '0'} ${hours || '0'} * * ${dow}\", ${func});`;\n        } else if (config.tagCard === 'astro') {\n            text = `schedule({astro: \"${config.astro}\", shift: ${config.offset ? config.offsetValue : 0}}, ${func});`;\n        } else if (config.tagCard === 'wizard') {\n            text = `schedule('${config.wizard}', ${func});`;\n        }\n\n        return text;\n    }\n\n    static _time2String(time: Date): string {\n        if (!time) {\n            return '--:--';\n        }\n        return `${time.getHours().toString().padStart(2, '0')}:${time.getMinutes().toString().padStart(2, '0')}`;\n    }\n\n    async _setAstro(astro?: string, offset?: boolean, offsetValue?: number): Promise<void> {\n        astro = astro || this.state.settings.astro || 'solarNoon';\n        offset = offset === undefined ? this.state.settings.offset : offset;\n        offsetValue = offsetValue === undefined ? this.state.settings.offsetValue : offsetValue;\n\n        offsetValue = parseInt(offsetValue as unknown as string, 10) || 0;\n\n        if (!this.coordinates) {\n            const jsObject = await this.props.socket.getObject('system.adapter.javascript.0');\n            const latitude: string | number | undefined = jsObject?.native?.latitude;\n            const longitude: string | number | undefined = jsObject?.native?.longitude;\n            if (!latitude && !longitude) {\n                const systemConfig = await this.props.socket.getObject('system.config');\n                if (systemConfig?.common && (systemConfig.common.latitude || systemConfig.common.longitude)) {\n                    this.coordinates = {\n                        latitude: parseFloat(systemConfig.common.latitude as unknown as string),\n                        longitude: parseFloat(systemConfig.common.longitude as unknown as string),\n                    };\n                } else {\n                    this.coordinates = null;\n                }\n            } else {\n                this.coordinates = {\n                    latitude: parseFloat(latitude as unknown as string),\n                    longitude: parseFloat(longitude as unknown as string),\n                };\n            }\n        }\n\n        const sunValue =\n            this.coordinates && SunCalc.getTimes(new Date(), this.coordinates.latitude, this.coordinates.longitude);\n        const options = sunValue\n            ? Object.keys(sunValue).map(name => ({\n                  value: name,\n                  title: name,\n                  title2: `[${TriggerScheduleBlock._time2String(sunValue[name])}]`,\n                  order: sunValue ? TriggerScheduleBlock._time2String(sunValue[name]) : '??:??',\n              }))\n            : [];\n        options.sort((a, b) => (a.order > b.order ? 1 : a.order < b.order ? -1 : 0));\n\n        // calculate time text\n        let time = '--:--';\n        if (astro && sunValue && sunValue[astro]) {\n            const astroTime = new Date(sunValue[astro]);\n            offset && astroTime.setMinutes(astroTime.getMinutes() + parseInt(offsetValue as unknown as string, 10));\n            time = `(at ${TriggerScheduleBlock._time2String(astroTime)})`; // translate\n        }\n\n        let inputs: RuleInputAny[];\n\n        if (offset) {\n            inputs = [\n                {\n                    frontText: 'at',\n                    attr: 'astro',\n                    nameRender: 'renderSelect',\n                    options,\n                    defaultValue: 'solarNoon',\n                },\n                {\n                    backText: 'with offset',\n                    nameRender: 'renderCheckbox',\n                    attr: 'offset',\n                },\n                {\n                    backText: offsetValue === 1 ? 'minute' : 'minutes', // translate\n                    frontText: 'offset',\n                    nameRender: 'renderNumber',\n                    defaultValue: 0,\n                    attr: 'offsetValue',\n                    noHelperText: true,\n                },\n                {\n                    nameRender: 'renderNameText',\n                    attr: 'textTime',\n                    defaultValue: time,\n                },\n            ];\n        } else {\n            inputs = [\n                {\n                    frontText: 'at', // translate\n                    attr: 'astro',\n                    nameRender: 'renderSelect',\n                    options,\n                    defaultValue: 'solarNoon',\n                },\n                {\n                    backText: 'with offset', // translate\n                    nameRender: 'renderCheckbox',\n                    attr: 'offset',\n                },\n                {\n                    nameRender: 'renderNameText',\n                    attr: 'textTime1',\n                    defaultValue: time,\n                },\n            ];\n        }\n\n        this.setState({ inputs }, () => super.onTagChange());\n    }\n\n    _setInterval(interval?: string | number): void {\n        interval = parseInt((interval || this.state.settings.interval) as unknown as string, 10) || 30;\n        let options;\n        if (interval === 1) {\n            options = [\n                { value: 's', title: 'second' },\n                { value: 'm', title: 'minute' },\n                { value: 'h', title: 'hour' },\n            ];\n        } else {\n            options = [\n                { value: 's', title: 'seconds' },\n                { value: 'm', title: 'minutes' },\n                { value: 'h', title: 'hours' },\n            ];\n        }\n\n        this.setState(\n            {\n                inputs: [\n                    {\n                        nameRender: 'renderNumber',\n                        /*prefix: {\n                            en: 'every',\n                        },*/\n                        attr: 'interval',\n                        frontText: 'every',\n                        defaultValue: 30,\n                        className: 'block-input-interval',\n                    },\n                    {\n                        nameRender: 'renderSelect',\n                        attr: 'unit',\n                        defaultValue: 's',\n                        options,\n                    },\n                ],\n            },\n            () => super.onTagChange(),\n        );\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    renderDebug(_debugMessage: any): string {\n        return I18n.t('Triggered');\n    }\n\n    onValueChanged(value: any, attr: string): void {\n        if (this.state.settings.tagCard === 'astro') {\n            if (attr === 'astro') {\n                void this._setAstro(value);\n            } else if (attr === 'offset') {\n                void this._setAstro(undefined, value);\n            } else if (attr === 'offsetValue') {\n                void this._setAstro(undefined, undefined, value);\n            }\n        } else if (this.state.settings.tagCard === 'interval') {\n            if (attr === 'interval') {\n                this._setInterval(value);\n            }\n        }\n    }\n\n    renderCron(\n        input: RuleInputCron,\n        value: string,\n        onChange: (value: string, attr?: string, cb?: () => void) => void,\n    ): React.JSX.Element | null {\n        const { className } = this.props;\n        let textCron = '';\n        const { settings } = this.state;\n        const { attr } = input;\n        return (\n            <div key={attr}>\n                <div style={{ display: 'flex', alignItems: 'baseline' }}>\n                    <div style={{ width: '100%' }}>\n                        {this.renderText(\n                            {\n                                nameRender: 'renderText',\n                                attr,\n                                defaultValue: value,\n                            } as RuleInputText,\n                            (settings as Record<string, any>)[attr] ? (settings as Record<string, any>)[attr] : value,\n                            onChange,\n                        )}\n                    </div>\n                    <CustomButton\n                        square\n                        style={{ marginLeft: 7 }}\n                        value=\"...\"\n                        className={className}\n                        onClick={() => this.setState({ openDialog: true })}\n                    />\n                </div>\n                {this.state.openDialog ? (\n                    <CustomModal\n                        onApply={(): void => {\n                            onChange(textCron, attr, () => {\n                                onChange(convertCronToText(textCron, I18n.getLanguage()), 'addText');\n                                this.setState({ openDialog: false });\n                            });\n                        }}\n                        onClose={() => this.setState({ openDialog: false })}\n                    >\n                        <ComplexCron\n                            cronExpression={\n                                (settings as Record<string, any>)[attr] ? (settings as Record<string, any>)[attr] : ''\n                            }\n                            onChange={el => (textCron = el)}\n                            language={I18n.getLanguage()}\n                        />\n                    </CustomModal>\n                ) : null}\n                {this.renderNameText(\n                    {\n                        nameRender: 'renderNameText',\n                        defaultValue: I18n.t('every hour at 0 minutes'),\n                        attr: 'addText',\n                        signature: true,\n                        doNotTranslate: true,\n                    } as RuleInputNameText,\n                    settings.addText ? settings.addText : I18n.t('every hour at 0 minutes'),\n                )}\n            </div>\n        );\n    }\n\n    renderWizard(\n        input: RuleInputWizard,\n        value: string,\n        onChange: (newData: Record<string, any> | string) => void,\n    ): React.JSX.Element {\n        const { className } = this.props;\n        const { attr } = input;\n        let wizardText = '';\n        let wizard: string | null = null;\n\n        return (\n            <div key={attr}>\n                <div style={{ display: 'flex', alignItems: 'center', marginTop: 7 }}>\n                    <CustomInput\n                        className={className}\n                        autoComplete=\"off\"\n                        fullWidth\n                        // disabled\n                        variant=\"outlined\"\n                        size=\"small\"\n                        multiline\n                        rows={2}\n                        value={(this.state.settings as Record<string, any>)[`${attr}Text`]}\n                        onChange={el => onChange(el as string)}\n                        customValue\n                    />\n                    <CustomButton\n                        square\n                        style={{ marginLeft: 7 }}\n                        value=\"...\"\n                        className={className}\n                        onClick={() => this.setState({ openDialog: true })}\n                    />\n                </div>\n                {this.state.openDialog ? (\n                    <CustomModal\n                        onApply={() =>\n                            this.setState({ openDialog: false }, () =>\n                                onChange({\n                                    [`${attr}Text`]: wizardText,\n                                    [attr]: wizard,\n                                }),\n                            )\n                        }\n                        onClose={() => this.setState({ openDialog: false })}\n                    >\n                        <Schedule\n                            theme={this.props.theme}\n                            schedule={value}\n                            onChange={(schedule, description) => {\n                                wizardText = description || '';\n                                const wizardObj: ScheduleConfig = JSON.parse(schedule) as ScheduleConfig;\n                                wizardObj.valid = wizardObj.valid || {};\n                                wizardObj.valid.from = wizardObj.valid.from || Schedule.now2string();\n                                wizard = JSON.stringify(wizardObj);\n                            }}\n                        />\n                    </CustomModal>\n                ) : null}\n            </div>\n        );\n    }\n\n    onTagChange(tagCard: RuleTagCardTitle): void {\n        tagCard = tagCard || this.state.settings.tagCard;\n        switch (tagCard) {\n            case 'interval':\n                this._setInterval();\n                break;\n\n            case 'cron':\n                this.setState(\n                    {\n                        inputs: [\n                            {\n                                nameRender: 'renderCron',\n                                attr: 'cron',\n                                defaultValue: '0 * * * *',\n                            },\n                        ],\n                    },\n                    () => super.onTagChange(),\n                );\n                break;\n\n            case 'wizard': {\n                const wizard: ScheduleConfig = JSON.parse(DEFAULT_WIZARD);\n                wizard.valid = wizard.valid || {};\n                wizard.valid.from = wizard.valid.from || Schedule.now2string();\n\n                this.setState(\n                    {\n                        inputs: [\n                            {\n                                nameRender: 'renderWizard',\n                                attr: 'wizard',\n                                defaultValue: JSON.stringify(wizard),\n                            },\n                        ],\n                    },\n                    () =>\n                        super.onTagChange(null, () => {\n                            const wizardText = Schedule.state2text(this.state.settings.wizard || wizard);\n                            if (this.state.settings.wizard !== wizardText) {\n                                const settings = JSON.parse(JSON.stringify(this.state.settings));\n                                settings.wizardText = wizardText;\n                                this.setState({ settings });\n                                this.props.onChange(settings);\n                            }\n                        }),\n                );\n                break;\n            }\n\n            case 'at':\n                this.setState(\n                    {\n                        inputs: [\n                            {\n                                nameRender: 'renderTime',\n                                prefix: 'at',\n                                attr: 'at',\n                                defaultValue: '07:30',\n                            },\n                            {\n                                nameRender: 'renderSelect',\n                                attr: 'dow',\n                                default: '',\n                                multiple: true,\n                                defaultValue: ['_', '1', '2', '3', '4', '5', '6', '0'],\n                                options: [\n                                    { value: '_', title: 'Every day', only: true },\n                                    { value: '1', title: 'Monday', titleShort: 'Mo' },\n                                    { value: '2', title: 'Tuesday', titleShort: 'Tu' },\n                                    { value: '3', title: 'Wednesday', titleShort: 'We' },\n                                    { value: '4', title: 'Thursday', titleShort: 'Th' },\n                                    { value: '5', title: 'Friday', titleShort: 'Fr' },\n                                    { value: '6', title: 'Saturday', titleShort: 'Sa' },\n                                    { value: '0', title: 'Sunday', titleShort: 'Su' },\n                                ],\n                            },\n                        ],\n                    },\n                    () => super.onTagChange(),\n                );\n                break;\n\n            case 'astro':\n                void this._setAstro();\n                break;\n\n            default:\n                break;\n        }\n    }\n\n    static getStaticData(): RuleBlockDescription {\n        return {\n            acceptedBy: 'triggers',\n            name: 'Schedule',\n            id: 'TriggerScheduleBlock',\n            icon: 'AccessTime',\n            tagCardArray: ['cron', 'wizard', 'interval', 'at', 'astro'],\n            title: 'Triggers the rule periodically or on some specific time',\n        };\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getData(): RuleBlockDescription {\n        return TriggerScheduleBlock.getStaticData();\n    }\n}\n\nexport default TriggerScheduleBlock;\n","import React from 'react';\n\nimport {\n    Button,\n    Switch,\n    Dialog,\n    DialogActions,\n    DialogContent,\n    TextField,\n    DialogTitle,\n    Slide,\n    FormControlLabel,\n    Checkbox,\n} from '@mui/material';\nimport type { TransitionProps } from '@mui/material/transitions';\n\nimport { MdCancel as IconCancel, MdCheck as IconCheck } from 'react-icons/md';\n\nimport { I18n } from '@iobroker/adapter-react-v5';\n\nimport { GenericBlock, type GenericBlockProps, type GenericBlockState } from '../GenericBlock';\nimport { STANDARD_FUNCTION_STATE, STANDARD_FUNCTION_STATE_ONCHANGE } from '../../helpers/Compile';\nimport { renderValue } from '../../helpers/utils';\nimport type { RuleBlockConfigTriggerState, RuleBlockDescription, RuleContext, RuleTagCardTitle } from '../../types';\n\nconst styles: Record<string, React.CSSProperties> = {\n    valueAck: {\n        color: '#b02323',\n    },\n    valueNotAck: {\n        color: '#12ac15',\n    },\n};\n\ninterface TransitionOwnProps {\n    children: React.ReactElement<unknown, any>;\n}\n\nconst Transition: React.FC<TransitionProps & TransitionOwnProps> = React.forwardRef<typeof Dialog, TransitionOwnProps>(\n    (props, ref): React.JSX.Element => (\n        <Slide\n            direction=\"up\"\n            ref={ref}\n            {...props}\n        />\n    ),\n);\n\nTransition.displayName = 'Transition';\n\ninterface TriggerStateState extends GenericBlockState<RuleBlockConfigTriggerState> {\n    openSimulate?: boolean;\n    simulateValue?: string | boolean | number;\n    simulateAck?: boolean;\n}\n\nclass TriggerState extends GenericBlock<RuleBlockConfigTriggerState, TriggerStateState> {\n    private readonly inputRef: React.RefObject<HTMLInputElement>;\n\n    constructor(props: GenericBlockProps<RuleBlockConfigTriggerState>) {\n        super(props, TriggerState.getStaticData());\n        this.inputRef = React.createRef();\n    }\n\n    static compile(config: RuleBlockConfigTriggerState, context: RuleContext): string {\n        let func = context.justCheck ? STANDARD_FUNCTION_STATE : STANDARD_FUNCTION_STATE_ONCHANGE;\n        func = func.replace(\n            '\"__%%DEBUG_TRIGGER%%__\"',\n            `_sendToFrontEnd(${config._id}, {val: obj.state.val, ack: obj.state.ack, valOld: obj.oldState && obj.oldState.val, ackOld: obj.oldState && obj.oldState.ack})`,\n        );\n        return `on({id: \"${config.oid || ''}\", change: \"${config.tagCard === 'on update' ? 'any' : 'ne'}\"}, ${func});`;\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    renderDebug(debugMessage: { data: { val: any; ack: boolean; valOld?: any; ackOld?: boolean } }): React.JSX.Element {\n        if (debugMessage.data.valOld !== undefined) {\n            return (\n                <span>\n                    {I18n.t('Triggered')}{' '}\n                    <span style={debugMessage.data.ackOld ? styles.valueAck : styles.valueNotAck}>\n                        {renderValue(debugMessage.data.valOld)}\n                    </span>{' '}\n                    {' '}\n                    <span style={debugMessage.data.ack ? styles.valueAck : styles.valueNotAck}>\n                        {renderValue(debugMessage.data.val)}\n                    </span>\n                </span>\n            );\n        }\n        return (\n            <span>\n                {I18n.t('Triggered')}{' '}\n                <span style={debugMessage.data.ack ? styles.valueAck : styles.valueNotAck}>\n                    {renderValue(debugMessage.data.val)}\n                </span>\n            </span>\n        );\n    }\n\n    onWriteValue(): void {\n        this.setState({ openSimulate: false });\n        let simulateValue = this.state.simulateValue;\n        window.localStorage.setItem(\n            `javascript.app.${this.state.settings.oid}_ack`,\n            this.state.simulateAck ? 'true' : 'false',\n        );\n\n        if (this.state.settings.oidType === 'boolean') {\n            simulateValue = simulateValue === true || simulateValue === 'true' || simulateValue === '1';\n            window.localStorage.setItem(`javascript.app.${this.state.settings.oid}`, simulateValue ? 'true' : 'false');\n        } else if (this.state.settings.oidType === 'number') {\n            simulateValue = parseFloat(simulateValue as unknown as string) || 0;\n            window.localStorage.setItem(`javascript.app.${this.state.settings.oid}`, simulateValue.toString());\n        } else {\n            window.localStorage.setItem(`javascript.app.${this.state.settings.oid}`, simulateValue?.toString() || '');\n        }\n\n        void this.props.socket.setState(this.state.settings.oid, { val: simulateValue, ack: !!this.state.simulateAck });\n    }\n\n    renderWriteState(): React.JSX.Element[] {\n        return [\n            <Button\n                key=\"buttonWrite\"\n                disabled={!this.state.settings.oid || !this.state.enableSimulation}\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={() => {\n                    this.setState({\n                        openSimulate: true,\n                        simulateValue:\n                            this.state.settings.oidType === 'boolean'\n                                ? window.localStorage.getItem(`javascript.app.${this.state.settings.oid}`) === 'true'\n                                : window.localStorage.getItem(`javascript.app.${this.state.settings.oid}`) || '',\n                        simulateAck:\n                            window.localStorage.getItem(`javascript.app.${this.state.settings.oid}_ack`) === 'true',\n                    });\n                    setTimeout(() => this.inputRef.current?.focus(), 200);\n                }}\n            >\n                {I18n.t('Simulate')}\n            </Button>,\n            <Dialog\n                key=\"dialogWrite\"\n                open={!!this.state.openSimulate}\n                TransitionComponent={Transition}\n                keepMounted\n                onClose={() => this.setState({ openSimulate: false })}\n                aria-labelledby=\"simulate-dialog-slide-title\"\n                aria-describedby=\"simulate-dialog-slide-description\"\n            >\n                <DialogTitle id=\"simulate-dialog-slide-title\">{I18n.t('Trigger with value')}</DialogTitle>\n                <DialogContent>\n                    {this.state.settings.oidType === 'boolean' ? (\n                        <FormControlLabel\n                            control={\n                                <Switch\n                                    inputRef={this.inputRef}\n                                    onKeyUp={e => e.key === 'Enter' && this.onWriteValue()}\n                                    value={!!this.state.simulateValue}\n                                    onChange={e => this.setState({ simulateValue: e.target.checked })}\n                                />\n                            }\n                            label={I18n.t('Value')}\n                        />\n                    ) : (\n                        <TextField\n                            variant=\"standard\"\n                            inputRef={this.inputRef}\n                            label={I18n.t('Value')}\n                            fullWidth\n                            onKeyUp={e => e.key === 'Enter' && this.onWriteValue()}\n                            value={\n                                !this.state.simulateValue && this.state.simulateValue !== 0\n                                    ? ''\n                                    : this.state.simulateValue\n                            }\n                            onChange={e => this.setState({ simulateValue: e.target.value })}\n                        />\n                    )}\n                    <br />\n                    <FormControlLabel\n                        control={\n                            <Checkbox\n                                checked={!!this.state.simulateAck}\n                                onChange={e => this.setState({ simulateAck: e.target.checked })}\n                                color=\"primary\"\n                            />\n                        }\n                        label={I18n.t('Ack')}\n                    />\n                </DialogContent>\n                <DialogActions>\n                    <Button\n                        variant=\"contained\"\n                        onClick={() => this.onWriteValue()}\n                        color=\"primary\"\n                    >\n                        <IconCheck />\n                        {I18n.t('Write')}\n                    </Button>\n                    <Button\n                        color=\"grey\"\n                        variant=\"contained\"\n                        onClick={() => this.setState({ openSimulate: false })}\n                    >\n                        <IconCancel />\n                        {I18n.t('Close')}\n                    </Button>\n                </DialogActions>\n            </Dialog>,\n        ];\n    }\n\n    onTagChange(_tagCard: RuleTagCardTitle): void {\n        this.setState(\n            {\n                inputs: [\n                    {\n                        nameRender: 'renderObjectID',\n                        attr: 'oid',\n                        defaultValue: '',\n                    },\n                    {\n                        nameRender: 'renderWriteState',\n                    },\n                ],\n            },\n            () => {\n                super.onTagChange();\n            },\n        );\n    }\n\n    static getStaticData(): RuleBlockDescription {\n        return {\n            acceptedBy: 'triggers',\n            name: 'State',\n            id: 'TriggerState',\n            icon: 'FlashOn',\n            tagCardArray: ['on change', 'on update'],\n            title: 'Triggers the rule on update or change of some state', // translate\n        };\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getData(): RuleBlockDescription {\n        return TriggerState.getStaticData();\n    }\n}\n\nexport default TriggerState;\n","import React from 'react';\n\nimport { Button, Dialog, DialogActions, DialogContent, DialogContentText } from '@mui/material';\n\nimport { I18n } from '@iobroker/adapter-react-v5';\n\nimport { GenericBlock, type GenericBlockProps, type GenericBlockState } from '../GenericBlock';\n\nimport HysteresisImage from '../../../assets/hysteresis.png';\nimport type {\n    RuleBlockConfigActionActionState,\n    RuleBlockConfigTriggerState,\n    RuleBlockDescription,\n    RuleContext,\n    RuleInputAny,\n    RuleInputDialog,\n    RuleInputSelect,\n    RuleTagCard,\n    RuleTagCardTitle,\n} from '../../types';\n\nconst HYSTERESIS = `function __hysteresis(val, limit, state, hist, comp) {\n    let cond1, cond2;\n    if (comp === '>') {\n        cond1 = val > limit + hist;\n        cond2 = val <= limit - hist;\n    } else if (comp === '<') {\n        cond1 = val < limit - hist;\n        cond2 = val >= limit + hist;\n    } else if (comp === '>=') {\n        cond1 = val >= limit + hist;\n        cond2 = val < limit - hist;\n    } else if (comp === '<=') {\n        cond1 = val <= limit - hist;\n        cond2 = val > limit + hist;\n    } else if (comp === '=') {\n        cond1 = val <= limit + hist && val > limit - hist;\n        cond2 = val > limit + hist || val <= limit - hist;\n    } else if (comp === '<>') {\n        cond1 = val > limit + hist || val <= limit - hist;\n        cond2 = val <= limit + hist && val > limit - hist;\n    }\n     \n    if (!state && cond1) {\n        return true;\n    } else if (state && cond2) {\n        return false;\n    } else {\n        return state;\n    }\n}`;\n\ninterface ConditionStateState extends GenericBlockState<RuleBlockConfigActionActionState> {\n    showHysteresisHelp: boolean;\n}\n\nclass ConditionState extends GenericBlock<RuleBlockConfigActionActionState, ConditionStateState> {\n    constructor(props: GenericBlockProps<RuleBlockConfigActionActionState>) {\n        super(props, ConditionState.getStaticData());\n    }\n\n    isAllTriggersOnState(): boolean {\n        return (\n            !!this.props.userRules?.triggers?.find(item => item.id === 'TriggerState') &&\n            !this.props.userRules?.triggers?.find(item => item.id !== 'TriggerState')\n        );\n    }\n\n    static compile(config: RuleBlockConfigActionActionState, context: RuleContext): string {\n        let value = config.value;\n        if (value === null || value === undefined) {\n            value = false;\n        }\n        let debugValue: string;\n\n        let result;\n        if (config.tagCard === '()') {\n            context.prelines = context.prelines || [];\n            !context.prelines.find(item => item !== HYSTERESIS) && context.prelines.push(HYSTERESIS);\n            if (config.useTrigger) {\n                debugValue = 'obj.state.val';\n                if (value === '') {\n                    value = 0;\n                }\n                result = `__hysteresis(subCondVar${config._id}, ${value}, __%%STATE%%__, ${config.hist}, \"${config.histComp}\")`;\n            } else {\n                debugValue = `(await getStateAsync(\"${config.oid}\")).val`;\n                if (value === '') {\n                    value = 0;\n                }\n                if (typeof value === 'string' && parseFloat(value.trim()).toString() !== value.trim()) {\n                    value = `\"${value}\"`;\n                }\n\n                result = `__hysteresis(subCondVar${config._id}, ${value}, __%%STATE%%__, ${config.hist}, \"${config.histComp}\")`;\n            }\n        } else if (config.tagCard !== 'includes') {\n            const compare = config.tagCard === '=' ? '==' : config.tagCard === '<>' ? '!=' : config.tagCard;\n            if (config.useTrigger) {\n                debugValue = 'obj.state.val';\n                if ((context?.trigger as RuleBlockConfigTriggerState)?.oidType === 'string') {\n                    value = (value as string).replace(/\"/g, '\\\\\"');\n                    result = `subCondVar${config._id} ${compare} \"${value}\"`;\n                } else {\n                    if (value === '') {\n                        value = 0;\n                    }\n                    if (typeof value === 'string' && parseFloat(value.trim()).toString() !== value.trim()) {\n                        value = `\"${value}\"`;\n                    }\n                    result = `subCondVar${config._id} ${compare} ${value}`;\n                }\n            } else {\n                debugValue = `(await getStateAsync(\"${config.oid}\")).val`;\n                if (config.oidType === 'string') {\n                    value = (value as string).replace(/\"/g, '\\\\\"');\n                    result = `subCondVar${config._id} ${compare} \"${value}\"`;\n                } else {\n                    if (value === '') {\n                        value = 0;\n                    }\n                    if (typeof value === 'string' && parseFloat(value.trim()).toString() !== value.trim()) {\n                        value = `\"${value}\"`;\n                    }\n                    result = `subCondVar${config._id} ${compare} ${value}`;\n                }\n            }\n        } else {\n            if (config.useTrigger) {\n                debugValue = 'obj.state.val';\n                if ((context?.trigger as RuleBlockConfigTriggerState)?.oidType === 'string') {\n                    value = (value as string).replace(/\"/g, '\\\\\"');\n                    result = `obj.state.val.includes(\"${value}\")`;\n                } else {\n                    result = `false`;\n                }\n            } else {\n                debugValue = `(await getStateAsync(\"${config.oid}\")).val`;\n                if (config.oidType === 'string') {\n                    value = (value as string).replace(/\"/g, '\\\\\"');\n                    result = `subCondVar${config._id}.includes(\"${value}\")`;\n                } else {\n                    result = `false`;\n                }\n            }\n        }\n        context.conditionsStates.push({ name: `subCondVar${config._id}`, id: config.oid });\n        context.conditionsVars.push(`const subCondVar${config._id} = ${debugValue};`);\n        context.conditionsVars.push(`const subCond${config._id} = ${result};`);\n        context.conditionsDebug.push(\n            `_sendToFrontEnd(${config._id}, {result: subCond${config._id}, value: subCondVar${config._id}, compareWith: \"${value}\"});`,\n        );\n        return `subCond${config._id}`;\n    }\n\n    renderDebug(debugMessage: { data: { result: boolean; value: string; compareWith: string } }): string {\n        const condition = this.state.settings.tagCard;\n        if (condition === '()') {\n            // TODO\n        } else {\n            return `${debugMessage.data.result.toString().toUpperCase()} [${debugMessage.data.value} ${condition} ${debugMessage.data.compareWith}]`;\n        }\n\n        return I18n.t('Triggered');\n    }\n\n    onShowHelp = (): void => this.setState({ showHysteresisHelp: true });\n\n    _setInputs(\n        useTrigger: boolean | undefined,\n        tagCard?: RuleTagCardTitle,\n        oidType?: string,\n        oidUnit?: string,\n        oidStates?: Record<string, string>,\n    ): void {\n        const isAllTriggersOnState = this.isAllTriggersOnState();\n\n        tagCard = tagCard || this.state.settings.tagCard;\n        oidType = oidType || this.state.settings.oidType;\n        oidUnit = oidUnit || this.state.settings.oidUnit;\n        oidStates = oidStates || this.state.settings.oidStates;\n        if (useTrigger === undefined) {\n            useTrigger = this.state.settings.useTrigger;\n        }\n\n        if (isAllTriggersOnState && useTrigger && this.props.userRules?.triggers?.length === 1) {\n            oidType = (this.props.userRules.triggers[0] as RuleBlockConfigTriggerState).oidType;\n            oidUnit = (this.props.userRules.triggers[0] as RuleBlockConfigTriggerState).oidUnit;\n            oidStates = (this.props.userRules.triggers[0] as RuleBlockConfigTriggerState).oidStates;\n        }\n\n        const _tagCardArray: RuleTagCard[] = ConditionState.getStaticData().tagCardArray as RuleTagCard[];\n        const tag: RuleTagCard = _tagCardArray.find(item => item.title === tagCard) || _tagCardArray[0];\n        let tagCardArray: RuleTagCard[];\n        let options: { value: string | boolean; title: string }[] | null = null;\n\n        if (oidType === 'number') {\n            tagCardArray = [\n                {\n                    title: '=',\n                    title2: '[equal]',\n                    text: 'equal to',\n                },\n                {\n                    title: '>=',\n                    title2: '[greater or equal]',\n                    text: 'greater or equal',\n                },\n                {\n                    title: '>',\n                    title2: '[greater]',\n                    text: 'greater than',\n                },\n                {\n                    title: '<=',\n                    title2: '[less or equal]',\n                    text: 'less or equal',\n                },\n                {\n                    title: '<',\n                    title2: '[less]',\n                    text: 'less than',\n                },\n                {\n                    title: '<>',\n                    title2: '[not equal]',\n                    text: 'not equal to',\n                },\n                {\n                    title: '()',\n                    title2: '[hysteresis]',\n                    text: 'hysteresis',\n                },\n            ];\n\n            if (oidStates) {\n                options = Object.keys(oidStates)\n                    .map(val => {\n                        if (oidStates) {\n                            return { value: val, title: oidStates[val] };\n                        }\n                        return null;\n                    })\n                    .filter(i => i) as { value: string | boolean; title: string }[];\n            }\n        } else if (oidType === 'boolean') {\n            tagCardArray = [\n                {\n                    title: '=',\n                    title2: '[equal]',\n                    text: 'equal to',\n                },\n                {\n                    title: '<>',\n                    title2: '[not equal]',\n                    text: 'not equal to',\n                },\n            ];\n            options = [\n                { title: 'false', value: false },\n                { title: 'true', value: true },\n            ];\n        } else {\n            tagCardArray = [\n                {\n                    title: '=',\n                    title2: '[equal]',\n                    text: 'equal to',\n                },\n                {\n                    title: '>=',\n                    title2: '[greater or equal]',\n                    text: 'greater or equal',\n                },\n                {\n                    title: '>',\n                    title2: '[greater]',\n                    text: 'greater than',\n                },\n                {\n                    title: '<=',\n                    title2: '[less or equal]',\n                    text: 'less or equal',\n                },\n                {\n                    title: '<',\n                    title2: '[less]',\n                    text: 'less than',\n                },\n                {\n                    title: '<>',\n                    title2: '[not equal]',\n                    text: 'not equal to',\n                },\n                {\n                    title: '.',\n                    title2: '[includes]',\n                    text: 'includes',\n                },\n            ];\n            if (oidStates) {\n                options = Object.keys(oidStates).map(val => ({\n                    value: val,\n                    title: oidStates ? oidStates[val] : val.toString(),\n                }));\n            }\n        }\n\n        let settings: RuleBlockConfigActionActionState | null = null;\n        if (!tagCardArray.find(item => item.title === tagCard)) {\n            tagCard = tagCardArray[0].title;\n            settings = settings || { ...this.state.settings };\n            settings.tagCard = tagCard;\n        }\n\n        let inputs: RuleInputAny[];\n        let renderText: RuleInputAny = {\n            nameRender: 'renderText',\n            defaultValue: '',\n            attr: 'value',\n            frontText: tagCard === '()' ? 'Limit' : tag?.text || 'compare with',\n            doNotTranslateBack: true,\n            backText: oidUnit,\n        };\n\n        if (options) {\n            renderText = {\n                nameRender: 'renderSelect',\n                defaultValue: options[0].value,\n                options,\n                attr: 'value',\n                frontText: tag?.text || 'compare with',\n                doNotTranslateBack: true,\n                backText: oidUnit,\n            } as RuleInputSelect;\n\n            if (!options.find(item => item.value === this.state.settings.value)) {\n                settings = settings || { ...this.state.settings };\n                settings.value = options[0].value;\n            }\n            if (options.length <= 2) {\n                tagCardArray = [\n                    {\n                        title: '=',\n                        title2: '[equal]',\n                        text: 'equal to',\n                    },\n                    {\n                        title: '<>',\n                        title2: '[not equal]',\n                        text: 'not equal to',\n                    },\n                ];\n            }\n        }\n\n        if (isAllTriggersOnState && useTrigger) {\n            inputs = [\n                {\n                    backText: 'use trigger value',\n                    nameRender: 'renderCheckbox',\n                    attr: 'useTrigger',\n                    defaultValue: false,\n                },\n                renderText,\n            ];\n        } else if (isAllTriggersOnState) {\n            inputs = [\n                {\n                    backText: 'use trigger value',\n                    nameRender: 'renderCheckbox',\n                    attr: 'useTrigger',\n                },\n                {\n                    nameRender: 'renderObjectID',\n                    attr: 'oid',\n                    defaultValue: '',\n                },\n                renderText,\n            ];\n        } else {\n            inputs = [\n                {\n                    nameRender: 'renderObjectID',\n                    attr: 'oid',\n                    defaultValue: '',\n                },\n                renderText,\n            ];\n        }\n\n        if (tagCard === '()') {\n            inputs.splice(1, 0, {\n                nameRender: 'renderDialog',\n                icon: 'HelpOutline',\n                frontText: 'Explanation',\n                onShowDialog: this.onShowHelp,\n            } as RuleInputDialog);\n\n            inputs.splice(2, 0, {\n                nameRender: 'renderSelect',\n                attr: 'histComp',\n                defaultValue: '>',\n                frontText: 'Condition',\n                doNotTranslate: true,\n                options: [\n                    { title: '>', value: '>' },\n                    { title: '>=', value: '>=' },\n                    { title: '<', value: '<' },\n                    { title: '<=', value: '<=' },\n                    { title: '=', value: '=' },\n                    { title: '<>', value: '<>' },\n                ],\n            });\n            inputs.push({\n                frontText: '',\n                doNotTranslate: true,\n                nameRender: 'renderNumber',\n                noHelperText: true,\n                attr: 'hist',\n                defaultValue: 1,\n                doNotTranslateBack: true,\n                backText: oidUnit,\n            });\n        }\n\n        const state = {\n            iconTag: true,\n            tagCardArray,\n            inputs,\n        };\n\n        this.setState(state, () =>\n            super.onTagChange(null, () => {\n                if (settings) {\n                    this.setState({ settings });\n                    this.props.onChange(settings);\n                }\n            }),\n        );\n    }\n\n    onValueChanged(value: any, attr: string): void {\n        if (typeof value === 'object') {\n            void this._setInputs(value.useTrigger, value.tagCard, value.oidType, value.states);\n        } else {\n            if (attr === 'useTrigger') {\n                void this._setInputs(value as boolean);\n            } else if (attr === 'oidType') {\n                void this._setInputs(undefined, undefined, value as string);\n            } else if (attr === 'oidUnit') {\n                void this._setInputs(undefined, undefined, undefined, value as string);\n            } else if (attr === 'oidStates') {\n                void this._setInputs(undefined, undefined, undefined, undefined, value as Record<string, string>);\n            }\n        }\n    }\n\n    onUpdate(): void {\n        this._setInputs(this.state.settings.useTrigger);\n    }\n\n    onTagChange(tagCard: RuleTagCardTitle): void {\n        this._setInputs(this.state.settings.useTrigger, tagCard);\n    }\n\n    static getStaticData(): RuleBlockDescription {\n        return {\n            acceptedBy: 'conditions',\n            name: 'State condition',\n            id: 'ConditionState',\n            icon: 'Shuffle',\n            tagCardArray: [\n                {\n                    title: '=',\n                    title2: '[equal]',\n                    text: 'equal to',\n                },\n                {\n                    title: '>=',\n                    title2: '[greater or equal]',\n                    text: 'greater or equal',\n                },\n                {\n                    title: '>',\n                    title2: '[greater]',\n                    text: 'greater than',\n                },\n                {\n                    title: '<=',\n                    title2: '[less or equal]',\n                    text: 'less or equal',\n                },\n                {\n                    title: '<',\n                    title2: '[less]',\n                    text: 'less than',\n                },\n                {\n                    title: '<>',\n                    title2: '[not equal]',\n                    text: 'not equal to',\n                },\n                {\n                    title: '.',\n                    title2: '[includes]',\n                    text: 'includes',\n                },\n                {\n                    title: '()',\n                    title2: '[hysteresis]',\n                    text: 'hysteresis',\n                },\n            ],\n            title: 'Compares the state value with user defined value',\n        };\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getData(): RuleBlockDescription {\n        return ConditionState.getStaticData();\n    }\n\n    renderSpecific(): React.JSX.Element | null {\n        if (this.state.showHysteresisHelp) {\n            return (\n                <Dialog\n                    open={!0}\n                    maxWidth=\"md\"\n                    onClose={() => this.setState({ showHysteresisHelp: false })}\n                    aria-labelledby=\"alert-dialog-title\"\n                    aria-describedby=\"alert-dialog-description\"\n                >\n                    <DialogContent>\n                        <DialogContentText id=\"alert-dialog-description\">\n                            <img\n                                src={HysteresisImage}\n                                alt=\"Hysteresis\"\n                            />\n                        </DialogContentText>\n                    </DialogContent>\n                    <DialogActions>\n                        <Button\n                            onClick={() => this.setState({ showHysteresisHelp: false })}\n                            color=\"primary\"\n                            autoFocus\n                        >\n                            {I18n.t('OK')}\n                        </Button>\n                    </DialogActions>\n                </Dialog>\n            );\n        }\n        return null;\n    }\n}\n\nexport default ConditionState;\n","import { GenericBlock, type GenericBlockProps } from '../GenericBlock';\nimport type {\n    RuleBlockConfigConditionTime,\n    RuleBlockDescription,\n    RuleContext,\n    RuleInputAny,\n    RuleTagCard,\n    RuleTagCardTitle,\n} from '../../types';\n\nconst DAYS: number[] = [\n    31, // 1\n    29, // 2\n    31, // 3\n    30, // 4\n    31, // 5\n    30, // 6\n    31, // 7\n    31, // 8\n    30, // 9\n    31, // 10\n    30, // 11\n    31, // 12\n];\n\nclass ConditionTime extends GenericBlock<RuleBlockConfigConditionTime> {\n    constructor(props: GenericBlockProps<RuleBlockConfigConditionTime>) {\n        super(props, ConditionTime.getStaticData());\n    }\n\n    static compile(config: RuleBlockConfigConditionTime, context: RuleContext): string {\n        const compare = config.tagCard === '=' ? '===' : config.tagCard === '<>' ? '!==' : config.tagCard;\n        let cond;\n\n        if (config.withDate) {\n            const [monthStr, dateStr] = (config.date || '01.01').toString().split('.');\n            let date = parseInt(dateStr, 10) || 0;\n            let month = parseInt(monthStr, 10) || 0;\n            if (month > 12) {\n                month = 12;\n            } else if (month < 0) {\n                month = 0;\n            }\n\n            if (date > DAYS[month]) {\n                date = DAYS[month];\n            } else if (date < 0) {\n                date = 0;\n            }\n            if (date && month) {\n                cond = `formatDate(Date.now(), 'MM.DD-hh:mm') ${compare} \"${config.date}-${config.time}\"`;\n            } else if (date === 0 && month) {\n                cond = `formatDate(Date.now(), 'MM-hh:mm') ${compare} \"${month.toString().padStart(2, '0')}-${config.time}\"`;\n            } else if (month === 0 && date) {\n                cond = `formatDate(Date.now(), 'DD-hh:mm') ${compare} \"${date.toString().padStart(2, '0')}-${config.time}\"`;\n            } else {\n                cond = `formatDate(Date.now(), 'hh:mm') ${compare} \"${config.time}\"`;\n            }\n        } else {\n            cond = `formatDate(Date.now(), 'hh:mm') ${compare} \"${config.time}\"`;\n        }\n        context.conditionsVars.push(`const subCond${config._id} = ${cond};`);\n        context.conditionsDebug.push(`_sendToFrontEnd(${config._id}, {result: subCond${config._id}});`);\n        return `subCond${config._id}`;\n    }\n\n    _setInputs(tagCard?: RuleTagCardTitle, withDate?: boolean): void {\n        withDate = withDate === undefined ? this.state.settings.withDate : withDate;\n        tagCard = tagCard || this.state.settings.tagCard;\n        const tagCardArray: RuleTagCard[] = ConditionTime.getStaticData().tagCardArray as RuleTagCard[];\n        const tag = tagCardArray?.find(item => item.title === tagCard);\n        const inputs: RuleInputAny[] = [\n            {\n                nameRender: 'renderNameText',\n                attr: 'interval',\n                defaultValue: 'Actual time of day',\n            },\n            {\n                frontText: tag?.text || tagCard,\n                nameRender: 'renderTime',\n                attr: 'time',\n                defaultValue: '12:00',\n            },\n            {\n                frontText: 'with date',\n                nameRender: 'renderCheckbox',\n                attr: 'withDate',\n                defaultValue: false,\n            },\n        ];\n        if (withDate) {\n            inputs.push({\n                nameRender: 'renderDate',\n                attr: 'date',\n                defaultValue: '01.01',\n            });\n        }\n        this.setState(\n            {\n                inputs,\n                iconTag: true,\n            },\n            () => super.onTagChange(),\n        );\n    }\n\n    onValueChanged(value: any, attr: string): void {\n        if (attr === 'withDate') {\n            this._setInputs(undefined, value);\n        }\n    }\n\n    onTagChange(tagCard: RuleTagCardTitle): void {\n        this._setInputs(tagCard);\n    }\n\n    static getStaticData(): RuleBlockDescription {\n        return {\n            acceptedBy: 'conditions',\n            name: 'Time condition',\n            id: 'ConditionTime',\n            icon: 'Shuffle',\n            tagCardArray: [\n                {\n                    title: '=',\n                    title2: '[equal]',\n                    text: 'equal to',\n                },\n                {\n                    title: '>=',\n                    title2: '[greater or equal]',\n                    text: 'greater or equal',\n                },\n                {\n                    title: '>',\n                    title2: '[greater]',\n                    text: 'greater than',\n                },\n                {\n                    title: '<=',\n                    title2: '[less or equal]',\n                    text: 'less or equal',\n                },\n                {\n                    title: '<',\n                    title2: '[less]',\n                    text: 'less than',\n                },\n                {\n                    title: '<>',\n                    title2: '[not equal]',\n                    text: 'not equal to',\n                },\n            ],\n            title: 'Compares current time with the user specific time',\n        };\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getData(): RuleBlockDescription {\n        return ConditionTime.getStaticData();\n    }\n}\n\nexport default ConditionTime;\n","// @ts-expect-error no types available\nimport SunCalc from 'suncalc2';\nimport { I18n } from '@iobroker/adapter-react-v5';\nimport { GenericBlock, type GenericBlockProps } from '../GenericBlock';\nimport type {\n    RuleBlockConfigConditionAstronomical,\n    RuleBlockDescription,\n    RuleContext,\n    RuleInputAny,\n    RuleTagCard,\n} from '../../types';\n\nclass ConditionAstronomical extends GenericBlock<RuleBlockConfigConditionAstronomical> {\n    private coordinates: { latitude: number; longitude: number } | null = null;\n    constructor(props: GenericBlockProps<RuleBlockConfigConditionAstronomical>) {\n        super(props, ConditionAstronomical.getStaticData());\n    }\n\n    static compile(config: RuleBlockConfigConditionAstronomical, context: RuleContext): string {\n        const compare = config.tagCard === '=' ? '===' : config.tagCard === '<>' ? '!==' : config.tagCard;\n        let offset;\n        if (config.offset) {\n            offset = parseInt(config.offsetValue as unknown as string, 10) || 0;\n        }\n        const cond = `formatDate(Date.now(), 'hh:mm') ${compare} formatDate(getAstroDate(\"${config.astro}\"${offset ? `, undefined, ${offset}` : ''}), 'hh:mm')`;\n        context.conditionsVars.push(`const subCond${config._id} = ${cond};`);\n        context.conditionsDebug.push(`_sendToFrontEnd(${config._id}, {result: ${cond}});`);\n        return cond;\n    }\n\n    static _time2String(time: Date): string {\n        if (!time) {\n            return '--:--';\n        }\n        return `${time.getHours().toString().padStart(2, '0')}:${time.getMinutes().toString().padStart(2, '0')}`;\n    }\n\n    onValueChanged(value: any, attr: string): void {\n        if (attr === 'astro') {\n            void this._setAstro(value);\n        } else if (attr === 'offset') {\n            void this._setAstro(undefined, value);\n        } else if (attr === 'offsetValue') {\n            void this._setAstro(undefined, undefined, value);\n        }\n    }\n\n    async _setAstro(astro?: string, offset?: boolean, offsetValue?: number): Promise<void> {\n        astro = astro || this.state.settings.astro || 'solarNoon';\n        offset = offset === undefined ? this.state.settings.offset : offset;\n        offsetValue = offsetValue === undefined ? this.state.settings.offsetValue : offsetValue;\n\n        offsetValue = parseInt(offsetValue as unknown as string, 10) || 0;\n        if (!this.coordinates) {\n            const jsInstance: ioBroker.InstanceObject | null | undefined =\n                await this.props.socket.getObject('system.adapter.javascript.0');\n            if (!jsInstance?.native.latitude && !jsInstance?.native.longitude) {\n                const systemConfig: ioBroker.SystemConfigObject | null | undefined =\n                    await this.props.socket.getObject('system.config');\n                if (systemConfig && (systemConfig.common.latitude || systemConfig.common.longitude)) {\n                    this.coordinates = {\n                        latitude: systemConfig.common.latitude as number,\n                        longitude: systemConfig.common.longitude as number,\n                    };\n                } else {\n                    this.coordinates = null;\n                }\n            } else {\n                this.coordinates = {\n                    latitude: jsInstance?.native.latitude,\n                    longitude: jsInstance?.native.longitude,\n                };\n            }\n        }\n        const sunValue: Record<string, Date> | null = this.coordinates\n            ? SunCalc.getTimes(new Date(), this.coordinates.latitude, this.coordinates.longitude)\n            : null;\n        const options = sunValue\n            ? Object.keys(sunValue).map(name => ({\n                  value: name,\n                  title: name,\n                  title2: `[${ConditionAstronomical._time2String(sunValue[name])}]`,\n                  order: ConditionAstronomical._time2String(sunValue[name]),\n              }))\n            : [];\n        options.sort((a, b) => (a.order > b.order ? 1 : a.order < b.order ? -1 : 0));\n\n        // calculate time text\n        const tagCardArray: RuleTagCard[] = ConditionAstronomical.getStaticData().tagCardArray as RuleTagCard[];\n        const tag: RuleTagCard =\n            tagCardArray.find(item => item.title === this.state.settings.tagCard) || tagCardArray[0];\n\n        let time = '--:--';\n        if (astro && sunValue && sunValue[astro]) {\n            const astroTime = new Date(sunValue[astro]);\n            offset && astroTime.setMinutes(astroTime.getMinutes() + parseInt(offsetValue as unknown as string, 10));\n            time = `(${I18n.t(tag.text)} ${ConditionAstronomical._time2String(astroTime)})`;\n        }\n\n        let inputs: RuleInputAny[];\n\n        if (offset) {\n            inputs = [\n                {\n                    nameRender: 'renderNameText',\n                    defaultValue: 'Actual time of day',\n                    attr: 'text',\n                },\n                {\n                    frontText: tag.text,\n                    attr: 'astro',\n                    nameRender: 'renderSelect',\n                    options,\n                    doNotTranslate2: true,\n                    defaultValue: 'solarNoon',\n                },\n                {\n                    backText: 'with offset',\n                    nameRender: 'renderCheckbox',\n                    attr: 'offset',\n                },\n                {\n                    backText: offsetValue === 1 ? 'minute' : 'minutes',\n                    frontText: 'offset',\n                    nameRender: 'renderNumber',\n                    defaultValue: 0,\n                    attr: 'offsetValue',\n                    noHelperText: true,\n                },\n                {\n                    nameRender: 'renderNameText',\n                    attr: 'textTime',\n                    doNotTranslate: true,\n                    defaultValue: time,\n                },\n            ];\n        } else {\n            inputs = [\n                {\n                    nameRender: 'renderNameText',\n                    defaultValue: 'Actual time of day',\n                    attr: 'text',\n                },\n                {\n                    frontText: tag.text,\n                    attr: 'astro',\n                    nameRender: 'renderSelect',\n                    options,\n                    doNotTranslate2: true,\n                    defaultValue: 'solarNoon',\n                },\n                {\n                    backText: 'with offset',\n                    nameRender: 'renderCheckbox',\n                    attr: 'offset',\n                },\n                {\n                    nameRender: 'renderNameText',\n                    attr: 'textTime',\n                    doNotTranslate: true,\n                    defaultValue: time,\n                },\n            ];\n        }\n\n        this.setState({ inputs }, () => super.onTagChange());\n    }\n\n    onTagChange(): void {\n        void this._setAstro();\n    }\n\n    static getStaticData(): RuleBlockDescription {\n        return {\n            acceptedBy: 'conditions',\n            name: 'Astronomical',\n            id: 'ConditionAstronomical',\n            icon: 'Brightness3',\n            tagCardArray: [\n                {\n                    title: '=',\n                    title2: '[equal]',\n                    text: 'equal to',\n                },\n                {\n                    title: '>=',\n                    title2: '[greater or equal]',\n                    text: 'greater or equal to',\n                },\n                {\n                    title: '>',\n                    title2: '[greater]',\n                    text: 'greater than',\n                },\n                {\n                    title: '<=',\n                    title2: '[less or equal]',\n                    text: 'less or equal to',\n                },\n                {\n                    title: '<',\n                    title2: '[less]',\n                    text: 'less than',\n                },\n                {\n                    title: '<>',\n                    title2: '[not equal]',\n                    text: 'not equal to',\n                },\n            ],\n            title: 'Compares current time with astronomical event',\n        };\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getData(): RuleBlockDescription {\n        return ConditionAstronomical.getStaticData();\n    }\n}\n\nexport default ConditionAstronomical;\n","import React from 'react';\nimport { I18n } from '@iobroker/adapter-react-v5';\nimport { GenericBlock, type GenericBlockProps } from '../GenericBlock';\nimport type {\n    RuleBlockConfigActionSetState,\n    RuleBlockDescription,\n    RuleContext,\n    RuleInputAny,\n    RuleInputObjectID,\n    RuleTagCardTitle,\n} from '../../types';\nimport { renderValue } from '../../helpers/utils';\n\nconst styles = {\n    valueAck: {\n        color: '#b02323',\n    },\n    valueNotAck: {\n        color: '#12ac15',\n    },\n};\n\nclass ActionSetState extends GenericBlock<RuleBlockConfigActionSetState> {\n    constructor(props: GenericBlockProps<RuleBlockConfigActionSetState>) {\n        super(props, ActionSetState.getStaticData());\n    }\n\n    isAllTriggersOnState(): boolean {\n        return (\n            !!this.props.userRules?.triggers?.find(item => item.id === 'TriggerState') &&\n            !this.props.userRules?.triggers?.find(item => item.id !== 'TriggerState')\n        );\n    }\n\n    static compile(config: RuleBlockConfigActionSetState, context: RuleContext): string {\n        let value = config.value;\n        if (config.useTrigger) {\n            value = config.toggle ? '!obj.state.val' : 'obj.state.val';\n        } else {\n            if (value === undefined || value === null) {\n                value = '';\n            }\n\n            if (\n                typeof config.value === 'string' &&\n                parseFloat(config.value).toString() !== config.value &&\n                config.value !== 'true' &&\n                config.value !== 'false'\n            ) {\n                value = `\"${(value as string).replace(/\"/g, '\\\\\"')}\"${GenericBlock.getReplacesInText(context)}`;\n            }\n        }\n        let v;\n\n        if (config.toggle && !config.useTrigger) {\n            v = `const subActionVar${config._id} = !(await getStateAsync(\"${config.oid}\")).val`;\n        } else {\n            v = `const subActionVar${config._id} = ${value}`;\n        }\n        return `// set state ${config.oid} to ${config.toggle && !config.useTrigger ? 'toggle' : value} \n\\t\\t${v};\n\\t\\t_sendToFrontEnd(${config._id}, {val: subActionVar${config._id}, ack: ${config.tagCard === 'update'}});\n\\t\\tawait setStateAsync(\"${config.oid}\", subActionVar${config._id}, ${config.tagCard === 'update'});`;\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    renderDebug(debugMessage: { data: { ack: boolean; val: any } }): React.JSX.Element {\n        return (\n            <span>\n                {I18n.t('Set:')}{' '}\n                <span style={debugMessage.data.ack ? styles.valueAck : styles.valueNotAck}>\n                    {renderValue(debugMessage.data.val)}\n                </span>\n            </span>\n        );\n    }\n\n    _setInputs(\n        useTrigger?: boolean,\n        toggle?: boolean,\n    ): { inputs: RuleInputAny[]; newSettings?: Partial<RuleBlockConfigActionSetState> } {\n        const isAllTriggersOnState = this.isAllTriggersOnState();\n\n        toggle = toggle === undefined ? this.state.settings.toggle : toggle;\n        useTrigger = useTrigger === undefined ? this.state.settings.useTrigger : useTrigger;\n        let type: 'number' | 'string' | 'boolean' | 'button' | '' | 'slider' | 'color' | 'select' = '';\n        let options: { value: string; title: string }[] | undefined;\n        const { oidType, oidUnit, oidStates, oidMax, oidMin, oidRole, oidWrite, oidStep } = this.state.settings;\n        let settings: Partial<RuleBlockConfigActionSetState> | undefined;\n\n        if (oidType) {\n            if (oidType === 'number') {\n                type = 'number';\n                if (oidMax !== undefined && oidMin !== undefined) {\n                    type = 'slider';\n                }\n            } else if (oidType === 'boolean') {\n                type = 'boolean';\n                if (oidRole && oidRole.includes('button') && oidWrite) {\n                    type = 'button';\n                }\n            } else {\n                type = '';\n                if (oidRole && oidRole.includes('color')) {\n                    type = 'color';\n                }\n            }\n\n            if (oidStates) {\n                options = Object.keys(oidStates).map(val => ({ value: val, title: oidStates[val] }));\n                type = 'select';\n            }\n        }\n\n        let inputs: RuleInputAny[];\n        if (isAllTriggersOnState && useTrigger) {\n            inputs = [\n                {\n                    backText: 'use trigger value',\n                    nameRender: 'renderCheckbox',\n                    attr: 'useTrigger',\n                    defaultValue: false,\n                },\n            ];\n            if (type === 'boolean') {\n                inputs.push({\n                    backText: 'toggle value',\n                    attr: 'toggle',\n                    nameRender: 'renderCheckbox',\n                    defaultValue: false,\n                });\n            }\n        } else {\n            switch (type) {\n                case 'number':\n                    inputs = [\n                        {\n                            backText: oidUnit || '',\n                            frontText: 'with',\n                            nameRender: 'renderNumber',\n                            defaultValue: oidMax === undefined ? 0 : oidMax,\n                            attr: 'value',\n                        },\n                    ];\n                    if (\n                        this.state.settings.value !== undefined &&\n                        isNaN(parseFloat(this.state.settings.value as string))\n                    ) {\n                        settings = { value: oidMax === undefined ? 0 : oidMax };\n                    }\n                    break;\n\n                case 'slider': {\n                    inputs = [\n                        {\n                            nameRender: 'renderSlider',\n                            defaultValue: oidMax,\n                            min: oidMin,\n                            max: oidMax,\n                            unit: oidUnit,\n                            step: oidStep,\n                            attr: 'value',\n                        },\n                    ];\n                    const f = parseFloat(this.state.settings.value as string);\n                    if (this.state.settings.value !== undefined && (isNaN(f) || f < oidMin || f > oidMax)) {\n                        settings = { value: oidMax };\n                    }\n                    break;\n                }\n\n                case 'select':\n                    inputs = [\n                        {\n                            nameRender: 'renderSelect',\n                            frontText: 'with',\n                            options: options as { title: string; value: string }[],\n                            defaultValue: options?.[0].value || '',\n                            attr: 'value',\n                        },\n                    ];\n                    if (\n                        this.state.settings.value !== undefined &&\n                        !options?.find(item => item.value === this.state.settings.value)\n                    ) {\n                        settings = { value: options?.[0].value || '' };\n                    }\n                    break;\n\n                case 'boolean':\n                    inputs = [\n                        {\n                            backText: 'toggle value',\n                            attr: 'toggle',\n                            nameRender: 'renderCheckbox',\n                            defaultValue: false,\n                        },\n                    ];\n                    if (!toggle) {\n                        inputs.push({\n                            backText: 'true',\n                            frontText: 'false',\n                            nameRender: 'renderSwitch',\n                            defaultValue: false,\n                            attr: 'value',\n                        });\n                    }\n\n                    if (\n                        this.state.settings.value !== undefined &&\n                        this.state.settings.value !== false &&\n                        this.state.settings.value !== true\n                    ) {\n                        settings = { value: false };\n                    }\n                    break;\n\n                case 'button':\n                    inputs = [\n                        {\n                            nameRender: 'renderButton',\n                            defaultValue: true,\n                            attr: 'value',\n                        },\n                    ];\n                    if (this.state.settings.value !== undefined && this.state.settings.value !== true) {\n                        settings = { value: true };\n                    }\n                    break;\n\n                case 'color':\n                    inputs = [\n                        {\n                            nameRender: 'renderColor',\n                            frontText: 'with',\n                            defaultValue: '#FFFFFF',\n                            attr: 'value',\n                        },\n                    ];\n                    if (\n                        this.state.settings.value !== undefined &&\n                        (typeof this.state.settings.value !== 'string' ||\n                            (!this.state.settings.value.startsWith('#') &&\n                                !this.state.settings.value.startsWith('rgb')))\n                    ) {\n                        settings = { value: '#FFFFFF' };\n                    }\n                    break;\n\n                default:\n                    inputs = [\n                        {\n                            backText: oidUnit || '',\n                            frontText: 'with',\n                            nameRender: 'renderText',\n                            defaultValue: '',\n                            attr: 'value',\n                        },\n                    ];\n                    break;\n            }\n\n            if (isAllTriggersOnState) {\n                inputs.unshift({\n                    backText: 'use trigger value',\n                    nameRender: 'renderCheckbox',\n                    attr: 'useTrigger',\n                });\n            }\n        }\n\n        return { inputs, newSettings: settings };\n    }\n\n    onTagChange(\n        _tagCard?: RuleTagCardTitle,\n        cb?: () => void,\n        _ignore?: any,\n        toggle?: boolean,\n        useTrigger?: boolean,\n    ): void {\n        useTrigger = useTrigger === undefined ? this.state.settings.useTrigger : useTrigger;\n        const { inputs, newSettings } = this._setInputs(useTrigger, toggle);\n        inputs.unshift({\n            nameRender: 'renderObjectID',\n            attr: 'oid',\n            defaultValue: '',\n            checkReadOnly: true,\n        } as RuleInputObjectID);\n\n        this.setState({ inputs }, () =>\n            super.onTagChange(null, () => {\n                if (newSettings) {\n                    const settings = JSON.parse(JSON.stringify(this.state.settings));\n                    Object.assign(settings, newSettings);\n                    this.setState(settings);\n                    this.props.onChange(settings);\n                }\n            }),\n        );\n    }\n\n    onValueChanged(value?: any, attr?: string): void {\n        this.onTagChange(\n            undefined,\n            undefined,\n            undefined,\n            attr === 'toggle' ? value : undefined,\n            attr === 'useTrigger' ? value : undefined,\n        );\n    }\n\n    onUpdate(): void {\n        this.onTagChange();\n    }\n\n    static getStaticData(): RuleBlockDescription {\n        return {\n            acceptedBy: 'actions',\n            name: 'Set state action',\n            id: 'ActionSetState',\n            icon: 'PlayForWork',\n            tagCardArray: ['control', 'update'],\n            title: 'Control or update some state',\n            helpDialog:\n                'You can use %s in the value to use the current trigger value or %id to display the triggered object ID',\n        };\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getData(): RuleBlockDescription {\n        return ActionSetState.getStaticData();\n    }\n}\n\nexport default ActionSetState;\n","import { GenericBlock, type GenericBlockProps } from '../GenericBlock';\nimport type { RuleBlockConfigActionExec, RuleBlockDescription, RuleContext, RuleTagCardTitle } from '../../types';\n\nclass ActionExec extends GenericBlock<RuleBlockConfigActionExec> {\n    constructor(props: GenericBlockProps<RuleBlockConfigActionExec>) {\n        super(props, ActionExec.getStaticData());\n    }\n\n    static compile(config: RuleBlockConfigActionExec, context: RuleContext): string {\n        return `// exec \"${config.exec}\"\n\\t\\tconst subActionVar${config._id} = \"${(config.exec || '').replace(/\"/g, '\\\\\"')}\"${GenericBlock.getReplacesInText(context)};\n\\t\\t_sendToFrontEnd(${config._id}, {exec: subActionVar${config._id}});\n\\t\\tconsole.log(subActionVar${config._id});`;\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    renderDebug(debugMessage: { data: RuleBlockConfigActionExec }): string {\n        return `Exec: ${debugMessage.data.exec}`;\n    }\n\n    onTagChange(tagCard: RuleTagCardTitle): void {\n        this.setState(\n            {\n                inputs: [\n                    {\n                        nameRender: 'renderModalInput',\n                        attr: 'exec',\n                        defaultValue: 'ls /opt/iobroker',\n                        nameBlock: 'Shell command',\n                    },\n                ],\n            },\n            () => super.onTagChange(tagCard),\n        );\n    }\n\n    static getStaticData(): RuleBlockDescription {\n        return {\n            acceptedBy: 'actions',\n            name: 'Exec',\n            id: 'ActionExec',\n            icon: 'Apps',\n            title: 'Executes some shell command',\n            helpDialog:\n                'You can use %s in the command to use current trigger value or %id to use the triggered object ID',\n        };\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getData(): RuleBlockDescription {\n        return ActionExec.getStaticData();\n    }\n}\n\nexport default ActionExec;\n","import { GenericBlock, type GenericBlockProps } from '../GenericBlock';\nimport type {\n    RuleBlockConfigActionHTTPCall,\n    RuleBlockDescription,\n    RuleContext,\n    RuleTagCardTitle,\n} from '@/Components/RulesEditor/types';\n\nclass ActionHTTPCall extends GenericBlock<RuleBlockConfigActionHTTPCall> {\n    constructor(props: GenericBlockProps<RuleBlockConfigActionHTTPCall>) {\n        super(props, ActionHTTPCall.getStaticData());\n    }\n\n    static compile(config: RuleBlockConfigActionHTTPCall, context: RuleContext): string {\n        return `// HTTP request ${config.url}\n\\t\\tconst subActionVar${config._id} = \"${(config.url || '').replace(/\"/g, '\\\\\"')}\"${GenericBlock.getReplacesInText(context)};\n\\t\\t_sendToFrontEnd(${config._id}, {url: subActionVar${config._id}});\n\\t\\trequest(subActionVar${config._id});`;\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    renderDebug(debugMessage: { data: RuleBlockConfigActionHTTPCall }): string {\n        return `URL: ${debugMessage.data.url}`;\n    }\n\n    onTagChange(tagCard: RuleTagCardTitle): void {\n        this.setState(\n            {\n                inputs: [\n                    {\n                        nameRender: 'renderModalInput',\n                        attr: 'url',\n                        defaultValue: 'http://mydevice.com?...',\n                        nameBlock: 'URL',\n                    },\n                ],\n            },\n            () => super.onTagChange(tagCard),\n        );\n    }\n\n    static getStaticData(): RuleBlockDescription {\n        return {\n            acceptedBy: 'actions',\n            name: 'HTTP Call',\n            id: 'ActionHTTPCall',\n            icon: 'Language',\n            title: 'Make a HTTP get request',\n            helpDialog: 'You can use %s in the URL to use current trigger value or %id to use the triggered object ID',\n        };\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getData(): RuleBlockDescription {\n        return ActionHTTPCall.getStaticData();\n    }\n}\n\nexport default ActionHTTPCall;\n","import { I18n } from '@iobroker/adapter-react-v5';\nimport { GenericBlock, type GenericBlockProps } from '../GenericBlock';\nimport type { RuleBlockConfigActionPrintText, RuleBlockDescription, RuleContext } from '@/Components/RulesEditor/types';\n\nclass ActionPrintText extends GenericBlock<RuleBlockConfigActionPrintText> {\n    constructor(props: GenericBlockProps<RuleBlockConfigActionPrintText>) {\n        super(props, ActionPrintText.getStaticData());\n    }\n\n    static compile(config: RuleBlockConfigActionPrintText, context: RuleContext): string {\n        return `// Log ${config.text}\n\\t\\tconst subActionVar${config._id} = \"${(config.text || '').replace(/\"/g, '\\\\\"')}\"${GenericBlock.getReplacesInText(context)};\n\\t\\t_sendToFrontEnd(${config._id}, {text: subActionVar${config._id}});\n\\t\\tconsole.log(subActionVar${config._id});`;\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    renderDebug(debugMessage: { data: { text: string } }): string {\n        return I18n.t('Log: %s', debugMessage.data.text);\n    }\n\n    onTagChange(): void {\n        this.setState(\n            {\n                inputs: [\n                    {\n                        nameRender: 'renderModalInput',\n                        attr: 'text',\n                        defaultValue: 'My device triggered',\n                        nameBlock: 'Log text',\n                    },\n                ],\n            },\n            () => super.onTagChange(),\n        );\n    }\n\n    static getStaticData(): RuleBlockDescription {\n        return {\n            acceptedBy: 'actions',\n            name: 'Log text',\n            id: 'ActionPrintText',\n            icon: 'Subject',\n            title: 'Print some text in log',\n            helpDialog:\n                'You can use %s in the text to display current trigger value or %id to display the triggered object ID',\n        };\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getData(): RuleBlockDescription {\n        return ActionPrintText.getStaticData();\n    }\n}\n\nexport default ActionPrintText;\n","import { I18n } from '@iobroker/adapter-react-v5';\nimport { GenericBlock, type GenericBlockProps } from '../GenericBlock';\nimport type { RuleBlockConfigActionPause, RuleBlockDescription } from '../../types';\n\nclass ActionPause extends GenericBlock<RuleBlockConfigActionPause> {\n    constructor(props: GenericBlockProps<RuleBlockConfigActionPause>) {\n        super(props, ActionPause.getStaticData());\n    }\n\n    static compile(config: RuleBlockConfigActionPause): string {\n        const ms = config.unit === 'ms' ? 1 : config.unit === 's' ? 1000 : config.unit === 'm' ? 60000 : 3600000;\n\n        return `// pause for ${ms}ms\n\\t\\t_sendToFrontEnd(${config._id}, {paused: true});\\n\n\\t\\tawait wait(${config.pause} * ${ms});\\n\n\\t\\t_sendToFrontEnd(${config._id}, {paused: false});`;\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    renderDebug(debugMessage: { data: { paused: number } }): string {\n        return I18n.t('Paused: %s', debugMessage.data.paused);\n    }\n\n    _getOptions(pause?: number | string): { value: string; title: string }[] {\n        pause = pause === undefined ? this.state.settings.pause : pause;\n        if (pause === 1 || pause === '1') {\n            return [\n                { value: 'ms', title: 'millisecond' },\n                { value: 's', title: 'second' },\n                { value: 'm', title: 'minute' },\n                { value: 'h', title: 'hour' },\n            ];\n        }\n        return [\n            { value: 'ms', title: 'milliseconds' },\n            { value: 's', title: 'seconds' },\n            { value: 'm', title: 'minutes' },\n            { value: 'h', title: 'hours' },\n        ];\n    }\n\n    _setInputs(pause?: number | string): void {\n        this.setState(\n            {\n                inputs: [\n                    {\n                        nameRender: 'renderNumber',\n                        attr: 'pause',\n                        defaultValue: 100,\n                        noHelperText: true,\n                    },\n                    {\n                        nameRender: 'renderSelect',\n                        attr: 'unit',\n                        defaultValue: 'ms',\n                        options: this._getOptions(pause),\n                    },\n                ],\n            },\n            () => super.onTagChange(),\n        );\n    }\n\n    onValueChanged(value: any, attr: string): void {\n        if (attr === 'pause') {\n            this._setInputs(value);\n        }\n    }\n\n    onTagChange(): void {\n        this._setInputs();\n    }\n\n    static getStaticData(): RuleBlockDescription {\n        return {\n            acceptedBy: 'actions',\n            name: 'Pause',\n            id: 'ActionPause',\n            icon: 'Pause',\n            title: 'Make a pause between actions',\n        };\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getData(): RuleBlockDescription {\n        return ActionPause.getStaticData();\n    }\n}\n\nexport default ActionPause;\n","import { I18n } from '@iobroker/adapter-react-v5';\nimport { GenericBlock, type GenericBlockProps } from '../GenericBlock';\nimport type {\n    RuleBlockConfigActionFunction,\n    RuleBlockDescription,\n    RuleTagCardTitle,\n} from '@/Components/RulesEditor/types';\n\nclass ActionFunction extends GenericBlock<RuleBlockConfigActionFunction> {\n    constructor(props: GenericBlockProps<RuleBlockConfigActionFunction>) {\n        super(props, ActionFunction.getStaticData());\n    }\n\n    static compile(config: RuleBlockConfigActionFunction): string {\n        const lines = (config.func || '').split('\\n').map(line => `        ${line}`);\n\n        lines.unshift(`\\t\\t_sendToFrontEnd(${config._id}, {func: 'executed'});`);\n        lines.unshift(`// user function`);\n\n        return lines.join('\\n');\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    renderDebug(): string {\n        return I18n.t('Function: executed');\n    }\n\n    onTagChange(tagCard: RuleTagCardTitle): void {\n        this.setState(\n            {\n                inputs: [\n                    {\n                        nameRender: 'renderModalInput',\n                        attr: 'func',\n                        noTextEdit: true,\n                        defaultValue: 'console.log(\"Test\")',\n                        nameBlock: 'Function',\n                    },\n                ],\n            },\n            () => super.onTagChange(tagCard),\n        );\n    }\n\n    static getStaticData(): RuleBlockDescription {\n        return {\n            acceptedBy: 'actions',\n            name: 'User function',\n            id: 'ActionFunction',\n            icon: 'Functions',\n            title: 'Write your own code',\n            helpDialog: 'This is advances option. You can write your own code here and it will be executed on trigger',\n        };\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getData(): RuleBlockDescription {\n        return ActionFunction.getStaticData();\n    }\n}\n\nexport default ActionFunction;\n","import React from 'react';\nimport { I18n } from '@iobroker/adapter-react-v5';\nimport { GenericBlock, type GenericBlockProps } from '../GenericBlock';\nimport type {\n    RuleBlockConfigActionSetState,\n    RuleBlockConfigActionSetStateDelayed,\n    RuleBlockDescription,\n    RuleContext,\n    RuleInputAny,\n    RuleInputNumber,\n    RuleInputObjectID,\n    RuleTagCardTitle,\n} from '@/Components/RulesEditor/types';\nimport { renderValue } from '../../helpers/utils';\n\nclass ActionSetStateDelayed extends GenericBlock<RuleBlockConfigActionSetStateDelayed> {\n    constructor(props: GenericBlockProps<RuleBlockConfigActionSetStateDelayed>) {\n        super(props, ActionSetStateDelayed.getStaticData());\n    }\n\n    isAllTriggersOnState(): boolean {\n        return (\n            !!this.props.userRules?.triggers?.find(item => item.id === 'TriggerState') &&\n            !this.props.userRules?.triggers?.find(item => item.id !== 'TriggerState')\n        );\n    }\n\n    static compile(config: RuleBlockConfigActionSetStateDelayed, context: RuleContext): string {\n        let value = config.value;\n        if (config.useTrigger) {\n            value = config.toggle ? '!obj.state.val' : 'obj.state.val';\n        } else {\n            if (value === undefined || value === null) {\n                value = '';\n            }\n\n            if (\n                typeof config.value === 'string' &&\n                parseFloat(config.value).toString() !== config.value &&\n                config.value !== 'true' &&\n                config.value !== 'false'\n            ) {\n                value = `\"${(value as string).replace(/\"/g, '\\\\\"')}\"${GenericBlock.getReplacesInText(context)}`;\n            }\n        }\n        let v;\n        if (config.toggle && !config.useTrigger) {\n            v = `const subActionVar${config._id} = !(await getStateAsync(\"${config.oid}\")).val`;\n        } else {\n            v = `const subActionVar${config._id} = ${value}`;\n        }\n\n        return `// set delayed state ${config.oid} to ${config.toggle && !config.useTrigger ? 'toggle' : value} with delay of ${config.delay}ms\n\\t\\t${v};\n\\t\\t_sendToFrontEnd(${config._id}, {val: subActionVar${config._id}, ack: ${config.tagCard === 'update'}});\n\\t\\tsetStateDelayed(\"${config.oid}\", subActionVar${config._id}, ${config.tagCard === 'update'}, ${parseInt(config.delay as string, 10)}, ${config.clearRunning ? 'true' : 'false'});`;\n    }\n\n    renderDebug(debugMessage: { data: { ack: boolean; val: any } }): React.JSX.Element {\n        return (\n            <span>\n                {I18n.t('Set:')}{' '}\n                <span\n                    className={debugMessage.data.ack ? this.props.classes?.valueAck : this.props.classes?.valueNotAck}\n                >\n                    {renderValue(debugMessage.data.val)}\n                </span>\n            </span>\n        );\n    }\n\n    _setInputs(\n        useTrigger?: boolean,\n        toggle?: boolean,\n    ): { inputs: RuleInputAny[]; newSettings?: Partial<RuleBlockConfigActionSetState> } {\n        const isAllTriggersOnState = this.isAllTriggersOnState();\n\n        toggle = toggle === undefined ? this.state.settings.toggle : toggle;\n        useTrigger = useTrigger === undefined ? this.state.settings.useTrigger : useTrigger;\n        let type: 'number' | 'string' | 'boolean' | 'button' | '' | 'slider' | 'color' | 'select' = '';\n        let options: { value: string; title: string }[] | undefined;\n        const { oidType, oidUnit, oidStates, oidMax, oidMin, oidRole, oidWrite, oidStep } = this.state.settings;\n        let settings;\n\n        if (oidType) {\n            if (oidType === 'number') {\n                type = 'number';\n                if (oidMax !== undefined && oidMin !== undefined) {\n                    type = 'slider';\n                }\n            } else if (oidType === 'boolean') {\n                type = 'boolean';\n                if (oidRole && oidRole.includes('button') && oidWrite) {\n                    type = 'button';\n                }\n            } else {\n                type = '';\n                if (oidRole && oidRole.includes('color')) {\n                    type = 'color';\n                }\n            }\n\n            if (oidStates) {\n                options = Object.keys(oidStates).map(val => ({ value: val, title: oidStates[val] }));\n                type = 'select';\n            }\n        }\n        let inputs: RuleInputAny[];\n        if (isAllTriggersOnState && useTrigger) {\n            inputs = [\n                {\n                    backText: 'use trigger value',\n                    nameRender: 'renderCheckbox',\n                    attr: 'useTrigger',\n                    defaultValue: false,\n                },\n            ];\n            if (type === 'boolean') {\n                inputs.push({\n                    backText: 'toggle value',\n                    attr: 'toggle',\n                    nameRender: 'renderCheckbox',\n                    defaultValue: false,\n                });\n            }\n        } else {\n            switch (type) {\n                case 'number':\n                    inputs = [\n                        {\n                            backText: oidUnit || '',\n                            frontText: 'with',\n                            nameRender: 'renderNumber',\n                            defaultValue: oidMax === undefined ? 0 : oidMax,\n                            attr: 'value',\n                        },\n                    ];\n                    if (\n                        this.state.settings.value !== undefined &&\n                        isNaN(parseFloat(this.state.settings.value as string))\n                    ) {\n                        settings = { value: oidMax === undefined ? 0 : oidMax };\n                    }\n                    break;\n\n                case 'slider': {\n                    inputs = [\n                        {\n                            nameRender: 'renderSlider',\n                            defaultValue: oidMax,\n                            min: oidMin,\n                            max: oidMax,\n                            unit: oidUnit,\n                            step: oidStep,\n                            attr: 'value',\n                        },\n                    ];\n                    const f = parseFloat(this.state.settings.value as string);\n                    if (this.state.settings.value !== undefined && (isNaN(f) || f < oidMin || f > oidMax)) {\n                        settings = { value: oidMax };\n                    }\n                    break;\n                }\n\n                case 'select':\n                    inputs = [\n                        {\n                            nameRender: 'renderSelect',\n                            frontText: 'with',\n                            options: options as { value: string; title: string }[],\n                            defaultValue: options?.[0].value || '',\n                            attr: 'value',\n                        },\n                    ];\n                    if (\n                        this.state.settings.value !== undefined &&\n                        !options?.find(item => item.value === this.state.settings.value)\n                    ) {\n                        settings = { value: options?.[0].value || '' };\n                    }\n                    break;\n\n                case 'boolean':\n                    inputs = [\n                        {\n                            backText: 'toggle value',\n                            attr: 'toggle',\n                            nameRender: 'renderCheckbox',\n                            defaultValue: false,\n                        },\n                    ];\n                    if (!toggle) {\n                        inputs.push({\n                            backText: 'true',\n                            frontText: 'false',\n                            nameRender: 'renderSwitch',\n                            defaultValue: false,\n                            attr: 'value',\n                        });\n                    }\n\n                    if (\n                        this.state.settings.value !== undefined &&\n                        this.state.settings.value !== false &&\n                        this.state.settings.value !== true\n                    ) {\n                        settings = { value: false };\n                    }\n                    break;\n\n                case 'button':\n                    inputs = [\n                        {\n                            nameRender: 'renderButton',\n                            defaultValue: true,\n                            attr: 'value',\n                        },\n                    ];\n                    if (this.state.settings.value !== undefined && this.state.settings.value !== true) {\n                        settings = { value: true };\n                    }\n                    break;\n\n                case 'color':\n                    inputs = [\n                        {\n                            nameRender: 'renderColor',\n                            frontText: 'with',\n                            defaultValue: '#FFFFFF',\n                            attr: 'value',\n                        },\n                    ];\n                    if (\n                        this.state.settings.value !== undefined &&\n                        (typeof this.state.settings.value !== 'string' ||\n                            (!this.state.settings.value.startsWith('#') &&\n                                !this.state.settings.value.startsWith('rgb')))\n                    ) {\n                        settings = { value: '#FFFFFF' };\n                    }\n                    break;\n\n                default:\n                    inputs = [\n                        {\n                            backText: oidUnit || '',\n                            frontText: 'with',\n                            nameRender: 'renderText',\n                            defaultValue: '',\n                            attr: 'value',\n                        },\n                    ];\n                    break;\n            }\n            if (isAllTriggersOnState) {\n                inputs.unshift({\n                    backText: 'use trigger value',\n                    nameRender: 'renderCheckbox',\n                    attr: 'useTrigger',\n                });\n            }\n        }\n\n        inputs.push({\n            backText: 'ms',\n            frontText: 'Delay',\n            nameRender: 'renderNumber',\n            defaultValue: 1000,\n            noHelperText: true,\n            attr: 'delay',\n        } as RuleInputNumber);\n\n        inputs.push({\n            backText: 'clear running',\n            nameRender: 'renderCheckbox',\n            defaultValue: true,\n            attr: 'clearRunning',\n        });\n\n        return { inputs, newSettings: settings };\n    }\n\n    onTagChange(\n        _tagCard?: RuleTagCardTitle,\n        cb?: () => void,\n        _ignore?: any,\n        toggle?: boolean,\n        useTrigger?: boolean,\n    ): void {\n        useTrigger = useTrigger === undefined ? this.state.settings.useTrigger : useTrigger;\n        const { inputs, newSettings } = this._setInputs(useTrigger, toggle);\n        inputs.unshift({\n            nameRender: 'renderObjectID',\n            attr: 'oid',\n            defaultValue: '',\n            checkReadOnly: true,\n        } as RuleInputObjectID);\n\n        this.setState({ inputs }, () =>\n            super.onTagChange(null, () => {\n                if (newSettings) {\n                    const settings = JSON.parse(JSON.stringify(this.state.settings));\n                    Object.assign(settings, newSettings);\n                    this.setState(settings);\n                    this.props.onChange(settings);\n                }\n            }),\n        );\n    }\n\n    onValueChanged(value?: any, attr?: string): void {\n        this.onTagChange(\n            undefined,\n            undefined,\n            undefined,\n            attr === 'toggle' ? value : undefined,\n            attr === 'useTrigger' ? value : undefined,\n        );\n    }\n\n    onUpdate(): void {\n        this.onTagChange();\n    }\n\n    static getStaticData(): RuleBlockDescription {\n        return {\n            acceptedBy: 'actions',\n            name: 'Set with delay',\n            id: 'ActionSetStateDelayed',\n            icon: 'PlayForWork',\n            tagCardArray: ['control', 'update'],\n            title: 'Control or update some state with delay',\n            helpDialog:\n                'You can use %s in the value to use the current trigger value or %id to display the triggered object ID',\n        };\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getData(): RuleBlockDescription {\n        return ActionSetStateDelayed.getStaticData();\n    }\n}\n\nexport default ActionSetStateDelayed;\n","import React from 'react';\nimport { I18n } from '@iobroker/adapter-react-v5';\nimport { GenericBlock, type GenericBlockProps } from '../GenericBlock';\nimport { renderValue } from '../../helpers/utils';\nimport type {\n    RuleBlockConfigActionOperationState,\n    RuleBlockDescription,\n    RuleInputAny,\n    RuleInputNameText,\n    RuleInputObjectID,\n    RuleInputSelect,\n} from '@/Components/RulesEditor/types';\n\nclass ActionOperateStates extends GenericBlock<RuleBlockConfigActionOperationState> {\n    constructor(props: GenericBlockProps<RuleBlockConfigActionOperationState>) {\n        super(props, ActionOperateStates.getStaticData());\n    }\n\n    isAllTriggersOnState(): boolean {\n        return (\n            !!this.props.userRules?.triggers?.find(item => item.id === 'TriggerState') &&\n            !this.props.userRules?.triggers?.find(item => item.id !== 'TriggerState')\n        );\n    }\n\n    static compile(config: RuleBlockConfigActionOperationState): string {\n        const oid1 = `const val2_${config._id} = (await getStateAsync(\"${config.oid1}\")).val;`;\n        const oid2 = `const val1_${config._id} = (await getStateAsync(\"${config.oid2}\")).val;`;\n\n        return `// ${config.oid1} ${config.operation} ${config.oid2} => ${config.oidResult}\n\\t\\t ${oid1}\n\\t\\t ${oid2}\n\\t\\t_sendToFrontEnd(${config._id}, {val: val1_${config._id} ${config.operation} val2_${config._id}, ack: ${config.tagCard === 'update'}});\n\\t\\tawait setStateAsync(\"${config.oidResult}\", val1_${config._id} ${config.operation} val2_${config._id}, ${config.tagCard === 'update'});`;\n    }\n\n    renderDebug(debugMessage: { data: { ack: boolean; val: any } }): React.JSX.Element {\n        return (\n            <span>\n                {I18n.t('Set:')}{' '}\n                <span\n                    className={debugMessage.data.ack ? this.props.classes?.valueAck : this.props.classes?.valueNotAck}\n                >\n                    {renderValue(debugMessage.data.val)}\n                </span>\n            </span>\n        );\n    }\n\n    onTagChange(): void {\n        const inputs: RuleInputAny[] = [];\n\n        inputs.push({\n            nameRender: 'renderObjectID',\n            title: 'ID1',\n            attr: 'oid1',\n            defaultValue: '',\n            checkReadOnly: false,\n        } as RuleInputObjectID);\n\n        inputs.push({\n            nameRender: 'renderSelect',\n            // frontText: 'with',\n            options: [\n                { value: '+', title: '+' },\n                { value: '-', title: '-' },\n                { value: '*', title: '*' },\n                { value: '/', title: '/' },\n            ],\n            doNotTranslate: true,\n            defaultValue: '+',\n            attr: 'operation',\n        } as RuleInputSelect);\n\n        inputs.push({\n            nameRender: 'renderObjectID',\n            title: 'ID2',\n            attr: 'oid2',\n            defaultValue: '',\n            checkReadOnly: false,\n        } as RuleInputObjectID);\n\n        inputs.push({\n            nameRender: 'renderNameText',\n            defaultValue: 'store in',\n            attr: 'textEqual',\n        } as RuleInputNameText);\n\n        inputs.push({\n            nameRender: 'renderObjectID',\n            attr: 'oidResult',\n            defaultValue: '',\n            checkReadOnly: true,\n        } as RuleInputObjectID);\n\n        this.setState({ inputs }, () =>\n            super.onTagChange(null, () => {\n                const settings = JSON.parse(JSON.stringify(this.state.settings));\n                this.props.onChange(settings);\n            }),\n        );\n    }\n\n    onValueChanged(_value: any, _attr: string): void {\n        this.onTagChange();\n    }\n\n    onUpdate(): void {\n        this.onTagChange();\n    }\n\n    static getStaticData(): RuleBlockDescription {\n        return {\n            acceptedBy: 'actions',\n            name: 'Operate two states',\n            id: 'ActionOperateStates',\n            icon: 'AddBox',\n            tagCardArray: ['control', 'update'],\n            title: 'Operations with two states',\n        };\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getData(): RuleBlockDescription {\n        return ActionOperateStates.getStaticData();\n    }\n}\n\nexport default ActionOperateStates;\n","import TriggerScriptSave from '../Blocks/TriggerScriptSave';\nimport TriggerSchedule from '../Blocks/TriggerSchedule';\nimport TriggerState from '../Blocks/TriggerState';\nimport ConditionState from '../Blocks/ConditionState';\nimport ConditionTime from '../Blocks/ConditionTime';\nimport ConditionAstronomical from '../Blocks/ConditionAstronomical';\nimport ActionSetState from '../Blocks/ActionSetState';\nimport ActionExec from '../Blocks/ActionExec';\nimport ActionHTTPCall from '../Blocks/ActionHTTPCall';\nimport ActionPrintText from '../Blocks/ActionPrintText';\nimport ActionPause from '../Blocks/ActionPause';\nimport ActionFunction from '../Blocks/ActionFunction';\nimport ActionSetStateDelayed from '../Blocks/ActionSetStateDelayed';\nimport ActionOperateStates from '../Blocks/ActionOperateStates';\nimport type { GenericBlock } from '@/Components/RulesEditor/components/GenericBlock';\n\nconst StandardBlocks: (typeof GenericBlock<any>)[] = [\n    TriggerSchedule,\n    TriggerScriptSave,\n    TriggerState,\n    ConditionState,\n    ConditionTime,\n    ConditionAstronomical,\n    ActionSetState,\n    ActionExec,\n    ActionHTTPCall,\n    ActionPrintText,\n    ActionPause,\n    ActionFunction,\n    ActionSetStateDelayed,\n    ActionOperateStates,\n];\n\nexport default StandardBlocks;\n","import React, { createContext, useEffect, useState } from 'react';\n\nimport { type AdminConnection, I18n } from '@iobroker/adapter-react-v5';\n\nimport ActionSayText from '../Blocks/ActionSayText';\nimport ActionSendEmail from '../Blocks/ActionSendEmail';\nimport ActionTelegram from '../Blocks/ActionTelegram';\nimport ActionPushover from '../Blocks/ActionPushover';\nimport ActionWhatsappcmb from '../Blocks/ActionWhatsappcmb';\nimport ActionPushsafer from '../Blocks/ActionPushsafer';\nimport StandardBlocks from '../StandardBlocks';\nimport type { GenericBlock } from '../GenericBlock';\nimport type { DebugMessage } from '../../types';\n\nconst ADAPTERS: Record<string, typeof GenericBlock<any> | null> = {\n    telegram: ActionTelegram,\n    email: ActionSendEmail,\n    sayit: ActionSayText,\n    pushover: ActionPushover,\n    'whatsapp-cmb': ActionWhatsappcmb,\n    pushsafer: ActionPushsafer,\n};\n\ninterface RuleContext {\n    blocks: (typeof GenericBlock<any>)[] | null;\n    socket: AdminConnection | null;\n    onUpdate: boolean;\n    setOnUpdate: (value: boolean) => void;\n    onDebugMessage: DebugMessage[];\n    setOnDebugMessage: (message: DebugMessage[]) => void;\n    enableSimulation: boolean;\n    setEnableSimulation: (enableSimulation: boolean) => void;\n}\n\nexport const ContextWrapperCreate = createContext<RuleContext>({\n    blocks: null,\n    socket: null,\n\n    onUpdate: false,\n    setOnUpdate: (_onUpdate: boolean): void => {},\n\n    setOnDebugMessage: (_message: DebugMessage[]): void => {},\n    onDebugMessage: [],\n\n    enableSimulation: false,\n    setEnableSimulation: (_enableSimulation: boolean): void => {},\n});\n\nconst getOrLoadRemote = (\n    remote: string,\n    shareScope: string,\n    remoteFallbackUrl: string | undefined = undefined,\n): Promise<{ get: (module: string) => () => Promise<{ default: typeof GenericBlock<any> }> }> =>\n    new Promise((resolve, reject) => {\n        // check if remote exists on window\n        if (!(window as any)[remote]) {\n            // search dom to see if remote tag exists, but might still be loading (async)\n            const existingRemote: HTMLScriptElement | null = document.querySelector(`[data-webpack=\"${remote}\"]`);\n\n            // when remote is loaded...\n            const onload = async (): Promise<void> => {\n                // check if it was initialized\n                if (!(window as any)[remote]) {\n                    reject(new Error(`Cannot load Remote \"${remote}\" to inject`));\n                    return;\n                }\n                if (!(window as any)[remote].__initialized) {\n                    // if share scope doesn't exist (like in webpack 4) then expect shareScope to be a manual object\n                    // @ts-expect-error it is a trick and must be so\n                    if (typeof __webpack_share_scopes__ === 'undefined') {\n                        // use default share scope object passed in manually\n                        await (window as any)[remote].init(shareScope);\n                    } else {\n                        // otherwise, init share scope as usual\n                        // @ts-expect-error it is a trick and must be so\n                        await (window as any)[remote].init(__webpack_share_scopes__[shareScope]);\n                    }\n                    // mark remote as initialized\n                    (window as any)[remote].__initialized = true;\n                }\n                // resolve promise so marking remote as loaded\n                resolve((window as any)[remote]);\n            };\n\n            if (existingRemote) {\n                // if existing remote but not loaded, hook into its onload and wait for it to be ready\n                existingRemote.onload = onload;\n                existingRemote.onerror = reject;\n                // check if remote fallback exists as param passed to function\n                // TODO: should scan public config for a matching key if no override exists\n            } else if (remoteFallbackUrl) {\n                // inject remote if a fallback exists and call the same onload function\n                const d = document;\n                const script = d.createElement('script');\n                script.type = 'text/javascript';\n                // mark as data-webpack so runtime can track it internally\n                script.setAttribute('data-webpack', `${remote}`);\n                script.async = true;\n                script.onerror = reject;\n                script.onload = onload;\n                script.src = remoteFallbackUrl;\n                d.getElementsByTagName('head')[0].appendChild(script);\n            } else {\n                // no remote and no fallback exist, reject\n                reject(new Error(`Cannot Find Remote ${remote} to inject`));\n            }\n        } else {\n            // remote already instantiated, resolve\n            resolve((window as any)[remote]);\n        }\n    });\n\nfunction loadComponent(\n    remote: string,\n    sharedScope: string,\n    module: string,\n    url: string,\n): () => Promise<{ default: typeof GenericBlock<any> }> {\n    return async (): Promise<{ default: typeof GenericBlock<any> }> => {\n        await getOrLoadRemote(remote, sharedScope, url);\n        const container = (window as any)[remote];\n        const factory = await container.get(module);\n        return factory();\n    };\n}\n\nexport const ContextWrapper = ({ children, socket }: { socket: AdminConnection; children: any }): React.JSX.Element => {\n    const [blocks, setBlocks] = useState<(typeof GenericBlock<any>)[] | null>(null);\n    const [onUpdate, setOnUpdate] = useState(false);\n    const [onDebugMessage, setOnDebugMessage] = useState<DebugMessage[]>([]);\n    const [enableSimulation, setEnableSimulation] = useState(false);\n\n    useEffect(() => {\n        onUpdate && setOnUpdate(false);\n    }, [onUpdate]);\n\n    useEffect(() => {\n        void (async () => {\n            const instances = await socket.getAdapterInstances();\n            const adapters = Object.keys(ADAPTERS).filter(adapter =>\n                instances.find(obj => obj?.common?.name === adapter),\n            );\n\n            const adapterDynamicBlocksArray: (typeof GenericBlock<any>)[] = [];\n\n            // find all adapters, that have custom rule blocks\n            const dynamicRules = instances.filter(obj => obj.common.javascriptRules);\n\n            const alreadyCreated: string[] = [];\n            for (const k in dynamicRules) {\n                const obj = dynamicRules[k];\n                if (alreadyCreated.includes(obj.common.name)) {\n                    continue;\n                }\n\n                let url;\n                if (\n                    // @ts-expect-error javascriptRules in js-controller\n                    obj.common.javascriptRules.url.startsWith('http:') ||\n                    // @ts-expect-error javascriptRules in js-controller\n                    obj.common.javascriptRules.url.startsWith('https:')\n                ) {\n                    // @ts-expect-error javascriptRules in js-controller\n                    url = obj.common.javascriptRules.url;\n                    // @ts-expect-error javascriptRules in js-controller\n                } else if (obj.common.javascriptRules.url.startsWith('./')) {\n                    // @ts-expect-error javascriptRules in js-controller\n                    url = `${window.location.protocol}//${window.location.host}${obj.common.javascriptRules.url.replace(/^\\./, '')}`;\n                } else {\n                    // @ts-expect-error javascriptRules in js-controller\n                    url = `${window.location.protocol}//${window.location.host}/adapter/${obj.common.name}/${obj.common.javascriptRules.url}`;\n                }\n\n                // @ts-expect-error javascriptRules in js-controller\n                if (obj.common.javascriptRules.i18n === true) {\n                    // load i18n from files\n                    const pos: number = url.lastIndexOf('/');\n                    let i18nURL: string;\n                    if (pos !== -1) {\n                        i18nURL = url.substring(0, pos);\n                    } else {\n                        i18nURL = url;\n                    }\n                    const lang = I18n.getLanguage();\n                    const file = `${i18nURL}/i18n/${lang}.json`;\n\n                    await fetch(file)\n                        .then(data => data.json())\n                        .then(json => I18n.extendTranslations(json, lang))\n                        .catch(error => {\n                            if (lang !== 'en') {\n                                // try to load english\n                                return fetch(`${i18nURL}/i18n/en.json`)\n                                    .then(data => data.json())\n                                    .then(json => I18n.extendTranslations(json, lang))\n                                    .catch(error => console.error(`Cannot load i18n \"${file}\": ${error}`));\n                            }\n                            console.log(`Cannot load i18n \"${file}\": ${error}`);\n                        });\n                    // @ts-expect-error javascriptRules in js-controller\n                } else if (obj.common.javascriptRules.i18n && typeof obj.common.javascriptRules.i18n === 'object') {\n                    try {\n                        // @ts-expect-error javascriptRules in js-controller\n                        I18n.extendTranslations(obj.common.javascriptRules.i18n);\n                    } catch (error) {\n                        // @ts-expect-error javascriptRules in js-controller\n                        console.error(`Cannot import i18n for \"${obj.common.javascriptRules.name}\": ${error}`);\n                    }\n                }\n\n                try {\n                    const Component = (\n                        await loadComponent(\n                            // @ts-expect-error javascriptRules in js-controller\n                            obj.common.javascriptRules.name,\n                            'default',\n                            // @ts-expect-error javascriptRules in js-controller\n                            `./${obj.common.javascriptRules.name}`,\n                            url,\n                        )()\n                    ).default;\n\n                    if (Component) {\n                        adapterDynamicBlocksArray.push(Component);\n                        alreadyCreated.push(obj.common.name);\n                        ADAPTERS[obj.common.name] = null;\n                    }\n                } catch (e) {\n                    // @ts-expect-error javascriptRules in js-controller\n                    console.error(`Cannot load component \"${obj.common.javascriptRules.name}\": ${e}`);\n                }\n            }\n\n            const adapterBlocksArray: (typeof GenericBlock<any>)[] = adapters\n                .filter(adapter => ADAPTERS[adapter])\n                .map(adapter => ADAPTERS[adapter]) as (typeof GenericBlock<any>)[];\n\n            setBlocks([...StandardBlocks, ...adapterBlocksArray, ...adapterDynamicBlocksArray]);\n        })();\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    return (\n        <ContextWrapperCreate.Provider\n            value={{\n                blocks,\n                socket,\n                onUpdate,\n                setOnUpdate,\n                onDebugMessage,\n                setOnDebugMessage,\n                enableSimulation,\n                setEnableSimulation,\n            }}\n        >\n            {children}\n        </ContextWrapperCreate.Provider>\n    );\n};\n","import React, { memo, useCallback, useContext, useMemo, useState } from 'react';\n\nimport type { AdminConnection, IobTheme, ThemeName, ThemeType } from '@iobroker/adapter-react-v5';\nimport cls from './style.module.scss';\nimport { deepCopy } from '../../helpers/deepCopy';\nimport { filterElement } from '../../helpers/filterElement';\nimport { ContextWrapperCreate } from '../ContextWrapper';\nimport { findElement } from '../../helpers/findElement';\nimport { GenericBlock, type GenericBlockProps } from '../GenericBlock';\nimport type { BlockValue, RuleBlockConfig, RuleBlockType, RuleUserRules } from '../../types';\n\ninterface CurrentItemProps {\n    setUserRules: (newRules: RuleUserRules) => void;\n    userRules: RuleUserRules;\n    _id: number;\n    id: string;\n    blockValue: BlockValue;\n    active?: boolean;\n    acceptedBy: RuleBlockType;\n    isTourOpen?: boolean;\n    setTourStep?: (step: number) => void;\n    tourStep?: number;\n    theme: IobTheme;\n    themeType: ThemeType;\n    themeName: ThemeName;\n    settings?: RuleBlockConfig;\n}\n\n// @iobroker/javascript-block\n// eslint-disable-next-line react/display-name\nconst CurrentItem = memo((props: CurrentItemProps) => {\n    const { setUserRules, userRules, _id, id, blockValue, active, acceptedBy, isTourOpen, setTourStep, tourStep } =\n        props;\n\n    const [anchorEl, setAnchorEl] = useState<HTMLDivElement | null>(null);\n    const { blocks, socket, onUpdate, setOnUpdate, onDebugMessage, enableSimulation } =\n        useContext(ContextWrapperCreate);\n\n    const findElementBlocks = useCallback(\n        (id: string) =>\n            blocks?.find(el => {\n                const staticData = el.getStaticData();\n                return staticData.id === id;\n            }),\n        [blocks],\n    );\n\n    const onChange = useCallback(\n        (settings: RuleBlockConfig): void => {\n            const newUserRules = findElement(settings, userRules, blockValue);\n            newUserRules && setUserRules(newUserRules);\n        },\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        [userRules],\n    );\n\n    const handlePopoverOpen = (event: React.MouseEvent<HTMLDivElement, MouseEvent>): void => {\n        if (event.currentTarget !== anchorEl) {\n            setAnchorEl(event.currentTarget);\n        }\n    };\n\n    const handlePopoverClose = (): void => setAnchorEl(null);\n\n    const blockInput = useMemo(() => {\n        const CustomBlock: React.FC<GenericBlockProps<any>> = (findElementBlocks(id) ||\n            GenericBlock) as unknown as React.FC<GenericBlockProps<any>>;\n\n        return (\n            <CustomBlock\n                {...props}\n                notFound={!findElementBlocks(id)}\n                isTourOpen={isTourOpen}\n                setTourStep={setTourStep}\n                tourStep={tourStep}\n                onUpdate={onUpdate}\n                setOnUpdate={setOnUpdate}\n                enableSimulation={enableSimulation}\n                onDebugMessage={onDebugMessage}\n                onChange={onChange}\n                className={undefined}\n                socket={socket as AdminConnection}\n            />\n        );\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [userRules, onUpdate, onDebugMessage, enableSimulation]);\n\n    const [isDelete, setIsDelete] = useState(false);\n\n    return (\n        <div\n            onMouseMove={handlePopoverOpen}\n            onMouseEnter={handlePopoverOpen}\n            onMouseLeave={handlePopoverClose}\n            onMouseDown={el => {\n                if (el.ctrlKey) {\n                    let newItem: RuleBlockConfig | undefined;\n                    const newUserRules = deepCopy(acceptedBy, userRules, blockValue);\n                    if (acceptedBy === 'conditions') {\n                        newItem = newUserRules.conditions[blockValue as number].find(el => el._id === _id);\n                        if (newItem) {\n                            newUserRules.conditions[blockValue as number].splice(\n                                newUserRules.conditions[blockValue as number].indexOf(newItem),\n                                0,\n                                { ...newItem, _id: Date.now() },\n                            );\n                        }\n                    } else if (acceptedBy === 'actions') {\n                        newItem = newUserRules.actions[blockValue as 'then' | 'else'].find(el => el._id === _id);\n                        if (newItem) {\n                            newUserRules.actions[blockValue as 'then' | 'else'].splice(\n                                newUserRules.actions[blockValue as 'then' | 'else'].indexOf(newItem),\n                                0,\n                                { ...newItem, _id: Date.now() },\n                            );\n                        }\n                    } else {\n                        newItem = newUserRules.triggers.find(el => el._id === _id);\n                        if (newItem) {\n                            newUserRules.triggers.splice(newUserRules[acceptedBy].indexOf(newItem), 0, {\n                                ...newItem,\n                                _id: Date.now(),\n                            });\n                        }\n                    }\n\n                    setUserRules(newUserRules);\n                }\n            }}\n            id=\"height\"\n            style={active ? { width: (document.getElementById('width')?.clientWidth || 0) - 70 } : undefined}\n            className={`${cls.cardStyle} ${active ? cls.cardStyleActive : null} ${isDelete ? cls.isDelete : null}`}\n        >\n            <div className={cls.drag_mobile} />\n            {blockInput}\n            {setUserRules && (\n                <div\n                    className={cls.controlMenu}\n                    style={anchorEl ? { opacity: 1 } : { opacity: 0 }}\n                >\n                    <div\n                        onClick={() => {\n                            let newItemsSwitches = deepCopy(acceptedBy, userRules, blockValue);\n                            newItemsSwitches = filterElement(acceptedBy, newItemsSwitches, blockValue, _id);\n                            setIsDelete(true);\n                            setTimeout(() => {\n                                if (acceptedBy === 'triggers') {\n                                    setOnUpdate(true);\n                                }\n                                setUserRules(newItemsSwitches);\n                            }, 300);\n                        }}\n                        className={cls.closeBtn}\n                    />\n                </div>\n            )}\n        </div>\n    );\n});\n\nexport default CurrentItem;\n","import type { BlockValue, RuleBlockConfig, RuleUserRules } from '@/Components/RulesEditor/types';\n\nexport function findElement(\n    settings: RuleBlockConfig,\n    userRules: RuleUserRules,\n    additionalParameter: BlockValue,\n): RuleUserRules {\n    const { _id, acceptedBy } = settings;\n    let block;\n\n    if (!acceptedBy || !userRules[acceptedBy]) {\n        console.warn(`Cannot find ${acceptedBy}`);\n        return userRules;\n    }\n\n    switch (acceptedBy) {\n        case 'actions':\n            block = userRules.actions[additionalParameter as 'else' | 'then'].find(el => el._id === _id);\n            if (!block) {\n                console.warn(`Cannot find ${_id}`);\n            } else {\n                const pos = userRules.actions[additionalParameter as 'else' | 'then'].indexOf(block);\n                userRules.actions[additionalParameter as 'else' | 'then'][pos] = settings;\n            }\n            return userRules;\n        case 'conditions':\n            block = userRules.conditions[additionalParameter as number].find(el => el._id === _id);\n            if (!block) {\n                console.warn(`Cannot find ${_id}`);\n            } else {\n                const pos = userRules.conditions[additionalParameter as number].indexOf(block);\n                userRules.conditions[additionalParameter as number][pos] = settings;\n            }\n            return userRules;\n        default:\n            block = userRules.triggers.find(el => el._id === _id);\n            if (!block) {\n                console.warn(`Cannot find ${_id}`);\n            } else {\n                const pos = userRules.triggers.indexOf(block);\n                userRules.triggers[pos] = settings;\n            }\n            return userRules;\n    }\n}\n","import React from 'react';\nimport { useDragLayer, type XYCoord } from 'react-dnd';\n\nimport CardMenu from '../CardMenu';\nimport CurrentItem from '../CurrentItem';\nimport type { AdminConnection } from '@iobroker/adapter-react-v5';\n\nconst layerStyles: React.CSSProperties = {\n    position: 'fixed',\n    pointerEvents: 'none',\n    zIndex: 100,\n    left: 0,\n    top: 0,\n    width: '100%',\n    height: '100%',\n};\n\nconst snapToGrid = (x: number, y: number): [number, number] => {\n    const snappedX = Math.round(x / 32) * 32;\n    const snappedY = Math.round(y / 32) * 32;\n    return [snappedX, snappedY];\n};\n\nconst getItemStyles = (\n    initialOffset: XYCoord | null,\n    currentOffset: XYCoord | null,\n    isSnapToGrid?: boolean,\n): React.CSSProperties => {\n    if (!initialOffset || !currentOffset) {\n        return {\n            display: 'none',\n        };\n    }\n    let { x, y } = currentOffset;\n    if (isSnapToGrid) {\n        x -= initialOffset.x;\n        y -= initialOffset.y;\n        [x, y] = snapToGrid(x, y);\n        x += initialOffset.x;\n        y += initialOffset.y;\n    }\n    const transform = `translate(${x}px, ${y}px)`;\n    return {\n        transform,\n        WebkitTransform: transform,\n    };\n};\n\ninterface CustomDragLayerProps {\n    socket: AdminConnection;\n    allBlocks: any;\n}\n\nexport const CustomDragLayer = (props: CustomDragLayerProps): React.JSX.Element | null => {\n    const { itemType, isDragging, item, initialOffset, currentOffset, targetIds } = useDragLayer(monitor => ({\n        item: monitor.getItem(),\n        itemType: monitor.getItemType(),\n        initialOffset: monitor.getInitialSourceClientOffset(),\n        currentOffset: monitor.getSourceClientOffset(),\n        isDragging: monitor.isDragging(),\n        // @ts-expect-error fix later\n        targetIds: monitor.getTargetIds(),\n    }));\n\n    const renderItem = (): React.JSX.Element | null => {\n        switch (itemType) {\n            case 'box':\n                return targetIds.length ? (\n                    <CurrentItem\n                        active\n                        {...item}\n                        allBlocks={props.allBlocks}\n                    />\n                ) : (\n                    <CardMenu\n                        active\n                        {...item}\n                        socket={props.socket}\n                    />\n                );\n            default:\n                return null;\n        }\n    };\n\n    if (!isDragging) {\n        return null;\n    }\n\n    return (\n        <div style={layerStyles}>\n            <div style={getItemStyles(initialOffset, currentOffset)}>{renderItem()}</div>\n        </div>\n    );\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"border\":\"style_border__MoiVZ\",\"emptyBlockStyle\":\"style_emptyBlockStyle__55p-k\",\"emptyBlock\":\"style_emptyBlock__MrBrf\",\"marginTop\":\"style_marginTop__oaRLf\",\"selectOnChange\":\"style_selectOnChange__9lV7m\",\"selectOnChangeHelp\":\"style_selectOnChangeHelp__0H+dg\",\"selectOnChangeHelpIcon\":\"style_selectOnChangeHelpIcon__QzB6a\",\"emptyBlockNone\":\"style_emptyBlockNone__bRtri\",\"mainBlockItemRules\":\"style_mainBlockItemRules__E0Lx-\",\"nameBlockItems\":\"style_nameBlockItems__ie2A1\",\"contentBlockItem\":\"style_contentBlockItem__1oWaL\",\"wrapperMargin\":\"style_wrapperMargin__+Mo4I\",\"contentHeightOn\":\"style_contentHeightOn__bS0gc\",\"heightBlock\":\"style_heightBlock__9tYff\",\"contentHeightOff\":\"style_contentHeightOff__Ry9rD\",\"cardAdd\":\"style_cardAdd__wrws5\",\"blockCardAdd\":\"style_blockCardAdd__X3yTW\",\"addClassOverflow\":\"style_addClassOverflow__aOtc1\",\"addClassHeight\":\"style_addClassHeight__p-3v-\"};","import * as React from 'react';\n\nexport function useStateLocal<T>(value: T, valueName: string): [T, (newHeadCells: T) => void, boolean] {\n    const [state, setState] = React.useState(\n        window.localStorage.getItem(valueName) ? JSON.parse(window.localStorage.getItem(valueName) || '') : value,\n    );\n\n    const eventsToInstall = (newValue: T): void => {\n        window.localStorage.setItem(valueName, JSON.stringify(newValue));\n        setState(newValue);\n    };\n    return [state, eventsToInstall, !!window.localStorage.getItem(valueName)];\n}\n","import _ from 'lodash';\nimport type { BlockValue, RuleBlockConfig, RuleBlockType, RuleUserRules } from '../types';\n\nconst funcSet = _.throttle((setCards, userRules) => setCards(userRules), 0);\n\nexport function findCard(id: number, cards: RuleBlockConfig[]): { card: RuleBlockConfig | undefined; index: number } {\n    const card = cards.find(c => c._id === id);\n\n    return {\n        card,\n        index: card ? cards.indexOf(card) : -1,\n    };\n}\n\nexport function moveCard(\n    id: number,\n    atIndex: number,\n    cards: RuleBlockConfig[],\n    setCards: (newRules: RuleUserRules) => void,\n    userRules: RuleUserRules,\n    acceptedBy: RuleBlockType,\n    additionally: BlockValue,\n    hoverClientY: number,\n    hoverMiddleY: number,\n): void {\n    const { card, index } = findCard(id, cards);\n    if (index < atIndex && hoverClientY < hoverMiddleY) {\n        return;\n    }\n    if (index > atIndex && hoverClientY > hoverMiddleY) {\n        return;\n    }\n    if (card && index !== atIndex) {\n        const copyCard = _.clone(cards);\n        copyCard.splice(index, 1);\n        copyCard.splice(atIndex, 0, card);\n        const newUserRules = _.clone(userRules);\n        switch (acceptedBy) {\n            case 'actions':\n                newUserRules.actions[additionally as 'else' | 'then'] = copyCard;\n                funcSet(setCards, newUserRules);\n                return;\n\n            case 'conditions':\n                newUserRules.conditions[additionally as number] = copyCard;\n                funcSet(setCards, newUserRules);\n                return;\n\n            default:\n                newUserRules.triggers = copyCard;\n                funcSet(setCards, newUserRules);\n                return;\n        }\n    }\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"drag\":\"style_drag__di21U\",\"root\":\"style_root__EfQkh\"};","import React, { useContext, useEffect, useRef } from 'react';\nimport { useDrag, useDrop } from 'react-dnd';\nimport { getEmptyImage } from 'react-dnd-html5-backend';\n\nimport { deepCopy } from '../../helpers/deepCopy';\nimport { filterElement } from '../../helpers/filterElement';\nimport { findCard, moveCard } from '../../helpers/cardSort';\nimport { ContextWrapperCreate } from '../ContextWrapper';\nimport cls from './style.module.scss';\nimport type { BlockValue, RuleBlockConfig, RuleBlockDescription, RuleBlockType, RuleUserRules } from '../../types';\n\ninterface DragWrapperProps {\n    typeBlock?: RuleBlockType;\n    allProperties: RuleBlockDescription | RuleBlockConfig;\n    id: string;\n    _id?: number;\n    isActive?: boolean;\n    setUserRules: (newRules: RuleUserRules) => void;\n    userRules: RuleUserRules;\n    children: React.ReactNode;\n    blockValue?: BlockValue;\n}\n\nconst DragWrapper = ({\n    typeBlock,\n    allProperties,\n    id,\n    isActive,\n    setUserRules,\n    userRules,\n    children,\n    _id,\n    blockValue,\n}: DragWrapperProps): React.JSX.Element => {\n    const { setOnUpdate } = useContext(ContextWrapperCreate);\n    const [{ opacity }, drag, preview] = useDrag({\n        type: 'box',\n        item: (): Omit<RuleBlockConfig, '_id'> & { isActive?: boolean; _id?: number } => ({\n            ...allProperties,\n            id,\n            isActive,\n            _id,\n        }),\n        end: (item, monitor) => {\n            const { acceptedBy } = item;\n            const dropResult: { blockValue: BlockValue } | null = monitor.getDropResult();\n            let newUserRules;\n            if (!dropResult) {\n                if (typeof _id === 'number' && !monitor.getTargetIds().length) {\n                    newUserRules = deepCopy(acceptedBy, userRules, blockValue);\n                    newUserRules = filterElement(acceptedBy, newUserRules, blockValue, _id);\n                    setUserRules(newUserRules);\n                }\n                return null;\n            }\n            if (dropResult.blockValue !== blockValue) {\n                const idNumber = typeof _id === 'number' ? _id : Date.now();\n                newUserRules = deepCopy(acceptedBy, userRules, dropResult.blockValue);\n                const newItem = { id: item.id, acceptedBy: item.acceptedBy };\n                switch (acceptedBy) {\n                    case 'actions':\n                        if (blockValue) {\n                            newUserRules = filterElement('actions', newUserRules, blockValue, idNumber);\n                        }\n                        newUserRules = filterElement('actions', newUserRules, dropResult.blockValue, idNumber);\n                        newUserRules.actions[dropResult.blockValue as 'then' | 'else'].push({\n                            ...newItem,\n                            _id: idNumber,\n                        });\n                        return setUserRules(newUserRules);\n\n                    case 'conditions':\n                        if (typeof blockValue === 'number') {\n                            newUserRules = filterElement('conditions', newUserRules, blockValue, idNumber);\n                        }\n                        newUserRules = filterElement('conditions', newUserRules, dropResult.blockValue, idNumber);\n                        newUserRules.conditions[dropResult.blockValue as number].push({ ...newItem, _id: idNumber });\n                        return setUserRules(newUserRules);\n\n                    default:\n                        setOnUpdate(true);\n                        newUserRules = filterElement('triggers', newUserRules, dropResult.blockValue, idNumber);\n                        newUserRules.triggers.push({ ...newItem, _id: idNumber });\n                        return setUserRules(newUserRules);\n                }\n            }\n        },\n        collect: monitor => ({\n            opacity: monitor.isDragging() ? 0.4 : 1,\n            isDragging: monitor.isDragging(),\n        }),\n    });\n\n    const ref = useRef<HTMLDivElement>(null);\n\n    const [, drop] = useDrop({\n        accept: 'box',\n        canDrop: () => false,\n        hover({ _id: draggedId, acceptedBy }: { _id: number; acceptedBy: RuleBlockType }, monitor) {\n            if (!ref.current) {\n                return;\n            }\n            if (typeBlock !== acceptedBy) {\n                return;\n            }\n            const hoverBoundingRect = ref.current?.getBoundingClientRect();\n            const hoverMiddleY = (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2;\n            const clientOffset = monitor.getClientOffset();\n            const hoverClientY = (clientOffset?.y || 0) - hoverBoundingRect.top;\n\n            if (_id && draggedId !== _id) {\n                switch (acceptedBy) {\n                    case 'actions':\n                        if (blockValue === 'then' || blockValue === 'else') {\n                            const { index: overIndexActions } = findCard(_id, userRules.actions[blockValue]);\n                            if (overIndexActions !== draggedId) {\n                                moveCard(\n                                    draggedId,\n                                    overIndexActions,\n                                    userRules[acceptedBy][blockValue],\n                                    setUserRules,\n                                    userRules,\n                                    acceptedBy,\n                                    blockValue,\n                                    hoverClientY,\n                                    hoverMiddleY,\n                                );\n                            }\n                        }\n                        return;\n                    case 'conditions':\n                        if (typeof blockValue === 'number') {\n                            const { index: overIndexConditions } = findCard(_id, userRules[acceptedBy][blockValue]);\n                            if (overIndexConditions !== draggedId) {\n                                moveCard(\n                                    draggedId,\n                                    overIndexConditions,\n                                    userRules[acceptedBy][blockValue],\n                                    setUserRules,\n                                    userRules,\n                                    acceptedBy,\n                                    blockValue,\n                                    hoverClientY,\n                                    hoverMiddleY,\n                                );\n                            }\n                        }\n                        return;\n                    default: {\n                        const { index: overIndex } = findCard(_id, userRules[acceptedBy]);\n                        if (overIndex !== draggedId) {\n                            moveCard(\n                                draggedId,\n                                overIndex,\n                                userRules[acceptedBy],\n                                setUserRules,\n                                userRules,\n                                acceptedBy,\n                                undefined,\n                                hoverClientY,\n                                hoverMiddleY,\n                            );\n                        }\n                        return;\n                    }\n                }\n            }\n        },\n    });\n\n    useEffect(() => {\n        preview(getEmptyImage(), { captureDraggingState: true });\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    drag(drop(ref));\n\n    const isMobile = window.innerWidth < 600;\n\n    return (\n        <div\n            ref={isMobile && _id ? null : ref}\n            className={cls.root}\n            style={{ opacity }}\n        >\n            <div\n                className={_id ? cls.drag : null}\n                ref={_id && isMobile ? ref : null}\n            />\n            {children}\n        </div>\n    );\n};\n\nexport default DragWrapper;\n","import React from 'react';\n\nimport { Button, Dialog, DialogActions, DialogContent } from '@mui/material';\n\nimport { Check as IconOk } from '@mui/icons-material';\n\nimport { I18n } from '@iobroker/adapter-react-v5';\n\ninterface DialogHelpProps {\n    open: boolean;\n    onClose: () => void;\n}\n\nconst DialogHelp = ({ onClose, open }: DialogHelpProps): React.JSX.Element => (\n    <Dialog\n        open={open}\n        onClose={onClose}\n        aria-labelledby=\"alert-dialog-title\"\n        aria-describedby=\"alert-dialog-description\"\n    >\n        <DialogContent>\n            <div\n                style={{\n                    fontSize: '1rem',\n                    fontFamily: '\"Roboto\", \"Helvetica\", \"Arial\", sans-serif',\n                    fontWeight: 400,\n                    lineHeight: 1.5,\n                    letterSpacing: '0.00938em',\n                }}\n            >\n                <h3>{I18n.t('On condition change')}</h3>\n                <div>{I18n.t('help_on_change')}</div>\n                <h3>{I18n.t('Just check')}</h3>\n                <div>{I18n.t('help_just_check')}</div>\n            </div>\n        </DialogContent>\n        <DialogActions>\n            <Button\n                onClick={onClose}\n                color=\"primary\"\n                autoFocus\n                startIcon={<IconOk />}\n            >\n                {I18n.t('OK')}\n            </Button>\n        </DialogActions>\n    </Dialog>\n);\n\nexport default DialogHelp;\n","import React from 'react';\n\nimport { Button, Dialog, DialogActions, DialogContent, DialogContentText } from '@mui/material';\nimport { I18n } from '@iobroker/adapter-react-v5';\n\ninterface DialogConditionProps {\n    onClose: () => void;\n    open: boolean;\n}\n\nconst DialogCondition = ({ onClose, open }: DialogConditionProps): React.JSX.Element => (\n    <Dialog\n        open={open}\n        onClose={onClose}\n        aria-labelledby=\"alert-dialog-title\"\n        aria-describedby=\"alert-dialog-description\"\n    >\n        <DialogContent>\n            <DialogContentText id=\"alert-dialog-description\">\n                <h3>{I18n.t('On condition change')}</h3>\n                <div>{I18n.t('help_on_change')}</div>\n                <h3>{I18n.t('Just check')}</h3>\n                <div>{I18n.t('help_just_check')}</div>\n            </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n            <Button\n                onClick={onClose}\n                color=\"primary\"\n                autoFocus\n            >\n                {I18n.t('OK')}\n            </Button>\n        </DialogActions>\n    </Dialog>\n);\n\nexport default DialogCondition;\n","import React, { Fragment, useEffect, useState } from 'react';\nimport { type ConnectDropTarget, type XYCoord, useDrop } from 'react-dnd';\n\nimport { Select, MenuItem, IconButton } from '@mui/material';\nimport { HelpOutline as IconHelp } from '@mui/icons-material';\n\nimport {\n    type AdminConnection,\n    I18n,\n    type IobTheme,\n    type ThemeName,\n    type ThemeType,\n    Utils,\n} from '@iobroker/adapter-react-v5';\n\nimport cls from './style.module.scss';\nimport { deepCopy } from '../../helpers/deepCopy';\nimport CurrentItem from '../CurrentItem';\nimport { useStateLocal } from '../../hooks/useStateLocal';\nimport DragWrapper from '../DragWrapper';\nimport MaterialDynamicIcon from '../../helpers/MaterialDynamicIcon';\nimport DialogHelp from './DialogHelp';\nimport DialogCondition from './DialogCondition';\nimport type { BlockValue, RuleBlockDescription, RuleBlockType, RuleUserRules, RuleBlockConfig } from '../../types';\n\ninterface AdditionallyContentBlockItemsProps {\n    size: boolean;\n    blockValue: BlockValue;\n    boolean?: boolean;\n    typeBlock: RuleBlockType;\n    userRules: RuleUserRules;\n    setUserRules: (newRules: RuleUserRules) => void;\n    animation?: boolean;\n    setTourStep?: (step: number) => void;\n    tourStep?: number;\n    isTourOpen?: boolean;\n    theme: IobTheme;\n    themeType: ThemeType;\n    themeName: ThemeName;\n}\n\nconst AdditionallyContentBlockItems = ({\n    size,\n    blockValue,\n    boolean,\n    typeBlock,\n    userRules,\n    setUserRules,\n    animation,\n    setTourStep,\n    tourStep,\n    isTourOpen,\n    theme,\n    themeType,\n    themeName,\n}: AdditionallyContentBlockItemsProps): React.JSX.Element => {\n    const [checkItem, setCheckItem] = useState(false);\n    const [canDropCheck, setCanDropCheck] = useState(false);\n    const [checkId, setCheckId] = useState(false);\n    const [hoverBlock, setHoverBlock] = useState('');\n\n    if (boolean === undefined) {\n        boolean = true;\n    }\n\n    const options: [unknown, ConnectDropTarget] = useDrop<RuleBlockDescription & { _id: number }>({\n        accept: 'box',\n        drop: () => ({ blockValue }),\n        hover: ({ acceptedBy, _id }, monitor) => {\n            setCheckItem(acceptedBy === typeBlock);\n            setCheckId(!!_id);\n            setHoverBlock((monitor.getHandlerId() as string) || '');\n        },\n        canDrop: ({ acceptedBy }) => {\n            setCanDropCheck(acceptedBy === typeBlock);\n            return acceptedBy === typeBlock;\n        },\n        collect: monitor => ({\n            isOver: monitor.isOver(),\n            canDrop: monitor.getItem()?.acceptedBy === typeBlock,\n            offset: monitor.getClientOffset(),\n            targetId: monitor.getHandlerId(),\n        }),\n    });\n\n    const pr: {\n        canDrop: boolean;\n        isOver: boolean;\n        offset: XYCoord | null;\n        targetId: string;\n    } = options[0] as {\n        canDrop: boolean;\n        isOver: boolean;\n        offset: XYCoord | null;\n        targetId: string;\n    };\n\n    const { canDrop, isOver, offset, targetId } = pr;\n    const drop = options[1];\n\n    useEffect(() => {\n        setHoverBlock('');\n    }, [offset]);\n\n    const isActive = canDrop && isOver;\n    let backgroundColor = '';\n    if (isActive) {\n        backgroundColor = checkItem ? '#00fb003d' : '#fb00002e';\n    } else if (canDrop) {\n        backgroundColor = canDropCheck ? '#00fb003d' : '#fb00002e';\n    } else if (offset) {\n        backgroundColor = targetId === hoverBlock ? '#fb00002e' : '';\n    }\n\n    let blocks: RuleBlockConfig[];\n    if (typeBlock === 'actions') {\n        blocks = userRules.actions[blockValue as 'else' | 'then'];\n    } else if (typeBlock === 'conditions') {\n        blocks = userRules.conditions[blockValue as number];\n    } else {\n        blocks = userRules.triggers;\n    }\n\n    return (\n        <div\n            ref={drop}\n            style={{ backgroundColor }}\n            className={`${Utils.clsx(cls.contentBlockItem, size && cls.addClassHeight)} ${boolean ? (animation ? cls.contentHeightOn : null) : cls.contentHeightOff}`}\n        >\n            <div className={cls.wrapperMargin}>\n                {blocks.map((el: RuleBlockConfig) => (\n                    <DragWrapper\n                        typeBlock={typeBlock}\n                        key={el._id}\n                        {...el}\n                        blockValue={blockValue}\n                        allProperties={el}\n                        userRules={userRules}\n                        setUserRules={setUserRules}\n                    >\n                        <CurrentItem\n                            {...el}\n                            isTourOpen={isTourOpen}\n                            setTourStep={setTourStep}\n                            tourStep={tourStep}\n                            settings={el}\n                            blockValue={blockValue}\n                            userRules={userRules}\n                            setUserRules={setUserRules}\n                            theme={theme}\n                            themeType={themeType}\n                            themeName={themeName}\n                        />\n                    </DragWrapper>\n                ))}\n                <div\n                    style={\n                        isActive && checkItem && !checkId\n                            ? {\n                                  height: document.getElementById('height')?.clientHeight || 200,\n                              }\n                            : undefined\n                    }\n                    className={`${cls.emptyBlockStyle} ${isActive && checkItem && !checkId ? cls.emptyBlock : cls.emptyBlockNone}`}\n                />\n            </div>\n        </div>\n    );\n};\n\ninterface ContentBlockItemsProps {\n    size: boolean;\n    typeBlock: RuleBlockType;\n    name: string | React.JSX.Element;\n    nameAdditionally?: string;\n    additionally?: boolean;\n    border?: boolean;\n    userRules: RuleUserRules;\n    setUserRules: (newRules: RuleUserRules) => void;\n    iconName: string;\n    adapter?: string;\n    socket: AdminConnection;\n    setTourStep: (step: number) => void;\n    tourStep: number;\n    isTourOpen: boolean;\n    theme: IobTheme;\n    themeType: ThemeType;\n    themeName: ThemeName;\n}\n\nconst ContentBlockItems = ({\n    size,\n    typeBlock,\n    name,\n    nameAdditionally,\n    additionally,\n    border,\n    userRules,\n    setUserRules,\n    iconName,\n    adapter,\n    socket,\n    setTourStep,\n    tourStep,\n    isTourOpen,\n    theme,\n    themeType,\n    themeName,\n}: ContentBlockItemsProps): React.JSX.Element => {\n    const [additionallyClickItems, setAdditionallyClickItems, checkLocal] = useStateLocal<\n        { _id: number; open: boolean }[] | boolean\n    >(typeBlock === 'actions' ? false : [], `additionallyClickItems_${typeBlock}`);\n\n    const [showHelp, setShowHelp] = useState(false);\n    const [showConditionDialog, setShowConditionDialog] = useState(false);\n\n    useEffect(() => {\n        if (\n            typeBlock === 'conditions' &&\n            (additionallyClickItems as { _id: number; open: boolean }[])?.length !== userRules.conditions.length - 1\n        ) {\n            const newArray: { _id: number; open: boolean }[] = [];\n            userRules.conditions.forEach((el, idx) => {\n                if (idx > 0) {\n                    newArray.push({\n                        _id: Date.now(),\n                        open: true,\n                    });\n                }\n            });\n            setAdditionallyClickItems([...(additionallyClickItems as { _id: number; open: boolean }[]), ...newArray]);\n        }\n        if (typeBlock === 'actions' && !checkLocal && userRules.actions.else.length) {\n            setAdditionallyClickItems(true);\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    const [animation, setAnimation] = useState<boolean | number>(false);\n\n    return (\n        <div\n            className={`${Utils.clsx(cls.mainBlockItemRules, size && cls.addClassOverflow)} ${border && !size ? cls.border : null}`}\n        >\n            <span\n                id=\"width\"\n                className={cls.nameBlockItems}\n            >\n                <MaterialDynamicIcon\n                    iconName={iconName}\n                    className={cls.iconThemCard}\n                    adapter={adapter}\n                    socket={socket}\n                />\n                {name}\n            </span>\n            {typeBlock === 'conditions' ? (\n                <div style={{ width: '100%' }}>\n                    <Select\n                        variant=\"standard\"\n                        className={cls.selectOnChange}\n                        value={userRules.justCheck || false}\n                        onChange={e => {\n                            const _userRules = deepCopy('conditions', userRules);\n                            _userRules.justCheck = e.target.value === 'true';\n                            setUserRules(_userRules);\n                        }}\n                    >\n                        <MenuItem value=\"false\">{I18n.t('on condition change')}</MenuItem>\n                        <MenuItem value=\"true\">{I18n.t('just check')}</MenuItem>\n                    </Select>\n                    <IconButton\n                        size=\"small\"\n                        title={I18n.t('Explanation')}\n                        className={cls.selectOnChangeHelp}\n                        onClick={() => setShowHelp(true)}\n                    >\n                        <IconHelp className={cls.selectOnChangeHelpIcon} />\n                    </IconButton>\n                </div>\n            ) : null}\n            <AdditionallyContentBlockItems\n                setTourStep={setTourStep}\n                tourStep={tourStep}\n                isTourOpen={isTourOpen}\n                blockValue={typeBlock === 'actions' ? 'then' : typeBlock === 'conditions' ? 0 : typeBlock}\n                typeBlock={typeBlock}\n                setUserRules={setUserRules}\n                userRules={userRules}\n                theme={theme}\n                themeName={themeName}\n                themeType={themeType}\n                size={size}\n            />\n            {additionally &&\n                [...Array(typeBlock === 'actions' ? 1 : userRules.conditions.length - 1)].map((e, index) => {\n                    const booleanAdditionally = (value = index): boolean =>\n                        typeBlock === 'actions'\n                            ? !!additionallyClickItems\n                            : !!(additionallyClickItems as { _id: number; open: boolean }[]).find(\n                                  (el, idx) => idx === value && el.open,\n                              );\n\n                    return (\n                        <Fragment key={`${index}_block_${typeBlock}`}>\n                            <div\n                                onClick={() => {\n                                    if (typeBlock === 'actions') {\n                                        setAdditionallyClickItems(!additionallyClickItems);\n                                        return null;\n                                    }\n                                    let newAdditionally: { _id: number; open: boolean }[] = JSON.parse(\n                                        JSON.stringify(additionallyClickItems),\n                                    );\n                                    if (userRules.conditions[index + 1].length) {\n                                        newAdditionally[index].open = !newAdditionally[index].open;\n                                        setAdditionallyClickItems(newAdditionally);\n                                        return null;\n                                    }\n\n                                    newAdditionally = newAdditionally.filter((_el, idx) => idx !== index);\n\n                                    setAdditionallyClickItems(newAdditionally);\n\n                                    setAnimation(index);\n\n                                    setTimeout(() => {\n                                        setAnimation(false);\n                                        setUserRules({\n                                            ...userRules,\n                                            conditions: [\n                                                ...userRules.conditions.filter((el, idx) => idx !== index + 1),\n                                            ],\n                                        });\n                                    }, 250);\n                                }}\n                                key={index}\n                                className={cls.blockCardAdd}\n                            >\n                                {booleanAdditionally() ? '-' : '+'}\n                                <div className={cls.cardAdd}>{nameAdditionally}</div>\n                            </div>\n                            <AdditionallyContentBlockItems\n                                blockValue={\n                                    typeBlock === 'actions'\n                                        ? 'else'\n                                        : typeBlock === 'conditions'\n                                          ? index + 1\n                                          : typeBlock\n                                }\n                                typeBlock={typeBlock}\n                                setUserRules={setUserRules}\n                                userRules={userRules}\n                                boolean={booleanAdditionally()}\n                                animation={Boolean(animation === index)}\n                                size={size}\n                                theme={theme}\n                                themeName={themeName}\n                                themeType={themeType}\n                            />\n                        </Fragment>\n                    );\n                })}\n            {additionally && typeBlock === 'conditions' && (\n                <div\n                    onClick={() => {\n                        setAdditionallyClickItems([\n                            ...(additionallyClickItems as { _id: number; open: boolean }[]),\n                            {\n                                _id: Date.now(),\n                                open: true,\n                            },\n                        ]);\n                        setUserRules({ ...userRules, conditions: [...userRules.conditions, []] });\n                        setAnimation(userRules.conditions.length - 1);\n                        setTimeout(() => setAnimation(false), 1000);\n                    }}\n                    className={cls.blockCardAdd}\n                >\n                    {'+'}\n                    <div className={cls.cardAdd}>{nameAdditionally}</div>\n                </div>\n            )}\n            <DialogHelp\n                open={showHelp}\n                onClose={() => setShowHelp(false)}\n            />\n            <DialogCondition\n                open={showConditionDialog}\n                onClose={() => setShowConditionDialog(false)}\n            />\n        </div>\n    );\n};\n\nexport default ContentBlockItems;\n","// extracted by mini-css-extract-plugin\nexport default {\"menuRules\":\"style_menuRules__2gQIk\",\"switchesRenderWrapper\":\"style_switchesRenderWrapper__GP-2h\",\"menuOff\":\"style_menuOff__xpsnS\",\"menuTitle\":\"style_menuTitle__WrXx8\",\"marginAuto\":\"style_marginAuto__SCkwH\",\"inputWidth\":\"style_inputWidth__2fvCR\",\"menuWrapper\":\"style_menuWrapper__JWY5H\",\"hamburgerWrapper\":\"style_hamburgerWrapper__+vWZD\",\"hamburgerOff\":\"style_hamburgerOff__Qu2eq\",\"nothingFound\":\"style_nothingFound__-PnAv\",\"resetSearch\":\"style_resetSearch__xxFDo\",\"controlPanel\":\"style_controlPanel__g4kjp\",\"controlPanelAppBar\":\"style_controlPanelAppBar__V73r5\",\"addClassMenu\":\"style_addClassMenu__NKZFb\",\"addClassBackground\":\"style_addClassBackground__g8fqm\",\"addClassPosition\":\"style_addClassPosition__TBLMQ\"};","import React from 'react';\nimport CardMenu from '.';\nimport { deepCopy } from '../../helpers/deepCopy';\nimport DragWrapper from '../DragWrapper';\nimport { STEPS } from '../../helpers/Tour';\nimport type { AdminConnection } from '@iobroker/adapter-react-v5';\nimport type { BlockValue, RuleBlockDescription, RuleUserRules } from '../../types';\n\ninterface CustomDragItemProps {\n    adapter: string | undefined;\n    allProperties: RuleBlockDescription;\n    icon: string | undefined;\n    id: string;\n    isActive: boolean;\n    isTourOpen: boolean;\n    name: string;\n    onTouchMove: (e: React.TouchEvent) => void;\n    setTourStep: (step: number) => void;\n    setUserRules: (value: RuleUserRules) => void;\n    socket: AdminConnection | null;\n    tourStep: number;\n    userRules: RuleUserRules;\n}\n\nconst CustomDragItem = (props: CustomDragItemProps): React.JSX.Element => {\n    const {\n        allProperties,\n        allProperties: { acceptedBy, id },\n        setUserRules,\n        userRules,\n        setTourStep,\n        tourStep,\n        isTourOpen,\n        onTouchMove,\n        isActive,\n    } = props;\n\n    return (\n        <DragWrapper\n            allProperties={allProperties}\n            id={allProperties.id}\n            isActive={isActive}\n            setUserRules={setUserRules}\n            userRules={userRules}\n        >\n            <CardMenu\n                onDoubleClick={() => {\n                    if (isTourOpen && tourStep === STEPS.addScheduleByDoubleClick && id === 'TriggerScheduleBlock') {\n                        setTourStep(STEPS.openTagsMenu);\n                    }\n                    if (isTourOpen && tourStep === STEPS.addActionPrintText && id === 'ActionPrintText') {\n                        setTourStep(STEPS.showJavascript);\n                    }\n                    const _id = Date.now();\n                    let blockValue: BlockValue;\n                    switch (acceptedBy) {\n                        case 'actions':\n                            blockValue = 'then';\n                            break;\n\n                        case 'conditions':\n                            blockValue = userRules[acceptedBy].length - 1;\n                            break;\n\n                        default:\n                            break;\n                    }\n                    const newUserRules = deepCopy(acceptedBy, userRules, blockValue);\n                    const newItem = { id, _id, acceptedBy };\n                    if (blockValue !== undefined) {\n                        if (acceptedBy === 'actions') {\n                            newUserRules.actions[blockValue as 'then' | 'else'].push({ ...newItem });\n                        } else if (acceptedBy === 'conditions') {\n                            newUserRules.conditions[blockValue as number].push({ ...newItem });\n                        }\n                    } else {\n                        newUserRules.triggers.push({ ...newItem });\n                    }\n                    setUserRules(newUserRules);\n                }}\n                {...props}\n                {...allProperties}\n                onTouchMove={onTouchMove}\n            />\n        </DragWrapper>\n    );\n};\n\nexport default CustomDragItem;\n","// extracted by mini-css-extract-plugin\nexport default {\"menu_wrapper\":\"hamburgerMenu_menu_wrapper__js9Yb\",\"hamburgerMenu\":\"hamburgerMenu_hamburgerMenu__2SdYm\",\"animate\":\"hamburgerMenu_animate__uwFrD\",\"menu_conatiner_wrapper\":\"hamburgerMenu_menu_conatiner_wrapper__AUPG4\"};","import React from 'react';\n\nimport cls from './hamburgerMenu.module.scss';\n\ninterface HamburgerMenuProps {\n    bool: boolean;\n}\n\nfunction HamburgerMenu({ bool }: HamburgerMenuProps): React.JSX.Element {\n    return <div className={`${cls.hamburgerMenu} ${bool ? cls.animate : ''}`} />;\n}\n\nexport default HamburgerMenu;\n","import React, { Fragment, useContext, useEffect } from 'react';\n\nimport { AppBar, ClickAwayListener, Tab, Tabs } from '@mui/material';\n\nimport { I18n, Utils } from '@iobroker/adapter-react-v5';\n\nimport cls from './style.module.scss';\n\nimport CustomInput from '../CustomInput';\nimport CustomDragItem from '../CardMenu/CustomDragItem';\nimport HamburgerMenu from '../HamburgerMenu';\nimport { useStateLocal } from '../../hooks/useStateLocal';\nimport { ContextWrapperCreate } from '../ContextWrapper';\nimport MaterialDynamicIcon from '../../helpers/MaterialDynamicIcon';\nimport { STEPS } from '../../helpers/Tour';\nimport type { RuleBlockDescription, RuleBlockType, RuleUserRules } from '@/Components/RulesEditor/types';\nimport type { GenericBlock } from '@/Components/RulesEditor/components/GenericBlock';\n\ninterface MenuProps {\n    addClass: Record<number, boolean>;\n    setAllBlocks: (blocks: (typeof GenericBlock<any>)[]) => void;\n    allBlocks: (typeof GenericBlock<any>)[];\n    userRules: RuleUserRules;\n    onChangeBlocks: (newRules: RuleUserRules) => void;\n    setTourStep: (step: number) => void;\n    tourStep: number;\n    isTourOpen: boolean;\n}\n\nconst Menu = ({\n    addClass,\n    setAllBlocks,\n    allBlocks,\n    userRules,\n    onChangeBlocks,\n    setTourStep,\n    tourStep,\n    isTourOpen,\n}: MenuProps): React.JSX.Element => {\n    const { blocks, socket } = useContext(ContextWrapperCreate);\n    const [hamburgerOnOff, setHamburgerOnOff] = useStateLocal<boolean>(false, 'hamburgerOnOff');\n    const [filter, setFilter] = useStateLocal<{\n        text: string;\n        type: RuleBlockType;\n        index: number;\n    }>(\n        {\n            text: '',\n            type: 'triggers',\n            index: 0,\n        },\n        'filterControlPanel',\n    );\n\n    const setBlocksFunc = (text = filter.text, typeFunc = filter.type): void => {\n        if (!blocks) {\n            return;\n        }\n        let newAllBlocks: (typeof GenericBlock<any>)[] = [...blocks];\n        newAllBlocks = newAllBlocks.filter(el => {\n            if (!text) {\n                return true;\n            }\n            const { name }: RuleBlockDescription = el.getStaticData();\n            return name && I18n.t(name).toLowerCase().includes(text.toLowerCase());\n        });\n        newAllBlocks = newAllBlocks.filter(el => typeFunc === el.getStaticData().acceptedBy);\n        setAllBlocks(newAllBlocks);\n    };\n\n    const handleChange = (_event: React.SyntheticEvent, newValue: number): void => {\n        if (isTourOpen && newValue === 0 && tourStep === STEPS.selectTriggers) {\n            setTourStep(STEPS.addScheduleByDoubleClick);\n        }\n\n        if (isTourOpen && newValue === 2 && tourStep === STEPS.selectActions) {\n            setTourStep(STEPS.addActionPrintText);\n        }\n\n        setFilter({\n            ...filter,\n            index: newValue,\n            type: (['triggers', 'conditions', 'actions'] as RuleBlockType[])[newValue],\n        });\n\n        setBlocksFunc(filter.text, (['triggers', 'conditions', 'actions'] as RuleBlockType[])[newValue]);\n    };\n\n    const a11yProps = (index: number): { id: string; 'aria-controls': string } => ({\n        id: `scrollable-force-tab-${index}`,\n        'aria-controls': `scrollable-force-tabpanel-${index}`,\n    });\n\n    useEffect(() => {\n        setBlocksFunc();\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [blocks]);\n\n    return (\n        <ClickAwayListener\n            mouseEvent={false}\n            touchEvent=\"onTouchStart\"\n            onClickAway={() => setHamburgerOnOff(true)}\n        >\n            <div className={Utils.clsx(cls.menuWrapper, addClass[1035] && cls.addClassMenu)}>\n                <div\n                    className={`${cls.hamburgerWrapper} ${hamburgerOnOff ? cls.hamburgerOff : null}`}\n                    onClick={() => setHamburgerOnOff(!hamburgerOnOff)}\n                >\n                    <HamburgerMenu bool={!hamburgerOnOff} />\n                </div>\n                <div\n                    className={`${Utils.clsx(cls.menuRules, addClass[1035] && cls.addClassBackground, addClass[835] && cls.addClassPosition)} ${hamburgerOnOff ? cls.menuOff : null}`}\n                >\n                    <div className={cls.controlPanel}>\n                        <AppBar\n                            className={cls.controlPanelAppBar}\n                            position=\"static\"\n                        >\n                            <Tabs\n                                value={filter.index}\n                                onChange={handleChange}\n                            >\n                                <Tab\n                                    className=\"blocks-triggers\"\n                                    title={I18n.t('Triggers')}\n                                    icon={<MaterialDynamicIcon iconName=\"FlashOn\" />}\n                                    {...a11yProps(0)}\n                                />\n                                <Tab\n                                    title={I18n.t('Conditions')}\n                                    className=\"blocks-conditions\"\n                                    icon={<MaterialDynamicIcon iconName=\"Help\" />}\n                                    {...a11yProps(1)}\n                                />\n                                <Tab\n                                    title={I18n.t('Actions')}\n                                    className=\"blocks-actions\"\n                                    icon={<MaterialDynamicIcon iconName=\"PlayForWork\" />}\n                                    {...a11yProps(2)}\n                                />\n                            </Tabs>\n                        </AppBar>\n                    </div>\n                    <div className={cls.switchesRenderWrapper}>\n                        <span>\n                            {allBlocks.map(el => {\n                                const { name, id, icon, adapter } = el.getStaticData();\n                                return (\n                                    <Fragment key={id}>\n                                        <CustomDragItem\n                                            adapter={adapter}\n                                            allProperties={el.getStaticData()}\n                                            icon={icon}\n                                            id={id}\n                                            isActive={false}\n                                            isTourOpen={isTourOpen}\n                                            name={name}\n                                            onTouchMove={() => setHamburgerOnOff(true)}\n                                            setTourStep={setTourStep}\n                                            setUserRules={onChangeBlocks}\n                                            socket={socket}\n                                            tourStep={tourStep}\n                                            userRules={userRules}\n                                        />\n                                    </Fragment>\n                                );\n                            })}\n                            {!allBlocks.length && (\n                                <div className={cls.nothingFound}>\n                                    {I18n.t('Nothing found')}...\n                                    <div\n                                        className={cls.resetSearch}\n                                        onClick={() => {\n                                            setFilter({\n                                                ...filter,\n                                                text: '',\n                                            });\n                                            setBlocksFunc('');\n                                        }}\n                                    >\n                                        {I18n.t('reset search')}\n                                    </div>\n                                </div>\n                            )}\n                        </span>\n                    </div>\n                    <div className={Utils.clsx(cls.menuTitle, cls.marginAuto)} />\n                    <CustomInput\n                        className={cls.inputWidth}\n                        fullWidth\n                        customValue\n                        value={filter.text}\n                        size=\"small\"\n                        autoComplete=\"off\"\n                        label={I18n.t('search')}\n                        variant=\"outlined\"\n                        onChange={value => {\n                            setFilter({ ...filter, text: value as string });\n                            setBlocksFunc(value as string);\n                        }}\n                    />\n                </div>\n            </div>\n        </ClickAwayListener>\n    );\n};\n\nexport default Menu;\n","import React, { useCallback, useContext, useEffect, useRef, useState } from 'react';\n\nimport { I18n, type IobTheme, type ThemeName, type ThemeType, Utils } from '@iobroker/adapter-react-v5';\n\nimport cls from './style.module.scss';\n\nimport { CustomDragLayer } from './components/CustomDragLayer';\nimport ContentBlockItems from './components/ContentBlockItems';\nimport { ContextWrapperCreate } from './components/ContextWrapper';\nimport { code2json, json2code } from './helpers/Compile';\nimport Menu from './components/Menu';\nimport './helpers/stylesVariables.scss';\n\nimport DialogExport from '../../Dialogs/Export';\nimport DialogImport from '../../Dialogs/Import';\nimport type { DebugMessage, RuleUserRules } from './types';\nimport type { GenericBlock } from '@/Components/RulesEditor/components/GenericBlock';\n\ninterface RulesEditorProps {\n    onChange: (code: string) => void;\n    code: string;\n    scriptId: string;\n    setTourStep: (step: number) => void;\n    tourStep: number;\n    command: string;\n    themeType: ThemeType;\n    themeName: ThemeName;\n    theme: IobTheme;\n    searchText: string;\n    resizing: boolean;\n    isTourOpen: boolean;\n    changed: boolean;\n    running: boolean;\n}\n\nlet gDebugMessages: DebugMessage[] = [];\n\nconst RulesEditor = ({\n    code,\n    onChange,\n    themeName,\n    themeType,\n    theme,\n    setTourStep,\n    tourStep,\n    isTourOpen,\n    command,\n    scriptId,\n    changed,\n    running,\n}: RulesEditorProps): React.JSX.Element | null => {\n    const { blocks, socket, setOnUpdate, setOnDebugMessage, setEnableSimulation } = useContext(ContextWrapperCreate);\n    const [allBlocks, setAllBlocks] = useState<(typeof GenericBlock<any>)[]>([]);\n    const [userRules, setUserRules] = useState(code2json(code));\n    const [importExport, setImportExport] = useState('');\n    const [modal, setModal] = useState(false);\n\n    useEffect(() => {\n        let _jsInstance: string | undefined;\n        let _jsAlive: boolean;\n        const aliveHandler = (id: string, state: ioBroker.State | null | undefined): void => {\n            if (id === `${_jsInstance}.alive`) {\n                if (_jsAlive !== state?.val) {\n                    _jsAlive = !!state?.val;\n                    //setJsAlive(_jsAlive);\n                    _jsAlive &&\n                        _jsInstance &&\n                        void socket?.sendTo(_jsInstance.replace(/^system\\.adapter\\./, ''), 'rulesOn', scriptId);\n                }\n            }\n        };\n\n        const handler = (_id: string, obj: ioBroker.Object | null | undefined): void => {\n            if (!socket) {\n                return;\n            }\n            if (_jsInstance !== (obj as ioBroker.ScriptObject)?.common?.engine) {\n                if (_jsInstance) {\n                    socket.unsubscribeState(`${_jsInstance}.alive`, aliveHandler);\n                    if (_jsAlive) {\n                        void socket.sendTo(_jsInstance.replace(/^system\\.adapter\\./, ''), 'rulesOn', scriptId);\n                    }\n                }\n                _jsInstance = obj?.common?.engine;\n                if (_jsInstance) {\n                    _jsInstance && void socket.subscribeState(`${_jsInstance}.alive`, aliveHandler);\n                }\n            }\n        };\n\n        const handlerStatus = (_id: string, state: ioBroker.State | null | undefined): void => {\n            if (state) {\n                try {\n                    const msg: DebugMessage = JSON.parse(state.val as string);\n                    const now = Date.now();\n                    // if not from previous session\n                    if (msg.ruleId === scriptId && now - msg.ts < 1000) {\n                        const messages = [...gDebugMessages, { blockId: msg.blockId, data: msg.data, ts: msg.ts }];\n                        // Delete all messages older than 5 seconds and if the length is bigger than 200\n                        if (messages.length > 200) {\n                            messages.splice(0, 200 - messages.length);\n                        }\n                        for (let m = messages.length - 1; m >= 0; m--) {\n                            if (messages[m].ts < now - 5000) {\n                                messages.splice(0, m);\n                                break;\n                            }\n                        }\n                        console.log(`Debug1: ${JSON.stringify(gDebugMessages)}`);\n                        console.log(`Debug2: ${JSON.stringify(messages)}`);\n\n                        gDebugMessages = messages;\n                        setOnDebugMessage(messages);\n                    }\n                } catch {\n                    console.error(`Cannot parse: ${state.val}`);\n                }\n            }\n        };\n\n        void socket?.getObject(scriptId).then(obj => {\n            _jsInstance = obj?.common?.engine;\n            void socket.subscribeObject(scriptId, handler);\n            if (_jsInstance) {\n                // setJsInstance(_jsInstance);\n                void socket.subscribeState(`${_jsInstance}.alive`, aliveHandler);\n                void socket.subscribeState(\n                    `${_jsInstance.replace(/^system\\.adapter\\./, '')}.debug.rules`,\n                    handlerStatus,\n                );\n            }\n        });\n\n        return function cleanup() {\n            socket?.unsubscribeState(scriptId, aliveHandler);\n            if (_jsInstance) {\n                void socket?.unsubscribeObject(`${_jsInstance}.alive`, handler);\n                if (_jsAlive) {\n                    void socket?.sendTo(_jsInstance.replace(/^system\\.adapter\\./, ''), 'rulesOff', scriptId);\n                }\n                socket?.unsubscribeState(`${_jsInstance.replace(/^system\\.adapter\\./, '')}.debug.rules`, handlerStatus);\n            }\n        };\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    useEffect(() => {\n        setEnableSimulation(!changed && running);\n    }, [changed, running, setEnableSimulation]);\n\n    useEffect(() => {\n        if (command) {\n            setImportExport(command);\n            if (!modal) {\n                setModal(true);\n            }\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [command]);\n\n    useEffect(() => {\n        const newUserRules = code2json(code);\n        if (JSON.stringify(newUserRules) !== JSON.stringify(userRules)) {\n            setUserRules(newUserRules);\n            setOnUpdate(true);\n        }\n        // eslint-disable-next-line\n    }, [code]);\n\n    useEffect(() => {\n        document.getElementsByTagName('HTML')[0].className = themeName || 'blue';\n    }, [themeName]);\n\n    const onChangeBlocks = useCallback(\n        (json: RuleUserRules): void => {\n            setUserRules(json);\n            if (blocks) {\n                onChange(json2code(json, blocks));\n            }\n        },\n        [blocks, onChange],\n    );\n\n    const ref = useRef<HTMLDivElement>(null);\n    const [addClass, setAddClass] = useState({ 835: false, 1035: false });\n    useEffect(() => {\n        if (ref.current) {\n            if (ref.current.clientWidth <= 1035) {\n                setAddClass({ 835: false, 1035: true });\n            }\n            if (ref.current.clientWidth <= 835) {\n                setAddClass({ 1035: true, 835: true });\n            }\n            if (ref.current.clientWidth > 1035) {\n                setAddClass({ 835: false, 1035: false });\n            }\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [ref.current?.clientWidth || 0]);\n\n    if (!blocks || !socket) {\n        return null;\n    }\n\n    return (\n        <div\n            key=\"rulesEditor\"\n            className={cls.wrapperRules}\n            ref={ref}\n        >\n            <CustomDragLayer\n                allBlocks={allBlocks}\n                socket={socket}\n            />\n            {modal ? (\n                importExport === 'export' ? (\n                    <DialogExport\n                        scriptId={scriptId}\n                        themeType={themeType}\n                        onClose={() => setModal(false)}\n                        text={JSON.stringify(userRules, null, 2)}\n                    />\n                ) : (\n                    <DialogImport\n                        onClose={text => {\n                            setModal(false);\n                            if (text) {\n                                onChangeBlocks(JSON.parse(text));\n                            }\n                        }}\n                    />\n                )\n            ) : null}\n            {\n                <div className={Utils.clsx(cls.rootWrapper, addClass[835] && cls.addClass)}>\n                    <Menu\n                        setAllBlocks={setAllBlocks}\n                        allBlocks={allBlocks}\n                        userRules={userRules}\n                        onChangeBlocks={onChangeBlocks}\n                        setTourStep={setTourStep}\n                        tourStep={tourStep}\n                        addClass={addClass}\n                        isTourOpen={isTourOpen}\n                    />\n                    <ContentBlockItems\n                        socket={socket}\n                        setUserRules={onChangeBlocks}\n                        userRules={userRules}\n                        isTourOpen={isTourOpen}\n                        setTourStep={setTourStep}\n                        tourStep={tourStep}\n                        name={`${I18n.t('when')}...`}\n                        typeBlock=\"triggers\"\n                        iconName=\"FlashOn\"\n                        size={addClass[835]}\n                        themeType={themeType}\n                        themeName={themeName}\n                        theme={theme}\n                    />\n                    <ContentBlockItems\n                        socket={socket}\n                        setUserRules={onChangeBlocks}\n                        isTourOpen={isTourOpen}\n                        setTourStep={setTourStep}\n                        tourStep={tourStep}\n                        userRules={userRules}\n                        name={`...${I18n.t('and')}...`}\n                        typeBlock=\"conditions\"\n                        iconName=\"Help\"\n                        nameAdditionally={I18n.t('or')}\n                        additionally\n                        border\n                        size={addClass[835]}\n                        themeType={themeType}\n                        themeName={themeName}\n                        theme={theme}\n                    />\n                    <ContentBlockItems\n                        socket={socket}\n                        setUserRules={onChangeBlocks}\n                        isTourOpen={isTourOpen}\n                        setTourStep={setTourStep}\n                        tourStep={tourStep}\n                        userRules={userRules}\n                        name={`...${I18n.t('then')}`}\n                        typeBlock=\"actions\"\n                        iconName=\"PlayForWork\"\n                        nameAdditionally={I18n.t('else')}\n                        additionally\n                        size={addClass[835]}\n                        themeType={themeType}\n                        themeName={themeName}\n                        theme={theme}\n                    />\n                </div>\n            }\n        </div>\n    );\n};\n\nexport default RulesEditor;\n","import React from 'react';\nimport ScriptEditorComponent from '../ScriptEditorVanilaMonaco';\nimport type { AdminConnection, ThemeName, ThemeType } from '@iobroker/adapter-react-v5';\n\nimport type { DebuggerLocation, SetBreakpointParameterType } from './types';\n\nconst styles: Record<string, React.CSSProperties> = {\n    editorDiv: {\n        height: '100%',\n        width: '100%',\n        overflow: 'hidden',\n        position: 'relative',\n    },\n};\n\ninterface EditorProps {\n    runningInstances: Record<string, boolean>;\n    socket: AdminConnection;\n    sourceId: string | null;\n    script: string;\n    scriptName: string;\n    adapterName: string;\n    paused: boolean;\n    breakpoints: SetBreakpointParameterType[];\n    location: DebuggerLocation | null;\n    themeType: ThemeType;\n    themeName: ThemeName;\n    onToggleBreakpoint: (i: number) => void;\n}\n\ninterface EditorState {\n    lines: string[];\n}\n\nclass Editor extends React.Component<EditorProps, EditorState> {\n    constructor(props: EditorProps) {\n        super(props);\n\n        this.state = {\n            lines: (this.props.script || '').split(/\\r\\n|\\n/),\n        };\n    }\n\n    render(): React.JSX.Element {\n        return (\n            <div\n                style={styles.editorDiv}\n                key=\"scriptEditorDiv2\"\n            >\n                <ScriptEditorComponent\n                    key=\"scriptEditor2\"\n                    name={this.props.scriptName}\n                    adapterName={this.props.adapterName}\n                    readOnly\n                    code={this.props.script || ''}\n                    isDark={this.props.themeType === 'dark'}\n                    socket={this.props.socket}\n                    runningInstances={this.props.runningInstances}\n                    language={'javascript'}\n                    breakpoints={this.props.breakpoints}\n                    location={this.props.paused ? this.props.location : null}\n                    onToggleBreakpoint={i => this.props.onToggleBreakpoint(i)}\n                />\n            </div>\n        );\n    }\n}\n\nexport default Editor;\n","import React from 'react';\n\nimport { Box, IconButton } from '@mui/material';\n\nimport {\n    MdContentCopy as IconCopy,\n    MdDeleteForever as IconDelete,\n    MdVerticalAlignBottom as IconBottom,\n} from 'react-icons/md';\n\nimport { I18n, type IobTheme, Utils } from '@iobroker/adapter-react-v5';\n\nconst TOOLBOX_WIDTH = 34;\n\nconst styles: Record<string, any> = {\n    logBox: {\n        width: '100%',\n        height: '100%',\n        position: 'relative',\n        overflow: 'hidden',\n    },\n    logBoxInner: (theme: IobTheme): React.CSSProperties => ({\n        display: 'inline-block',\n        color: theme.palette.mode === 'dark' ? 'white' : 'black',\n        width: `calc(100% - ${TOOLBOX_WIDTH}px)`,\n        height: '100%',\n        // marginLeft: TOOLBOX_WIDTH,\n        overflow: 'auto',\n        position: 'relative',\n        verticalAlign: 'top',\n    }),\n    info: (theme: IobTheme): React.CSSProperties => ({\n        background: theme.palette.mode === 'dark' ? 'darkgrey' : 'lightgrey',\n        color: theme.palette.mode === 'dark' ? 'black' : 'black',\n    }),\n    error: (theme: IobTheme): React.CSSProperties => ({\n        background: '#FF0000',\n        color: theme.palette.mode === 'dark' ? 'black' : 'white',\n    }),\n    warn: (theme: IobTheme): React.CSSProperties => ({\n        background: '#FF8000',\n        color: theme.palette.mode === 'dark' ? 'black' : 'white',\n    }),\n    debug: (theme: IobTheme): React.CSSProperties => ({\n        background: 'gray',\n        opacity: 0.8,\n        color: theme.palette.mode === 'dark' ? 'black' : 'white',\n    }),\n    silly: (theme: IobTheme): React.CSSProperties => ({\n        background: 'gray',\n        opacity: 0.6,\n        color: theme.palette.mode === 'dark' ? 'black' : 'white',\n    }),\n    table: {\n        fontFamily: 'monospace',\n        width: '100%',\n    },\n    toolbox: {\n        //position: 'absolute',\n        //top: 0,\n        //left: 0,\n        //marginLeft: 2,\n        width: TOOLBOX_WIDTH,\n        height: '100%',\n        boxShadow:\n            '2px 0px 4px -1px rgba(0, 0, 0, 0.2), 4px 0px 5px 0px rgba(0, 0, 0, 0.14), 1px 0px 10px 0px rgba(0, 0, 0, 0.12)',\n        display: 'inline-block',\n        verticalAlign: 'top',\n        overflow: 'hidden',\n    },\n    trTime: {\n        width: 90,\n    },\n    trSeverity: {\n        width: 40,\n        fontWeight: 'bold',\n    },\n    iconButtons: {\n        width: 32,\n        height: 32,\n        padding: 4,\n    },\n};\n\nfunction getTimeString(d: Date): string {\n    let text;\n    let i: string | number = d.getHours();\n    if (i < 10) {\n        i = `0${i.toString()}`;\n    }\n    text = `${i}:`;\n\n    i = d.getMinutes();\n    if (i < 10) {\n        i = `0${i.toString()}`;\n    }\n    text += `${i}:`;\n    i = d.getSeconds();\n    if (i < 10) {\n        i = `0${i.toString()}`;\n    }\n    text += `${i}.`;\n    i = d.getMilliseconds();\n    if (i < 10) {\n        i = `00${i.toString()}`;\n    } else if (i < 100) {\n        i = `0${i.toString()}`;\n    }\n    text += i;\n    return text;\n}\n\ninterface ConsoleProps {\n    onClearAllLogs: () => void;\n    console: { ts: number; text: string; severity: ioBroker.LogLevel }[];\n}\n\ninterface ConsoleState {\n    goBottom: boolean;\n}\n\nclass Console extends React.Component<ConsoleProps, ConsoleState> {\n    private readonly messagesEnd: React.RefObject<HTMLDivElement>;\n\n    constructor(props: ConsoleProps) {\n        super(props);\n        this.state = {\n            goBottom: true,\n        };\n        this.messagesEnd = React.createRef();\n    }\n\n    static generateLine(message: { ts: number; text: string; severity: ioBroker.LogLevel }): React.JSX.Element {\n        return (\n            <Box\n                component=\"tr\"\n                key={`tr_${message.ts}_${message.text.substring(message.text.length - 10, message.text.length)}`}\n                sx={styles[message.severity]}\n            >\n                <td style={styles.trTime}>{getTimeString(new Date(message.ts))}</td>\n                <td style={styles.trSeverity}>{message.severity}</td>\n                <td>{message.text}</td>\n            </Box>\n        );\n    }\n\n    renderLogList(lines: { ts: number; text: string; severity: ioBroker.LogLevel }[]): React.JSX.Element {\n        if (lines?.length) {\n            return (\n                <Box\n                    sx={styles.logBoxInner}\n                    key=\"logList\"\n                >\n                    <table\n                        key=\"logTable\"\n                        style={styles.table}\n                    >\n                        <tbody>{lines.map(line => Console.generateLine(line))}</tbody>\n                    </table>\n                    <div\n                        key=\"logScrollPoint\"\n                        ref={this.messagesEnd}\n                        style={{ float: 'left', clear: 'both' }}\n                    />\n                </Box>\n            );\n        }\n        return (\n            <Box\n                key=\"logList\"\n                sx={styles.logBoxInner}\n                style={{ paddingLeft: 10 }}\n            >\n                {I18n.t('Log outputs')}\n            </Box>\n        );\n    }\n\n    onCopy(): void {\n        Utils.copyToClipboard(this.props.console.join('\\n'));\n    }\n\n    scrollToBottom(): void {\n        this.messagesEnd?.current?.scrollIntoView({ behavior: 'smooth' });\n    }\n\n    componentDidUpdate(): void {\n        this.state.goBottom && this.scrollToBottom();\n    }\n\n    render(): React.JSX.Element {\n        const lines = this.props.console;\n        return (\n            <div style={styles.logBox}>\n                <div\n                    style={styles.toolbox}\n                    key=\"toolbox\"\n                >\n                    <IconButton\n                        style={styles.iconButtons}\n                        onClick={() => this.setState({ goBottom: !this.state.goBottom })}\n                        color={this.state.goBottom ? 'secondary' : undefined}\n                        size=\"medium\"\n                    >\n                        <IconBottom />\n                    </IconButton>\n                    {lines?.length ? (\n                        <IconButton\n                            style={styles.iconButtons}\n                            onClick={() => this.props.onClearAllLogs()}\n                            size=\"medium\"\n                        >\n                            <IconDelete />\n                        </IconButton>\n                    ) : null}\n                    {lines?.length ? (\n                        <IconButton\n                            style={styles.iconButtons}\n                            onClick={() => this.onCopy()}\n                            size=\"medium\"\n                        >\n                            <IconCopy />\n                        </IconButton>\n                    ) : null}\n                </div>\n                {this.renderLogList(lines)}\n            </div>\n        );\n    }\n}\n\nexport default Console;\n","import React from 'react';\n\nimport ReactSplit, { SplitDirection } from '@devbookhq/splitter';\nimport ReactJson from 'react-json-view';\n\nimport { ListItemButton, ListItemText, Input, InputAdornment, IconButton, List, Box } from '@mui/material';\n\nimport { MdCheck as CheckIcon, MdAdd as IconAdd, MdDelete as IconDelete } from 'react-icons/md';\n\nimport { I18n, type IobTheme, type ThemeType } from '@iobroker/adapter-react-v5';\nimport type { DebugScopes, CallFrame, DebugValue, DebugVariable, DebugObject } from './types';\n\nconst styles: Record<string, any> = {\n    frameRoot: {\n        paddingTop: 0,\n        paddingBottom: 0,\n    },\n    frameTextRoot: {\n        m: 0,\n    },\n    frameTextPrimary: (theme: IobTheme): React.CSSProperties => ({\n        color: theme.palette.mode === 'dark' ? '#CCC' : '#333',\n    }),\n    frameTextSecondary: {\n        fontStyle: 'italic',\n        fontSize: 12,\n        opacity: 0.6,\n        pl: 1,\n    },\n\n    listRoot: {\n        padding: 0,\n        fontSize: 'small',\n    },\n\n    scopeType: {\n        verticalAlign: 'top',\n        textTransform: 'uppercase',\n        width: 50,\n    },\n    scopeType_local: {\n        color: '#53a944',\n    },\n    scopeType_closure: {\n        color: '#365b80',\n    },\n    scopeType_user: {\n        color: '#a48a15',\n    },\n    scopeName: {\n        color: '#bc5b5b',\n        width: 'calc(100% - 82px)',\n        whiteSpace: 'nowrap',\n        textOverflow: 'ellipsis',\n    },\n    scopeButton: {\n        width: 32,\n    },\n    scopeValueEditable: {\n        cursor: 'pointer',\n    },\n    selectedFrame: {\n        backgroundColor: '#777',\n        color: 'white',\n    },\n    splitter: {\n        width: '100%',\n        height: 'calc(100% - 36px)',\n        overflow: 'hidden',\n        fontSize: 12,\n    },\n\n    toolbarScopes: (theme: IobTheme): React.CSSProperties => ({\n        width: 24,\n        display: 'inline-block',\n        height: '100%',\n        background: theme.palette.mode === 'dark' ? '#222' : '#EEE',\n        verticalAlign: 'top',\n    }),\n    scopesAfterToolbar: {\n        width: 'calc(100% - 24px)',\n        display: 'inline-block',\n        height: '100%',\n        verticalAlign: 'top',\n    },\n\n    scopeNameName: {\n        fontWeight: 'bold',\n        display: 'inline-block',\n        verticalAlign: 'top',\n    },\n    scopeNameEqual: (theme: IobTheme): React.CSSProperties => ({\n        display: 'inline-block',\n        color: theme.palette.mode === 'dark' ? '#EEE' : '#222',\n        verticalAlign: 'top',\n    }),\n    scopeNameValue: {\n        verticalAlign: 'top',\n        display: 'inline-block',\n        color: '#3b709f',\n        whiteSpace: 'nowrap',\n    },\n    scopeButtonDel: {\n        padding: 0,\n        float: 'right',\n    },\n\n    valueNull: {\n        color: '#a44a24',\n    },\n    valueUndefined: {\n        color: '#a44a24',\n    },\n    valueString: {\n        color: '#1e8816',\n    },\n    valueNumber: {\n        color: '#163c88',\n    },\n    valueBoolean: {\n        color: '#a44a24',\n    },\n    valueObject: {\n        color: '#721b70',\n    },\n    valueNone: {\n        color: '#8a8a8a',\n    },\n    valueFunc: {\n        color: '#ac4343',\n    },\n    error: (theme: IobTheme): React.CSSProperties => ({\n        color: theme.palette.mode === 'dark' ? '#FF8080' : '#FF0000',\n        fontStyle: 'italic',\n    }),\n};\n\ninterface StackProps {\n    currentScriptId: string | null;\n    mainScriptId?: string;\n    scopes: DebugScopes | null;\n    expressions: DebugVariable[];\n    callFrames: CallFrame[] | undefined;\n    currentFrame: number;\n    onExpressionDelete: (index: number) => void;\n    onChangeCurrentFrame: (index: number) => void;\n    onWriteScopeValue: (options: {\n        variableName: string;\n        scopeNumber: 0;\n        newValue: {\n            value: any;\n            valueType:\n                | 'string'\n                | 'number'\n                | 'object'\n                | 'boolean'\n                | 'undefined'\n                | 'null'\n                | 'bigint'\n                | 'symbol'\n                | 'function';\n        };\n        callFrameId: string | undefined;\n    }) => void;\n    onExpressionAdd: (cb: (index: number, item: DebugVariable) => void) => void;\n    onExpressionNameUpdate: (index: number, scopeValue: string, cb: () => void) => void;\n    themeType: ThemeType;\n}\n\ninterface StackState {\n    editValue: {\n        type: 'expression' | 'local' | 'closure' | 'global';\n        valueType: 'function' | 'string' | 'boolean' | 'number' | 'object' | 'undefined' | 'null' | 'bigint' | 'symbol';\n        index: number;\n        name: string;\n        value: string;\n        scopeId?: string;\n    } | null;\n    callFrames: CallFrame[] | undefined;\n    framesSizes: number[];\n}\n\nfunction previewToObject(obj: DebugObject): Record<string, any> | string {\n    const result: Record<string, any> = {};\n    if (obj.className === 'ReferenceError') {\n        return obj.description;\n    }\n    obj.preview?.properties?.forEach(item => {\n        if (item?.type === 'object') {\n            if (item.subtype === 'null') {\n                result[item.name] = null;\n            } else {\n                result[item.name] = `{ ${item.value === 'Object' ? '...' : item.value} }`;\n            }\n        } else {\n            if (item.type === 'boolean') {\n                result[item.name || item.description] = item.value === 'true';\n            } else if (item.type === 'number') {\n                result[item.name || item.description] = parseFloat(item.value);\n            } else if (item.type === 'function') {\n                result[item.name || item.description] = 'function(){}';\n            } else if (item.type === 'undefined') {\n                result[item.name || item.description] = undefined;\n            } else {\n                result[item.name || item.description] = item.value;\n            }\n        }\n    });\n\n    return result;\n}\n\nclass Stack extends React.Component<StackProps, StackState> {\n    private readonly editRef: React.RefObject<HTMLInputElement>;\n\n    private scopeValue: boolean | undefined | number | string | null = null;\n\n    constructor(props: StackProps) {\n        super(props);\n\n        const framesSizesStr = window.localStorage.getItem('JS.framesSizes');\n        let framesSizes = [30, 70];\n        if (framesSizesStr) {\n            try {\n                framesSizes = JSON.parse(framesSizesStr);\n            } catch {\n                // ignore\n            }\n        }\n\n        this.state = {\n            editValue: null,\n            callFrames: this.props.callFrames,\n            framesSizes,\n        };\n\n        this.editRef = React.createRef();\n    }\n\n    onExpressionNameUpdate(): void {\n        if (this.state.editValue) {\n            this.props.onExpressionNameUpdate(this.state.editValue.index, this.scopeValue as string, () => {\n                this.setState({ editValue: null });\n                this.scopeValue = null;\n            });\n        }\n    }\n\n    renderExpression(item: DebugVariable, i: number): React.JSX.Element {\n        const name =\n            this.state.editValue && this.state.editValue.type === 'expression' && this.state.editValue.index === i ? (\n                <Input\n                    inputRef={this.editRef}\n                    fullWidth\n                    margin=\"dense\"\n                    onBlur={() => this.state.editValue && this.setState({ editValue: null })}\n                    defaultValue={item.name}\n                    onKeyUp={e => {\n                        if (e.key === 'Enter') {\n                            this.onExpressionNameUpdate();\n                        } else if (e.key === 'Escape') {\n                            this.setState({ editValue: null });\n                        }\n                    }}\n                    onChange={e => (this.scopeValue = e.target.value)}\n                    endAdornment={\n                        <InputAdornment position=\"end\">\n                            <IconButton\n                                onClick={() => this.onExpressionNameUpdate()}\n                                size=\"medium\"\n                            >\n                                <CheckIcon />\n                            </IconButton>\n                        </InputAdornment>\n                    }\n                />\n            ) : (\n                [\n                    <div\n                        key=\"name\"\n                        style={styles.scopeNameName}\n                        title={I18n.t('Double click to edit expression')}\n                    >\n                        {item.name}\n                    </div>,\n                    <Box\n                        key=\"=\"\n                        sx={styles.scopeNameEqual}\n                    >\n                        {' '}\n                        ={' '}\n                    </Box>,\n                    <div\n                        key=\"val\"\n                        style={styles.scopeNameValue}\n                    >\n                        {this.formatValue(item.value)}\n                    </div>,\n                ]\n            );\n\n        return (\n            <tr key={`user_${i}${item.name}`}>\n                <td style={{ ...styles.scopeType, ...styles.scopeType_user }}>user</td>\n                <td\n                    style={styles.scopeName}\n                    onDoubleClick={() => {\n                        this.scopeValue = item.name || '';\n                        this.setState({\n                            editValue: {\n                                type: 'expression',\n                                valueType: 'string',\n                                index: i,\n                                name: item.name,\n                                value: item.name || '',\n                            },\n                        });\n                    }}\n                >\n                    {name}\n                </td>\n                <IconButton\n                    style={styles.scopeButtonDel}\n                    size=\"small\"\n                    disabled={!!this.state.editValue}\n                    onClick={() => this.props.onExpressionDelete(i)}\n                >\n                    <IconDelete />\n                </IconButton>\n            </tr>\n        );\n    }\n\n    renderExpressions(): React.JSX.Element[] {\n        return this.props.expressions.map((item, i) => this.renderExpression(item, i));\n    }\n\n    renderOneFrameTitle(frame: CallFrame, i: number): React.JSX.Element | null {\n        if (\n            this.props.mainScriptId === this.props.currentScriptId &&\n            frame.location.scriptId !== this.props.mainScriptId\n        ) {\n            return null;\n        }\n        const fileName = (frame.url.split('/').pop() || '').replace(/^script\\.js\\./, '');\n        return (\n            <ListItemButton\n                key={frame.callFrameId}\n                onClick={() => this.props.onChangeCurrentFrame(i)}\n                dense\n                selected={this.props.currentFrame === i}\n                style={styles.frameRoot}\n            >\n                <ListItemText\n                    sx={{\n                        ...styles.frameTextRoot,\n                        '& .MuiListItemText-primary': styles.frameTextPrimary,\n                        '& .MuiListItemText-secondary': styles.frameTextSecondary,\n                    }}\n                    title={frame.url}\n                    primary={frame.functionName || 'anonymous'}\n                    secondary={`${fileName} (${frame.location.lineNumber}:${frame.location.columnNumber})`}\n                />\n            </ListItemButton>\n        );\n    }\n\n    formatValue(value: DebugValue | DebugObject | null, forEdit?: boolean): React.JSX.Element | string {\n        if (!value) {\n            if (forEdit) {\n                return 'none';\n            }\n            return <span style={styles.valueNone}>none</span>;\n        }\n        if (value.type === 'undefined') {\n            if (forEdit) {\n                return 'undefined';\n            }\n            return <span style={styles.valueUndefined}>undefined</span>;\n        }\n        if (value.type === 'null') {\n            if (forEdit) {\n                return 'null';\n            }\n            return <span style={styles.valueNull}>null</span>;\n        }\n        if (value.type === 'function') {\n            const text = value.description\n                ? value.description.length > 100\n                    ? `${value.description.substring(0, 100)}...`\n                    : value.description\n                : 'function';\n            if (forEdit) {\n                return text;\n            }\n            return (\n                <span\n                    style={styles.valueFunc}\n                    title={value.description}\n                >\n                    {text}\n                </span>\n            );\n        }\n        if (value.type === 'object') {\n            const val = previewToObject(value as DebugObject);\n            if (forEdit) {\n                return JSON.stringify(val);\n            }\n            if (typeof val === 'string') {\n                return <Box component=\"span\" sx={styles.error}>{val}</Box>;\n            }\n            return (\n                <ReactJson\n                    name={false}\n                    enableClipboard={false}\n                    style={{ backgroundColor: 'inherit', marginTop: 3 }}\n                    src={val}\n                    collapsed\n                    theme={this.props.themeType === 'dark' ? 'brewer' : 'rjv-default'}\n                    displayDataTypes={false}\n                />\n            );\n        }\n        if (value.value === undefined) {\n            if (forEdit) {\n                return 'undefined';\n            }\n            return <span style={styles.valueUndefined}>undefined</span>;\n        }\n        if (value.value === null) {\n            if (forEdit) {\n                return 'null';\n            }\n            return <span style={styles.valueNull}>null</span>;\n        }\n        if (value.type === 'string') {\n            if (forEdit) {\n                return value.value;\n            }\n            const text = `\"${\n                value.value ? (value.value.length > 100 ? `${value.value.substring(0, 100)}...` : value.value) : ''\n            }\"`;\n            return (\n                <span\n                    style={styles.valueString}\n                    title={text}\n                >\n                    {text}\n                </span>\n            );\n        }\n        if (value.type === 'boolean') {\n            if (forEdit) {\n                return value.value.toString();\n            }\n            return <span style={styles.valueBoolean}>{value.value.toString()}</span>;\n        }\n\n        return value.value.toString();\n    }\n\n    onWriteScopeValue(): void {\n        if (this.scopeValue === 'true') {\n            this.scopeValue = true;\n        } else if (this.scopeValue === 'false') {\n            this.scopeValue = false;\n        } else if (this.scopeValue === 'null') {\n            this.scopeValue = null;\n        } else if (this.scopeValue === 'undefined') {\n            this.scopeValue = undefined;\n        } else if (parseFloat(this.scopeValue as string).toString() === this.scopeValue) {\n            this.scopeValue = parseFloat(this.scopeValue);\n        }\n\n        this.props.onWriteScopeValue({\n            variableName: this.state.editValue?.name || '',\n            scopeNumber: 0,\n            newValue: {\n                value: this.scopeValue,\n                valueType: typeof this.scopeValue,\n            },\n            callFrameId: this.props.callFrames?.[this.props.currentFrame].callFrameId,\n        });\n\n        this.setState({ editValue: null });\n        this.scopeValue = null;\n    }\n\n    componentDidUpdate(): void {\n        //this.editRef.current?.select();\n        this.editRef.current?.focus();\n    }\n\n    renderScope(scopeId: string, item: DebugVariable, type: 'global' | 'local' | 'closure'): React.JSX.Element {\n        const editable =\n            !this.props.currentFrame &&\n            item.value &&\n            (item.value.type === 'undefined' ||\n                item.value.type === 'string' ||\n                item.value.type === 'number' ||\n                item.value.type === 'boolean' ||\n                (item.value as DebugValue)?.value === null ||\n                ((item.value as DebugValue)?.value === undefined && item.value.type !== 'object'));\n\n        const el =\n            this.state.editValue?.type === type && this.state.editValue?.name === item.name\n                ? [\n                      <div\n                          key=\"name\"\n                          style={styles.scopeNameName}\n                      >\n                          {item.name}\n                      </div>,\n                      <Box\n                          key=\"=\"\n                          sx={styles.scopeNameEqual}\n                      >\n                          {' '}\n                          ={' '}\n                      </Box>,\n                      <Input\n                          key=\"input\"\n                          inputRef={this.editRef}\n                          margin=\"dense\"\n                          onBlur={() => this.state.editValue && this.setState({ editValue: null })}\n                          defaultValue={this.formatValue(item.value, true)}\n                          onKeyUp={e => {\n                              if (e.key === 'Enter') {\n                                  this.onWriteScopeValue();\n                              } else if (e.key === 'Escape') {\n                                  this.setState({ editValue: null });\n                              }\n                          }}\n                          onChange={e => (this.scopeValue = e.target.value)}\n                          endAdornment={\n                              <InputAdornment position=\"end\">\n                                  <IconButton\n                                      onClick={() => this.onWriteScopeValue()}\n                                      size=\"medium\"\n                                  >\n                                      <CheckIcon />\n                                  </IconButton>\n                              </InputAdornment>\n                          }\n                      />,\n                  ]\n                : [\n                      <div\n                          key=\"name\"\n                          style={styles.scopeNameName}\n                          title={I18n.t('Double click to write value')}\n                      >\n                          {item.name}\n                      </div>,\n                      <Box\n                          key=\"=\"\n                          sx={styles.scopeNameEqual}\n                      >\n                          {' '}\n                          ={' '}\n                      </Box>,\n                      <div\n                          key=\"val\"\n                          style={styles.scopeNameValue}\n                      >\n                          {this.formatValue(item.value)} ({item.value.type})\n                      </div>,\n                  ];\n\n        return (\n            <tr key={`${type}_${scopeId}_${item.name}`}>\n                <td style={{ ...styles.scopeType, ...styles[`scopeType_${type}`] }}>{type}</td>\n                <td\n                    style={{\n                        ...styles.scopeName,\n                        ...(!this.props.currentFrame && editable ? styles.scopeValueEditable : undefined),\n                    }}\n                    onDoubleClick={() => {\n                        if (editable) {\n                            this.scopeValue = (item.value as DebugValue).value;\n                            this.setState({\n                                editValue: {\n                                    scopeId,\n                                    type,\n                                    index: 0,\n                                    valueType: item.value.type,\n                                    name: item.name,\n                                    value: (item.value as DebugValue).value,\n                                },\n                            });\n                        }\n                    }}\n                >\n                    {el}\n                </td>\n            </tr>\n        );\n    }\n\n    renderScopes(frame: CallFrame): React.JSX.Element | null {\n        if (!frame) {\n            return null;\n        }\n        // first local\n        const result: React.JSX.Element[] = this.renderExpressions();\n\n        let items = this.props.scopes?.local?.properties?.result.map(\n            item => this.props.scopes && this.renderScope('', item, 'local'),\n        );\n        items?.forEach(item => item && result.push(item));\n\n        items = this.props.scopes?.closure?.properties?.result.map(\n            item => this.props.scopes && this.renderScope('', item, 'closure'),\n        );\n        items?.forEach(item => item && result.push(item));\n\n        return (\n            <table style={{ width: '100%', fontSize: 'small' }}>\n                <tbody>{result}</tbody>\n            </table>\n        );\n    }\n\n    render(): React.JSX.Element {\n        return (\n            <ReactSplit\n                direction={SplitDirection.Horizontal}\n                initialSizes={this.state.framesSizes}\n                minWidths={[100, 200]}\n                onResizeFinished={(_gutterIdx, framesSizes) => {\n                    this.setState({ framesSizes });\n                    window.localStorage.setItem('JS.framesSizes', JSON.stringify(framesSizes));\n                }}\n                gutterClassName={this.props.themeType === 'dark' ? 'Dark visGutter' : 'Light visGutter'}\n            >\n                <div style={{ width: '100%', height: '100%', overflow: 'auto' }}>\n                    <List style={styles.listRoot}>\n                        {this.props.callFrames?.map((frame, i) => this.renderOneFrameTitle(frame, i)) || null}\n                    </List>\n                </div>\n                <div style={{ width: '100%', height: '100%', overflow: 'auto' }}>\n                    <Box sx={styles.toolbarScopes}>\n                        <IconButton\n                            size=\"small\"\n                            onClick={() =>\n                                this.props.onExpressionAdd((i: number, item: DebugVariable): void => {\n                                    this.scopeValue = item.name || '';\n                                    this.setState({\n                                        editValue: {\n                                            type: 'expression',\n                                            valueType: 'string',\n                                            index: i,\n                                            name: item.name,\n                                            value: item.name || '',\n                                        },\n                                    });\n                                })\n                            }\n                        >\n                            <IconAdd />\n                        </IconButton>\n                    </Box>\n                    <div style={styles.scopesAfterToolbar}>\n                        {this.props.callFrames?.length &&\n                            this.renderScopes(this.props.callFrames[this.props.currentFrame])}\n                    </div>\n                </div>\n            </ReactSplit>\n        );\n    }\n}\n\nexport default Stack;\n","import React from 'react';\nimport ReactSplit, { SplitDirection } from '@devbookhq/splitter';\n\nimport {\n    Tabs,\n    Tab,\n    Toolbar,\n    LinearProgress,\n    IconButton,\n    List,\n    ListItemButton,\n    ListItemText,\n    DialogTitle,\n    Dialog,\n    Badge,\n    Box,\n} from '@mui/material';\n\nimport {\n    MdClose as IconClose,\n    MdPlayArrow as IconRun,\n    MdPause as IconPause,\n    MdArrowForward as IconNext,\n    MdArrowDownward as IconStep,\n    MdArrowUpward as IconOut,\n    MdRefresh as IconRestart,\n    MdWarning as IconException,\n} from 'react-icons/md';\n\nimport { type AdminConnection, I18n, type IobTheme, type ThemeName, type ThemeType } from '@iobroker/adapter-react-v5';\n\nimport DialogError from '../../Dialogs/Error';\nimport Editor from './Editor';\nimport Console from './Console';\nimport Stack from './Stack';\nimport {\n    CallFrame,\n    DebugVariable,\n    DebuggerLocation,\n    SetBreakpointParameterType,\n    DebugCommandToBackEnd,\n    DebugCommandToBackEndScope,\n    DebugCommandFromBackEnd,\n    DebugScopes,\n    DebugCommandToBackEndSetBreakpoint,\n} from './types';\n\nconst styles: Record<string, any> = {\n    root: (theme: IobTheme): React.CSSProperties => ({\n        width: '100%',\n        height: `calc(100% - ${parseInt(theme.toolbar.height as string, 10) + 38 /*Theme.toolbar.height */ + 5}px)`,\n        overflow: 'hidden',\n        position: 'relative',\n    }),\n    toolbar: {\n        minHeight: 38, //Theme.toolbar.height,\n        boxShadow:\n            '0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12)',\n    },\n    buttonRun: {\n        color: 'green',\n    },\n    buttonPause: {\n        color: 'orange',\n    },\n    buttonRestart: {\n        color: 'darkgreen',\n    },\n    buttonStop: {\n        color: 'red',\n    },\n    buttonNext: {\n        color: 'blue',\n    },\n    buttonStep: {\n        color: 'blue',\n    },\n    buttonOut: {\n        color: 'blue',\n    },\n    buttonException: {},\n\n    tabFile: (theme: IobTheme): React.CSSProperties => ({\n        textTransform: 'inherit',\n        color: theme.palette.mode === 'dark' ? '#DDD' : 'inherit',\n    }),\n    tabText: {\n        maxWidth: 130,\n        textOverflow: 'ellipsis',\n        whiteSpace: 'nowrap',\n        overflow: 'hidden',\n        display: 'inline-block',\n        verticalAlign: 'middle',\n    },\n    closeButton: {\n        position: 'absolute',\n        top: 8,\n        right: 0,\n        zIndex: 10,\n        padding: 8,\n        cursor: 'pointer',\n    },\n\n    tabsRoot: (theme: IobTheme): React.CSSProperties => ({\n        minHeight: 24,\n        background: theme.palette.mode === 'dark' ? '#333' : '#e6e6e6',\n        color: theme.palette.mode === 'dark' ? 'white' : 'inherit',\n    }),\n    tabRoot: {\n        minHeight: 24,\n    },\n\n    bpListItem: {\n        borderTop: '1px dashed #bfbfbf44',\n    },\n    monospace: {\n        fontFamily: 'Courier New, monospace',\n        whiteSpace: 'pre',\n        fontSize: 12,\n    },\n    arrow: {\n        color: '#fffa4f',\n    },\n    splitter: {\n        height: 'calc(100% - 52px)',\n        '& .layout-pane': {\n            overflow: 'hidden',\n            height: '100%',\n        },\n    },\n};\n\ninterface DebuggerProps {\n    src: string;\n    themeName: ThemeName;\n    themeType: ThemeType;\n    adapterName: string;\n    socket: AdminConnection;\n    debugInstance?: { adapter?: string; instance?: string } | null;\n    runningInstances: Record<string, boolean>;\n}\n\ninterface DebuggerState {\n    breakpoints: SetBreakpointParameterType[];\n    console: { text: string; severity: ioBroker.LogLevel; ts: number }[];\n    context: { callFrames: CallFrame[] } | null;\n    currentFrame: number;\n    error: string;\n    expressions: DebugVariable[];\n    finished: boolean;\n    instance: string | undefined;\n    location: DebuggerLocation | null;\n    logErrors: number;\n    logWarnings: number;\n    logs: number;\n    paused: boolean;\n    queryBreakpoints: DebuggerLocation[] | null;\n    running: boolean;\n    scopes: DebugScopes;\n    script: string;\n    selected: string | null;\n    started: boolean;\n    starting: boolean;\n    stopOnException: boolean;\n    tabs: Record<string, string>;\n    toolSizes: number[];\n    toolsTab: string;\n}\n\nclass Debugger extends React.Component<DebuggerProps, DebuggerState> {\n    private console: { text: string; severity: ioBroker.LogLevel; ts: number }[] | null = null;\n\n    private scripts: Record<string, string> = {};\n\n    private mainScriptId: string | null = null;\n\n    constructor(props: DebuggerProps) {\n        super(props);\n        const breakpointsStr = window.localStorage.getItem(`javascript.tools.bp.${this.props.src}`);\n        let breakpoints;\n        try {\n            breakpoints = breakpointsStr ? JSON.parse(breakpointsStr) : [];\n        } catch {\n            breakpoints = [];\n        }\n\n        const expressionsStr = window.localStorage.getItem(`javascript.tools.exps.${this.props.src}`);\n        let expressions: DebugVariable[];\n        try {\n            const names = expressionsStr ? (JSON.parse(expressionsStr) as string[]) : [];\n            expressions = names.map(name => ({\n                name,\n                value: { type: 'undefined', description: '', value: 'undefined', name: 'name' },\n            }));\n        } catch {\n            expressions = [];\n        }\n\n        const toolSizesStr = window.localStorage.getItem('JS.toolSizes');\n        let toolSizes = [80, 20];\n        if (toolSizesStr) {\n            try {\n                toolSizes = JSON.parse(toolSizesStr);\n            } catch {\n                // ignore\n            }\n        }\n\n        this.state = {\n            starting: true,\n            selected: null,\n            tabs: {},\n            script: '',\n            breakpoints,\n            expressions,\n            running: false,\n            error: '',\n            started: false,\n            paused: true,\n            location: null,\n            toolsTab: window.localStorage.getItem('javascript.tools.tab') || 'console',\n            stopOnException: window.localStorage.getItem('javascript.tools.stopOnException') === 'true',\n            console: [],\n            finished: false,\n            currentFrame: 0,\n            scopes: {},\n            queryBreakpoints: null,\n            logErrors: 0,\n            logWarnings: 0,\n            logs: 0,\n            toolSizes,\n            instance: undefined,\n            context: null,\n        };\n    }\n\n    async componentDidMount(): Promise<void> {\n        let instance: string | undefined;\n        if (this.props.debugInstance) {\n            instance = this.props.debugInstance.instance;\n        } else {\n            const obj = await this.props.socket.getObject(this.props.src);\n            instance = obj?.common?.engine?.replace('system.adapter.', '') || '';\n        }\n        this.setState({ instance }, () => {\n            if (this.state.instance) {\n                void this.props.socket.setState(`${this.state.instance}.debug.from`, {\n                    val: '{\"cmd\": \"subscribed\"}',\n                    ack: true,\n                });\n                //.then(() => );\n                setTimeout(\n                    () => this.props.socket.subscribeState(`${this.state.instance}.debug.from`, this.fromInstance),\n                    200,\n                );\n            } else {\n                this.setState({ error: 'Unknown instance' });\n            }\n        });\n    }\n\n    componentWillUnmount(): void {\n        if (this.state.instance) {\n            this.props.socket.unsubscribeState(`${this.state.instance}.debug.from`, this.fromInstance);\n            void this.props.socket.sendTo(this.state.instance, 'debugStop');\n        }\n    }\n\n    sendToInstance(cmd: DebugCommandToBackEnd): void {\n        void this.props.socket.setState(`${this.state.instance}.debug.to`, { val: JSON.stringify(cmd), ack: false });\n    }\n\n    reinitBreakpoints(cb: null | (() => void)): void {\n        if (this.state.breakpoints.length) {\n            const breakpointsObj: SetBreakpointParameterType[] = JSON.parse(JSON.stringify(this.state.breakpoints));\n            const breakpoints: DebuggerLocation[] = breakpointsObj.map(item => item.location);\n            this.setState({ breakpoints: [] }, () => {\n                this.sendToInstance({ breakpoints, cmd: 'sb' });\n                if (this.state.stopOnException) {\n                    this.sendToInstance({ cmd: 'stopOnException', state: true });\n                }\n\n                cb && cb();\n            });\n        } else if (this.state.stopOnException) {\n            this.sendToInstance({ cmd: 'stopOnException', state: true });\n            cb && cb();\n        } else if (cb) {\n            cb();\n        }\n    }\n\n    static getLocation(context: { callFrames: CallFrame[] }): DebuggerLocation | null {\n        if (context.callFrames) {\n            const frame = context.callFrames[0];\n            return frame.location;\n        }\n        return null;\n    }\n\n    readCurrentScope(): void {\n        const frame = this.state.context?.callFrames && this.state.context.callFrames[this.state.currentFrame];\n        if (frame) {\n            const scopes = frame.scopeChain.filter(scope => scope.type !== 'global');\n            if (scopes.length) {\n                this.sendToInstance({ cmd: 'scope', scopes } as DebugCommandToBackEndScope);\n            } else if (this.state.scopes.global || this.state.scopes.local || this.state.scopes.closure) {\n                this.setState({ scopes: {} });\n            }\n        }\n    }\n\n    readExpressions(i?: number): void {\n        if (\n            this.state.expressions.length &&\n            this.state.context?.callFrames &&\n            this.state.context.callFrames[this.state.currentFrame]\n        ) {\n            if (i !== undefined) {\n                this.sendToInstance({\n                    cmd: 'expressions',\n                    expressions: [this.state.expressions[i]],\n                    callFrameId: this.state.context.callFrames[this.state.currentFrame].callFrameId,\n                });\n            } else {\n                this.sendToInstance({\n                    cmd: 'expressions',\n                    expressions: this.state.expressions,\n                    callFrameId: this.state.context.callFrames[this.state.currentFrame].callFrameId,\n                });\n            }\n        }\n    }\n\n    fromInstance = (_id: string, state: ioBroker.State | null | undefined): void => {\n        if (state?.val && this.state.instance !== undefined) {\n            try {\n                const data: DebugCommandFromBackEnd = JSON.parse(state.val as string) as DebugCommandFromBackEnd;\n\n                if (data.cmd === 'subscribed') {\n                    void this.props.socket.sendTo(\n                        this.state.instance,\n                        'debug',\n                        this.props.debugInstance || { scriptName: this.props.src },\n                    );\n                } else if (data.cmd === 'readyToDebug') {\n                    this.mainScriptId = data.scriptId;\n                    this.scripts[data.scriptId] = data.script;\n                    if (data.script.startsWith('(async () => {debugger;\\n')) {\n                        this.scripts[data.scriptId] =\n                            `(async () => {\\n${data.script.substring('(async () => {debugger;\\n'.length)}`;\n                    } else if (data.script.startsWith('debugger;')) {\n                        this.scripts[data.scriptId] = data.script.substring('debugger;'.length);\n                    }\n\n                    const tabs = JSON.parse(JSON.stringify(this.state.tabs));\n                    tabs[data.scriptId] = this.props.debugInstance\n                        ? data.url\n                        : this.props.src.replace('script.js.', '');\n\n                    const ts = `${Date.now()}.${Math.random() * 10000}`;\n                    data.context?.callFrames?.forEach((item, i) => (item.id = ts + i));\n\n                    this.setState(\n                        {\n                            starting: false,\n                            finished: false,\n                            selected: this.mainScriptId,\n                            script: this.scripts[data.scriptId],\n                            tabs,\n                            currentFrame: 0,\n                            started: true,\n                            paused: true,\n                            location: Debugger.getLocation(data.context),\n                            context: data.context,\n                        },\n                        () =>\n                            this.reinitBreakpoints(() => {\n                                this.readCurrentScope();\n                                this.readExpressions();\n                            }),\n                    );\n                } else if (data.cmd === 'paused') {\n                    const ts = `${Date.now()}.${Math.random() * 10000}`;\n                    data.context?.callFrames?.forEach((item, i) => (item.id = ts + i));\n                    const location = Debugger.getLocation(data.context);\n                    const tabs = JSON.parse(JSON.stringify(this.state.tabs));\n                    const parts = data.context.callFrames[0].url.split('iobroker.javascript');\n                    if (location) {\n                        tabs[location.scriptId] = (parts[1] || parts[0]).replace('script.js.', '');\n                    }\n\n                    const newState: Partial<DebuggerState> = {\n                        tabs,\n                        paused: true,\n                        location,\n                        currentFrame: 0,\n                        context: data.context,\n                    };\n\n                    newState.script =\n                        !location?.scriptId || this.scripts[location.scriptId] === undefined\n                            ? I18n.t('loading...')\n                            : this.scripts[location.scriptId];\n                    newState.selected = location?.scriptId;\n\n                    this.setState(newState as DebuggerState, () => {\n                        this.readCurrentScope();\n                        this.readExpressions();\n                        if (location?.scriptId) {\n                            if (!this.scripts[location.scriptId]) {\n                                this.sendToInstance({ cmd: 'source', scriptId: location.scriptId });\n                            }\n                        }\n                    });\n                } else if (data.cmd === 'script') {\n                    this.scripts[data.scriptId] = data.text;\n                    if (this.state.selected === data.scriptId) {\n                        this.setState({ script: this.scripts[data.scriptId] });\n                    }\n                } else if (data.cmd === 'resumed') {\n                    this.setState({ paused: false });\n                } else if (data.cmd === 'log') {\n                    if (this.state.toolsTab === 'console') {\n                        this.console = null;\n                        const console = [...this.state.console];\n                        console.push({ text: data.text, severity: data.severity, ts: data.ts });\n                        this.setState({ console });\n                    } else {\n                        if (data.severity === 'error') {\n                            this.setState({ logErrors: this.state.logErrors + 1 });\n                        } else if (data.severity === 'warn') {\n                            this.setState({ logWarnings: this.state.logWarnings + 1 });\n                        } else {\n                            this.setState({ logs: this.state.logs + 1 });\n                        }\n                        this.console = this.console || [...this.state.console];\n                        this.console.push({ text: data.text, severity: data.severity, ts: data.ts });\n                    }\n                } else if (data.cmd === 'error') {\n                    this.setState({ error: data.error });\n                } else if (data.cmd === 'finished' || data.cmd === 'debugStopped') {\n                    this.setState({\n                        finished: true,\n                        starting: false,\n                        started: true,\n                    });\n                } else if (data.cmd === 'sb') {\n                    const breakpoints: SetBreakpointParameterType[] = JSON.parse(\n                        JSON.stringify(this.state.breakpoints),\n                    );\n                    let changed = false;\n                    data.breakpoints\n                        .filter(bp => bp)\n                        .forEach(bp => {\n                            const found = breakpoints.find(\n                                item =>\n                                    item.location.scriptId === bp.location.scriptId &&\n                                    item.location.lineNumber === bp.location.lineNumber,\n                            );\n                            if (!found) {\n                                changed = true;\n                                breakpoints.push(bp);\n                            }\n                        });\n                    changed &&\n                        window.localStorage.setItem(\n                            `javascript.tools.bp.${this.props.src}`,\n                            JSON.stringify(breakpoints),\n                        );\n                    changed && this.setState({ breakpoints });\n                } else if (data.cmd === 'cb') {\n                    const breakpoints: SetBreakpointParameterType[] = JSON.parse(\n                        JSON.stringify(this.state.breakpoints),\n                    );\n                    let changed = false;\n\n                    data.breakpoints\n                        .filter(id => id !== undefined && id !== null)\n                        .forEach(bp => {\n                            const found = breakpoints.find(item => item.id === bp);\n                            if (found) {\n                                const pos = breakpoints.indexOf(found);\n                                breakpoints.splice(pos, 1);\n                                changed = true;\n                            }\n                        });\n                    changed &&\n                        window.localStorage.setItem(\n                            `javascript.tools.bp.${this.props.src}`,\n                            JSON.stringify(breakpoints),\n                        );\n                    changed && this.setState({ breakpoints });\n                } else if (data.cmd === 'scope') {\n                    // const global = data.scopes.find(scope => scope.type === 'global') || null;\n                    const local = data.scopes.find(scope => scope.type === 'local') || undefined;\n                    const closure = data.scopes.find(scope => scope.type === 'closure') || undefined;\n\n                    console.log(JSON.stringify(closure));\n\n                    this.setState({\n                        scopes: { local, closure },\n                    });\n                } else if (data.cmd === 'setValue') {\n                    const scopes: DebugScopes = JSON.parse(JSON.stringify(this.state.scopes));\n                    let item;\n                    if (data.scopeNumber === 0) {\n                        item = scopes?.local?.properties?.result.find(item => item.name === data.variableName);\n                    } else {\n                        item = scopes?.closure?.properties?.result.find(item => item.name === data.variableName);\n                    }\n                    if (item) {\n                        // @ts-expect-error fix later\n                        item.value.value = data.newValue.value;\n                        this.setState({ scopes });\n                    }\n                } else if (data.cmd === 'expressions') {\n                    // update values\n                    const expressions: DebugVariable[] = JSON.parse(JSON.stringify(this.state.expressions));\n                    let changed = false;\n                    data.expressions.forEach(item => {\n                        const expression = expressions.find(it => it.name === item.name);\n                        if (expression) {\n                            changed = true;\n                            expression.value = item.result;\n                        }\n                    });\n                    changed && this.setState({ expressions });\n\n                    console.log(`expressions: ${JSON.stringify(data)}`);\n                } else if (data.cmd === 'getPossibleBreakpoints') {\n                    if (data.breakpoints?.length === 1) {\n                        this.sendToInstance({ breakpoints: data.breakpoints, cmd: 'sb' });\n                    } else if (!data.breakpoints?.length) {\n                        window.alert('cannot set');\n                    } else {\n                        this.setState({ queryBreakpoints: data.breakpoints });\n                    }\n                } else {\n                    console.error(`Unknown command: ${JSON.stringify(data)}`);\n                }\n            } catch {\n                // ignore\n            }\n        }\n    };\n\n    getTextAtLocation(location: DebuggerLocation): React.JSX.Element[] {\n        let line = this.state.script.split(/\\r\\n|\\n/)[location.lineNumber];\n        let arrow;\n        if (location.columnNumber !== undefined && location.columnNumber >= 10) {\n            line = line.substring(location.columnNumber - 10, location.columnNumber + 20);\n            arrow = `${''.padStart(10, ' ')}`;\n        } else if (location.columnNumber !== undefined) {\n            line = line.substring(0, 30 - location.columnNumber);\n            arrow = `${''.padStart(location.columnNumber, ' ')}`;\n        }\n        return [\n            <div\n                key=\"line\"\n                style={styles.monospace}\n            >\n                {line}\n            </div>,\n            <div\n                key=\"arrow\"\n                style={{ ...styles.monospace, ...styles.arrow }}\n            >\n                {arrow}\n            </div>,\n        ];\n    }\n\n    renderQueryBreakpoints(): React.JSX.Element | null {\n        if (this.state.queryBreakpoints) {\n            return (\n                <Dialog\n                    onClose={() => this.setState({ queryBreakpoints: null })}\n                    aria-labelledby=\"bp-dialog-title\"\n                    open={!0}\n                >\n                    <DialogTitle id=\"bp-dialog-title\">{I18n.t('Select breakpoint')}</DialogTitle>\n                    <List>\n                        {this.state.queryBreakpoints.map((bp, i) => (\n                            <ListItemButton\n                                style={styles.bpListItem}\n                                dense\n                                onClick={() => {\n                                    this.sendToInstance({\n                                        breakpoints: [bp],\n                                        cmd: 'sb',\n                                    } as DebugCommandToBackEndSetBreakpoint);\n                                    this.setState({ queryBreakpoints: null });\n                                }}\n                                key={i}\n                            >\n                                <ListItemText primary={this.getTextAtLocation(bp)} />\n                            </ListItemButton>\n                        ))}\n                    </List>\n                </Dialog>\n            );\n        }\n\n        return null;\n    }\n\n    renderError(): React.JSX.Element | null {\n        if (this.state.error) {\n            return (\n                <DialogError\n                    key=\"dialogError\"\n                    onClose={() => this.setState({ error: '' })}\n                    text={this.state.error}\n                />\n            );\n        }\n        return null;\n    }\n\n    closeTab(id: string, e?: React.MouseEvent): void {\n        e?.stopPropagation();\n        const tabs = JSON.parse(JSON.stringify(this.state.tabs));\n        delete tabs[id];\n        const newState: Partial<DebuggerState> = {\n            tabs,\n            script: this.mainScriptId ? this.scripts[this.mainScriptId] : '...',\n            selected: this.mainScriptId,\n        };\n        if (this.state.location && this.state.location.scriptId !== this.mainScriptId) {\n            newState.location = null;\n        }\n        this.setState(newState as DebuggerState);\n    }\n\n    renderTabs(): React.JSX.Element {\n        const disabled = !this.state.tabs || !this.state.started;\n        return (\n            <Tabs\n                component={'div'}\n                indicatorColor=\"primary\"\n                style={{ position: 'relative', width: 'calc(100% - 300px)', display: 'inline-block' }}\n                value={this.state.selected}\n                onChange={(event, value) => {\n                    if (this.scripts[value]) {\n                        this.setState({ selected: value, script: this.scripts[value] });\n                    } else {\n                        this.setState({ selected: value, script: 'loading...' }, () =>\n                            this.sendToInstance({ cmd: 'source', scriptId: value }),\n                        );\n                    }\n                }}\n                scrollButtons=\"auto\"\n            >\n                {Object.keys(this.state.tabs || []).map(id => {\n                    let label = id;\n                    const title = this.state.tabs[id] || '';\n                    if (this.state.tabs[id]) {\n                        label = this.state.tabs[id].split('/').pop() || '';\n                    }\n                    const labelEl = [\n                        <div\n                            key=\"text\"\n                            style={styles.tabText}\n                        >\n                            {label}\n                        </div>,\n                        id !== this.mainScriptId ? (\n                            <span\n                                key=\"icon\"\n                                style={styles.closeButton}\n                            >\n                                <IconClose\n                                    key=\"close\"\n                                    onClick={e => this.closeTab(id, e)}\n                                    fontSize=\"small\"\n                                />\n                            </span>\n                        ) : null,\n                    ];\n\n                    return (\n                        <Tab\n                            disabled={disabled}\n                            sx={styles.tabFile}\n                            label={labelEl}\n                            title={title}\n                            key={id}\n                            value={id}\n                        />\n                    );\n                })}\n            </Tabs>\n        );\n    }\n\n    onResume(): void {\n        this.sendToInstance({ cmd: 'cont' });\n    }\n\n    onPause(): void {\n        this.sendToInstance({ cmd: 'pause' });\n    }\n\n    onNext(): void {\n        this.sendToInstance({ cmd: 'next' });\n    }\n\n    onStepIn(): void {\n        this.sendToInstance({ cmd: 'step' });\n    }\n\n    onStepOut(): void {\n        this.sendToInstance({ cmd: 'out' });\n    }\n\n    onRestart(): void {\n        this.setState(\n            { started: false, starting: true },\n            () =>\n                this.state.instance !== undefined &&\n                this.props.socket.sendTo(\n                    this.state.instance,\n                    'debug',\n                    this.props.debugInstance || { scriptName: this.props.src },\n                ),\n        );\n    }\n\n    onToggleException(): void {\n        const stopOnException = !this.state.stopOnException;\n        window.localStorage.setItem('javascript.tools.stopOnException', stopOnException ? 'true' : 'false');\n        this.setState({ stopOnException }, () =>\n            this.sendToInstance({ cmd: 'stopOnException', state: stopOnException }),\n        );\n    }\n\n    renderToolbar(): React.JSX.Element {\n        const disabled = !this.state.started;\n        return (\n            <Toolbar\n                variant=\"dense\"\n                style={styles.toolbar}\n                key=\"toolbar1\"\n            >\n                <IconButton\n                    style={styles.buttonRestart}\n                    disabled={disabled}\n                    onClick={() => this.onRestart()}\n                    title={I18n.t('Restart')}\n                    size=\"medium\"\n                >\n                    <IconRestart />\n                </IconButton>\n                {!this.state.finished && this.state.paused ? (\n                    <IconButton\n                        style={styles.buttonRun}\n                        disabled={disabled}\n                        onClick={() => this.onResume()}\n                        title={I18n.t('Resume execution')}\n                        size=\"medium\"\n                    >\n                        <IconRun />\n                    </IconButton>\n                ) : (\n                    !this.state.finished && (\n                        <IconButton\n                            disabled={disabled}\n                            style={styles.buttonPause}\n                            onClick={() => this.onPause()}\n                            title={I18n.t('Pause execution')}\n                            size=\"medium\"\n                        >\n                            <IconPause />\n                        </IconButton>\n                    )\n                )}\n                {!this.state.finished && (\n                    <IconButton\n                        style={styles.buttonNext}\n                        disabled={disabled || !this.state.paused}\n                        onClick={() => this.onNext()}\n                        title={I18n.t('Go to next line')}\n                        size=\"medium\"\n                    >\n                        <IconNext />\n                    </IconButton>\n                )}\n                {!this.state.finished && (\n                    <IconButton\n                        style={styles.buttonStep}\n                        disabled={disabled || !this.state.paused}\n                        onClick={() => this.onStepIn()}\n                        title={I18n.t('Step into function')}\n                        size=\"medium\"\n                    >\n                        <IconStep />\n                    </IconButton>\n                )}\n                {!this.state.finished && (\n                    <IconButton\n                        style={styles.buttonOut}\n                        disabled={disabled || !this.state.paused}\n                        onClick={() => this.onStepOut()}\n                        title={I18n.t('Step out from function')}\n                        size=\"medium\"\n                    >\n                        <IconOut />\n                    </IconButton>\n                )}\n                {!this.state.finished && (\n                    <IconButton\n                        style={styles.buttonException}\n                        color={this.state.stopOnException ? 'primary' : 'default'}\n                        disabled={disabled || !this.state.paused}\n                        onClick={() => this.onToggleException()}\n                        title={I18n.t('Stop on exception')}\n                        size=\"medium\"\n                    >\n                        <IconException />\n                    </IconButton>\n                )}\n                {this.renderTabs()}\n            </Toolbar>\n        );\n    }\n\n    getPossibleBreakpoints(bp: DebuggerLocation): void {\n        const end = { ...bp, columnNumber: 1000 };\n        this.sendToInstance({ cmd: 'getPossibleBreakpoints', start: bp, end });\n    }\n\n    toggleBreakpoint(lineNumber: number): void {\n        const bp: SetBreakpointParameterType | undefined = this.state.breakpoints.find(\n            item => item.location.scriptId === this.state.selected && item.location.lineNumber === lineNumber,\n        );\n        if (bp) {\n            const breakpoints = JSON.parse(JSON.stringify(this.state.breakpoints));\n            this.setState({ breakpoints }, () => this.sendToInstance({ breakpoints: [bp.id], cmd: 'cb' }));\n        } else {\n            this.getPossibleBreakpoints({\n                scriptId: this.state.selected,\n                lineNumber,\n                columnNumber: 0,\n            } as DebuggerLocation);\n        }\n    }\n\n    renderCode(): React.JSX.Element | null {\n        if (this.state.script && this.state.started) {\n            const breakpoints = this.state.breakpoints.filter(bp => bp.location.scriptId === this.state.selected);\n\n            return (\n                <Editor\n                    runningInstances={this.props.runningInstances}\n                    socket={this.props.socket}\n                    adapterName={this.props.adapterName}\n                    scriptName={this.state.selected ? this.state.tabs[this.state.selected] : ''}\n                    sourceId={this.state.selected}\n                    script={this.state.script}\n                    paused={this.state.paused}\n                    breakpoints={breakpoints}\n                    location={this.state.location}\n                    themeType={this.props.themeType}\n                    themeName={this.props.themeName}\n                    onToggleBreakpoint={i => this.toggleBreakpoint(i)}\n                />\n            );\n        }\n        return null;\n    }\n\n    renderFrames(): React.JSX.Element | null {\n        if (!this.state.paused) {\n            return null;\n        }\n\n        return (\n            <Stack\n                currentScriptId={this.state.selected}\n                scopes={this.state.scopes}\n                expressions={this.state.expressions}\n                themeType={this.props.themeType}\n                callFrames={this.state.context?.callFrames}\n                currentFrame={this.state.currentFrame}\n                onChangeCurrentFrame={i => {\n                    this.setState({ currentFrame: i, scopes: {} }, () => {\n                        this.readCurrentScope();\n                        this.readExpressions();\n                    });\n                }}\n                onWriteScopeValue={obj => {\n                    this.sendToInstance({\n                        cmd: 'setValue',\n                        variableName: obj.variableName,\n                        scopeNumber: obj.scopeNumber,\n                        newValue: obj.newValue,\n                        callFrameId: obj.callFrameId,\n                    });\n                }}\n                onExpressionDelete={i => {\n                    const expressions: DebugVariable[] = JSON.parse(JSON.stringify(this.state.expressions));\n                    expressions.splice(i, 1);\n                    this.setState({ expressions });\n                    window.localStorage.setItem(\n                        `javascript.tools.exps.${this.props.src}`,\n                        JSON.stringify(expressions.map(item => item.name)),\n                    );\n                }}\n                onExpressionAdd={cb => {\n                    const expressions = JSON.parse(JSON.stringify(this.state.expressions));\n                    expressions.push({ name: '', value: { value: '' } });\n                    this.setState(\n                        { expressions },\n                        () => cb && cb(expressions.length - 1, this.state.expressions[expressions.length - 1]),\n                    );\n                }}\n                onExpressionNameUpdate={(i, name, cb) => {\n                    const expressions: DebugVariable[] = JSON.parse(JSON.stringify(this.state.expressions));\n                    if (!name) {\n                        expressions.splice(i, 1);\n                    } else if (expressions.find(item => item.name === name)) {\n                        return cb && cb();\n                    } else {\n                        expressions[i].name = name;\n                    }\n\n                    this.setState({ expressions }, () => {\n                        name && this.readExpressions(i);\n                        cb && cb();\n                    });\n                    window.localStorage.setItem(\n                        `javascript.tools.exps.${this.props.src}`,\n                        JSON.stringify(expressions.map(item => item.name)),\n                    );\n                }}\n            />\n        );\n    }\n\n    renderConsole(): React.JSX.Element {\n        return (\n            <Console\n                console={this.state.console}\n                onClearAllLogs={() =>\n                    this.setState({\n                        console: [],\n                        logErrors: 0,\n                        logWarnings: 0,\n                        logs: 0,\n                    })\n                }\n            />\n        );\n    }\n\n    renderTools(): React.JSX.Element {\n        const disabled = !this.state.tabs || !this.state.started;\n\n        let _console;\n        if (this.state.logErrors) {\n            _console = (\n                <Badge\n                    badgeContent={this.state.logErrors}\n                    color=\"error\"\n                >\n                    <span>{I18n.t('Console')}</span>\n                </Badge>\n            );\n        } else if (this.state.logWarnings) {\n            _console = (\n                <Badge\n                    badgeContent={this.state.logWarnings}\n                    color=\"secondary\"\n                >\n                    <span>{I18n.t('Console')}</span>\n                </Badge>\n            );\n        } else if (this.state.logs) {\n            _console = (\n                <Badge\n                    badgeContent={this.state.logs}\n                    color=\"default\"\n                >\n                    <span>{I18n.t('Console')}</span>\n                </Badge>\n            );\n        } else {\n            _console = I18n.t('Console');\n        }\n\n        return (\n            <div style={{ width: '100%', height: '100%', overflow: 'hidden' }}>\n                <Tabs\n                    sx={styles.tabsRoot}\n                    component=\"div\"\n                    indicatorColor=\"primary\"\n                    style={{ position: 'relative', width: '100%' }}\n                    value={this.state.toolsTab}\n                    onChange={(event, value) => {\n                        const newState: Partial<DebuggerState> = { toolsTab: value };\n\n                        // load logs from buffer\n                        if (this.console && value === 'console') {\n                            newState.console = this.console;\n                            this.console = null;\n                            newState.logs = 0;\n                            newState.logWarnings = 0;\n                            newState.logErrors = 0;\n                        }\n\n                        window.localStorage.setItem('javascript.tools.tab', value);\n\n                        this.setState(newState as DebuggerState);\n                    }}\n                    scrollButtons=\"auto\"\n                >\n                    <Tab\n                        style={styles.tabRoot}\n                        disabled={disabled}\n                        label={I18n.t('Stack')}\n                        value=\"stack\"\n                    />\n                    <Tab\n                        style={styles.tabRoot}\n                        disabled={disabled}\n                        label={_console}\n                        value=\"console\"\n                    />\n                </Tabs>\n                <div style={{ width: '100%', height: 'calc(100% - 36px)', overflow: 'hidden' }}>\n                    {this.state.toolsTab === 'stack' && !disabled ? this.renderFrames() : null}\n                    {this.state.toolsTab === 'console' && !disabled ? this.renderConsole() : null}\n                </div>\n            </div>\n        );\n    }\n\n    render(): React.JSX.Element {\n        return (\n            <Box\n                key=\"debugger\"\n                sx={styles.root}\n            >\n                {this.state.starting ? <LinearProgress /> : null}\n                {this.renderToolbar()}\n                <ReactSplit\n                    direction={SplitDirection.Vertical}\n                    initialSizes={this.state.toolSizes}\n                    minHeights={[100, 100]}\n                    onResizeFinished={(_gutterIdx, toolSizes) => {\n                        this.setState({ toolSizes });\n                        window.localStorage.setItem('JS.toolSizes', JSON.stringify(toolSizes));\n                    }}\n                    gutterClassName={this.props.themeType === 'dark' ? 'Dark visGutter' : 'Light visGutter'}\n                >\n                    <div style={{ width: '100%', height: '100%', overflow: 'hidden' }}>\n                        {this.renderCode()}\n                        {this.renderQueryBreakpoints()}\n                    </div>\n                    <div style={{ width: '100%', height: '100%', overflow: 'hidden' }}>{this.renderTools()}</div>\n                </ReactSplit>\n                {this.renderError()}\n            </Box>\n        );\n    }\n}\n\nexport default Debugger;\n","import ChannelDetector, { type DetectOptions, Types } from '@iobroker/type-detector';\nimport { type AdminConnection, I18n } from '@iobroker/adapter-react-v5';\nimport docs from './docs.md';\nimport type { PatternControl } from '@iobroker/type-detector';\n\ninterface DeviceState {\n    id: string;\n    name: string;\n    role?: string;\n    type: ioBroker.CommonType;\n    unit?: string;\n    read: boolean;\n    write: boolean;\n}\n\nexport interface DeviceObject {\n    id: string;\n    name: string;\n    type: ioBroker.ObjectType;\n    room?: string;\n    function?: string;\n    deviceType: Types;\n    states: DeviceState[];\n}\n\nlet allObjectsCache: Record<\n    string,\n    ioBroker.DeviceObject | ioBroker.StateObject | ioBroker.ChannelObject | ioBroker.FolderObject | ioBroker.EnumObject\n> | null = null;\n\nasync function allObjects(\n    socket: AdminConnection,\n): Promise<\n    Record<\n        string,\n        | ioBroker.DeviceObject\n        | ioBroker.StateObject\n        | ioBroker.ChannelObject\n        | ioBroker.FolderObject\n        | ioBroker.EnumObject\n    >\n> {\n    if (allObjectsCache) {\n        return allObjectsCache;\n    }\n    const states = await socket.getObjectViewSystem('state', '', '\\u9999');\n    const channels = await socket.getObjectViewSystem('channel', '', '\\u9999');\n    const devices = await socket.getObjectViewSystem('device', '', '\\u9999');\n    const folders = await socket.getObjectViewSystem('folder', '', '\\u9999');\n    const enums = await socket.getObjectViewSystem('enum', '', '\\u9999');\n\n    allObjectsCache = Object.assign(states, channels, devices, folders, enums);\n\n    return allObjectsCache as Record<\n        string,\n        | ioBroker.DeviceObject\n        | ioBroker.StateObject\n        | ioBroker.ChannelObject\n        | ioBroker.FolderObject\n        | ioBroker.EnumObject\n    >;\n}\n\nfunction getText(text: ioBroker.StringOrTranslated, lang: ioBroker.Languages): string {\n    if (text && typeof text === 'object') {\n        return text[lang] || text.en;\n    }\n    return text || '';\n}\n\nasync function detectDevices(socket: AdminConnection): Promise<DeviceObject[]> {\n    const lang: ioBroker.Languages = I18n.getLanguage();\n    const devicesObject: Record<\n        string,\n        | ioBroker.DeviceObject\n        | ioBroker.StateObject\n        | ioBroker.ChannelObject\n        | ioBroker.FolderObject\n        | ioBroker.EnumObject\n    > = await allObjects(socket);\n    const keys: string[] = Object.keys(devicesObject).sort();\n    const detector: ChannelDetector = new ChannelDetector();\n\n    const usedIds: string[] = [];\n    const ignoreIndicators: string[] = ['UNREACH_STICKY']; // Ignore indicators by name\n    const excludedTypes: Types[] = [Types.info];\n    const enums: string[] = [];\n    const rooms: string[] = [];\n    const funcs: string[] = [];\n    const list: string[] = [];\n\n    keys.forEach(id => {\n        if (devicesObject[id]?.type === 'enum') {\n            enums.push(id);\n        } else if ((devicesObject[id]?.common as ioBroker.StateCommon)?.smartName) {\n            list.push(id);\n        }\n    });\n\n    enums.forEach(id => {\n        if (id.startsWith('enum.rooms.')) {\n            rooms.push(id);\n        } else if (id.startsWith('enum.functions.')) {\n            funcs.push(id);\n        }\n        const members: string[] | undefined = (devicesObject[id].common as ioBroker.EnumCommon).members;\n\n        if (members?.length) {\n            members.forEach(member => {\n                // if an object really exists\n                if (devicesObject[member]) {\n                    if (!list.includes(member)) {\n                        list.push(member);\n                    }\n                }\n            });\n        }\n    });\n\n    const options: DetectOptions = {\n        id: '',\n        objects: devicesObject,\n        _keysOptional: keys,\n        _usedIdsOptional: usedIds,\n        ignoreIndicators,\n        excludedTypes,\n    };\n\n    const result: DeviceObject[] = [];\n\n    // we are creating a list of devices, where each device has a following structure:\n    // {\n    //     id: 'hm-rpc.0.KEQ0123456.1',\n    //     name: 'HM-RC-4-2',\n    //     role: 'light',\n    //     room: 'Living room',\n    //     'function': 'light'\n    // }\n\n    list.forEach(id => {\n        options.id = id;\n\n        const controls: PatternControl[] | null = detector.detect(options);\n\n        if (controls) {\n            controls.forEach(control => {\n                const stateId = control.states.find(state => state.id)?.id;\n                // if not yet added\n                if (!stateId || result.find(st => st.id === stateId)) {\n                    return;\n                }\n\n                const stateObj = devicesObject[stateId];\n\n                const deviceObject: DeviceObject = {\n                    id: stateId,\n                    name: getText(stateObj.common.name, lang),\n                    type: stateObj.type,\n                    deviceType: control.type,\n                    states: control.states\n                        .filter(state => state.id)\n                        .map(state => ({\n                            id: state.id,\n                            name: state.name,\n                            role: state.defaultRole,\n                            type: (devicesObject[state.id].common as ioBroker.StateCommon).type,\n                            unit: (devicesObject[state.id].common as ioBroker.StateCommon).unit,\n                            read:\n                                (devicesObject[state.id].common as ioBroker.StateCommon).read === undefined\n                                    ? true\n                                    : (devicesObject[state.id].common as ioBroker.StateCommon).read,\n                            write:\n                                (devicesObject[state.id].common as ioBroker.StateCommon).write === undefined\n                                    ? true\n                                    : (devicesObject[state.id].common as ioBroker.StateCommon).write,\n                        })),\n                };\n\n                const parts = stateId.split('.');\n                let channelId: string | undefined;\n                let deviceId: string | undefined;\n                if (stateObj.type === 'channel' || stateObj.type === 'state') {\n                    parts.pop();\n                    channelId = parts.join('.');\n                    if (\n                        devicesObject[channelId] &&\n                        (devicesObject[channelId].type === 'channel' || devicesObject[channelId].type === 'folder')\n                    ) {\n                        parts.pop();\n                        deviceId = parts.join('.');\n                        if (\n                            !devicesObject[deviceId] ||\n                            (devicesObject[deviceId].type !== 'device' && devicesObject[channelId].type !== 'folder')\n                        ) {\n                            deviceId = undefined;\n                        }\n                    } else {\n                        channelId = undefined;\n                    }\n                }\n\n                // try to detect room\n                const room = rooms.find(roomId => {\n                    if ((devicesObject[roomId] as ioBroker.EnumObject).common.members?.includes(stateId)) {\n                        return true;\n                    }\n                    if (\n                        channelId &&\n                        (devicesObject[roomId] as ioBroker.EnumObject).common.members?.includes(channelId)\n                    ) {\n                        return true;\n                    }\n                    return (\n                        deviceId && (devicesObject[roomId] as ioBroker.EnumObject).common.members?.includes(deviceId)\n                    );\n                });\n                if (room) {\n                    deviceObject.room = getText(devicesObject[room].common.name, lang);\n                }\n\n                // try to detect function\n                const func = funcs.find(funcId => {\n                    if ((devicesObject[funcId] as ioBroker.EnumObject).common.members?.includes(stateId)) {\n                        return true;\n                    }\n                    if (\n                        channelId &&\n                        (devicesObject[funcId] as ioBroker.EnumObject).common.members?.includes(channelId)\n                    ) {\n                        return true;\n                    }\n                    return (\n                        deviceId && (devicesObject[funcId] as ioBroker.EnumObject).common.members?.includes(deviceId)\n                    );\n                });\n                if (func) {\n                    deviceObject.function = getText(devicesObject[func].common.name, lang);\n                }\n                result.push(deviceObject);\n            });\n        }\n    });\n\n    // find names and icons for devices\n    for (let k = 0; k < result.length; k++) {\n        const deviceObj: DeviceObject = result[k];\n        if (deviceObj.type === 'state' || deviceObj.type === 'channel') {\n            const idArray = deviceObj.id.split('.');\n            idArray.pop();\n\n            // read channel\n            const parentObject = devicesObject[idArray.join('.')];\n            if (\n                parentObject &&\n                (parentObject.type === 'channel' || parentObject.type === 'device' || parentObject.type === 'folder')\n            ) {\n                deviceObj.name = getText(parentObject.common?.name || deviceObj.name, lang);\n                idArray.pop();\n                // read device\n                const grandParentObject = devicesObject[idArray.join('.')];\n                if (grandParentObject?.type === 'device' && grandParentObject.common?.icon) {\n                    deviceObj.name = getText(grandParentObject.common?.name || deviceObj.name, lang);\n                }\n            } else {\n                deviceObj.name = getText(parentObject?.common?.name || deviceObj.name, lang);\n            }\n        }\n    }\n\n    return result;\n}\n\nconst systemPrompt: () => Promise<string> = async (): Promise<string> => (await fetch(docs)).text();\nexport { systemPrompt, detectDevices };\n","import React, { useCallback, useRef, useState } from 'react';\nimport OpenAI from 'openai';\n\nimport {\n    Button,\n    CircularProgress,\n    Dialog,\n    DialogActions,\n    DialogContent,\n    DialogTitle,\n    IconButton,\n    TextField,\n    MenuItem,\n    Select,\n    FormControl,\n    InputLabel,\n} from '@mui/material';\n\nimport { Check, Close, QuestionMark as Question, FileCopy as Copy } from '@mui/icons-material';\n\nimport { Utils, I18n, type AdminConnection, type ThemeType } from '@iobroker/adapter-react-v5';\n\nimport { detectDevices, type DeviceObject, systemPrompt } from './OpenAiPrompt';\nimport ScriptEditorComponent from '../Components/ScriptEditorVanilaMonaco';\nimport type { APIError } from 'openai/error';\n\nconst LANGUAGES: Record<ioBroker.Languages, string> = {\n    ru: 'Russian',\n    en: 'English',\n    de: 'German',\n    es: 'Spanish',\n    fr: 'French',\n    it: 'Italian',\n    pl: 'Polish',\n    nl: 'Dutch',\n    pt: 'Portuguese',\n    uk: 'Ukrainian',\n    'zh-cn': 'Chinese',\n};\n\nfunction ChatIcon(): React.JSX.Element {\n    return (\n        <svg\n            width=\"24\"\n            height=\"24\"\n            viewBox=\"0 0 2406 2406\"\n        >\n            <path\n                d=\"M1 578.4C1 259.5 259.5 1 578.4 1h1249.1c319 0 577.5 258.5 577.5 577.4V2406H578.4C259.5 2406 1 2147.5 1 1828.6V578.4z\"\n                fill=\"#74aa9c\"\n            />\n            <path\n                d=\"M1107.3 299.1c-198 0-373.9 127.3-435.2 315.3C544.8 640.6 434.9 720.2 370.5 833c-99.3 171.4-76.6 386.9 56.4 533.8-41.1 123.1-27 257.7 38.6 369.2 98.7 172 297.3 260.2 491.6 219.2 86.1 97 209.8 152.3 339.6 151.8 198 0 373.9-127.3 435.3-315.3 127.5-26.3 237.2-105.9 301-218.5 99.9-171.4 77.2-386.9-55.8-533.9v-.6c41.1-123.1 27-257.8-38.6-369.8-98.7-171.4-297.3-259.6-491-218.6-86.6-96.8-210.5-151.8-340.3-151.2zm0 117.5-.6.6c79.7 0 156.3 27.5 217.6 78.4-2.5 1.2-7.4 4.3-11 6.1L952.8 709.3c-18.4 10.4-29.4 30-29.4 51.4V1248l-155.1-89.4V755.8c-.1-187.1 151.6-338.9 339-339.2zm434.2 141.9c121.6-.2 234 64.5 294.7 169.8 39.2 68.6 53.9 148.8 40.4 226.5-2.5-1.8-7.3-4.3-10.4-6.1l-360.4-208.2c-18.4-10.4-41-10.4-59.4 0L1024 984.2V805.4L1372.7 604c51.3-29.7 109.5-45.4 168.8-45.5zM650 743.5v427.9c0 21.4 11 40.4 29.4 51.4l421.7 243-155.7 90L597.2 1355c-162-93.8-217.4-300.9-123.8-462.8C513.1 823.6 575.5 771 650 743.5zm807.9 106 348.8 200.8c162.5 93.7 217.6 300.6 123.8 462.8l.6.6c-39.8 68.6-102.4 121.2-176.5 148.2v-428c0-21.4-11-41-29.4-51.4l-422.3-243.7 155-89.3zM1201.7 997l177.8 102.8v205.1l-177.8 102.8-177.8-102.8v-205.1L1201.7 997zm279.5 161.6 155.1 89.4v402.2c0 187.3-152 339.2-339 339.2v-.6c-79.1 0-156.3-27.6-217-78.4 2.5-1.2 8-4.3 11-6.1l360.4-207.5c18.4-10.4 30-30 29.4-51.4l.1-486.8zM1380 1421.9v178.8l-348.8 200.8c-162.5 93.1-369.6 38-463.4-123.7h.6c-39.8-68-54-148.8-40.5-226.5 2.5 1.8 7.4 4.3 10.4 6.1l360.4 208.2c18.4 10.4 41 10.4 59.4 0l421.9-243.7z\"\n                fill=\"white\"\n            />\n        </svg>\n    );\n}\n\nconst styles: Record<string, React.CSSProperties> = {\n    toolbarButtons: {\n        padding: 4,\n        marginLeft: 4,\n    },\n    fullHeightDialog: {\n        height: 'calc(100% - 100px)',\n    },\n};\n\ninterface OpenAiDialogProps {\n    adapterName: string;\n    socket: AdminConnection;\n    runningInstances: Record<string, any>;\n    themeType: ThemeType;\n    language: 'javascript' | 'typescript';\n    onAddCode: (answer: string) => void;\n}\n\nconst OpenAiDialog = (props: OpenAiDialogProps): React.JSX.Element => {\n    const [question, setQuestion] = useState(window.localStorage.getItem('openai-question') || '');\n    const [answer, setAnswer] = useState('');\n    const [open, setOpen] = useState(false);\n    const [working, setWorking] = useState(false);\n    const [error, setError] = useState(false);\n    const [model, setModel] = useState(window.localStorage.getItem('openai-model') || 'gpt-4o');\n    const [showKeyWarning, setShowKeyWarning] = useState(false);\n    const devicesCache = useRef<null | DeviceObject[]>(null);\n    const gptKeyCache = useRef<string | null>(null);\n    const docsCache = useRef<string | null>(null);\n\n    const ask = useCallback(async (): Promise<void> => {\n        let devices: DeviceObject[];\n        if (!devicesCache.current) {\n            devices = await detectDevices(props.socket);\n            devicesCache.current = devices;\n            console.log(`devices: ${JSON.stringify(devices, null, 2)}`);\n        } else {\n            devices = devicesCache.current;\n        }\n        let apiKey: string | undefined;\n        if (!gptKeyCache.current) {\n            const ids = Object.keys(props.runningInstances);\n            for (let i = 0; i < ids.length; i++) {\n                const config: ioBroker.Object | null | undefined = await props.socket.getObject(ids[i]);\n                apiKey = (config?.native.gptKey || '').trim();\n                if (apiKey) {\n                    break;\n                }\n            }\n            gptKeyCache.current = apiKey || null;\n        } else {\n            apiKey = gptKeyCache.current;\n        }\n\n        let docs;\n        if (!docsCache.current) {\n            docs = await systemPrompt();\n            docsCache.current = docs;\n        } else {\n            docs = docsCache.current;\n        }\n        if (!apiKey) {\n            setShowKeyWarning(true);\n            return;\n        }\n\n        setWorking(true);\n        setError(false);\n\n        try {\n            const openai = new OpenAI({ apiKey, dangerouslyAllowBrowser: true });\n\n            const chatCompletionPhase1 = await openai.chat.completions.create({\n                model,\n                messages: [\n                    {\n                        role: 'system',\n                        content: `You are programmer. Here is a documentation:\\n\\n${docs}`,\n                    },\n                    {\n                        role: 'system',\n                        content: `Here is list of devices:\\n\\n${JSON.stringify(devices, null, 2)}`,\n                    },\n                    {\n                        role: 'user',\n                        content: `Write JavaScript code that does:\\n\\n${question}\nReturn only code.\nWrite comments in ${LANGUAGES[I18n.getLanguage()] || 'English'}.\nYou can call async function directly in the code without encapsulate them in async function as this code will be already executed in async function.\nDo not import any libraries as all functions are already imported.`,\n                    },\n                ],\n            });\n            const message = chatCompletionPhase1.choices[0].message;\n            const m = message.content?.match(/```(javascript|js|typescript)\\n?(.*)```(.*)/ms);\n            let code;\n            if (!m) {\n                code = message.content;\n                if (code?.startsWith('`')) {\n                    code = code.substring(1);\n                }\n                if (code?.endsWith('`')) {\n                    code = code.substring(0, code.length - 1);\n                }\n            } else {\n                code = m[2];\n                if (m[3]) {\n                    const comments = m[3].split('\\n').map(line => line.trim());\n                    // skip empty lines on start and end\n                    while (comments[0] === '') {\n                        comments.shift();\n                    }\n                    code = `${comments.map(line => `// ${line}`).join('\\n')}\\n${code}`;\n                }\n            }\n            console.log(message);\n            setAnswer(code || '');\n        } catch (err: unknown) {\n            console.log(JSON.stringify(err));\n            if ((err as APIError).error) {\n                setError(((err as APIError).error as any).message);\n            }\n            console.error(`Cannot request: ${err}, ${JSON.stringify((err as APIError).error || err, null, 2)}`);\n        }\n\n        setWorking(false);\n    }, [question, model, props.runningInstances, props.socket]);\n\n    return (\n        <>\n            <IconButton\n                key=\"ai\"\n                aria-label=\"AI\"\n                title={I18n.t('AI code generator')}\n                style={styles.toolbarButtons}\n                size=\"medium\"\n                onClick={() => setOpen(true)}\n            >\n                <ChatIcon />\n            </IconButton>\n            {showKeyWarning && (\n                <Dialog\n                    maxWidth=\"lg\"\n                    open={!0}\n                    onClose={() => setShowKeyWarning(false)}\n                    fullWidth\n                >\n                    <DialogTitle>{I18n.t('No Chat GPT Key found')}</DialogTitle>\n                    <DialogContent\n                        style={{\n                            display: 'flex',\n                            flexDirection: 'column',\n                            gap: 8,\n                        }}\n                    >\n                        <div>\n                            {I18n.t('You have to enter OpenAI API key in the configuration of javascript adapter.')}\n                        </div>\n                        <Button\n                            variant=\"contained\"\n                            onClick={() => {\n                                const ids = Object.keys(props.runningInstances);\n\n                                window.open(\n                                    `../../#tab-instances/config/${ids[0] || 'system.adapter.javascript.0'}`,\n                                    '_blank',\n                                );\n                                setShowKeyWarning(false);\n                            }}\n                        >\n                            {I18n.t('Open configuration')}\n                        </Button>\n                    </DialogContent>\n                    <DialogActions>\n                        <Button\n                            variant=\"contained\"\n                            startIcon={<Close />}\n                            onClick={() => setShowKeyWarning(false)}\n                        >\n                            {I18n.t('Close')}\n                        </Button>\n                    </DialogActions>\n                </Dialog>\n            )}\n            {open && (\n                <Dialog\n                    maxWidth=\"lg\"\n                    sx={{ '& .MuiDialog-paper': styles.fullHeightDialog }}\n                    open={!0}\n                    onClose={() => setOpen(false)}\n                    fullWidth\n                >\n                    <DialogTitle>{I18n.t('AI code generator')}</DialogTitle>\n                    <DialogContent\n                        style={{\n                            display: 'flex',\n                            flexDirection: 'column',\n                            gap: 8,\n                            height: '100%',\n                        }}\n                    >\n                        <div>\n                            <TextField\n                                variant=\"standard\"\n                                multiline\n                                autoFocus\n                                disabled={working}\n                                fullWidth\n                                onKeyUp={e => {\n                                    if (e.key === 'Enter' && e.ctrlKey) {\n                                        ask();\n                                    }\n                                }}\n                                label={I18n.t('Enter your question')}\n                                helperText={I18n.t('Press Ctrl+Enter to get the answer')}\n                                value={question}\n                                onChange={e => {\n                                    window.localStorage.setItem('openai-question', e.target.value);\n                                    setQuestion(e.target.value);\n                                }}\n                            />\n                        </div>\n                        <div style={{ display: 'flex', alignItems: 'baseline' }}>\n                            <Button\n                                variant=\"contained\"\n                                disabled={working || !question}\n                                startIcon={<Question />}\n                                onClick={async () => ask()}\n                            >\n                                {working ? <CircularProgress size={24} /> : I18n.t('Ask')}\n                            </Button>\n                            <FormControl\n                                style={{ width: 150, marginLeft: 20 }}\n                                variant=\"standard\"\n                            >\n                                <InputLabel>{I18n.t('Model')}</InputLabel>\n                                <Select\n                                    variant=\"standard\"\n                                    value={model}\n                                    onChange={e => {\n                                        window.localStorage.setItem('openai-model', e.target.value);\n                                        error && setError(false);\n                                        setModel(e.target.value);\n                                    }}\n                                >\n                                    <MenuItem value=\"gpt-4o\">GPT-4o</MenuItem>\n                                    <MenuItem value=\"gpt-4-turbo\">GPT-4 Turbo</MenuItem>\n                                    <MenuItem value=\"gpt-4-32k\">GPT-4 32k</MenuItem>\n                                    <MenuItem value=\"gpt-4\">GPT-4</MenuItem>\n                                    <MenuItem value=\"gpt-3.5-turbo-16k\">GPT-3.5 Turbo</MenuItem>\n                                </Select>\n                            </FormControl>\n                        </div>\n                        <div>{I18n.t('Result')}</div>\n                        <div style={{ height: 'calc(100% - 155px)' }}>\n                            {error ? (\n                                <div style={{ color: props.themeType === 'dark' ? '#984242' : '#bb0000' }}>{error}</div>\n                            ) : (\n                                <ScriptEditorComponent\n                                    adapterName={props.adapterName}\n                                    runningInstances={props.runningInstances}\n                                    style={{\n                                        height: '100%',\n                                        width: '100%',\n                                        resize: 'none',\n                                    }}\n                                    name=\"ai\"\n                                    socket={props.socket}\n                                    readOnly\n                                    checkJs\n                                    code={answer}\n                                    isDark={props.themeType === 'dark'}\n                                    language={props.language || 'javascript'}\n                                />\n                            )}\n                        </div>\n                    </DialogContent>\n                    <DialogActions>\n                        <Button\n                            color=\"grey\"\n                            variant=\"outlined\"\n                            disabled={!answer}\n                            startIcon={<Copy />}\n                            onClick={() => {\n                                Utils.copyToClipboard(answer);\n                                window.alert(I18n.t('Copied'));\n                            }}\n                        >\n                            {I18n.t('Copy to clipboard')}\n                        </Button>\n                        <Button\n                            color=\"primary\"\n                            variant=\"contained\"\n                            disabled={!answer || error}\n                            startIcon={<Check />}\n                            onClick={() => {\n                                props.onAddCode(answer);\n                                setOpen(false);\n                            }}\n                        >\n                            {I18n.t('Use generated code')}\n                        </Button>\n                        <Button\n                            color=\"grey\"\n                            variant=\"contained\"\n                            startIcon={<Close />}\n                            onClick={() => setOpen(false)}\n                        >\n                            {I18n.t('Close')}\n                        </Button>\n                    </DialogActions>\n                </Dialog>\n            )}\n        </>\n    );\n};\n\nexport default OpenAiDialog;\n","import React from 'react';\nimport Tour from 'reactour';\n\nimport {\n    Toolbar,\n    Button,\n    IconButton,\n    Tabs,\n    Tab,\n    Badge,\n    Snackbar,\n    Menu,\n    MenuItem,\n    Checkbox,\n    Dialog,\n    DialogTitle,\n    DialogContent,\n    DialogActions,\n    LinearProgress,\n    Table,\n    TableBody,\n    TableCell,\n    TableContainer,\n    TableHead,\n    TableRow,\n    Tooltip,\n    Paper,\n    Box,\n} from '@mui/material';\n\nimport { red, green } from '@mui/material/colors';\n\nimport {\n    MdSave as IconSave,\n    MdCancel as IconCancel,\n    MdClose as IconClose,\n    MdRefresh as IconRestart,\n    MdInput as IconDoEdit,\n    MdGpsFixed as IconLocate,\n    MdClearAll as IconCloseAll,\n    MdBuild as IconDebugMenu,\n    MdBugReport as IconDebug,\n    MdPlaylistAddCheck as IconVerbose,\n    MdBugReport as IconDebugMode,\n    MdPlayArrow as IconPlay,\n    MdPause as IconPause,\n    MdBrightness4 as IconAstro,\n} from 'react-icons/md';\n\nimport {\n    FaClock as IconCron,\n    FaClipboardList as IconSelectId,\n    FaFileExport as IconExport,\n    FaFileImport as IconImport,\n    FaFlagCheckered as IconCheck,\n} from 'react-icons/fa';\n\nimport ImgJS from './assets/js.png';\nimport ImgBlockly from './assets/blockly.png';\nimport ImgTypeScript from './assets/typescript.png';\nimport ImgBlockly2Js from './assets/blockly2js.svg';\nimport ImgRules2Js from './assets/rules2js.svg';\nimport ImgRules from './assets/rules.png';\n\nimport {\n    I18n,\n    Cron as DialogCron,\n    Confirm as DialogConfirm,\n    SelectID as DialogSelectID,\n    type IobTheme,\n    type ThemeType,\n    type AdminConnection,\n    type ThemeName,\n} from '@iobroker/adapter-react-v5';\n\nimport ScriptEditorComponent from './Components/ScriptEditorVanilaMonaco';\nimport BlocklyEditor from './Components/BlocklyEditor';\nimport DialogScriptEditor from './Dialogs/ScriptEditor';\nimport RulesEditor from './Components/RulesEditor';\nimport Debugger from './Components/Debugger';\nimport steps, { STEPS } from './Components/RulesEditor/helpers/Tour';\nimport OpenAiDialog from './OpenAi/OpenAiDialog';\nimport type { AstroTimes, ScriptType } from '@/types';\n\ndeclare global {\n    interface Window {\n        systemLang: ioBroker.Languages;\n        main: {\n            objects: Record<string, ioBroker.ScriptObject | ioBroker.InstanceObject | ioBroker.ChannelObject>;\n            getObject: (id: string, cb: (err: Error | null | undefined, obj?: ioBroker.Object | null) => void) => void;\n            instances: string[];\n            selectIdDialog: (\n                initValue: string | null,\n                type: ('state' | 'all' | 'meta' | 'script' | 'enum' | null) | ((selected: string) => void),\n                cb?: (selected: string) => void,\n            ) => void;\n            cronDialog: (initValue: string | null, cb: (selected: string) => void) => void;\n            showScriptDialog: (script: string, args: any[], isReturn: boolean, cb: (newScript: string) => void) => void;\n        };\n    }\n}\n\nconst images: Record<ScriptType | 'def', string> = {\n    Blockly: ImgBlockly,\n    'Javascript/js': ImgJS,\n    Rules: ImgRules,\n    def: ImgJS,\n    'TypeScript/ts': ImgTypeScript,\n};\n\nconst MENU_ITEM_HEIGHT = 48;\nconst COLOR_DEBUG = '#02a102';\nconst COLOR_VERBOSE = '#70aae9';\nconst COLOR_RUN = green[400];\nconst COLOR_PAUSE = red[400];\n\nconst styles: Record<string, any> = {\n    toolbar: {\n        minHeight: 38, // Theme.toolbar.height,\n        boxShadow:\n            '0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12)',\n    },\n    toolbarButtons: {\n        padding: 4,\n        marginLeft: 4,\n    },\n    toolbarButtonsDisabled: {\n        filter: 'grayscale(100%)',\n        opacity: 0.5,\n    },\n    editorDiv: (theme: IobTheme): React.CSSProperties => ({\n        height: `calc(100% - ${(parseInt(theme.toolbar.height as string, 10) || 48) + 38 /* Theme.toolbar.height */ + 10}px)`,\n        width: '100%',\n        overflow: 'hidden',\n        position: 'relative',\n    }),\n    textButton: {\n        marginRight: 10,\n        minHeight: 24,\n        padding: '6px 16px',\n    },\n    saveButton: {\n        background: '#ff9900',\n    },\n    textIcon: {\n        marginLeft: 8,\n    },\n    tabIcon: {\n        width: 24,\n        height: 24,\n        verticalAlign: 'middle',\n        marginBottom: 2,\n        marginRight: 2,\n        borderRadius: 3,\n    },\n    hintIcon: {\n        // fontSize: 32,\n        padding: '0 8px 0 8px',\n    },\n    hintText: {\n        // fontSize: 18\n    },\n    hintButton: {\n        marginTop: 8,\n        marginLeft: 20,\n    },\n    tabMenuButton: {\n        position: 'absolute',\n        top: 0,\n        right: 0,\n    },\n    tabChanged: (theme: IobTheme): React.CSSProperties => ({\n        color: theme.palette.secondary.main,\n    }),\n    tabText: {\n        maxWidth: 130,\n        textOverflow: 'ellipsis',\n        whiteSpace: 'nowrap',\n        overflow: 'hidden',\n        display: 'inline-block',\n        verticalAlign: 'middle',\n    },\n    tabChangedIcon: {\n        color: '#FF0000',\n        fontSize: 16,\n        marginLeft: 5,\n    },\n    closeButton: {\n        marginLeft: 5,\n    },\n    notRunning: {\n        color: '#ffbc00',\n        marginRight: 8,\n        marginLeft: 8,\n    },\n    tabButton: {\n        minHeight: 48,\n    },\n    tabButtonWrapper: {\n        display: 'inline-block',\n    },\n    menuIcon: {\n        width: 18,\n        height: 18,\n        borderRadius: 2,\n        marginRight: 5,\n    },\n};\n\ninterface EditorProps {\n    socket: AdminConnection;\n    objects: Record<string, ioBroker.ScriptObject | ioBroker.ChannelObject>;\n    searchText: string;\n    selected: string;\n    menuOpened: boolean;\n    themeType: ThemeType;\n    runningInstances: Record<string, boolean>;\n    onChange: (id: string, common: ioBroker.ScriptCommon) => void;\n    onSelectedChange: (selected: string, editing: string[]) => void;\n    onRestart?: (id: string) => void;\n    debugMode: boolean;\n    visible: boolean;\n    onMenuOpened?: (opened: boolean) => void;\n    onSearch?: (searchText: string) => void;\n    onThemeChange?: (themeType: ThemeType) => void;\n    debugInstance: { adapter?: string; instance?: string } | null;\n    onLocate: (menuSelectId: string) => void;\n    theme: IobTheme;\n    themeName: ThemeName;\n    onDebugModeChange: (debugMode: boolean) => void;\n    adapterName: string;\n    expertMode: boolean;\n    isAnyRulesExists: number;\n    resizing: boolean;\n}\n\ninterface EditorState {\n    selected: string;\n    editing: string[];\n    changed: Record<string, boolean>;\n    blockly: boolean | null;\n    rules: boolean | null;\n    debugEnabled: boolean;\n    verboseEnabled: boolean;\n    showCompiledCode: boolean;\n    showSelectId: boolean;\n    showCron: boolean;\n    showScript: boolean;\n    showAstro: boolean;\n    astroEvents: null | AstroTimes;\n    insert: string;\n    searchText: string;\n    themeType: ThemeType;\n    visible: boolean;\n    cmdToBlockly: '' | 'export' | 'import' | 'check';\n    cmdToRules: '' | 'export' | 'import';\n    menuOpened: boolean;\n    menuTabsOpened: boolean;\n    runningInstances: Record<string, boolean>;\n    showDebugMenu: boolean;\n    toast: string;\n    instancesLoaded: boolean;\n    isTourOpen: boolean;\n    tourStep: number;\n    showAdapterDebug: boolean;\n    confirm: string;\n    askAboutDebug: boolean;\n    menuDebugAnchorEl: null | HTMLElement;\n}\n\nclass Editor extends React.Component<EditorProps, EditorState> {\n    private getSelect: (() => string | undefined) | null = null;\n\n    private cron: { initValue: string | null; callback: null | ((selected: string) => void); type?: string } = {\n        initValue: null,\n        callback: null,\n    };\n\n    private scriptDialog: {\n        initValue: string | null;\n        callback: null | ((selected: string) => void);\n        args: null | any[];\n        isReturn: boolean;\n    } = {\n        initValue: null,\n        callback: null,\n        args: null,\n        isReturn: false,\n    };\n\n    private objects: Record<string, ioBroker.ScriptObject | ioBroker.ChannelObject>;\n\n    private readonly scripts: Record<string, ioBroker.ScriptCommon>;\n\n    // required by selectIdDialog in Blockly\n    private selectId: {\n        initValue: string | null;\n        callback: null | ((selected: string | string[] | undefined) => void);\n        type?: 'state' | 'all' | 'meta' | 'script' | 'enum' | null;\n    } = {\n        initValue: null,\n        callback: null,\n    };\n\n    private confirmCallback: null | ((result: boolean) => void) = null;\n\n    constructor(props: EditorProps) {\n        super(props);\n\n        const selected = window.localStorage.getItem('Editor.selected') || '';\n        const editingStr = window.localStorage.getItem('Editor.editing') || '[]';\n        let editing: string[];\n        try {\n            editing = JSON.parse(editingStr);\n        } catch {\n            editing = [];\n        }\n        if (selected && !editing.includes(selected)) {\n            editing.push(selected);\n        }\n\n        this.state = {\n            askAboutDebug: false,\n            astroEvents: null,\n            blockly: null,\n            changed: {}, // for every script\n            cmdToBlockly: '',\n            cmdToRules: '',\n            confirm: '',\n            debugEnabled: false,\n            editing, // array of opened scripts\n            insert: '',\n            instancesLoaded: false,\n            isTourOpen: window.localStorage.getItem('tour') !== 'true',\n            menuDebugAnchorEl: null,\n            menuOpened: !!this.props.menuOpened,\n            menuTabsOpened: false,\n            rules: null,\n            runningInstances: this.props.runningInstances || {},\n            searchText: '',\n            selected,\n            showAdapterDebug: false,\n            showAstro: false,\n            showCompiledCode: false,\n            showCron: false,\n            showDebugMenu: false,\n            showScript: false,\n            showSelectId: false,\n            themeType: this.props.themeType,\n            toast: '',\n            tourStep: STEPS.selectTriggers,\n            verboseEnabled: false,\n            visible: props.visible,\n        };\n\n        this.setChangedInAdmin();\n\n        window.systemLang = I18n.getLanguage();\n        window.main = {\n            objects: {},\n            getObject: (id: string, cb: (err: null | Error | undefined, obj?: ioBroker.Object | null) => void) =>\n                this.props.socket\n                    .getObject(id)\n                    .then(obj => cb && cb(null, obj))\n                    .catch(err => cb && cb(err)),\n            instances: [],\n            selectIdDialog: (\n                initValue: string | null,\n                type: ('state' | 'all' | 'meta' | 'script' | 'enum' | null) | ((selected: string) => void),\n                cb?: (selected: string) => void,\n            ): void => {\n                if (typeof type === 'function') {\n                    cb = type as (selected: string) => void;\n                    type = null;\n                }\n                this.selectId.callback = cb as (selected: string | string[] | undefined) => void;\n                this.selectId.initValue = initValue;\n                this.selectId.type = type;\n                this.setState({ showSelectId: true });\n            },\n            cronDialog: (initValue, cb) => {\n                this.cron.callback = cb;\n                this.cron.initValue = initValue;\n                this.setState({ showCron: true });\n            },\n            showScriptDialog: (\n                value: string,\n                args: any[],\n                isReturn: boolean,\n                cb: (newScript: string) => void,\n            ): void => {\n                this.scriptDialog.callback = cb;\n                this.scriptDialog.initValue = value;\n                this.scriptDialog.args = args;\n                this.scriptDialog.isReturn = isReturn || false;\n                this.setState({ showScript: true });\n            },\n        };\n\n        this.objects = props.objects;\n\n        this.scripts = {};\n\n        if (!this.state.selected && this.state.editing.length) {\n            Object.assign(this.state, { selected: this.state.editing[0] });\n        }\n\n        void this.getAllAdapterInstances().then(() => {\n            // to enable logging\n            if (this.props.onSelectedChange && this.state.selected) {\n                setTimeout(() => this.props.onSelectedChange(this.state.selected, this.state.editing), 100);\n            }\n        });\n    }\n\n    getAllAdapterInstances(): Promise<void> {\n        return this.props.socket.getAdapterInstances(true).then(instanceObjects => {\n            const objects: Record<string, ioBroker.InstanceObject> = {};\n            const instances = instanceObjects.map(obj => {\n                objects[obj._id] = obj;\n                return obj._id;\n            });\n            window.main.objects = objects;\n            window.main.instances = instances;\n            this.setState({ instancesLoaded: true });\n        });\n    }\n\n    static onInstanceChanged(id: string, obj: ioBroker.Object | null | undefined): void {\n        if (!id) {\n            return;\n        }\n\n        // @ts-expect-error will be fixed\n        if (!obj && window.main.instances.includes[id]) {\n            delete window.main.objects[id];\n            const pos = window.main.instances.indexOf(id);\n            window.main.instances.splice(pos, 1);\n        } else if (obj && obj.type === 'instance') {\n            // update instances\n            if (!window.main.instances.includes(id)) {\n                window.main.instances.push(id);\n                window.main.instances.sort();\n            }\n            window.main.objects[id] = obj;\n        }\n    }\n\n    setChangedInAdmin(): void {\n        const isChanged = Object.keys(this.state.changed).find(id => this.state.changed[id]);\n\n        if (typeof window.parent !== 'undefined' && window.parent) {\n            // @ts-expect-error by design\n            window.parent.configNotSaved = !!isChanged;\n        }\n    }\n\n    componentDidMount(): void {\n        window.addEventListener('beforeunload', this.onBrowserClose, false);\n        void this.props.socket.subscribeObject('system.adapter.*', Editor.onInstanceChanged);\n    }\n\n    componentWillUnmount(): void {\n        window.removeEventListener('beforeunload', this.onBrowserClose);\n        void this.props.socket.unsubscribeObject('system.adapter.*', Editor.onInstanceChanged);\n    }\n\n    onBrowserClose = (e: BeforeUnloadEvent): string | void => {\n        const isChanged = Object.keys(this.scripts).find(\n            id => JSON.stringify(this.scripts[id]) !== JSON.stringify(this.props.objects[id].common),\n        );\n\n        if (isChanged) {\n            console.log(`Script ${JSON.stringify(this.scripts[isChanged])}`);\n            const message = I18n.t('Configuration not saved.');\n            e = e || window.event;\n            // For IE and Firefox\n            if (e) {\n                e.returnValue = message;\n            }\n\n            // For Safari\n            return message;\n        }\n    };\n\n    removeNonExistingScripts(nextProps: EditorProps | null, newState: Partial<EditorState>): boolean {\n        nextProps = nextProps || this.props;\n        newState = newState || {};\n\n        let _changed = false;\n        if (this.state.editing) {\n            const isAnyNonExists = this.state.editing.find(id => nextProps && !nextProps.objects[id]);\n\n            if (isAnyNonExists) {\n                // remove non-existing scripts\n                const editing = JSON.parse(JSON.stringify(this.state.editing));\n                for (let i = editing.length - 1; i >= 0; i--) {\n                    if (!this.objects[editing[i]]) {\n                        _changed = true;\n                        editing.splice(i, 1);\n                    }\n                }\n                if (_changed) {\n                    newState.editing = editing;\n                }\n                if (this.state.selected && !this.objects[this.state.selected]) {\n                    _changed = true;\n                    newState.selected = editing[0] || '';\n                    if (newState.selected && this.scripts[newState.selected]) {\n                        if (this.state.blockly !== (this.scripts[newState.selected].engineType === 'Blockly')) {\n                            newState.blockly = this.scripts[newState.selected].engineType === 'Blockly';\n                            _changed = true;\n                        }\n                        if (this.state.rules !== (this.scripts[newState.selected].engineType === 'Rules')) {\n                            newState.rules = this.scripts[newState.selected].engineType === 'Rules';\n                            _changed = true;\n                        }\n                        if (this.state.verboseEnabled !== this.scripts[newState.selected].verbose) {\n                            newState.verboseEnabled = this.scripts[newState.selected].verbose;\n                            _changed = true;\n                        }\n                        if (this.state.debugEnabled !== this.scripts[newState.selected].debug) {\n                            newState.debugEnabled = this.scripts[newState.selected].debug;\n                            _changed = true;\n                        }\n                    }\n                }\n            }\n        }\n        return _changed;\n    }\n\n    UNSAFE_componentWillReceiveProps(nextProps: EditorProps): void {\n        const newState: Partial<EditorState> = {};\n        let _changed = false;\n\n        if (JSON.stringify(nextProps.runningInstances) !== JSON.stringify(this.state.runningInstances)) {\n            _changed = true;\n            newState.runningInstances = nextProps.runningInstances;\n        }\n\n        if (this.state.menuOpened !== nextProps.menuOpened) {\n            newState.menuOpened = nextProps.menuOpened;\n            _changed = true;\n        }\n\n        if (this.state.themeType !== nextProps.themeType) {\n            newState.themeType = nextProps.themeType;\n            _changed = true;\n        }\n\n        // check if all opened files still exists\n        if (this.removeNonExistingScripts(nextProps, newState)) {\n            _changed = true;\n        }\n\n        // update search text\n        if (this.state.searchText !== nextProps.searchText) {\n            newState.searchText = nextProps.searchText;\n            _changed = true;\n        }\n\n        // if objects read\n        if (this.objects !== nextProps.objects) {\n            this.objects = nextProps.objects;\n            window.main.objects = nextProps.objects;\n\n            // update all scripts\n            Object.keys(this.scripts).forEach(id => {\n                const source = this.scripts[id].source;\n                this.scripts[id] = JSON.parse(JSON.stringify(this.objects[id].common));\n                this.scripts[id].source = source;\n            });\n\n            // if a script is blockly\n            if (this.state.selected && this.objects[this.state.selected]) {\n                this.scripts[this.state.selected] =\n                    this.scripts[this.state.selected] ||\n                    JSON.parse(JSON.stringify(this.objects[this.state.selected].common));\n                if (this.state.blockly !== (this.scripts[this.state.selected].engineType === 'Blockly')) {\n                    newState.blockly = this.scripts[this.state.selected].engineType === 'Blockly';\n                    _changed = true;\n                }\n                if (this.state.rules !== (this.scripts[this.state.selected].engineType === 'Rules')) {\n                    newState.rules = this.scripts[this.state.selected].engineType === 'Rules';\n                    _changed = true;\n                }\n                if (this.state.verboseEnabled !== this.scripts[this.state.selected].verbose) {\n                    newState.verboseEnabled = this.scripts[this.state.selected].verbose;\n                    _changed = true;\n                }\n                if (this.state.debugEnabled !== this.scripts[this.state.selected].debug) {\n                    newState.debugEnabled = this.scripts[this.state.selected].debug;\n                    _changed = true;\n                }\n            }\n\n            // remove non-existing scripts\n            const editing = JSON.parse(JSON.stringify(this.state.editing));\n            for (let i = editing.length - 1; i >= 0; i--) {\n                if (!this.objects[editing[i]]) {\n                    _changed = true;\n                    editing.splice(i, 1);\n                    if (this.state.changed[editing[i]] !== undefined) {\n                        newState.changed = newState.changed || JSON.parse(JSON.stringify(this.state.changed));\n                        if (newState.changed) {\n                            delete newState.changed[editing[i]];\n                        }\n                    }\n                }\n            }\n            if (this.state.selected && !this.objects[this.state.selected]) {\n                newState.selected = editing[0] || '';\n            }\n            if (_changed) {\n                newState.editing = editing;\n            }\n        } else {\n            // update all scripts\n            for (const id in this.scripts) {\n                if (!Object.prototype.hasOwnProperty.call(this.scripts, id)) {\n                    continue;\n                }\n                if (this.objects[id]?.common) {\n                    if (this.objects[id].type === 'script') {\n                        const oldSource: string | undefined = this.scripts[id].source;\n                        const commonLocal: ioBroker.ScriptCommon = JSON.parse(\n                            JSON.stringify(this.scripts[id]),\n                        ) as ioBroker.ScriptCommon;\n\n                        commonLocal.source = (this.objects[id] as ioBroker.ScriptObject).common.source;\n\n                        // if anything except source was changed\n                        if (JSON.stringify(commonLocal) !== JSON.stringify(this.objects[id].common)) {\n                            this.scripts[id] = JSON.parse(JSON.stringify(this.objects[id].common));\n                            this.scripts[id].source = oldSource;\n                        }\n\n                        if (oldSource !== (this.objects[id] as ioBroker.ScriptObject).common.source) {\n                            // take new script if it not yet changed\n                            if (!this.state.changed[id]) {\n                                // just use new value\n                                this.scripts[id].source = (this.objects[id] as ioBroker.ScriptObject).common.source;\n                            } else {\n                                if (this.objects[id].from?.startsWith('system.adapter.javascript.')) {\n                                    this.objects[id].from = 'system.adapter.admin.0';\n                                    // show that script was changed from outside\n                                    this.setState({\n                                        toast: I18n.t('Script %s was modified on disk.', id.split('.').pop()),\n                                    });\n                                }\n                            }\n                        } else {\n                            if (this.state.changed[id]) {\n                                newState.changed = newState.changed || JSON.parse(JSON.stringify(this.state.changed));\n                                if (newState.changed) {\n                                    newState.changed[id] = false;\n                                }\n                                _changed = true;\n                            }\n                        }\n                    }\n                } else if (this.scripts[id]) {\n                    delete this.scripts[id];\n                    if (this.state.selected === id) {\n                        if (this.state.editing.indexOf(id) !== -1) {\n                            const editing = JSON.parse(JSON.stringify(this.state.editing));\n                            const pos = editing.indexOf(id);\n                            if (pos !== -1) {\n                                editing.splice(pos, 1);\n                                newState.editing = editing;\n                                _changed = true;\n                            }\n                        }\n                        newState.selected = this.state.editing[0] || '';\n                        _changed = true;\n                    }\n                }\n            }\n        }\n\n        if (this.state.selected !== nextProps.selected && nextProps.selected) {\n            if (nextProps.selected) {\n                this.scripts[nextProps.selected] =\n                    this.scripts[nextProps.selected] ||\n                    JSON.parse(JSON.stringify(this.props.objects[nextProps.selected].common));\n            }\n\n            const nextCommon = this.props.objects[nextProps.selected] && this.props.objects[nextProps.selected].common;\n\n            const changed =\n                nextCommon && JSON.stringify(this.scripts[nextProps.selected]) !== JSON.stringify(nextCommon);\n\n            const editing = JSON.parse(JSON.stringify(this.state.editing));\n            if (nextProps.selected && editing.indexOf(nextProps.selected) === -1) {\n                editing.push(nextProps.selected);\n                this.props.onSelectedChange(nextProps.selected, editing);\n                window.localStorage && window.localStorage.setItem('Editor.editing', JSON.stringify(editing));\n            }\n\n            _changed = true;\n            newState.changed = newState.changed || JSON.parse(JSON.stringify(this.state.changed));\n            if (newState.changed) {\n                newState.changed[nextProps.selected] = changed;\n            }\n            newState.editing = editing;\n            newState.selected = nextProps.selected;\n            newState.blockly = this.scripts[nextProps.selected].engineType === 'Blockly';\n            newState.rules = this.scripts[nextProps.selected].engineType === 'Rules';\n            newState.verboseEnabled = this.scripts[nextProps.selected].verbose;\n            newState.debugEnabled = this.scripts[nextProps.selected].debug;\n            newState.showCompiledCode = false;\n        }\n\n        if (this.state.visible !== nextProps.visible) {\n            _changed = true;\n            newState.visible = nextProps.visible;\n        }\n\n        _changed && this.setState(newState as EditorState, () => this.setChangedInAdmin());\n    }\n\n    onRestart(): void {\n        this.props.onRestart && this.props.onRestart(this.state.selected);\n    }\n\n    onStartStop(): void {\n        const common = JSON.parse(JSON.stringify(this.scripts[this.state.selected]));\n        common.enabled = !common.enabled;\n        this.props.onChange && this.props.onChange(this.state.selected, common);\n    }\n\n    onSave(): void {\n        if (this.state.isTourOpen && this.state.tourStep === STEPS.saveTheScript) {\n            this.setState({ isTourOpen: false });\n            window.localStorage.setItem('tour', 'true');\n        }\n\n        if (this.state.changed[this.state.selected]) {\n            const changed = JSON.parse(JSON.stringify(this.state.changed));\n            changed[this.state.selected] = false;\n            this.setState({ changed }, () => {\n                this.setChangedInAdmin();\n                this.props.onChange && this.props.onChange(this.state.selected, this.scripts[this.state.selected]);\n            });\n        }\n    }\n\n    onSaveAll(): void {\n        const changed = JSON.parse(JSON.stringify(this.state.changed));\n        Object.keys(changed).forEach(id => {\n            if (changed[id]) {\n                changed[id] = false;\n                this.props.onChange && this.props.onChange(id, this.scripts[id]);\n            }\n        });\n\n        this.setState({ changed }, () => this.setChangedInAdmin());\n    }\n\n    onCancel(): void {\n        this.scripts[this.state.selected] = JSON.parse(JSON.stringify(this.props.objects[this.state.selected].common));\n\n        const changed = JSON.parse(JSON.stringify(this.state.changed));\n        changed[this.state.selected] = false;\n\n        this.setState({ changed }, () => this.setChangedInAdmin());\n    }\n\n    onRegisterSelect(func: (() => string | undefined) | null): void {\n        this.getSelect = func;\n    }\n\n    onConvertBlockly2JS(): void {\n        this.showConfirmDialog(I18n.t('It will not be possible to revert this operation.'), result => {\n            if (result) {\n                // @ts-expect-error fixed in js-controller 7\n                this.scripts[this.state.selected].engineType = 'Javascript/js';\n                const source: string = this.scripts[this.state.selected].source;\n                const lines = source.split('\\n');\n                lines.pop();\n                this.scripts[this.state.selected].source = lines.join('\\n');\n                const nowSelected = this.state.selected;\n\n                const changed = JSON.parse(JSON.stringify(this.state.changed));\n                changed[this.state.selected] = true;\n\n                this.setState({ changed, blockly: false, selected: '' }, () => {\n                    this.setChangedInAdmin();\n                    // force update of the editor\n                    setTimeout(() => this.setState({ selected: nowSelected }), 100);\n                });\n            }\n        });\n    }\n\n    onChange(options?: { script?: string; debug?: boolean; verbose?: boolean }): void {\n        options = options || {};\n        if (options) {\n            if (options.script !== undefined) {\n                this.scripts[this.state.selected].source = options.script;\n            }\n            if (options.debug !== undefined) {\n                this.scripts[this.state.selected].debug = options.debug;\n            }\n            if (options.verbose !== undefined) {\n                this.scripts[this.state.selected].verbose = options.verbose;\n            }\n        }\n        const _changed =\n            JSON.stringify(this.scripts[this.state.selected]) !==\n            JSON.stringify(this.props.objects[this.state.selected].common);\n        if (_changed !== (this.state.changed[this.state.selected] || false)) {\n            const changed = JSON.parse(JSON.stringify(this.state.changed));\n            changed[this.state.selected] = _changed;\n            this.objects[this.state.selected].from = 'system.adapter.admin.0';\n            this.setState({ changed }, () => this.setChangedInAdmin());\n        }\n    }\n\n    onTabChange(selected: string): void {\n        if (this.props.debugMode) {\n            return;\n        }\n        window.localStorage && window.localStorage.setItem('Editor.selected', selected);\n        const common = this.scripts[selected] || (this.props.objects[selected] && this.props.objects[selected].common);\n        this.setState({\n            selected,\n            rules: common.engineType === 'Rules',\n            blockly: common.engineType === 'Blockly',\n            showCompiledCode: false,\n            verboseEnabled: common.verbose,\n            debugEnabled: common.debug,\n        });\n        this.props.onSelectedChange && this.props.onSelectedChange(selected, this.state.editing);\n    }\n\n    isScriptChanged(id: string): boolean {\n        return !!(\n            this.scripts[id] &&\n            this.props.objects[id] &&\n            JSON.stringify(this.scripts[id]) !== JSON.stringify(this.props.objects[id].common)\n        );\n    }\n\n    onTabClose(id: string, e?: React.MouseEvent<any>): void {\n        e?.stopPropagation();\n\n        const pos = this.state.editing.indexOf(id);\n        if (this.state.editing.includes(id)) {\n            if (this.isScriptChanged(id)) {\n                this.showConfirmDialog(I18n.t('Discard changes for %s', this.props.objects[id].common.name), ok => {\n                    if (ok) {\n                        delete this.scripts[id];\n                        this.onTabClose(id);\n                    }\n                });\n            } else {\n                const editing = JSON.parse(JSON.stringify(this.state.editing));\n                editing.splice(pos, 1);\n                const newState: Partial<EditorState> = { editing };\n                if (id === this.state.selected) {\n                    if (editing.length) {\n                        if (pos === 0 || editing.length === 1) {\n                            newState.selected = editing[0];\n                        } else {\n                            newState.selected = editing[pos - 1];\n                        }\n                    } else {\n                        newState.selected = '';\n                    }\n                } else if (this.state.selected && !editing.length) {\n                    newState.selected = '';\n                }\n                window.localStorage && window.localStorage.setItem('Editor.editing', JSON.stringify(editing));\n                if (newState.selected !== undefined) {\n                    newState.changed = newState.changed || JSON.parse(JSON.stringify(this.state.changed)) || {};\n                    if (newState.changed) {\n                        newState.changed[newState.selected] = this.isScriptChanged(newState.selected);\n                    }\n                    const common =\n                        newState.selected &&\n                        (this.scripts[newState.selected] ||\n                            (this.props.objects[newState.selected] && this.props.objects[newState.selected].common));\n                    newState.blockly = common ? common.engineType === 'Blockly' : false;\n                    newState.rules = common ? common.engineType === 'Rules' : false;\n                    newState.verboseEnabled = common ? common.verbose : false;\n                    newState.debugEnabled = common ? common.debug : false;\n                    newState.showCompiledCode = false;\n                }\n\n                this.setState(newState as EditorState, () => {\n                    this.setChangedInAdmin();\n\n                    if (newState.selected !== undefined) {\n                        this.props.onSelectedChange &&\n                            this.props.onSelectedChange(newState.selected, this.state.editing);\n                        window.localStorage && window.localStorage.setItem('Editor.selected', newState.selected);\n                    } else {\n                        this.props.onSelectedChange &&\n                            this.props.onSelectedChange(this.state.selected, this.state.editing);\n                    }\n                });\n            }\n        }\n    }\n\n    showConfirmDialog(question: string, cb: (result: boolean) => void): void {\n        this.confirmCallback = cb;\n        this.setState({ confirm: question });\n    }\n\n    sendCommandToBlockly(cmd: 'export' | 'import' | 'check'): void {\n        this.setState({ cmdToBlockly: cmd }, () => setTimeout(() => this.setState({ cmdToBlockly: '' }), 200));\n    }\n\n    sendCommandToRules(cmd: 'export' | 'import'): void {\n        this.setState({ cmdToRules: cmd }, () => setTimeout(() => this.setState({ cmdToRules: '' }), 200));\n    }\n\n    static getText(text: ioBroker.StringOrTranslated): string {\n        if (typeof text === 'object') {\n            return text[I18n.getLanguage()] || text.en;\n        }\n        return text;\n    }\n\n    getScriptFullName(id: string): string {\n        const parts = id.split('.');\n        parts.shift(); // remove \"script.\"\n        parts.shift(); // remove \"js.\"\n        const result = [];\n        let _id = 'script.js';\n        for (let i = 0; i < parts.length; i++) {\n            _id += `.${parts[i]}`;\n            if (this.props.objects[_id] && this.props.objects[_id].common) {\n                result.push(Editor.getText(this.props.objects[_id].common.name));\n            } else {\n                result.push(parts[i]);\n            }\n        }\n        return `/ ${result.join(' / ')}`;\n    }\n\n    getTabs(): (React.JSX.Element | null)[] | React.JSX.Element {\n        if (this.state.editing.length) {\n            return [\n                <Tabs\n                    component=\"div\"\n                    key=\"tabs1\"\n                    value={this.props.debugInstance ? this.props.debugInstance.adapter : this.state.selected}\n                    onChange={(_event: any, value: string) => this.onTabChange(value)}\n                    indicatorColor=\"primary\"\n                    style={{\n                        position: 'relative',\n                        marginLeft: 10,\n                        width: this.state.editing.length > 1 ? 'calc(100% - 50px)' : '100%',\n                        display: 'inline-block',\n                    }}\n                    textColor=\"primary\"\n                    variant=\"scrollable\"\n                    scrollButtons=\"auto\"\n                    allowScrollButtonsMobile\n                >\n                    {this.state.editing.map(id => {\n                        if (!this.props.objects[id]) {\n                            const label = [\n                                <Box\n                                    key=\"text\"\n                                    sx={this.isScriptChanged(id) ? styles.tabChanged : undefined}\n                                    style={styles.tabText}\n                                >\n                                    {id.split('.').pop()}\n                                </Box>,\n                                <IconButton\n                                    onClick={e => this.onTabClose(id, e)}\n                                    style={styles.closeButton}\n                                    key=\"icon\"\n                                    size=\"small\"\n                                    component=\"span\"\n                                >\n                                    <IconClose />\n                                </IconButton>,\n                            ];\n                            return (\n                                <Tab\n                                    wrapped\n                                    href={`#${id}`}\n                                    key={id}\n                                    label={label}\n                                    value={id}\n                                    sx={{ '& .MuiTab-wrapper': styles.tabButtonWrapper }}\n                                />\n                            );\n                        }\n                        let text = Editor.getText(this.props.objects[id].common.name) || '';\n                        const title = this.getScriptFullName(id);\n                        if (text.length > 18) {\n                            text = `${text.substring(0, 15)}...`;\n                        }\n                        const changed =\n                            this.scripts[id] &&\n                            this.props.objects[id].common &&\n                            (this.props.objects[id].common as ioBroker.ScriptCommon).source !== this.scripts[id].source;\n                        const label = [\n                            <Box\n                                key=\"text\"\n                                sx={this.isScriptChanged(id) ? styles.tabChanged : undefined}\n                                style={styles.tabText}\n                            >\n                                {text}\n                            </Box>,\n                            changed ? (\n                                <span\n                                    key=\"changedSign\"\n                                    style={styles.tabChangedIcon}\n                                >\n                                    \n                                </span>\n                            ) : null,\n                            !this.props.debugInstance && (!this.props.debugMode || this.state.selected !== id) && (\n                                <IconButton\n                                    onClick={e => this.onTabClose(id, e)}\n                                    style={styles.closeButton}\n                                    key=\"icon\"\n                                    size=\"small\"\n                                    component=\"span\"\n                                >\n                                    <IconClose />\n                                </IconButton>\n                            ),\n                        ];\n\n                        return (\n                            <Tab\n                                disabled={\n                                    !!this.props.debugInstance || (this.state.selected !== id && this.props.debugMode)\n                                }\n                                wrapped\n                                iconPosition=\"start\"\n                                icon={\n                                    <img\n                                        key=\"icon\"\n                                        alt=\"\"\n                                        src={\n                                            (images as Record<string, string>)[\n                                                (this.props.objects[id].common as ioBroker.ScriptCommon).engineType\n                                            ] || images.def\n                                        }\n                                        style={styles.tabIcon}\n                                    />\n                                }\n                                href={`#${id}`}\n                                key={id}\n                                label={label}\n                                style={styles.tabButton}\n                                value={id}\n                                title={title}\n                                sx={{ '& .MuiTab-wrapper': styles.tabButtonWrapper }}\n                            />\n                        );\n                    })}\n                    {this.props.debugInstance ? (\n                        <Tab\n                            disabled={false}\n                            wrapped\n                            href={`#${this.props.debugInstance.adapter}`}\n                            key={this.props.debugInstance.adapter}\n                            label={this.props.debugInstance.adapter}\n                            style={styles.tabButton}\n                            value={this.props.debugInstance.adapter}\n                            title={this.props.debugInstance.adapter}\n                            sx={{ '& .MuiTab-wrapper': styles.tabButtonWrapper }}\n                        />\n                    ) : (\n                        ''\n                    )}\n                </Tabs>,\n                this.state.editing.length > 1 ? (\n                    <IconButton\n                        key=\"menuButton\"\n                        href=\"#\"\n                        aria-label=\"Close all but current\"\n                        style={styles.tabMenuButton}\n                        title={I18n.t('Close all but current')}\n                        aria-haspopup=\"false\"\n                        onClick={_event => {\n                            const editing = [this.state.selected];\n                            // Do not close not saved tabs\n                            Object.keys(this.scripts).forEach(\n                                id =>\n                                    id !== this.state.selected &&\n                                    JSON.stringify(this.scripts[id]) !==\n                                        JSON.stringify(this.props.objects[id].common) &&\n                                    editing.push(id),\n                            );\n\n                            window.localStorage &&\n                                window.localStorage.setItem('Editor.editing', JSON.stringify(editing));\n                            this.setState({ menuTabsOpened: false, editing: editing });\n                        }}\n                        size=\"medium\"\n                    >\n                        <IconCloseAll />\n                    </IconButton>\n                ) : null,\n            ];\n        }\n        return (\n            <div\n                key=\"tabs2\"\n                style={styles.toolbar}\n            >\n                <Button\n                    color=\"grey\"\n                    key=\"select1\"\n                    disabled\n                    style={styles.hintButton}\n                    href=\"\"\n                >\n                    <span key=\"select2\">{I18n.t('Click on this icon')}</span>\n                    <IconDoEdit\n                        key=\"select3\"\n                        style={styles.hintIcon}\n                    />\n                    <span key=\"select4\">{I18n.t('for edit or create script')}</span>\n                </Button>\n            </div>\n        );\n    }\n\n    getDebugMenu(): React.JSX.Element | null {\n        if (!this.state.showDebugMenu) {\n            return null;\n        }\n\n        return (\n            <Menu\n                key=\"menuDebug\"\n                id=\"menu-debug\"\n                anchorEl={this.state.menuDebugAnchorEl}\n                open={this.state.showDebugMenu}\n                onClose={() => this.setState({ showDebugMenu: false, menuDebugAnchorEl: null })}\n                slotProps={{\n                    root: {\n                        style: {\n                            maxHeight: MENU_ITEM_HEIGHT * 7.5,\n                        },\n                    },\n                }}\n            >\n                <MenuItem\n                    key=\"debugEnabled\"\n                    title={I18n.t('debug_help')}\n                    onClick={event => {\n                        event.stopPropagation();\n                        event.preventDefault();\n                        this.setState(\n                            { showDebugMenu: false, menuDebugAnchorEl: null, debugEnabled: !this.state.debugEnabled },\n                            () => this.onChange({ debug: this.state.debugEnabled }),\n                        );\n                    }}\n                >\n                    <Checkbox checked={this.state.debugEnabled} />\n                    <IconDebug style={{ ...styles.menuIcon, color: COLOR_DEBUG }} />\n                    {I18n.t('debug_label')}\n                </MenuItem>\n                <MenuItem\n                    key=\"verboseEnabled\"\n                    title={I18n.t('verbose_help')}\n                    onClick={event => {\n                        event.stopPropagation();\n                        event.preventDefault();\n                        this.setState(\n                            {\n                                showDebugMenu: false,\n                                menuDebugAnchorEl: null,\n                                verboseEnabled: !this.state.verboseEnabled,\n                            },\n                            () => this.onChange({ verbose: this.state.verboseEnabled }),\n                        );\n                    }}\n                >\n                    <Checkbox checked={this.state.verboseEnabled} />\n                    <IconVerbose style={{ ...styles.menuIcon, color: COLOR_VERBOSE }} />\n                    {I18n.t('verbose_label')}\n                </MenuItem>\n            </Menu>\n        );\n    }\n\n    getDebugBadge(): (React.JSX.Element | null)[] {\n        return [\n            this.state.debugEnabled && this.state.verboseEnabled ? (\n                <IconDebug\n                    key=\"DebugVerbose\"\n                    style={{ ...styles.menuIcon, color: COLOR_VERBOSE }}\n                />\n            ) : null,\n            this.state.debugEnabled && !this.state.verboseEnabled ? (\n                <IconDebug\n                    key=\"DebugNoVerbose\"\n                    style={{ ...styles.menuIcon, color: COLOR_DEBUG }}\n                />\n            ) : null,\n            !this.state.debugEnabled && this.state.verboseEnabled ? (\n                <IconVerbose\n                    key=\"noDebugVerbose\"\n                    style={{ ...styles.menuIcon, color: COLOR_VERBOSE }}\n                />\n            ) : null,\n        ];\n    }\n\n    getAskAboutDebug(): React.JSX.Element | null {\n        if (this.state.askAboutDebug) {\n            return (\n                <DialogConfirm\n                    onClose={() => {\n                        this.setState({ askAboutDebug: false }, () => this.props.onDebugModeChange(true));\n                    }}\n                    ok={I18n.t('Yes')}\n                    cancel={I18n.t('Cancel')}\n                    text={I18n.t(\n                        'The script will be stopped and must be activated manually after debugging. Continue?',\n                    )}\n                />\n            );\n        }\n        return null;\n    }\n\n    getToolbar(): React.JSX.Element | null {\n        const isInstanceRunning = !!(\n            this.state.selected &&\n            this.scripts[this.state.selected] &&\n            this.scripts[this.state.selected].engine &&\n            this.state.runningInstances[this.scripts[this.state.selected].engine]\n        );\n        const isScriptRunning = !!(\n            this.state.selected &&\n            this.scripts[this.state.selected] &&\n            this.scripts[this.state.selected].enabled\n        );\n\n        if (this.state.selected) {\n            const changedAll = Object.keys(this.state.changed).filter(id => this.state.changed[id]).length;\n            const changed = this.state.changed[this.state.selected];\n            return (\n                <Toolbar\n                    variant=\"dense\"\n                    style={styles.toolbar}\n                    key=\"toolbar1\"\n                >\n                    {!this.props.debugInstance && this.state.menuOpened && this.props.onLocate && (\n                        <IconButton\n                            style={styles.toolbarButtons}\n                            key=\"locate\"\n                            title={I18n.t('Locate file')}\n                            onClick={() => this.props.onLocate(this.state.selected)}\n                            size=\"medium\"\n                        >\n                            <IconLocate />\n                        </IconButton>\n                    )}\n                    {!this.props.debugInstance && !changed && isInstanceRunning ? (\n                        <IconButton\n                            key=\"restart\"\n                            disabled={this.props.debugMode}\n                            style={styles.toolbarButtons}\n                            onClick={() => this.onRestart()}\n                            title={I18n.t('Restart')}\n                            size=\"medium\"\n                        >\n                            <IconRestart />\n                        </IconButton>\n                    ) : null}\n                    {!this.props.debugInstance && !changed ? (\n                        <IconButton\n                            key=\"start-stop\"\n                            disabled={this.props.debugMode}\n                            onClick={() => this.onStartStop()}\n                            title={isScriptRunning ? I18n.t('Pause script') : I18n.t('Run script')}\n                            size=\"medium\"\n                            style={{\n                                ...styles.toolbarButtons,\n                                color: isScriptRunning ? COLOR_RUN : COLOR_PAUSE,\n                            }}\n                        >\n                            {isScriptRunning ? <IconPause /> : <IconPlay />}\n                        </IconButton>\n                    ) : null}\n                    {!this.props.debugInstance && !changed && !isScriptRunning ? (\n                        <span style={styles.notRunning}>{I18n.t('Script is not running')}</span>\n                    ) : null}\n                    {!changed && isScriptRunning && !isInstanceRunning ? (\n                        <span style={styles.notRunning}>{I18n.t('Instance is disabled')}</span>\n                    ) : null}\n                    {changed ? (\n                        <Button\n                            color=\"grey\"\n                            key=\"save\"\n                            variant=\"contained\"\n                            style={{ ...styles.textButton, ...styles.saveButton }}\n                            className=\"button-save\"\n                            onClick={() => this.onSave()}\n                            endIcon={<IconSave />}\n                        >\n                            {I18n.t('Save')}\n                        </Button>\n                    ) : null}\n                    {changedAll > 1 || (changedAll === 1 && !changed) ? (\n                        <Button\n                            color=\"grey\"\n                            key=\"saveall\"\n                            variant=\"contained\"\n                            style={styles.textButton}\n                            onClick={() => this.onSaveAll()}\n                            endIcon={<IconSave />}\n                        >\n                            {I18n.t('Save all')}\n                        </Button>\n                    ) : null}\n                    {changed ? (\n                        <Button\n                            color=\"grey\"\n                            key=\"cancel\"\n                            variant=\"contained\"\n                            style={styles.textButton}\n                            onClick={() => this.onCancel()}\n                            endIcon={<IconCancel />}\n                        >\n                            {I18n.t('Cancel')}\n                        </Button>\n                    ) : null}\n                    <div style={{ flex: 2 }} />\n\n                    {this.state.blockly && !this.state.showCompiledCode ? (\n                        <IconButton\n                            key=\"export\"\n                            aria-label=\"Export Blocks\"\n                            title={I18n.t('Export blocks')}\n                            style={styles.toolbarButtons}\n                            onClick={() => this.sendCommandToBlockly('export')}\n                            size=\"medium\"\n                        >\n                            <IconExport />\n                        </IconButton>\n                    ) : null}\n\n                    {this.state.blockly && !this.state.showCompiledCode && (\n                        <IconButton\n                            key=\"import\"\n                            aria-label=\"Import Blocks\"\n                            title={I18n.t('Import blocks')}\n                            style={styles.toolbarButtons}\n                            onClick={() => this.sendCommandToBlockly('import')}\n                            size=\"medium\"\n                        >\n                            <IconImport />\n                        </IconButton>\n                    )}\n\n                    {this.state.blockly && !this.state.showCompiledCode && (\n                        <IconButton\n                            key=\"check\"\n                            aria-label=\"Check code\"\n                            title={I18n.t('Check blocks')}\n                            style={styles.toolbarButtons}\n                            onClick={() => this.sendCommandToBlockly('check')}\n                            size=\"medium\"\n                        >\n                            <IconCheck />\n                        </IconButton>\n                    )}\n\n                    {!this.props.debugMode &&\n                    !this.state.blockly &&\n                    !this.state.rules &&\n                    !this.state.showCompiledCode ? (\n                        <IconButton\n                            key=\"select-cron\"\n                            aria-label=\"create CRON\"\n                            title={I18n.t('Create or edit CRON or time wizard')}\n                            style={styles.toolbarButtons}\n                            onClick={() => this.setState({ showCron: true })}\n                            size=\"medium\"\n                        >\n                            <IconCron />\n                        </IconButton>\n                    ) : null}\n                    {this.scripts[this.state.selected] &&\n                    this.scripts[this.state.selected].engineType !== 'Blockly' &&\n                    this.scripts[this.state.selected].engineType !== 'Rules' ? (\n                        <OpenAiDialog\n                            adapterName={this.props.adapterName}\n                            socket={this.props.socket}\n                            runningInstances={this.state.runningInstances}\n                            themeType={this.state.themeType}\n                            language={\n                                this.scripts[this.state.selected].engineType === 'TypeScript/ts'\n                                    ? 'typescript'\n                                    : 'javascript'\n                            }\n                            onAddCode={code => this.setState({ insert: code })}\n                        />\n                    ) : null}\n                    <IconButton\n                        key=\"show-astro\"\n                        aria-label=\"Show astronomical events\"\n                        title={I18n.t('Show astronomical events')}\n                        style={styles.toolbarButtons}\n                        disabled={!isInstanceRunning}\n                        onClick={() => {\n                            this.setState({ showAstro: true, astroEvents: null });\n\n                            this.props.socket\n                                .sendTo(\n                                    this.scripts[this.state.selected].engine.replace('system.adapter.', ''),\n                                    'calcAstroAll',\n                                    {},\n                                )\n                                .then(astroEvents => this.setState({ astroEvents }));\n                        }}\n                        size=\"medium\"\n                    >\n                        <IconAstro />\n                    </IconButton>\n\n                    {!this.props.debugMode &&\n                        !this.state.blockly &&\n                        !this.state.rules &&\n                        !this.state.showCompiledCode && (\n                            <IconButton\n                                key=\"select-id\"\n                                aria-label=\"select ID\"\n                                title={I18n.t('Insert object ID')}\n                                style={styles.toolbarButtons}\n                                onClick={() => this.setState({ showSelectId: true })}\n                                size=\"medium\"\n                            >\n                                <IconSelectId />\n                            </IconButton>\n                        )}\n\n                    {this.state.blockly && !this.state.rules && this.state.showCompiledCode && (\n                        <Button\n                            color=\"grey\"\n                            key=\"convert2js\"\n                            aria-label=\"convert to javascript\"\n                            title={I18n.t('Convert blockly to javascript for ever.')}\n                            onClick={() => this.onConvertBlockly2JS()}\n                        >\n                            Blockly=&gt;JS\n                        </Button>\n                    )}\n                    {this.state.rules && !this.state.showCompiledCode && (\n                        <IconButton\n                            key=\"export\"\n                            aria-label=\"Export Blocks\"\n                            title={I18n.t('Export blocks')}\n                            style={styles.toolbarButtons}\n                            onClick={() => this.sendCommandToRules('export')}\n                            size=\"medium\"\n                        >\n                            <IconExport />\n                        </IconButton>\n                    )}\n                    {this.state.rules && !this.state.showCompiledCode && (\n                        <IconButton\n                            key=\"import\"\n                            aria-label=\"Import Blocks\"\n                            title={I18n.t('Import blocks')}\n                            style={styles.toolbarButtons}\n                            onClick={() => this.sendCommandToRules('import')}\n                            size=\"medium\"\n                        >\n                            <IconImport />\n                        </IconButton>\n                    )}\n\n                    {this.props.expertMode &&\n                        !changed &&\n                        (this.props.debugMode ||\n                            (!this.state.blockly && !this.state.rules) ||\n                            ((this.state.blockly || this.state.rules) && this.state.showCompiledCode)) && (\n                            <IconButton\n                                style={styles.toolbarButtons}\n                                color={this.props.debugMode ? 'primary' : 'default'}\n                                disabled={!this.props.debugMode && !isInstanceRunning}\n                                onClick={() => {\n                                    if (!this.props.debugMode && isScriptRunning) {\n                                        this.setState({ askAboutDebug: true });\n                                    } else {\n                                        this.props.onDebugModeChange(!this.props.debugMode);\n                                    }\n                                }}\n                                size=\"medium\"\n                            >\n                                <IconDebugMode style={{ fontSize: 32 }} />\n                            </IconButton>\n                        )}\n\n                    {(this.state.blockly || this.state.rules) && (\n                        <Button\n                            key=\"blockly-code\"\n                            aria-label=\"blockly\"\n                            title={I18n.t('Show javascript code')}\n                            className=\"button-js-code\"\n                            color={this.state.showCompiledCode ? 'secondary' : 'inherit'}\n                            disabled={this.props.debugMode}\n                            style={{\n                                ...styles.toolbarButtons,\n                                ...(this.props.debugMode ? styles.toolbarButtonsDisabled : undefined),\n                                padding: '0 5px',\n                            }}\n                            onClick={() => {\n                                if (this.props.debugMode) {\n                                    return;\n                                }\n                                this.setState({ showCompiledCode: !this.state.showCompiledCode });\n                                this.state.isTourOpen &&\n                                    this.state.tourStep === STEPS.showJavascript &&\n                                    this.setState({ tourStep: STEPS.switchBackToRules });\n                                this.state.isTourOpen &&\n                                    this.state.tourStep === STEPS.switchBackToRules &&\n                                    this.setState({ tourStep: STEPS.saveTheScript });\n                            }}\n                        >\n                            <img\n                                alt={this.state.blockly ? 'blockly2js' : 'rules2js'}\n                                src={this.state.blockly ? ImgBlockly2Js : ImgRules2Js}\n                            />\n                        </Button>\n                    )}\n                    <IconButton\n                        key=\"debug\"\n                        disabled={this.props.debugMode}\n                        aria-label=\"Debug menu\"\n                        title={I18n.t('Debug options')}\n                        style={styles.toolbarButtons}\n                        onClick={e => this.setState({ showDebugMenu: true, menuDebugAnchorEl: e.currentTarget })}\n                        size=\"medium\"\n                    >\n                        <Badge\n                            style={styles.badgeMargin}\n                            badgeContent={this.getDebugBadge()}\n                        >\n                            <IconDebugMenu />\n                        </Badge>\n                    </IconButton>\n                </Toolbar>\n            );\n        }\n        return null;\n    }\n\n    getScriptEditor(): React.JSX.Element | null {\n        if (\n            !this.props.debugMode &&\n            this.state.selected &&\n            this.props.objects[this.state.selected] &&\n            this.state.blockly !== null &&\n            (!this.state.blockly || this.state.showCompiledCode) &&\n            (!this.state.rules || this.state.showCompiledCode)\n        ) {\n            this.scripts[this.state.selected] =\n                this.scripts[this.state.selected] ||\n                JSON.parse(JSON.stringify(this.props.objects[this.state.selected].common));\n\n            return (\n                <Box\n                    sx={styles.editorDiv}\n                    key=\"scriptEditorDiv\"\n                >\n                    <ScriptEditorComponent\n                        key=\"scriptEditor1\"\n                        name={this.state.selected}\n                        adapterName={this.props.adapterName}\n                        insert={this.state.insert}\n                        onInserted={() => this.setState({ insert: '' })}\n                        onForceSave={() => this.onSave()}\n                        searchText={this.state.searchText}\n                        onRegisterSelect={(func: (() => string | undefined) | null) => this.onRegisterSelect(func)}\n                        readOnly={this.state.showCompiledCode}\n                        changed={this.state.changed[this.state.selected]}\n                        code={this.scripts[this.state.selected].source || ''}\n                        isDark={this.state.themeType === 'dark'}\n                        socket={this.props.socket}\n                        runningInstances={this.state.runningInstances}\n                        onChange={newValue => this.onChange({ script: newValue })}\n                        language={\n                            this.scripts[this.state.selected].engineType === 'TypeScript/ts'\n                                ? 'typescript'\n                                : 'javascript'\n                        }\n                    />\n                </Box>\n            );\n        }\n        return null;\n    }\n\n    getBlocklyEditor(): React.JSX.Element | null {\n        if (\n            !this.props.debugMode &&\n            this.state.instancesLoaded &&\n            this.state.selected &&\n            this.props.objects[this.state.selected] &&\n            this.state.blockly &&\n            !this.state.showCompiledCode &&\n            this.state.visible\n        ) {\n            this.scripts[this.state.selected] =\n                this.scripts[this.state.selected] ||\n                JSON.parse(JSON.stringify(this.props.objects[this.state.selected].common));\n\n            return (\n                <Box\n                    sx={styles.editorDiv}\n                    key=\"blocklyEditorDiv\"\n                >\n                    <BlocklyEditor\n                        command={this.state.cmdToBlockly}\n                        key=\"BlocklyEditor\"\n                        themeType={this.state.themeType}\n                        searchText={this.state.searchText}\n                        code={this.scripts[this.state.selected].source || ''}\n                        scriptId={this.state.selected}\n                        onChange={newValue => this.onChange({ script: newValue })}\n                    />\n                </Box>\n            );\n        }\n        return null;\n    }\n\n    getRulesEditor(): React.JSX.Element | null {\n        if (\n            !this.props.debugMode &&\n            this.state.instancesLoaded &&\n            this.state.selected &&\n            this.props.objects[this.state.selected] &&\n            this.state.rules &&\n            !this.state.showCompiledCode &&\n            this.state.visible\n        ) {\n            this.scripts[this.state.selected] =\n                this.scripts[this.state.selected] ||\n                JSON.parse(JSON.stringify(this.props.objects[this.state.selected].common));\n            const isInstanceRunning: boolean =\n                !!this.state.selected &&\n                !!this.scripts[this.state.selected]?.engine &&\n                this.state.runningInstances[this.scripts[this.state.selected].engine];\n            const isScriptRunning: boolean = !!this.state.selected && this.scripts[this.state.selected]?.enabled;\n\n            return (\n                <Box\n                    sx={styles.editorDiv}\n                    key=\"flowEditorDiv\"\n                >\n                    <RulesEditor\n                        scriptId={this.state.selected}\n                        setTourStep={this.setTourStep}\n                        tourStep={this.state.tourStep}\n                        isTourOpen={this.state.isTourOpen}\n                        changed={this.state.changed[this.state.selected]}\n                        running={isInstanceRunning && isScriptRunning}\n                        command={this.state.cmdToRules}\n                        key=\"flowEditor\"\n                        themeType={this.state.themeType}\n                        themeName={this.props.themeName}\n                        theme={this.props.theme}\n                        searchText={this.state.searchText}\n                        resizing={this.props.resizing}\n                        code={this.scripts[this.state.selected].source || ''}\n                        onChange={newValue => this.onChange({ script: newValue })}\n                    />\n                </Box>\n            );\n        }\n        return null;\n    }\n\n    getConfirmDialog(): React.JSX.Element | null {\n        if (this.state.confirm) {\n            return (\n                <DialogConfirm\n                    key=\"dialogConfirm1\"\n                    text={this.state.confirm}\n                    onClose={result => {\n                        if (this.confirmCallback) {\n                            const cb = this.confirmCallback;\n                            this.confirmCallback = null;\n                            cb(result);\n                        }\n                        this.setState({ confirm: '' });\n                    }}\n                />\n            );\n        }\n        return null;\n    }\n\n    getSelectIdDialog(): React.JSX.Element | null {\n        if (this.state.showSelectId) {\n            const allObjectTypes = [\n                'state',\n                'channel',\n                'device',\n                'adapter',\n                'instance',\n                'enum',\n                'host',\n                //'meta',\n                'config',\n                'script',\n                'user',\n                'group',\n                //'chart',\n                //'folder',\n                //'schedule',\n                //'design',\n            ];\n\n            const expertModeTypes = [\n                'adapter',\n                'instance',\n                'enum',\n                'host',\n                'config',\n                'script',\n                'user',\n                'group',\n                //'chart',\n                //'folder',\n                //'schedule',\n                //'design',\n            ];\n\n            let selectedId: string = this.selectId.callback\n                ? this.selectId.initValue || ''\n                : this.getSelect\n                  ? this.getSelect() || ''\n                  : '';\n            // it could be:\n            // - 'id.xx'/* aksjdhsdf*/\n            // - \"id.xx\"/* aksjdhsdf*/\n            // - \"id.xx\"//\n            let pos = selectedId.indexOf('/*');\n            if (pos !== -1) {\n                selectedId = selectedId.substring(0, pos);\n            }\n            pos = selectedId.indexOf('//');\n            if (pos !== -1) {\n                selectedId = selectedId.substring(0, pos);\n            }\n            let m = selectedId.match(/\"([^\"]+)\"/);\n            if (m) {\n                selectedId = m[1];\n            }\n            m = selectedId.match(/'([^']+)'/);\n            if (m) {\n                selectedId = m[1];\n            }\n\n            return (\n                <DialogSelectID\n                    theme={this.props.theme}\n                    key=\"dialogSelectID1\"\n                    imagePrefix=\"../..\"\n                    themeName={this.props.themeName}\n                    themeType={this.state.themeType}\n                    socket={this.props.socket}\n                    selected={selectedId}\n                    expertMode={this.selectId.type && expertModeTypes.includes(this.selectId.type) ? true : undefined}\n                    // statesOnly={!this.selectId.type || this.selectId.type === 'state'}\n                    // @ts-expect-error to be fixed\n                    types={this.selectId?.type === 'all' ? allObjectTypes : [this.selectId.type || 'state']}\n                    onClose={() => {\n                        this.setState({ showSelectId: false });\n                        if (this.selectId.callback) {\n                            this.selectId.callback = null;\n                        }\n                    }}\n                    onOk={(selected, name) => {\n                        this.selectId.initValue = null;\n                        if (this.selectId.callback) {\n                            this.selectId.callback(selected);\n                            this.selectId.callback = null;\n                        } else {\n                            this.setState({ insert: `'${selected}'/*${name}*/` });\n                        }\n                    }}\n                />\n            );\n        }\n        return null;\n    }\n\n    getCronDialog(): React.JSX.Element | null {\n        if (this.state.showCron) {\n            return (\n                <DialogCron\n                    theme={this.props.theme}\n                    key=\"dialogCron1\"\n                    cron={\n                        this.cron.callback ? this.cron.initValue || '' : this.getSelect ? this.getSelect() : '* * * * *'\n                    }\n                    onClose={() => this.setState({ showCron: false })}\n                    onOk={cron => {\n                        this.cron.initValue = null;\n                        if (this.cron.callback) {\n                            this.cron.callback(cron);\n                            this.cron.callback = null;\n                        } else {\n                            this.setState({ insert: `'${cron}'` });\n                        }\n                    }}\n                />\n            );\n        }\n\n        return null;\n    }\n\n    getAstroDialog(): React.JSX.Element | null {\n        if (this.state.showAstro) {\n            return (\n                <Dialog\n                    open={!0}\n                    onClose={() => this.setState({ showAstro: false })}\n                    key=\"dialogAstro\"\n                >\n                    <DialogTitle>{I18n.t('Astronomical events today')}</DialogTitle>\n                    <DialogContent>\n                        {!this.state.astroEvents ? (\n                            <LinearProgress />\n                        ) : (\n                            <TableContainer component={Paper}>\n                                <Table size=\"small\">\n                                    <TableHead>\n                                        <TableRow>\n                                            <TableCell>{I18n.t('Name')}</TableCell>\n                                            <TableCell>{I18n.t('Server time')}</TableCell>\n                                            <TableCell>{I18n.t('Description')}</TableCell>\n                                        </TableRow>\n                                    </TableHead>\n                                    <TableBody>\n                                        {Object.keys(this.state.astroEvents).map(id => (\n                                            <TableRow key={id}>\n                                                <TableCell\n                                                    component=\"th\"\n                                                    scope=\"row\"\n                                                >\n                                                    {id.startsWith('next') ? '' : id}\n                                                </TableCell>\n                                                <Tooltip\n                                                    title={`${I18n.t('Local time')}: ${\n                                                        this.state.astroEvents?.[id].isValidDate\n                                                            ? new Date(\n                                                                  this.state.astroEvents?.[id].date,\n                                                              ).toLocaleTimeString()\n                                                            : 'n/a'\n                                                    }`}\n                                                >\n                                                    <TableCell align=\"right\">\n                                                        {this.state.astroEvents?.[id].isValidDate\n                                                            ? this.state.astroEvents?.[id].serverTime\n                                                            : 'n/a'}\n                                                    </TableCell>\n                                                </Tooltip>\n                                                <TableCell>{I18n.t(id)}</TableCell>\n                                            </TableRow>\n                                        ))}\n                                    </TableBody>\n                                </Table>\n                            </TableContainer>\n                        )}\n                    </DialogContent>\n                    <DialogActions>\n                        <Button\n                            variant=\"contained\"\n                            onClick={() => this.setState({ showAstro: false })}\n                            color=\"primary\"\n                            startIcon={<IconClose />}\n                        >\n                            {I18n.t('Close')}\n                        </Button>\n                    </DialogActions>\n                </Dialog>\n            );\n        }\n        return null;\n    }\n\n    getEditorDialog(): React.JSX.Element | null {\n        if (this.state.showScript) {\n            return (\n                <DialogScriptEditor\n                    key=\"scriptEditorDialog\"\n                    adapterName={this.props.adapterName}\n                    source={this.scriptDialog.initValue || ''}\n                    args={this.scriptDialog.args ? this.scriptDialog.args.join(', ') : ''}\n                    isReturn={this.scriptDialog.isReturn}\n                    socket={this.props.socket}\n                    runningInstances={this.state.runningInstances}\n                    themeType={this.state.themeType}\n                    onClose={result => {\n                        this.scriptDialog.initValue = null;\n                        if (this.scriptDialog.callback) {\n                            result !== false && this.scriptDialog.callback(result || '');\n                            this.scriptDialog.callback = null;\n                        }\n                        this.setState({ showScript: false });\n                    }}\n                />\n            );\n        }\n        return null;\n    }\n\n    getToast(): React.JSX.Element {\n        return (\n            <Snackbar\n                key=\"toast\"\n                anchorOrigin={{\n                    vertical: 'bottom',\n                    horizontal: 'left',\n                }}\n                open={!!this.state.toast}\n                autoHideDuration={6000}\n                onClose={() => this.setState({ toast: '' })}\n                ContentProps={{ 'aria-describedby': 'message-id' }}\n                message={<span id=\"message-id\">{this.state.toast}</span>}\n                action={[\n                    <IconButton\n                        key=\"close\"\n                        aria-label=\"close\"\n                        color=\"inherit\"\n                        style={styles.closeToast}\n                        onClick={() => this.setState({ toast: '' })}\n                        size=\"medium\"\n                    >\n                        <IconClose />\n                    </IconButton>,\n                ]}\n            />\n        );\n    }\n\n    setTourStep = (tourStep: number): void => this.setState({ tourStep });\n\n    getTour(): React.JSX.Element | null {\n        if (\n            this.state.instancesLoaded &&\n            this.state.selected &&\n            this.props.isAnyRulesExists === 1 &&\n            this.props.objects[this.state.selected] &&\n            this.state.rules &&\n            this.state.visible\n        ) {\n            return (\n                <Tour\n                    key=\"tour\"\n                    steps={steps}\n                    isOpen={this.state.isTourOpen}\n                    onRequestClose={() => {\n                        this.setState({ isTourOpen: false });\n                        window.localStorage.setItem('tour', 'true');\n                        void this.props.socket.setState('javascript.0.variables.rulesTour', { val: true, ack: true });\n                    }}\n                    //getCurrentStep={tourStep => this.setTourStep(tourStep)}\n                    goToStep={this.state.tourStep}\n                />\n            );\n        }\n        return null;\n    }\n\n    getDebug(): React.JSX.Element | null {\n        if (this.props.debugMode) {\n            const isInstanceRunning =\n                this.state.selected &&\n                this.scripts[this.state.selected] &&\n                this.scripts[this.state.selected].engine &&\n                this.state.runningInstances[this.scripts[this.state.selected].engine];\n            if (isInstanceRunning) {\n                return (\n                    <Debugger\n                        key=\"debugger\"\n                        runningInstances={this.state.runningInstances}\n                        adapterName={this.props.adapterName}\n                        socket={this.props.socket}\n                        theme={this.props.theme}\n                        themeName={this.props.themeName}\n                        themeType={this.props.themeType}\n                        // @ts-expect-error fix later\n                        src={this.props.debugInstance ? this.props.debugInstance.adapter : this.state.selected}\n                        debugInstance={this.props.debugInstance}\n                    />\n                );\n            }\n            setTimeout(() => this.props.onDebugModeChange(false));\n            return null;\n        }\n        return null;\n    }\n\n    render(): (React.JSX.Element | null | (React.JSX.Element | null)[])[] | React.JSX.Element {\n        if (\n            this.state.selected &&\n            this.props.objects[this.state.selected] &&\n            this.state.blockly === null &&\n            this.state.rules === null\n        ) {\n            this.scripts[this.state.selected] =\n                this.scripts[this.state.selected] ||\n                JSON.parse(JSON.stringify(this.props.objects[this.state.selected].common));\n            setTimeout(() => {\n                const newState = {\n                    blockly: this.scripts[this.state.selected].engineType === 'Blockly',\n                    rules: this.scripts[this.state.selected].engineType === 'Rules',\n                    showCompiledCode: false,\n                    debugEnabled: this.scripts[this.state.selected].debug,\n                    verboseEnabled: this.scripts[this.state.selected].verbose,\n                };\n\n                // check if all opened files still exists\n                this.removeNonExistingScripts(null, newState);\n                this.setState(newState);\n            }, 100);\n        }\n\n        return [\n            this.getTabs(),\n            this.getToolbar(),\n            this.getScriptEditor(),\n            this.getAskAboutDebug(),\n            this.getBlocklyEditor(),\n            this.getRulesEditor(),\n            this.getDebug(),\n            this.getConfirmDialog(),\n            this.getSelectIdDialog(),\n            this.getCronDialog(),\n            this.getEditorDialog(),\n            this.getAstroDialog(),\n            this.getDebugMenu(),\n            this.getToast(),\n            this.getTour(),\n        ];\n    }\n}\n\nexport default Editor;\n","import React from 'react';\nimport Dropzone, { type FileRejection } from 'react-dropzone';\n\nimport { Button, DialogTitle, DialogContent, DialogActions, Dialog } from '@mui/material';\nimport { MdFileUpload as IconUpload, MdCancel as IconNo, MdAdd as IconPlus } from 'react-icons/md';\n\nimport { Cancel as IconCancel } from '@mui/icons-material';\n\nimport { I18n } from '@iobroker/adapter-react-v5';\n\nimport DialogError from './Error';\n\nconst styles: Record<string, React.CSSProperties> = {\n    dialog: {\n        height: '95%',\n    },\n    fullHeight: {\n        height: '100%',\n        overflow: 'hidden',\n    },\n    dropzone: {\n        marginTop: 20,\n        width: '100%',\n        borderWidth: 5,\n        borderStyle: 'dashed',\n        borderColor: '#d0cccc',\n        textAlign: 'center',\n        boxSizing: 'border-box',\n        paddingTop: 45,\n        borderRadius: 10,\n        height: 'calc(100% - 10px)',\n    },\n    dropzoneDiv: {\n        width: '100%',\n        height: '100%',\n    },\n    dropzoneRejected: {\n        borderColor: '#970000',\n    },\n    dropzoneAccepted: {\n        borderColor: '#17cd02',\n    },\n    icon: {\n        height: '30%',\n        width: '30%',\n        color: '#eeeeee',\n        position: 'absolute',\n        top: '50%',\n        left: '50%',\n        transform: 'translate(-50%,-50%)',\n        zIndex: 0,\n    },\n    iconError: {\n        color: '#ffc3c6',\n    },\n    iconOk: {\n        color: '#aaeebc',\n    },\n    text: {\n        top: '50%',\n        left: '50%',\n        transform: 'translate(-50%,-50%)',\n        color: '#868686',\n        position: 'absolute',\n        zIndex: 1,\n    },\n};\n\ninterface DialogImportFileProps {\n    onClose: (data?: string) => void;\n}\ninterface DialogImportFileState {\n    error: string;\n    imageStatus: string;\n}\n\nclass DialogImportFile extends React.Component<DialogImportFileProps, DialogImportFileState> {\n    constructor(props: DialogImportFileProps) {\n        super(props);\n        this.state = {\n            error: '',\n            imageStatus: '',\n        };\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    componentDidMount(): void {\n        setTimeout(() => {\n            try {\n                window.document.getElementById('import-text-area')?.focus();\n            } catch {\n                // ignore\n            }\n        }, 100);\n    }\n\n    handleCancel(): void {\n        this.props.onClose();\n    }\n\n    static readFileDataUrl(\n        file: File,\n        cb: (error: string | null, result?: { data: string | ArrayBuffer | null; name: string }) => void,\n    ): void {\n        const reader = new FileReader();\n        reader.onload = () => {\n            cb(null, { data: reader.result, name: file.name });\n        };\n        reader.onabort = () => {\n            console.error('file reading was aborted');\n            cb(I18n.t('file reading was aborted'));\n        };\n        reader.onerror = e => {\n            console.error('file reading has failed');\n            cb(I18n.t('file reading has failed: %s', e));\n        };\n\n        reader.readAsDataURL(file);\n    }\n\n    handleDropFile(files: File[]): void {\n        if (!files?.length) {\n            return;\n        }\n\n        const file = files[files.length - 1];\n\n        if (!file) {\n            return;\n        }\n        DialogImportFile.readFileDataUrl(\n            file,\n            (err: string | null, result?: { data: string | ArrayBuffer | null; name: string }): void => {\n                if (err || !result) {\n                    this.setState({ error: err || 'No data' });\n                } else {\n                    this.props.onClose(result.data?.toString() || '');\n                }\n            },\n        );\n    }\n\n    render(): React.JSX.Element {\n        const style = {\n            ...styles.dropzone,\n            ...(this.state.imageStatus === 'accepted'\n                ? styles.dropzoneAccepted\n                : this.state.imageStatus === 'rejected'\n                  ? styles.dropzoneRejected\n                  : undefined),\n        };\n\n        return (\n            <Dialog\n                onClose={() => false}\n                maxWidth=\"lg\"\n                sx={{ '& .MuiDialog-paper': styles.dialog }}\n                fullWidth\n                open={!0}\n                aria-labelledby=\"import-dialog-title\"\n                PaperProps={{ style: { minHeight: '90%', maxHeight: '90%' } }}\n            >\n                <DialogTitle id=\"import-dialog-title\">{I18n.t('Import scripts')}</DialogTitle>\n                <DialogContent>\n                    <Dropzone\n                        key=\"image-drop\"\n                        maxSize={50000000}\n                        onDrop={(acceptedFiles: File[], errors: FileRejection[]) => {\n                            if (!acceptedFiles.length) {\n                                window.alert(errors?.[0]?.errors?.[0]?.message || I18n.t('ra_Cannot upload'));\n                            } else {\n                                this.handleDropFile(acceptedFiles);\n                            }\n                        }}\n                        multiple={false}\n                        accept={{ 'application/zip': [], 'application/x-zip-compressed': [] }}\n                    >\n                        {({ getRootProps, getInputProps, isDragActive, isDragReject }) => {\n                            if (isDragReject) {\n                                if (this.state.imageStatus !== 'rejected') {\n                                    this.setState({ imageStatus: 'rejected' });\n                                }\n                                return (\n                                    <div\n                                        style={{\n                                            ...style,\n                                            ...styles.dropzoneDiv,\n                                        }}\n                                        {...getRootProps()}\n                                    >\n                                        <input {...getInputProps()} />\n                                        <span\n                                            key=\"text\"\n                                            style={styles.text}\n                                        >\n                                            {I18n.t('Some files will be rejected')}\n                                        </span>\n                                        <IconNo\n                                            key=\"icon\"\n                                            style={{ ...styles.icon, ...styles.iconError }}\n                                        />\n                                    </div>\n                                );\n                            }\n                            if (isDragActive) {\n                                if (this.state.imageStatus !== 'accepted') {\n                                    this.setState({ imageStatus: 'accepted' });\n                                }\n\n                                return (\n                                    <div\n                                        style={{\n                                            ...style,\n                                            ...styles.dropzoneDiv,\n                                        }}\n                                        {...getRootProps()}\n                                    >\n                                        <input {...getInputProps()} />\n                                        <span\n                                            key=\"text\"\n                                            style={styles.text}\n                                        >\n                                            {I18n.t('All files will be accepted')}\n                                        </span>\n                                        <IconPlus\n                                            key=\"icon\"\n                                            style={{ ...styles.icon, ...styles.iconOk }}\n                                        />\n                                    </div>\n                                );\n                            }\n                            if (this.state.imageStatus !== 'wait') {\n                                this.setState({ imageStatus: 'wait' });\n                            }\n                            return (\n                                <div\n                                    style={{\n                                        ...style,\n                                        ...styles.dropzoneDiv,\n                                    }}\n                                    {...getRootProps()}\n                                >\n                                    <input {...getInputProps()} />\n                                    <span\n                                        key=\"text\"\n                                        style={styles.text}\n                                    >\n                                        {I18n.t('Drop some files here or click...')}\n                                    </span>\n                                    <IconUpload\n                                        key=\"icon\"\n                                        style={styles.icon}\n                                    />\n                                </div>\n                            );\n                        }}\n                    </Dropzone>\n                    {this.state.error ? (\n                        <DialogError\n                            text={this.state.error}\n                            onClose={() => this.setState({ error: '' })}\n                        />\n                    ) : null}\n                </DialogContent>\n                <DialogActions>\n                    <Button\n                        color=\"grey\"\n                        variant=\"contained\"\n                        onClick={() => this.handleCancel()}\n                        startIcon={<IconCancel />}\n                    >\n                        {I18n.t('Close')}\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        );\n    }\n}\n\nexport default DialogImportFile;\n","import React from 'react';\nimport ReactSplit, { SplitDirection } from '@devbookhq/splitter';\nimport { ThemeProvider, StyledEngineProvider } from '@mui/material/styles';\n\nimport type { IobTheme } from '@iobroker/adapter-react-v5';\nimport {\n    I18n,\n    Utils,\n    AdminConnection,\n    Loader,\n    GenericApp,\n    Message as DialogMessage,\n    Confirm as DialogConfirm,\n} from '@iobroker/adapter-react-v5';\n\nimport { MdMenu as IconMenuClosed, MdArrowBack as IconMenuOpened, MdVisibility as IconShowLog } from 'react-icons/md';\n\nimport SideMenu from './SideMenu';\nimport Log from './Log';\nimport Editor from './Editor';\nimport DialogError from './Dialogs/Error';\nimport DialogImportFile from './Dialogs/ImportFile';\nimport BlocklyEditor from './Components/BlocklyEditor';\nimport { ContextWrapper } from './Components/RulesEditor/components/ContextWrapper';\nimport { Box } from '@mui/material';\nimport type { GenericAppProps, GenericAppState } from '@iobroker/adapter-react-v5/build/types';\n\nimport enLang from './i18n/en.json';\nimport deLang from './i18n/de.json';\nimport esLang from './i18n/es.json';\nimport frLang from './i18n/fr.json';\nimport itLang from './i18n/it.json';\nimport nlLang from './i18n/nl.json';\nimport plLang from './i18n/pl.json';\nimport ptLang from './i18n/pt.json';\nimport ruLang from './i18n/ru.json';\nimport ukLang from './i18n/uk.json';\nimport zhCnLang from './i18n/zh-cn.json';\nimport type { ScriptType } from '@/types';\n\nconst styles: Record<string, any> = {\n    root: {\n        flexGrow: 1,\n        display: 'flex',\n        width: '100%',\n        height: '100%',\n    },\n    menuDiv: {\n        overflow: 'hidden',\n    },\n    splitterDivs: (theme: IobTheme): any => ({\n        '&>div': {\n            overflow: 'hidden',\n            width: '100%',\n            height: '100%',\n        },\n        '& .layout-splitter': {\n            background: theme.palette.mode === 'dark' ? '#595858' : '#ccc;',\n        },\n    }),\n    mainDiv: {\n        width: '100%',\n        height: '100%',\n        overflow: 'hidden',\n    },\n    /*\n    appBarWithMenu: {\n        width: `calc(100% - ${Theme.menu.width}px)`,\n        marginLeft: Theme.menu.width,\n    },\n    appBarWithoutMenu: {\n        width: `100%`,\n        marginLeft: 0,\n    },\n    */\n    content: (theme: IobTheme): React.CSSProperties => ({\n        width: '100%',\n        height: '100%',\n        backgroundColor: theme.palette.background && theme.palette.background.default,\n        position: 'relative',\n    }),\n    splitterDivWithMenu: {\n        width: `calc(100% - 300px)`,\n        height: '100%',\n    },\n    menuDivWithoutMenu: {\n        '&>div:first-child': {\n            display: 'none',\n        },\n        '&>.layout-splitter': {\n            display: 'none',\n        },\n    },\n    progress: {\n        margin: 100,\n    },\n    menuOpenCloseButton: (theme: IobTheme): any => ({\n        position: 'absolute',\n        left: 0,\n        borderRadius: '0 5px 5px 0',\n        top: 6,\n        pt: 1,\n        cursor: 'pointer',\n        zIndex: 1,\n        height: 25,\n        width: 20,\n        background: theme.palette.secondary.main,\n        color: theme.palette.primary.main,\n        pl: '3px',\n        '&:hover': {\n            color: 'white',\n        },\n    }),\n    showLogButton: (theme: IobTheme): any => ({\n        position: 'absolute',\n        right: 3,\n        borderRadius: '5px 5px 0 0',\n        bottom: 0,\n        pt: '3px',\n        cursor: 'pointer',\n        zIndex: 10,\n        height: 20,\n        width: 25,\n        background: theme.palette.secondary.main,\n        color: theme.palette.primary.main,\n        pl: 1,\n        '&:hover': {\n            color: 'white',\n        },\n    }),\n};\n\ninterface AppProps extends GenericAppProps {\n    version: string;\n}\n\ninterface AppState extends GenericAppState {\n    ready: boolean;\n    scriptsHash: number;\n    instances: number[];\n    updating: boolean;\n    resizing: boolean;\n    selected: string | null;\n    logMessage: Record<string, any>;\n    editing: string[];\n    menuOpened: boolean;\n    menuSelectId: string;\n    expertMode: boolean;\n    logHorzLayout: boolean;\n    runningInstances: Record<string, boolean>;\n    confirm: string;\n    importFile: boolean;\n    message: string;\n    searchText: string;\n    hideLog: boolean;\n    debugMode: boolean;\n    debugInstance: { adapter?: string; instance?: string } | null;\n    splitSizes: [number, number];\n    logSizes: [number, number];\n}\n\nclass App extends GenericApp<AppProps, AppState> {\n    private hosts: string[] = [];\n\n    private importFile: string | null = null;\n\n    private scripts: Record<string, ioBroker.ScriptObject | ioBroker.ChannelObject> = {};\n\n    private confirmCallback: null | ((result: boolean) => void) = null;\n\n    constructor(props: AppProps) {\n        super(props, {\n            // @ts-expect-error fix later\n            Connection: AdminConnection,\n            translations: {\n                en: enLang,\n                de: deLang,\n                es: esLang,\n                fr: frLang,\n                it: itLang,\n                nl: nlLang,\n                pl: plLang,\n                pt: ptLang,\n                ru: ruLang,\n                uk: ukLang,\n                'zh-cn': zhCnLang,\n            },\n            bottomButtons: false,\n            socket: {\n                autoSubscribeLog: true,\n            },\n            sentryDSN: window.sentryDSN,\n        });\n\n        // this.logIndex = 0;\n        const logSizesStr = window.localStorage.getItem('JS.logSizes');\n        let logSizes: [number, number] = [80, 20];\n        if (logSizesStr) {\n            try {\n                logSizes = JSON.parse(logSizesStr);\n            } catch {\n                // ignore\n            }\n        }\n\n        const splitSizesStr = window.localStorage.getItem('JS.splitSizes');\n        let splitSizes: [number, number] = [20, 80];\n        if (splitSizesStr) {\n            try {\n                splitSizes = JSON.parse(splitSizesStr);\n            } catch {\n                // ignore\n            }\n        }\n        Object.assign(this.state, { splitSizes, logSizes });\n\n        window.alert = (message: string): void => {\n            console.error(message);\n            this.showJsError(message.toString());\n        };\n    }\n\n    onScriptsChanged = (id: string, obj: ioBroker.Object | null | undefined): void => {\n        if (!id) {\n            return;\n        }\n        let changed = false;\n        const newState: Partial<AppState> = {};\n        if (id.startsWith('script.js.')) {\n            if (obj) {\n                if (JSON.stringify(this.scripts[id]) !== JSON.stringify(obj)) {\n                    this.scripts[id] = obj as ioBroker.ScriptObject;\n                    changed = true;\n                    newState.scriptsHash = this.state.scriptsHash + 1;\n                }\n            } else if (this.scripts[id]) {\n                delete this.scripts[id];\n                changed = true;\n                newState.scriptsHash = this.state.scriptsHash + 1;\n            }\n        }\n\n        changed && this.setState(newState as AppState);\n    };\n\n    onInstanceChanged = (id: string, obj: ioBroker.Object | null | undefined): void => {\n        if (!id) {\n            return;\n        }\n        let changed = false;\n        const newState: Partial<AppState> = {};\n\n        if (id.match(/^system\\.adapter\\.[-_\\w\\d]+\\$/)) {\n            // update instances\n            if (id.startsWith(`system.adapter.${this.adapterName}.`)) {\n                const idNum = parseInt(id.split('.').pop() || '0', 10) || 0;\n                if (obj?.type === 'instance') {\n                    if (!this.state.instances.includes(idNum)) {\n                        newState.instances = [...this.state.instances];\n                        newState.instances.push(idNum);\n                        newState.instances.sort();\n                        changed = true;\n                        // request alive\n                        void this.socket.subscribeState(`${obj._id}.alive`, this.onInstanceAliveChange);\n                    }\n                } else if (!obj && this.state.instances.includes(idNum)) {\n                    this.socket.unsubscribeState(`${id}.alive`, this.onInstanceAliveChange);\n                    newState.instances = [...this.state.instances];\n                    const pos = newState.instances.indexOf(idNum);\n                    newState.instances.splice(pos, 1);\n                    changed = true;\n                }\n            }\n\n            if (obj?.common?.blockly) {\n                this.confirmCallback = result => result && window.location.reload();\n                newState.confirm = I18n.t('Some blocks were updated. Reload admin?');\n                changed = true;\n            }\n        }\n\n        changed && this.setState(newState as AppState);\n    };\n\n    onHostChanged = (id: string, obj: ioBroker.Object | null | undefined): void => {\n        if (!id) {\n            return;\n        }\n        if (id.startsWith('system.host.')) {\n            if (obj?.type === 'host') {\n                if (!this.hosts.includes(id)) {\n                    this.hosts.push(id);\n                    this.hosts.sort();\n                }\n            } else if (!obj && this.hosts.includes(id)) {\n                const pos = this.hosts.indexOf(id);\n                this.hosts.splice(pos, 1);\n            }\n        }\n    };\n\n    onConnectionReady(): void {\n        window.systemLang = this.socket.systemLang;\n        this.setState(\n            {\n                ready: false,\n                scriptsHash: 0,\n                instances: [],\n                updating: false,\n                resizing: false,\n                selected: null,\n                logMessage: {},\n                editing: [],\n                menuOpened: window.localStorage.getItem('App.menuOpened') !== 'false',\n                menuSelectId: '',\n                expertMode: window.localStorage.getItem('App.expertMode') === 'true',\n                logHorzLayout: window.localStorage.getItem('App.logHorzLayout') === 'true',\n                runningInstances: {},\n                confirm: '',\n                importFile: false,\n                message: '',\n                searchText: '',\n                hideLog: window.localStorage.getItem('App.hideLog') === 'true',\n                debugMode: false,\n                debugInstance: null,\n                splitSizes: [20, 80],\n            },\n            async (): Promise<void> => {\n                const newState: Partial<AppState> = {};\n\n                // load instances & scripts\n                // Read all instances\n                const instancesResult = await this.subscribeOnInstances();\n                newState.instances = instancesResult.instances;\n                newState.runningInstances = instancesResult.runningInstances;\n\n                await this.readAdaptersWithBlockly();\n                const hosts = await this.socket.getHosts();\n                this.hosts = hosts.map(obj => obj._id);\n                // load all scripts\n                const scripts = await this.readAllScripts();\n                if (\n                    window.localStorage.getItem('App.expertMode') !== 'true' &&\n                    window.localStorage.getItem('App.expertMode') !== 'false'\n                ) {\n                    // detect if some global scripts exists\n                    if (\n                        Object.keys(scripts).find(\n                            id => id.startsWith('script.js.global.') && scripts[id].type === 'script',\n                        )\n                    ) {\n                        newState.expertMode = true;\n                    }\n                }\n                this.scripts = scripts;\n\n                let scriptsHash = this.state.scriptsHash;\n                if (this.compareScripts(scripts)) {\n                    scriptsHash++;\n                }\n                newState.scriptsHash = scriptsHash;\n                newState.ready = true;\n\n                this.setState(newState as AppState);\n\n                await this.socket.subscribeObject('script.*', this.onScriptsChanged);\n                await this.socket.subscribeObject('system.adapter.*', this.onInstanceChanged);\n                await this.socket.subscribeObject('system.host.*', this.onHostChanged);\n            },\n        );\n    }\n\n    async subscribeOnInstances(): Promise<{ instances: number[]; runningInstances: Record<string, boolean> }> {\n        const instancesArray = await this.socket.getAdapterInstances(this.adapterName);\n        const instances: number[] = instancesArray.map(obj => parseInt(obj._id.split('.').pop() || '0')).sort();\n        const runningInstances: Record<string, boolean> = {};\n        instances.forEach(id => (runningInstances[`system.adapter.${this.adapterName}.${id}`] = false));\n\n        // subscribe on instances\n        for (let i = 0; i < instances.length; i++) {\n            const instanceId = `system.adapter.${this.adapterName}.${instances[i]}`;\n            const id = `${instanceId}.alive`;\n            const state = await this.socket.getState(id);\n            runningInstances[instanceId] = state ? !!state.val : false;\n            await this.socket.subscribeState(id, this.onInstanceAliveChange);\n        }\n\n        return { instances, runningInstances };\n    }\n\n    async readAllScripts(): Promise<Record<string, ioBroker.ChannelObject | ioBroker.ScriptObject>> {\n        const folders: Record<string, ioBroker.ChannelObject | ioBroker.ScriptObject> =\n            await this.socket.getObjectViewSystem('channel', 'script.js.', 'script.js.\\u9999');\n        const scripts = await this.socket.getObjectViewSystem('script', 'script.js.', 'script.js.\\u9999');\n        Object.keys(scripts).forEach(id => (folders[id] = scripts[id]));\n        return folders;\n    }\n\n    async readAdaptersWithBlockly(): Promise<void> {\n        const adapters: Record<string, ioBroker.AdapterObject> = await this.socket.getObjectViewSystem(\n            'adapter',\n            'system.adapter.',\n            'system.adapter.\\u9999',\n        );\n        return new Promise(resolve => BlocklyEditor.loadCustomBlockly(adapters, () => resolve()));\n    }\n\n    onInstanceAliveChange = (id: string, state: ioBroker.State | null | undefined): void => {\n        if (id) {\n            id = id ? id.substring(0, id.length - 6) : ''; // - .alive\n\n            if (this.state.runningInstances[id] !== (state ? state.val : false)) {\n                const runningInstances: Record<string, boolean> = JSON.parse(\n                    JSON.stringify(this.state.runningInstances),\n                );\n                runningInstances[id] = state ? !!state.val : false;\n                this.setState({ runningInstances });\n            }\n        }\n    };\n\n    onToggleExpertMode(expertMode: boolean): void {\n        this.onExpertModeChange(expertMode);\n    }\n\n    compareScripts(newScripts: Record<string, ioBroker.ScriptObject | ioBroker.ChannelObject>): boolean {\n        const oldIds = Object.keys(this.scripts);\n        const newIds = Object.keys(newScripts);\n        if (oldIds.length !== newIds.length) {\n            this.scripts = newScripts;\n            return true;\n        }\n        if (JSON.stringify(oldIds) !== JSON.stringify(newIds)) {\n            this.scripts = newScripts;\n            return true;\n        }\n        for (let i = 0; i < oldIds.length; i++) {\n            const oldScript = this.scripts[oldIds[i]].common;\n            const newScript = newScripts[oldIds[i]].common;\n\n            if (oldScript.name !== newScript.name) {\n                this.scripts = newScripts;\n                return true;\n            }\n            if ((oldScript as ioBroker.ScriptCommon).engine !== (newScript as ioBroker.ScriptCommon).engine) {\n                this.scripts = newScripts;\n                return true;\n            }\n            if ((oldScript as ioBroker.ScriptCommon).engineType !== (newScript as ioBroker.ScriptCommon).engineType) {\n                this.scripts = newScripts;\n                return true;\n            }\n            if ((oldScript as ioBroker.ScriptCommon).enabled !== (newScript as ioBroker.ScriptCommon).enabled) {\n                this.scripts = newScripts;\n                return true;\n            }\n        }\n        return false;\n    }\n\n    async onRename(oldId: string, newId: string, newName?: string, newInstance?: number): Promise<void> {\n        if (newId.trim().endsWith('.')) {\n            newId = newId.replace(/\\.\\s*$/, '_');\n        }\n        console.log(`Rename ${oldId} => ${newId}`);\n        this.setState({ updating: true });\n\n        // Rename script.js.common.Skript_1 => script.js.common.New folder.Skript_1\n\n        try {\n            if (this.scripts[oldId]?.type === 'script') {\n                const common = JSON.parse(JSON.stringify(this.scripts[oldId].common));\n                common.name = newName || common.name;\n                if (newInstance !== undefined) {\n                    common.engine = `system.adapter.javascript.${newInstance}`;\n                }\n                // Check if the script is not a children of other script\n                const parts = newId.split('.');\n                parts.pop();\n                const parentID = parts.join('.');\n\n                if (this.scripts[parentID] && this.scripts[parentID].type === 'script') {\n                    parts.pop();\n                    newId = `${parts.join('.')}.${newId.split('.').pop()}`;\n                }\n\n                await this.updateScript(oldId, newId, common);\n            } else {\n                await this.renameGroup(oldId, newId, newName);\n            }\n        } catch (err) {\n            if (!(err as Error).toString().includes('canceled')) {\n                this.showJsError(err as Error);\n            }\n        }\n\n        this.setState({ updating: false });\n    }\n\n    async renameGroup(id: string, newId: string, newName?: string, _list?: string[]): Promise<void> {\n        if (!_list) {\n            _list = [];\n\n            // collect all elements to rename\n            // find all elements\n            _list = Object.keys(this.scripts).filter(_id => _id.startsWith(`${id}.`));\n\n            let obj = await this.socket.getObject(id);\n            obj = obj || ({ common: {}, type: 'channel' } as ioBroker.ChannelObject);\n            obj.common.name = newName || obj.common.name || id.split('.').pop() || '';\n            obj._id = newId;\n\n            // Delete root object/folder\n            try {\n                await this.socket.delObject(id);\n            } catch {\n                // ignore\n            }\n\n            // recreate same object with new name\n            try {\n                await this.socket.setObject(newId, obj);\n                await this.renameGroup(id, newId, newName, _list);\n            } catch (err) {\n                console.log(err);\n                const obj: ioBroker.ChannelObject = {\n                    _id: newId,\n                    type: 'channel',\n                    common: {\n                        name: newName || id.split('.').pop() || '',\n                        expert: true,\n                    },\n                    native: {},\n                };\n                // may be it is virtual folder\n                await this.socket.setObject(newId, obj);\n                await this.renameGroup(id, newId, newName, _list);\n            }\n        } else if (_list.length) {\n            let nId = _list.pop();\n\n            if (nId) {\n                const obj = await this.socket.getObject(nId);\n                if (obj) {\n                    try {\n                        await this.socket.delObject(nId);\n                    } catch {\n                        // ignore\n                    }\n                    nId = newId + nId.substring(id.length);\n                    obj._id = nId;\n                    obj.common = obj.common || {};\n                    obj.common.expert = true;\n                    await this.socket.setObject(nId, obj);\n                    await this.renameGroup(id, newId, newName, _list);\n                }\n            }\n        }\n    }\n\n    onUpdateScript(id: string, common: ioBroker.ScriptCommon): void {\n        if (this.scripts[id] && this.scripts[id].type === 'script') {\n            this.updateScript(id, id, common)\n                .then(() => {})\n                .catch(err => !(err as Error).toString().includes('canceled') && this.showJsError(err));\n        }\n    }\n\n    onSelect(selected: string): void {\n        if (this.scripts[selected] && this.scripts[selected].common && this.scripts[selected].type === 'script') {\n            this.setState({ selected, menuSelectId: selected }, () =>\n                setTimeout(() => this.setState({ menuSelectId: '' }), 300),\n            );\n        }\n    }\n\n    onExpertModeChange(expertMode: boolean): void {\n        if (this.state.expertMode !== expertMode) {\n            window.localStorage.setItem('App.expertMode', expertMode ? 'true' : 'false');\n            this.setState({ expertMode });\n        }\n    }\n\n    showJsError(err: Error | string): void {\n        this.setState({ errorText: err ? err.toString() : '' });\n    }\n\n    showMessage(message: string): void {\n        this.setState({ message: message ? message.toString() : '' });\n    }\n\n    onDelete(id: string): void {\n        this.socket.delObject(id).catch(err => this.showJsError(err));\n    }\n\n    onEdit(id: string): void {\n        if (this.state.selected !== id) {\n            this.setState({ selected: id });\n        }\n    }\n\n    onAddNew(\n        id: string,\n        name: string,\n        isFolder: boolean,\n        instance?: number,\n        type?: ScriptType | 'folder',\n        source?: string,\n    ): void {\n        const reg = new RegExp(`^${id}\\\\.`);\n\n        if (Object.keys(this.scripts).find(_id => id === _id || reg.test(id))) {\n            return this.showJsError(I18n.t('Yet exists!'));\n        }\n\n        if (isFolder) {\n            this.socket\n                .setObject(id, {\n                    _id: id,\n                    type: 'channel',\n                    common: {\n                        name,\n                        expert: true,\n                    },\n                    native: {},\n                })\n                .then(() =>\n                    setTimeout(\n                        () =>\n                            this.setState({ menuSelectId: id }, () =>\n                                setTimeout(() => this.setState({ menuSelectId: '' }), 300),\n                            ),\n                        1000,\n                    ),\n                )\n                .catch(err => this.showJsError(err));\n        } else {\n            if (type === 'Blockly' && !source) {\n                // Default Blockly XML for new scripts\n                source = `\\n//${btoa(encodeURIComponent('<xml xmlns=\"https://developers.google.com/blockly/xml\"></xml>'))}`;\n            }\n\n            this.socket\n                // @ts-expect-error Fixed in js-controller 7\n                .setObject(id, {\n                    _id: id,\n                    type: 'script',\n                    common: {\n                        name,\n                        expert: true,\n                        engineType: type || 'Javascript/js',\n                        enabled: false,\n                        engine: `system.adapter.javascript.${instance || 0}`,\n                        source: source || '',\n                        debug: false,\n                        verbose: false,\n                    },\n                    native: {},\n                })\n                .then(() => setTimeout(() => this.onSelect(id), 1000))\n                .catch(err => this.showJsError(err));\n        }\n    }\n\n    async updateScript(oldId: string, newId: string, newCommon: ioBroker.ScriptCommon): Promise<void> {\n        let _obj = await this.socket.getObject(oldId);\n        const obj: ioBroker.ScriptObject = { common: {} } as ioBroker.ScriptObject;\n\n        if (newCommon.engine !== undefined) {\n            obj.common.engine = newCommon.engine;\n        }\n        if (newCommon.enabled !== undefined) {\n            obj.common.enabled = newCommon.enabled;\n        }\n        if (newCommon.source !== undefined) {\n            obj.common.source = newCommon.source;\n        }\n        if (newCommon.debug !== undefined) {\n            obj.common.debug = newCommon.debug;\n        }\n        if (newCommon.verbose !== undefined) {\n            obj.common.verbose = newCommon.verbose;\n        }\n\n        obj.from = 'system.adapter.admin.0'; // we must distinguish between GUI(admin.0) and disk(javascript.0)\n\n        if (oldId === newId && _obj?.common && newCommon.name === _obj.common.name) {\n            if (!newCommon.engineType || newCommon.engineType !== _obj.common.engineType) {\n                if (newCommon.engineType !== undefined) {\n                    obj.common.engineType = newCommon.engineType || 'Javascript/js';\n                }\n            }\n            obj.type = 'script';\n            return this.socket.extendObject(oldId, obj);\n        }\n        // let prefix;\n\n        // let parts = _obj.common.engineType.split('/');\n\n        // prefix = 'script.' + (parts[1] || parts[0]) + '.';\n\n        if (_obj?.common) {\n            _obj.common.engineType = newCommon.engineType || _obj.common.engineType || 'Javascript/js';\n            await this.socket.delObject(oldId);\n            if (obj.common.engine !== undefined) {\n                _obj.common.engine = obj.common.engine;\n            }\n            if (obj.common.enabled !== undefined) {\n                _obj.common.enabled = obj.common.enabled;\n            }\n            if (obj.common.source !== undefined) {\n                _obj.common.source = obj.common.source;\n            }\n            if (obj.common.name !== undefined) {\n                _obj.common.name = obj.common.name;\n            }\n            if (obj.common.debug !== undefined) {\n                _obj.common.debug = obj.common.debug;\n            }\n            if (obj.common.verbose !== undefined) {\n                _obj.common.verbose = obj.common.verbose;\n            }\n\n            // @ts-expect-error deprecated\n            if (_obj._rev !== undefined) {\n                // @ts-expect-error deprecated\n                delete _obj._rev;\n            }\n\n            // Name must always exist\n            _obj.common.name = newCommon.name;\n            _obj.common.expert = true;\n            _obj.type = 'script';\n\n            _obj._id = newId; // prefix + newCommon.name.replace(/[\\s\"']/g, '_');\n\n            await this.socket.setObject(newId, _obj);\n            return;\n        }\n        _obj = obj;\n\n        // Name must always exist\n        _obj.common.name = newCommon.name;\n        _obj.common.expert = true;\n        _obj.type = 'script';\n        _obj._id = newId; // prefix + newCommon.name.replace(/[\\s\"']/g, '_');\n\n        return this.socket.setObject(newId, _obj);\n    }\n\n    onEnableDisable(id: string, enabled: boolean): void {\n        if (this.scripts[id] && this.scripts[id].type === 'script') {\n            const common: ioBroker.ScriptCommon = this.scripts[id].common as ioBroker.ScriptCommon;\n            common.enabled = enabled;\n            common.expert = true;\n            this.updateScript(id, id, common).catch(err => err !== 'canceled' && this.showJsError(err));\n        }\n    }\n\n    async getLiveHost(): Promise<string | undefined> {\n        for (let h = 0; h < this.hosts.length; h++) {\n            const id = this.hosts[h];\n            const state = await this.socket.getState(`${id}.alive`);\n            if (state && state?.val) {\n                return id;\n            }\n        }\n        return undefined;\n    }\n\n    async onExport(): Promise<void> {\n        const host = await this.getLiveHost();\n        if (!host) {\n            this.showJsError(I18n.t('No active host found'));\n            return;\n        }\n\n        const d = new Date();\n        let date = d.getFullYear().toString();\n        let m: number | string = d.getMonth() + 1;\n        if (m < 10) {\n            m = `0${m}`;\n        }\n        date += `-${m}`;\n        m = d.getDate();\n        if (m < 10) {\n            m = `0${m}`;\n        }\n        date += `-${m}-`;\n\n        this.socket.getRawSocket().emit(\n            'sendToHost',\n            host,\n            'readObjectsAsZip',\n            {\n                adapter: 'javascript',\n                id: 'script.js',\n                link: `${date}scripts.zip`, // request link to file and not the data itself\n                fileStorageNamespace: `admin.${this.instance}`, // new controller 5.x understands this and saves ZIP in the file store\n            },\n            (data: string | { data?: string; error?: string }) => {\n                if (typeof data === 'string') {\n                    // it is a link to the created file\n                    const a = document.createElement('a');\n                    // actual position is http://IP:8081/adapter/javascript/index.html\n                    // we need http://IP:8081/files/admin.0/zip/2023-06-20-scripts.zip\n                    a.href = `../../files/${data}`;\n                    document.body.appendChild(a);\n                    a.click();\n                    a.remove();\n                } else {\n                    data.error && this.showJsError(data.error);\n                    if (data.data) {\n                        const a = document.createElement('a');\n                        a.href = `data: application/zip;base64,${data.data}`;\n                        a.download = `${date}scripts.zip`;\n                        document.body.appendChild(a);\n                        a.click();\n                        a.remove();\n                    }\n                }\n            },\n        );\n    }\n\n    onImport(data: string | undefined): void {\n        this.importFile = data || null;\n        if (data) {\n            this.confirmCallback = this.onImportConfirmed.bind(this);\n            this.setState({ importFile: false, confirm: I18n.t('Existing scripts will be overwritten.') });\n        } else {\n            this.setState({ importFile: false });\n        }\n    }\n\n    async onImportConfirmed(ok: boolean): Promise<void> {\n        let data = this.importFile;\n        this.importFile = null;\n        if (ok && data) {\n            data = data.split(',')[1];\n            const host = await this.getLiveHost();\n            if (!host) {\n                this.showJsError(I18n.t('No active host found'));\n                return;\n            }\n            this.socket.getRawSocket().emit(\n                'sendToHost',\n                host,\n                'writeObjectsAsZip',\n                {\n                    data: data,\n                    adapter: 'javascript',\n                    id: 'script.js',\n                },\n                (data: string | { error?: string }) => {\n                    if (data === 'permissionError') {\n                        this.showJsError(I18n.t(data));\n                    } else if (!data || (data as { error?: string }).error) {\n                        this.showJsError(\n                            data ? I18n.t((data as { error?: string }).error || '') : I18n.t('Unknown error'),\n                        );\n                    } else {\n                        this.showMessage(I18n.t('Done'));\n                    }\n                },\n            );\n        }\n    }\n\n    toggleLogLayout(): void {\n        window.localStorage.setItem('App.logHorzLayout', this.state.logHorzLayout ? 'false' : 'true');\n        this.setState({ logHorzLayout: !this.state.logHorzLayout });\n    }\n\n    renderEditor(): React.JSX.Element {\n        const isAnyRulesExists = Object.keys(this.scripts).reduce(\n            (sum, id) => sum + ((this.scripts[id].common as ioBroker.ScriptCommon).engineType === 'Rules' ? 1 : 0),\n            0,\n        );\n\n        return (\n            <Editor\n                key=\"editor\"\n                debugMode={this.state.debugMode}\n                onDebugModeChange={value => {\n                    if (!value) {\n                        this.setState({ debugMode: false, debugInstance: null });\n                    } else {\n                        this.setState({ debugMode: true });\n                    }\n                }}\n                visible={!this.state.resizing}\n                socket={this.socket}\n                adapterName={this.adapterName}\n                onLocate={menuSelectId => this.setState({ menuSelectId })}\n                runningInstances={this.state.runningInstances}\n                menuOpened={this.state.menuOpened}\n                searchText={this.state.searchText}\n                themeType={this.state.themeType}\n                themeName={this.state.themeName}\n                theme={this.state.theme}\n                expertMode={this.state.expertMode}\n                onChange={(id, common) => this.onUpdateScript(id, common)}\n                isAnyRulesExists={isAnyRulesExists}\n                debugInstance={this.state.debugInstance}\n                onSelectedChange={(id, editing) => {\n                    const newState: Partial<AppState> = {};\n                    let changed = false;\n                    if (id !== this.state.selected) {\n                        changed = true;\n                        newState.selected = id;\n                    }\n                    if (JSON.stringify(editing) !== JSON.stringify(this.state.editing)) {\n                        changed = true;\n                        newState.editing = JSON.parse(JSON.stringify(editing));\n                    }\n                    changed && this.setState(newState as AppState);\n                }}\n                onRestart={id => this.socket.extendObject(id, { common: { enabled: true } })}\n                selected={\n                    this.state.selected &&\n                    this.scripts[this.state.selected] &&\n                    this.scripts[this.state.selected].type === 'script'\n                        ? this.state.selected\n                        : ''\n                }\n                objects={this.scripts}\n                resizing={this.state.resizing}\n            />\n        );\n    }\n\n    showLogButton(): React.JSX.Element {\n        return (\n            <Box\n                key=\"showLog\"\n                title={I18n.t('Show logs')}\n                sx={styles.showLogButton}\n                onClick={() => {\n                    window.localStorage.setItem('App.hideLog', 'false');\n                    this.setState({ hideLog: false, resizing: true });\n                    setTimeout(() => this.setState({ resizing: false }), 300);\n                }}\n            >\n                <IconShowLog />\n            </Box>\n        );\n    }\n\n    renderErrorDialog(): React.JSX.Element | null {\n        return this.state.errorText ? (\n            <DialogError\n                key=\"dialogError\"\n                onClose={() => this.setState({ errorText: '' })}\n                text={this.state.errorText}\n            />\n        ) : null;\n    }\n\n    renderMain(): (React.JSX.Element | null)[] | null {\n        let content;\n        if (this.state.debugMode || this.state.hideLog) {\n            content = (\n                <>\n                    {!this.state.debugMode && this.state.hideLog ? this.showLogButton() : undefined}\n                    {this.renderEditor()}\n                </>\n            );\n        } else {\n            content = (\n                <ReactSplit\n                    direction={this.state.logHorzLayout ? SplitDirection.Horizontal : SplitDirection.Vertical}\n                    initialSizes={this.state.logSizes}\n                    minWidths={[500, 100]}\n                    minHeights={[150, 50]}\n                    onResizeStarted={() => this.setState({ resizing: true })}\n                    onResizeFinished={(_gutterIdx, logSizes) => {\n                        this.setState({ logSizes: logSizes as [number, number], resizing: false });\n                        window.localStorage.setItem('JS.logSizes', JSON.stringify(logSizes));\n                    }}\n                    gutterClassName={this.state.themeType === 'dark' ? 'Dark visGutter' : 'Light visGutter'}\n                >\n                    {this.renderEditor()}\n                    <Log\n                        key=\"log\"\n                        verticalLayout={!this.state.logHorzLayout}\n                        onLayoutChange={() => this.toggleLogLayout()}\n                        editing={this.state.editing}\n                        socket={this.socket}\n                        selected={this.state.selected}\n                        onHideLog={() => {\n                            window.localStorage.setItem('App.hideLog', 'true');\n                            this.setState({ hideLog: true, resizing: true });\n                            setTimeout(() => this.setState({ resizing: false }), 300);\n                        }}\n                    />\n                </ReactSplit>\n            );\n        }\n\n        return [\n            this.state.message ? (\n                <DialogMessage\n                    key=\"dialogMessage\"\n                    onClose={() => this.setState({ message: '' })}\n                    text={this.state.message}\n                />\n            ) : null,\n            this.renderErrorDialog(),\n            this.state.importFile ? (\n                <DialogImportFile\n                    key=\"dialogImportFile\"\n                    onClose={data => this.onImport(data)}\n                />\n            ) : null,\n            this.state.confirm ? (\n                <DialogConfirm\n                    key=\"dialogConfirm\"\n                    onClose={result => {\n                        this.state.confirm && this.setState({ confirm: '' });\n                        this.confirmCallback && this.confirmCallback(result);\n                        this.confirmCallback = null;\n                    }}\n                    text={this.state.confirm}\n                />\n            ) : null,\n            <Box\n                sx={styles.content}\n                className=\"iobVerticalSplitter\"\n                key=\"main\"\n            >\n                <Box\n                    key=\"closeMenu\"\n                    sx={styles.menuOpenCloseButton}\n                    onClick={() => {\n                        window.localStorage.setItem('App.menuOpened', this.state.menuOpened ? 'false' : 'true');\n                        this.setState({ menuOpened: !this.state.menuOpened, resizing: true });\n                        setTimeout(() => this.setState({ resizing: false }), 300);\n                    }}\n                >\n                    {this.state.menuOpened ? <IconMenuOpened /> : <IconMenuClosed />}\n                </Box>\n                {content}\n            </Box>,\n        ];\n    }\n\n    render(): React.JSX.Element {\n        if (!this.state.ready) {\n            // return (<CircularProgress style={styles.progress} size={50} />);\n            return (\n                <StyledEngineProvider injectFirst>\n                    <ThemeProvider theme={this.state.theme}>\n                        <Loader themeType={this.state.themeType} />\n                    </ThemeProvider>\n                </StyledEngineProvider>\n            );\n        }\n\n        let context;\n        if (this.state.menuOpened) {\n            context = (\n                <ReactSplit\n                    direction={SplitDirection.Horizontal}\n                    initialSizes={this.state.splitSizes}\n                    minWidths={[270, 400]}\n                    onResizeFinished={(_gutterIdx, splitSizes): void => {\n                        this.setState({ splitSizes: splitSizes as [number, number] });\n                        window.localStorage.setItem('JS.splitSizes', JSON.stringify(splitSizes));\n                    }}\n                    gutterClassName={this.state.themeType === 'dark' ? 'Dark visGutter' : 'Light visGutter'}\n                >\n                    <div\n                        style={styles.mainDiv}\n                        key=\"menu\"\n                    >\n                        <SideMenu\n                            debugMode={this.state.debugMode}\n                            onDebugInstance={data => this.setState({ debugInstance: data, debugMode: !!data })}\n                            key=\"sidemenu\"\n                            scripts={this.scripts}\n                            scriptsHash={this.state.scriptsHash}\n                            instances={this.state.instances}\n                            onRename={this.onRename.bind(this)}\n                            socket={this.socket}\n                            selectId={this.state.menuSelectId}\n                            onEdit={this.onEdit.bind(this)}\n                            expertMode={this.state.expertMode}\n                            themeName={this.state.themeName}\n                            onThemeChange={themeName => {\n                                Utils.setThemeName(themeName);\n                                const themeType = Utils.getThemeType(themeName);\n                                this.setState({ themeName, themeType }, () => this.toggleTheme(themeName));\n                            }}\n                            runningInstances={this.state.runningInstances}\n                            onExpertModeChange={this.onExpertModeChange.bind(this)}\n                            onDelete={this.onDelete.bind(this)}\n                            onAddNew={this.onAddNew.bind(this)}\n                            onEnableDisable={this.onEnableDisable.bind(this)}\n                            onExport={this.onExport.bind(this)}\n                            width={500} // TODO: https://github.com/ioBroker/ioBroker.javascript/issues/1643\n                            onImport={() => this.setState({ importFile: true })}\n                            onSearch={searchText => this.setState({ searchText })}\n                            version={this.props.version}\n                        />\n                    </div>\n                    {this.renderMain()}\n                </ReactSplit>\n            );\n        } else {\n            context = this.renderMain();\n        }\n\n        return (\n            <StyledEngineProvider injectFirst>\n                <ThemeProvider theme={this.state.theme}>\n                    <div style={styles.root}>\n                        <ContextWrapper socket={this.socket}>{context}</ContextWrapper>\n                    </div>\n                </ThemeProvider>\n            </StyledEngineProvider>\n        );\n    }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA.\n\nconst isLocalhost = Boolean(\n    window.location.hostname === 'localhost' ||\n        // [::1] is the IPv6 localhost address.\n        window.location.hostname === '[::1]' ||\n        // 127.0.0.1/8 is considered localhost for IPv4.\n        window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/),\n);\n\nexport function register(config) {\n    if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n        // The URL constructor is available in all browsers that support SW.\n        const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n        if (publicUrl.origin !== window.location.origin) {\n            // Our service worker won't work if PUBLIC_URL is on a different origin\n            // from what our page is served on. This might happen if a CDN is used to\n            // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n            return;\n        }\n\n        window.addEventListener('load', () => {\n            const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n            if (isLocalhost) {\n                // This is running on localhost. Let's check if a service worker still exists or not.\n                checkValidServiceWorker(swUrl, config);\n\n                // Add some additional logging to localhost, pointing developers to the\n                // service worker/PWA documentation.\n                navigator.serviceWorker.ready.then(() => {\n                    console.log(\n                        'This web app is being served cache-first by a service ' +\n                            'worker. To learn more, visit http://bit.ly/CRA-PWA',\n                    );\n                });\n            } else {\n                // Is not localhost. Just register service worker\n                registerValidSW(swUrl, config);\n            }\n        });\n    }\n}\n\nfunction registerValidSW(swUrl, config) {\n    navigator.serviceWorker\n        .register(swUrl)\n        .then(registration => {\n            registration.onupdatefound = () => {\n                const installingWorker = registration.installing;\n                installingWorker.onstatechange = () => {\n                    if (installingWorker.state === 'installed') {\n                        if (navigator.serviceWorker.controller) {\n                            // At this point, the updated precached content has been fetched,\n                            // but the previous service worker will still serve the older\n                            // content until all client tabs are closed.\n                            console.log(\n                                'New content is available and will be used when all ' +\n                                    'tabs for this page are closed. See http://bit.ly/CRA-PWA.',\n                            );\n\n                            // Execute callback\n                            if (config && config.onUpdate) {\n                                config.onUpdate(registration);\n                            }\n                        } else {\n                            // At this point, everything has been precached.\n                            // It's the perfect time to display a\n                            // \"Content is cached for offline use.\" message.\n                            console.log('Content is cached for offline use.');\n\n                            // Execute callback\n                            if (config && config.onSuccess) {\n                                config.onSuccess(registration);\n                            }\n                        }\n                    }\n                };\n            };\n        })\n        .catch(error => {\n            console.error('Error during service worker registration:', error);\n        });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n    // Check if the service worker can be found. If it can't reload the page.\n    fetch(swUrl)\n        .then(response => {\n            // Ensure service worker exists, and that we really are getting a JS file.\n            if (response.status === 404 || response.headers.get('content-type').indexOf('javascript') === -1) {\n                // No service worker found. Probably a different app. Reload the page.\n                navigator.serviceWorker.ready.then(registration => {\n                    registration.unregister().then(() => {\n                        window.location.reload();\n                    });\n                });\n            } else {\n                // Service worker found. Proceed as normal.\n                registerValidSW(swUrl, config);\n            }\n        })\n        .catch(() => {\n            console.log('No internet connection found. App is running in offline mode.');\n        });\n}\n\nexport function unregister() {\n    if ('serviceWorker' in navigator) {\n        navigator.serviceWorker.ready.then(registration => {\n            registration.unregister();\n        });\n    }\n}\n","import React from 'react';\nimport { createRoot } from 'react-dom/client';\n\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport pgk from '../package.json';\nimport { DndProvider } from 'react-dnd';\nimport { HTML5Backend } from 'react-dnd-html5-backend';\nimport { TouchBackend } from 'react-dnd-touch-backend';\n\nimport { GenericBlock } from './Components/RulesEditor/components/GenericBlock';\n\ndeclare global {\n    interface Window {\n        GenericBlock: any;\n        sentryDSN: string;\n        loadDynamicScript: (url: string, callback: () => void) => void;\n        socketLoadedHandler: () => void;\n    }\n}\nwindow.GenericBlock = GenericBlock;\n\nwindow.adapterName = 'javascript';\nwindow.sentryDSN = 'https://504499a725eb4898930d3b9e9da95740@sentry.iobroker.net/56';\n\nconsole.log(`iobroker.${window.adapterName}@${pgk.version}`);\n\nconst isMobile = window.innerWidth < 600;\nconst container = document.getElementById('root');\nif (container) {\n    const root = createRoot(container);\n    root.render(\n        <DndProvider backend={isMobile ? TouchBackend : HTML5Backend}>\n            <App version={pgk.version} />\n        </DndProvider>,\n    );\n}\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n\n/*\n    improved VSCode editor. This has to be down here, or we get conflicts\n    between loader.js and require calls in jQuery and other loaded modules\n*/\n// loader must be after socket.io, elsewise there is no window.io\nconst loadDynamicScript = window.loadDynamicScript;\nloadDynamicScript &&\n    loadDynamicScript(\n        window.location.port === '3000'\n            ? `${window.location.protocol}//${window.location.hostname}:8081/lib/js/socket.io.js`\n            : './../../lib/js/socket.io.js',\n        () =>\n            loadDynamicScript('vs/loader.js', () =>\n                loadDynamicScript(\n                    'vs/configure.js',\n                    () => typeof window.socketLoadedHandler === 'function' && window.socketLoadedHandler(),\n                ),\n            ),\n    );\n"],"names":["DialogRename","React","constructor","props","super","isShowInstance","oldId","handleCancel","this","onClose","handleOk","onRename","state","id","name","instance","undefined","handleChange","setState","getId","prefix","getPrefix","folder","instances","length","parts","split","pop","join","replace","concat","render","_jsxs","Dialog","maxWidth","fullWidth","open","children","_jsx","DialogTitle","I18n","t","DialogContent","noValidate","autoComplete","TextField","variant","style","width","autoFocus","label","value","onKeyUp","ev","key","preventDefault","setTimeout","onChange","e","target","margin","disabled","FormControl","InputLabel","htmlFor","Select","parseInt","inputProps","map","MenuItem","DialogActions","Button","onClick","color","startIcon","IconOk","IconCancel","DialogDelete","onDelete","IconDelete","fontSize","fontWeight","styles","card","minWidth","display","media","height","text","minHeight","complexity","fontStyle","marginBottom","DialogAddNew","arguments","openHtml","html","lang","getLanguage","includes","win","window","focus","getJSCard","Card","CardActionArea","CardMedia","image","ImgJS","title","CardContent","CardActions","size","getTSCard","ImgTS","getBlocklyCard","ImgBlockly","getRulesCard","ImgRules","textAlign","DialogNew","onAdd","type","parent","error","trim","_this$props$instances","console","log","helperText","slotProps","input","endAdornment","IconButton","ClearIcon","_this$props$existingI","existingItems","parents","splice","names","forEach","n","el","find","item","push","theme","background","palette","main","contrastText","DialogError","sx","DialogContentText","buttonIcon","marginRight","icon","filter","filterWithButton","marginTop","DialogAdapterDebug","_this$state$instances","adapterToDebug","enabled","socket","getObject","then","obj","common","setObject","_id","onDebug","jsInstance","localStorage","getItem","showAskForStop","jsInstanceHost","componentDidMount","getAdapterInstances","oInstances","i","_i$common","onlyWWW","_item$common","_item$common2","_item$common3","adapter","host","sort","a","b","jsInstanceObj","oJsInstance","startsWith","renderJavascriptList","js","Grid2","List","component","ListItemButton","selected","ListItemIcon","src","alt","ListItemText","primary","renderInstances","toLowerCase","onDoubleClick","container","direction","Input","placeholder","setItem","InputAdornment","position","IconClose","COLOR_RUN","green","COLOR_PROBLEM","yellow","COLOR_PAUSE","red","ROOT_ID","COMMON_ID","GLOBAL_ID","NARROW_WIDTH","SELECTED_STYLE","drawerPaper","overflow","toolbar","toolbarButtons","mode","iconButtonsDisabled","opacity","toolbarSearch","lineHeight","marginLeft","iconButtons","padding","iconDropdownMenu","paddingRight","iconOnTheRight","right","top","menu","innerMenu","overflowX","overflowY","listItemIcon","filterIcon","borderRadius","scriptIcon","cursor","userSelect","folderReorder","transitionDuration","transitionProperty","folderIcon","folderIconReorder","paddingTop","paddingBottom","paddingLeft","folderIconNoReorder","script","scriptReorder","reorder","expandButton","childrenCount","footer","footerButtons","mt","mr","backgroundColor","footerButtonsRight","float","mainList","images","Blockly","def","Rules","ImgTypeScript","getObjectName","_obj$common","en","toString","prepareList","data","result","depth","index","parentIndex","ids","Object","keys","_obj$common2","engineType","engine","modified","it","idA","idB","Droppable","onDrop","isOver","isOverAny","drop","useDrop","accept","collect","monitor","shallow","ref","className","Utils","clsx","Draggable","drag","useDrag","isDragging","transform","SideDrawer","inputRef","filterTimer","problems","problemsTimer","onProblemUpdatedBound","expandedStr","expanded","JSON","parse","_unused","listItems","scripts","themeName","creatingScript","creatingFolder","copingScript","renaming","deleting","choosingType","errorText","menuOpened","menuAnchorEl","menuAnchorFilterEl","searchMode","expertMode","searchText","typeFilter","statusFilter","runningInstances","scriptsHash","showAdapterDebug","isAllZeroInstances","newExp","ensureSelectedIsVisible","assign","getIsAllZeroInstances","onProblemUpdated","bind","readProblems","cb","tasks","_this$props$scripts","_scriptObj$common","shift","scriptObj","match","that","substring","getState","subscribeState","componentWillUnmount","unsubscribeState","stringify","changed","val","pos","indexOf","filterListStatic","isSearchEnabled","objects","newState","_objects$item$id","filteredPartly","found","source","lastIndexOf","filtered","_it","_it2","filterList","ensureSelectedIsVisibleStatic","_el","getDerivedStateFromProps","nState","getIsAllZeroInstancesStatic","selectId","saveExpanded","showError","onToggle","stopPropagation","renderItemButtonsOnEnd","onEnableDisable","debugMode","_objectSpread","IconPause","IconPlay","onEdit","IconDoEdit","Promise","resolve","getTextStyle","whiteSpace","flex","onDblClick","isFilteredOut","renderListItem","childrenFiltered","depthPx","iconStyle","isExpanded","combinedStyle","ListItem","secondaryAction","IconFolderOpened","IconFolder","alignItems","justifyContent","onDragFinish","newId","renderOneItem","items","element","reactChildren","_reactChildren","renderAllItems","dense","disablePadding","onAddNew","onCopy","getUniqueName","copyId","word","m","getUniqueFolderName","onCloseMenu","getMainMenu","selectedItem","Menu","anchorEl","paper","maxHeight","MENU_ITEM_HEIGHT","event","onExpertModeChange","IconExpert","onExport","IconExport","onImport","IconImport","onThemeChange","toggleTheme","IconDark","IconCopy","IconDebug","getToolbarButtons","clearTimeout","onSearch","IconClear","currentTarget","IconMore","IconAdd","IconAddFolder","IconFind","IconReorder","IconEdit","version","getFolders","folders","onCollapseAll","onExpandAll","getBottomButtons","Box","flexGrow","IconExpandAll","IconCollapseAll","getAdapterDebugDialog","onDebugInstance","_copingItem$common","_copingItem$common$en","_copingItem$common2","renamingItem","copingItem","Drawer","anchor","Divider","DragDropContext","backend","HTML5Backend","newName","newInstance","DialogAddNewScript","_copingItem$common3","getTimeString","d","getHours","getMinutes","getSeconds","getMilliseconds","logBox","logBoxInner","verticalAlign","info","warn","debug","silly","table","fontFamily","toolbox","boxShadow","trFrom","trTime","trSeverity","trPreMessage","layoutIcon","gText","Log","messagesEnd","logHandler","message","allLines","lines","editing","generateLine","severity","date","Date","ts","ms","toLocaleString","goBottom","row","scriptName","regExp","RegExp","from","matches","scrollToBottom","_this$messagesEnd","_this$messagesEnd$cur","current","scrollIntoView","behavior","registerLogHandler","unregisterLogHandler","componentDidUpdate","prototype","hasOwnProperty","call","copyToClipboard","clearLog","renderLogList","clear","IconBottom","onLayoutChange","verticalLayout","onHideLog","IconHide","ScriptEditor","monacoDiv","editor","monaco","insert","originalCode","runningInstancesStr","monacoCounter","location","breakpoints","lastSearch","typings","decorations","isDark","language","readOnly","alive","check","typingsLoaded","code","waitForMonaco","_this$monaco","_this$monaco$language","_this$monaco$language2","_this$monaco$language3","monacoLoaded","languages","typescript","typescriptDefaults","getCompilerOptions","_this$monaco2","_this$monaco2$languag","_this$monaco2$languag2","_this$monaco2$languag3","loadTypings","scriptAdapterInstance","sendTo","setTypeCheck","setEditorTypings","_this$monaco3","_this$monaco3$languag","_this$monaco3$languag2","_this$monaco3$languag3","_this$monaco4","_this$monaco4$languag","_this$monaco4$languag2","_this$monaco4$languag3","_this$monacoDiv","onRegisterSelect","selection","getSelection","_this$editor$getModel","getModel","getValueInRange","compilerOptions","_this$monacoDiv2","allowJs","checkJs","noLib","lib","useUnknownInCatchVariables","moduleResolution","ModuleResolutionKind","NodeJs","ScriptTarget","ESNext","module","ModuleKind","allowNonTsExtensions","setCompilerOptions","create","lineNumbers","scrollBeyondLastLine","automaticLayout","glyphMargin","colorDecorators","onDidChangeModelContent","onForceSave","addCommand","KeyMod","CtrlCmd","KeyCode","KeyS","highlightText","showDecorators","options","selectOnLineNumbers","setEditorOptions","setValue","onToggleBreakpoint","onMouseDown","_target$detail","detail","glyphMarginLeft","lineNumber","_this$monaco5","setEditorLanguage","updateOptions","lineWrap","wordWrap","typeCheck","setTheme","dispose","model","_this$monaco6","getValue","uri","path","filenameWithoutExtension","extension","newLanguage","newModel","createModel","Uri","scheme","protocol","setModel","_this$monaco7","_this$monaco8","noSemanticValidation","noSyntaxValidation","setDiagnosticsOptions","javascriptDefaults","_this$monaco9","_this$monaco9$languag","_this$monaco9$languag2","_this$monaco9$languag3","_this$monaco10","_this$monaco10$langua","_this$monaco10$langua2","_this$monaco10$langua3","currentScriptName","isGlobalScript","test","partialDeclarationsPath","wantedTypings","filePath","content","setExtraLibs","addExtraLib","existingLibs","getExtraLibs","insertTextIntoEditor","range","Range","startLineNumber","startColumn","endLineNumber","endColumn","executeEdits","forceMoveMarkers","_this$editor$getModel2","findMatches","r","_this$editor","setSelection","revealLine","getPosition","col","column","_this$breakpoints","columnNumber","isWholeLine","bp","glyphMarginClassName","editorModel","deltaDecorations","initNewScript","_this$editor2","scrollToLineIfNeeded","ranges","getVisibleRanges","revealLineInCenter","UNSAFE_componentWillReceiveProps","nextProps","onInserted","_this$monaco11","_this$monaco11$langua","_this$monaco11$langua2","Fab","bottom","zIndex","IconNoCheck","forceUpdate","textArea","textAreaLight","dialog","typography","DialogExport","popper","file","Blob","fileName","scriptId","themeType","download","rel","href","URL","createObjectURL","textDecoration","Popper","placement","transition","_ref","TransitionProps","Fade","timeout","Paper","left","tabIndex","resize","dropzone","borderWidth","borderStyle","borderColor","boxSizing","dropzoneDiv","dropzoneRejected","dropzoneAccepted","iconError","iconOk","fullHeight","DialogImport","imageStatus","_window$document$getE","document","getElementById","readFileDataUrl","reader","FileReader","onload","onabort","onerror","readAsText","handleDropFile","files","err","_result$data","Dropzone","maxSize","acceptedFiles","errors","_errors$","_errors$$errors","_errors$$errors$","alert","multiple","getRootProps","getInputProps","isDragActive","isDragReject","IconNo","IconPlus","IconUpload","UnattachedFieldError","Error","FieldMultilineInput","Field","validator","config","textGroup","borderRect_","maxLines_","Infinity","isOverflowedY_","Symbol","configure_","SERIALIZABLE","setValidator","maxLines","setMaxLines","toXml","fieldElement","textContent","fromXml","saveState","legacyState","saveLegacyState","loadState","loadLegacyState","initView","createBorderRect_","utils","dom","createSvgElement","Svg","G","class","fieldGroup_","onHtmlInputKeyDownSuper_","WidgetDiv","hideIfOwner","dropDownDiv","hideWithoutAnimation","htmlInput_","getAttribute","sourceBlock_","tab","shiftKey","onHtmlInputChange_","_e","oldValue","value_","getValueFromEditorText_","Events","isEnabled","fire","get","onFinishEditing_","_value","bindInputEvents_","htmlInput","onKeyDownWrapper_","browserEvents","conditionalBind","onHtmlInputKeyDown_","onKeyInputWrapper_","getDisplayText_","block","getSourceBlock","textLines","getText","NBSP","displayLinesNumber","maxDisplayLength","RTL","doValueUpdate_","newValue","render_","currentChild","firstChild","removeChild","constants","getConstants","y","FIELD_TEXT_HEIGHT","FIELD_BORDER_RECT_Y_PADDING","TEXT","x","FIELD_BORDER_RECT_X_PADDING","dy","FIELD_TEXT_BASELINE","appendChild","createTextNode","isBeingEdited_","addClass","removeClass","updateSize_","resizeEditor_","isTextValid_","aria","State","INVALID","nodes","childNodes","FIELD_TEXT_FONTSIZE","FIELD_TEXT_FONTWEIGHT","FIELD_TEXT_FONTFAMILY","totalWidth","totalHeight","tspan","textWidth","getFastTextWidth","actualEditorLines","String","dummyTextElement","lineWidth","offsetWidth","clientWidth","setAttribute","size_","positionBorderRect_","showInlineEditor_","quietInput","show","widgetDispose_","workspace_","widgetCreate_","valueWhenEditorWasOpened_","preventScroll","select","getEditorText_","getScaledBBox","scaledWidth","scaledHeight","xy","isFullBlockField","bBox","getHeightWidth","scale","workspace","getAbsoluteXY_","userAgent","GECKO","getBoundingClientRect","getPageOffset","Rect","renderManagement","finishQueuedRenders","div","getDiv","unbindInputEvents_","unbind","getClickTarget_","clickTarget_","getSvgRoot","forceRerender","setGroup","clickTarget","showEditor_","modalInputs","MOBILE","ANDROID","IPAD","showPromptEditor_","getScale","createElement","spellcheck_","FieldTextInput","BORDERRADIUS","paddingX","paddingY","defaultValue","getMaxLines","fromJson","parsing","replaceMessageReferences","Css","register","BLOCK_NAME","jsonDefinition","message0","args0","output","helpUrl","tooltip","extensions","toJavascript","generator","multiline_quote_","getFieldValue","order","JavascriptOrder","ADDITION","ATOMIC","definitionsDict","createBlockDefinitionsFromJsonArray","FieldColour","picker","highlightedIndex","boundEvents","CURSOR","isDirty_","colours","titles","columns","colourOptions","colourTitles","Size","FIELD_COLOUR_DEFAULT_WIDTH","FIELD_COLOUR_DEFAULT_HEIGHT","getBorderRect","fillOpacity","blockIsSimpleReporter","Boolean","FIELD_COLOUR_FULL_BLOCK","outputConnection","inputList","connection","fieldRow","applyColour","borderRect","pathObject","svgPath","fill","getSize","_this$getConstants","doClassValidation_","colour","setColours","setColumns","dropdownCreate","DropDownDiv","getContentDiv","showPositionedByField","dropdownDispose","cell","onKeyDown","highlighted","handled","moveHighlightBy","getHighlighted","dx","Math","floor","setHighlightedCell","onMouseMove","Number","onMouseEnter","_this$picker","onMouseLeave","_this$picker2","blur","_this$picker3","cellId","ACTIVEDESCENDANT","selectedColour","dir","setRole","Role","GRID","EXPANDED","ROWCOUNT","COLCOUNT","ROW","idGenerator","getNextUniqueId","GRIDCELL","LABEL","SELECTED","DEFAULT_VALUE","quote_","functionName","provideFunction_","FUNCTION_NAME_PLACEHOLDER_","align","valueToCode","blue","colour1","colour2","ratio","languageBlocklyLoaded","languageOwnLoaded","toolboxText","toolboxXml","scriptsLoaded","searchXml","root","_result","tagName","attributes","_root$innerHTML","nodeName","innerHTML","node","BlocklyEditor","blockly","blocklyWorkspace","someSelected","changeTimer","someSelectedTime","ignoreChanges","darkTheme","blinkBlock","onResizeBind","didUpdate","lastCommand","onShowNameDialog","promptText","defaultText","callback","showInputPrompt","exportText","importText","onResize","fieldRegistry","JavaScript","forBlock","text_multiline","toJavascriptMultiline","Blocks","colour_picker","toJavascriptColourPicker","colour_blend","toJavascriptColourBlend","colour_random","toJavascriptColourRandom","colour_rgb","toJavascriptColourRgb","setPrompt","loadLanguages","loadJS","url","scriptTag","body","loadScripts","loadCustomBlockly","adapters","toLoad","_adapters$id$common","loadXMLDoc","parseXml","DOMParser","xmlStr","parseFromString","ActiveXObject","xmlDoc","async","loadXML","searchBlocks","Xml","workspaceToDom","searchId","_this$blocklyWorkspac","highlightBlock","now","_this$blocklyWorkspac2","command","blocklyCheckBlocks","badBlock","blocklyBlinkBlock","exportBlocks","importBlocks","updateBackground","loadCode","fileLang","getElementsByTagName","fileCustom","svgResize","jsCode2Blockly","xml","l","decodeURIComponent","atob","unselect","blocklyRemoveOrphanedShadows","blocks","getAllBlocks","isShadow","connections","getConnections_","conn","j","targetConnection","warningText","blocklyGetUnconnectedBlock","blocklyGetBlockWithWarning","_this$blocklyWorkspac3","INPUT_VALUE","OUTPUT_VALUE","_optional","_this$blocklyWorkspac4","warning","blocklyCode2JSCode","oneWay","workspaceToCode","domToText","btoa","encodeURIComponent","selectedBlocks","getSelected","xmlBlock","blockToDom","getRelativeToSurfaceXY","domToPrettyText","onImportBlocks","loading","xmlBlocks","textToDom","paste","onBlocklyChanged","domToWorkspace","addEventListener","getToolbox","Theme","defineTheme","base","Themes","Classic","componentStyles","workspaceBackgroundColour","toolboxBackgroundColour","toolboxForegroundColour","flyoutBackgroundColour","flyoutForegroundColour","flyoutOpacity","scrollbarColour","insertionMarkerColour","insertionMarkerOpacity","scrollbarOpacity","cursorColour","inject","renderer","zoom","controls","wheel","startScale","maxScale","minScale","scaleSpeed","pinch","move","scrollbars","horizontal","vertical","trashcan","grid","spacing","snap","sounds","registerToolboxCategoryCallback","Procedures","flyoutCategoryNew","addChangeListener","masterEvent","_this$blocklyWorkspac5","allBlocks","removeSelect","UI","CREATE","VIEWPORT_CHANGE","getElementsByClassName","_this$blocklyWorkspac6","getThemeManager","removeEventListener","retry","outerHTML","p1","MSG","CustomBlocks","_block","Words","HUE","_b","renderMessageDialog","DialogMessage","renderErrorDialog","renderExportDialog","renderImportDialog","renderDialogPrompt","_this$state$showInput","_this$state$showInput2","_this$state$showInput3","_this$state$showInput4","_this$state$showInput5","_this$state$showInput6","_this$state$showInput7","_this$state$showInput8","args","argsTitle","DialogScriptEditor","isReturn","ScriptEditorComponent","adapterName","IconSave","ICON_CACHE","objIcon","Shuffle","Apps","Functions","Language","AddBox","Pause","Subject","PlayForWork","Brightness3","HelpOutline","Storage","AccessTime","PlayArrow","FlashOn","iconName","setUrl","useState","useEffect","Element","Help","active","onTouchMove","cls","MaterialDynamicIcon","deepCopy","userRules","additionalParameter","newItemsSwitches","actions","else","triggers","conditions","filterElement","_userRules$conditions","square","CustomIcon","CustomCheckbox","customValue","switchChecked","setSwitchChecked","_Fragment","Checkbox","checked","memo","inputText","setInputText","rows","multiline","native","styleComponentBlock","formControl","mb","borderBottomColor","attr","onInstanceHide","setOptions","_options","unshift","renderValue","Array","isArray","placeContent","FormHelperText","titleButtonApply","titleButtonClose","onApply","textInput","originalValue","disableEscapeKeyDown","classes","CustomInput","doNotTranslate","doNotTranslate2","v","onlyItem","only","titleShort","sel","values","valueOnly","title2","min","max","step","unit","marks","Slider","valueLabelDisplay","mark","CustomSwitch","FormControlLabel","control","Switch","inputLabel","shrink","DAYS","monthStr","dateStr","month","days","padStart","STEPS","selector","GenericBlock","PureComponent","getStaticData","acceptedBy","compile","_config","_context","debugHideTimeout","lastObjectIdChange","enableSimulationProcessing","lastDebugMessage","debugMessageTimeout","renderText","frontText","backText","nameBlock","doNotTranslateBack","Fragment","displayFlex","blockMarginTop","renderSwitch","renderNameText","signature","displayItalic","renderNumber","settings","openCheckbox","visibility","offset","noHelperText","renderColor","renderCheckbox","renderSlider","CustomSlider","renderButton","CustomButton","renderObjectID","checkReadOnly","showSelectId","oid","iobObj","findIcon","_attrStr","write","getObjectNameFromObj","DialogSelectID","imagePrefix","dialogName","getThemeName","onOk","_name","_obj$common3","_obj$common4","_obj$common5","_obj$common6","_obj$common7","_obj$common8","_obj$common9","_obj$common10","_obj$common11","role","states","read","setOnUpdate","renderIconTag","iconTag","tagCard","tagCardArray","onChangeTag","openTagMenu","renderTime","CustomTime","renderSelect","CustomSelect","renderInstance","hideAttributes","CustomInstance","renderDialog","onShowDialog","iconDialog","renderModalInput","openModal","noTextEdit","CustomModal","renderDate","CustomDate","newTagCardArray","newSettings","newTagCard","onTagChange","onChangeInput","attribute","_attr","getData","onValueChanged","inputs","helpDialog","helpText","instanceSelectionOptions","instanceSelectionDef","debugMessage","enableSimulation","_tagCard","_toggle","_useTrigger","onUpdate","_obj$common12","getSelectIdIcon","o","catch","getReplacesInText","context","_context$trigger","trigger","oidType","conditionsStates","renderTags","isTourOpen","tourStep","setTourStep","keepMounted","tag","search","renderSpecific","renderDebug","_message","renderDebugInfo","debugInfo","renderCron","_input","_onChange","renderWizard","renderWriteState","renderInputElement","nameRender","notFound","debugMsg","onDebugMessage","msg","blockId","debugMessageStr","hideTimeout","iconThemCard","iconThemCardSelectable","blockName","nameCard","iconHelp","IconHelp","controlMenuTop","sayitEngines","params","de","ru","es","fr","ru_YA","voice","emotion","ru_YA_CLOUD","gender","ename","ssml","ActionSayText","volume","ActionSendEmail","recipients","subject","ActionTelegram","cachePromises","user","_setUsers","usersObj","users","usersA","userName","firstName","ActionPushover","sound","priority","ActionWhatsappcmb","phone","ActionPushsafer","vibration","STANDARD_FUNCTION_STATE","STANDARD_FUNCTION_STATE_ONCHANGE","DEFAULT_RULE","justCheck","compileTriggers","json","jsonTriggers","vars","prelines","hist","conds","cond","findBlock","_context$prelines","condition","conditionsDebug","conditionsVars","ors","_ors","compileConditions","compileActions","_else","line","action","code2json","jsonStr","json2code","compiled","TriggerScriptSave","TriggerScheduleBlock","coordinates","func","interval","cron","_config$dow","hours","minutes","at","dow","_dow","intervals","start","astro","offsetValue","wizard","_time2String","time","_setAstro","_jsObject$native","_jsObject$native2","jsObject","latitude","longitude","parseFloat","systemConfig","sunValue","SunCalc","astroTime","setMinutes","_setInterval","_debugMessage","textCron","openDialog","convertCronToText","ComplexCron","cronExpression","addText","wizardText","Schedule","schedule","description","wizardObj","valid","now2string","state2text","default","valueAck","valueNotAck","Transition","Slide","displayName","TriggerState","valOld","ackOld","ack","onWriteValue","openSimulate","simulateValue","simulateAck","_simulateValue","_this$inputRef$curren","TransitionComponent","IconCheck","HYSTERESIS","ConditionState","onShowHelp","showHysteresisHelp","isAllTriggersOnState","_this$props$userRules","_this$props$userRules2","_this$props$userRules3","_this$props$userRules4","debugValue","useTrigger","histComp","compare","_context$trigger2","toUpperCase","compareWith","_setInputs","oidUnit","oidStates","_this$props$userRules5","_this$props$userRules6","_tagCardArray","HysteresisImage","ConditionTime","withDate","ConditionAstronomical","ActionSetState","toggle","_options2","oidMax","oidMin","oidRole","oidWrite","oidStep","isNaN","f","_options3","_ignore","ActionExec","exec","ActionHTTPCall","ActionPrintText","ActionPause","pause","paused","_getOptions","ActionFunction","ActionSetStateDelayed","delay","clearRunning","_this$props$classes","_this$props$classes2","ActionOperateStates","oid1","oid2","operation","oidResult","TriggerSchedule","ADAPTERS","telegram","email","sayit","pushover","pushsafer","ContextWrapperCreate","createContext","_onUpdate","setOnDebugMessage","setEnableSimulation","_enableSimulation","loadComponent","remote","sharedScope","shareScope","remoteFallbackUrl","reject","existingRemote","querySelector","__initialized","init","__webpack_share_scopes__","getOrLoadRemote","ContextWrapper","setBlocks","adapterDynamicBlocksArray","dynamicRules","javascriptRules","alreadyCreated","k","i18n","i18nURL","fetch","extendTranslations","Component","adapterBlocksArray","StandardBlocks","Provider","_document$getElementB","setUserRules","blockValue","setAnchorEl","useContext","findElementBlocks","useCallback","newUserRules","findElement","handlePopoverOpen","blockInput","useMemo","CustomBlock","isDelete","setIsDelete","handlePopoverClose","ctrlKey","newItem","layerStyles","pointerEvents","getItemStyles","initialOffset","currentOffset","isSnapToGrid","snapToGrid","round","WebkitTransform","CustomDragLayer","itemType","targetIds","useDragLayer","getItemType","getInitialSourceClientOffset","getSourceClientOffset","getTargetIds","CurrentItem","CardMenu","useStateLocal","valueName","funcSet","_","setCards","findCard","cards","c","moveCard","atIndex","additionally","hoverClientY","hoverMiddleY","copyCard","typeBlock","allProperties","isActive","preview","end","dropResult","getDropResult","idNumber","useRef","canDrop","hover","_ref2","_ref$current","draggedId","hoverBoundingRect","clientOffset","getClientOffset","overIndexActions","overIndexConditions","overIndex","getEmptyImage","captureDraggingState","isMobile","innerWidth","letterSpacing","AdditionallyContentBlockItems","boolean","animation","checkItem","setCheckItem","canDropCheck","setCanDropCheck","checkId","setCheckId","hoverBlock","setHoverBlock","getHandlerId","_ref3","_monitor$getItem","targetId","pr","contentBlockItem","addClassHeight","contentHeightOn","contentHeightOff","wrapperMargin","DragWrapper","clientHeight","emptyBlockStyle","emptyBlock","emptyBlockNone","_ref4","nameAdditionally","border","additionallyClickItems","setAdditionallyClickItems","checkLocal","showHelp","setShowHelp","showConditionDialog","setShowConditionDialog","newArray","idx","setAnimation","mainBlockItemRules","addClassOverflow","nameBlockItems","selectOnChange","_userRules","selectOnChangeHelp","selectOnChangeHelpIcon","booleanAdditionally","newAdditionally","blockCardAdd","cardAdd","DialogHelp","DialogCondition","bool","setAllBlocks","onChangeBlocks","hamburgerOnOff","setHamburgerOnOff","setFilter","setBlocksFunc","typeFunc","newAllBlocks","a11yProps","ClickAwayListener","mouseEvent","touchEvent","onClickAway","HamburgerMenu","AppBar","Tabs","_event","Tab","CustomDragItem","gDebugMessages","running","importExport","setImportExport","modal","setModal","_jsInstance","_jsAlive","aliveHandler","handler","_common","handlerStatus","ruleId","messages","subscribeObject","unsubscribeObject","setAddClass","ContentBlockItems","editorDiv","Editor","Console","onClearAllLogs","frameRoot","frameTextRoot","frameTextPrimary","frameTextSecondary","pl","listRoot","scopeType","textTransform","scopeType_local","scopeType_closure","scopeType_user","scopeName","textOverflow","scopeButton","scopeValueEditable","selectedFrame","splitter","toolbarScopes","scopesAfterToolbar","scopeNameName","scopeNameEqual","scopeNameValue","scopeButtonDel","valueNull","valueUndefined","valueString","valueNumber","valueBoolean","valueObject","valueNone","valueFunc","Stack","editRef","scopeValue","framesSizesStr","framesSizes","editValue","callFrames","onExpressionNameUpdate","renderExpression","onBlur","CheckIcon","formatValue","valueType","onExpressionDelete","renderExpressions","expressions","renderOneFrameTitle","frame","mainScriptId","currentScriptId","onChangeCurrentFrame","currentFrame","secondary","callFrameId","forEdit","_obj$preview","_obj$preview$properti","properties","subtype","previewToObject","ReactJson","enableClipboard","collapsed","displayDataTypes","onWriteScopeValue","_this$state$editValue","_this$props$callFrame","variableName","scopeNumber","_this$editRef$current","renderScope","scopeId","_item$value","_item$value2","_this$state$editValue2","_this$state$editValue3","editable","renderScopes","_this$props$scopes","_this$props$scopes$lo","_this$props$scopes$lo2","_items","_this$props$scopes2","_this$props$scopes2$c","_this$props$scopes2$c2","_items2","scopes","local","closure","_this$props$callFrame2","_this$props$callFrame3","ReactSplit","SplitDirection","Horizontal","initialSizes","minWidths","onResizeFinished","_gutterIdx","gutterClassName","onExpressionAdd","buttonRun","buttonPause","buttonRestart","buttonStop","buttonNext","buttonStep","buttonOut","buttonException","tabFile","tabText","closeButton","tabsRoot","tabRoot","bpListItem","borderTop","monospace","arrow","Debugger","fromInstance","cmd","debugInstance","_data$context","_data$context$callFra","tabs","random","starting","finished","started","getLocation","reinitBreakpoints","readCurrentScope","readExpressions","_data$context2","_data$context2$callFr","sendToInstance","toolsTab","logErrors","logWarnings","logs","scope","_scopes$local","_scopes$local$propert","_scopes$closure","_scopes$closure$prope","expression","_data$breakpoints","_data$breakpoints2","queryBreakpoints","breakpointsStr","_unused2","expressionsStr","_unused3","toolSizesStr","toolSizes","_unused4","stopOnException","_obj$common$engine","_this$state$context","scopeChain","global","_this$state$context2","getTextAtLocation","renderQueryBreakpoints","renderError","closeTab","renderTabs","indicatorColor","scrollButtons","labelEl","onResume","onPause","onNext","onStepIn","onStepOut","onRestart","onToggleException","renderToolbar","Toolbar","IconRestart","IconRun","IconNext","IconStep","IconOut","IconException","getPossibleBreakpoints","toggleBreakpoint","renderCode","sourceId","renderFrames","_this$state$context3","renderConsole","renderTools","_console","Badge","badgeContent","LinearProgress","Vertical","minHeights","allObjectsCache","detectDevices","devicesObject","getObjectViewSystem","channels","devices","enums","allObjects","detector","ChannelDetector","excludedTypes","Types","rooms","funcs","list","_devicesObject$id","_devicesObject$id2","_devicesObject$id2$co","smartName","members","member","_keysOptional","_usedIdsOptional","ignoreIndicators","detect","_control$states$find","stateId","st","stateObj","deviceObject","deviceType","defaultRole","channelId","deviceId","room","roomId","_common$members","_common$members2","_common$members3","funcId","_common$members4","_common$members5","_common$members6","function","deviceObj","idArray","parentObject","_parentObject$common2","_parentObject$common","_grandParentObject$co","grandParentObject","_grandParentObject$co2","LANGUAGES","nl","pt","uk","ChatIcon","viewBox","fullHeightDialog","question","setQuestion","answer","setAnswer","setOpen","working","setWorking","setError","showKeyWarning","setShowKeyWarning","devicesCache","gptKeyCache","docsCache","ask","apiKey","docs","gptKey","systemPrompt","_message$content","openai","OpenAI","dangerouslyAllowBrowser","chat","completions","choices","_code","_code2","comments","endsWith","flexDirection","gap","Close","Question","CircularProgress","Copy","Check","onAddCode","COLOR_DEBUG","COLOR_VERBOSE","toolbarButtonsDisabled","textButton","saveButton","textIcon","tabIcon","hintIcon","hintText","hintButton","tabMenuButton","tabChanged","tabChangedIcon","notRunning","tabButton","tabButtonWrapper","menuIcon","getSelect","initValue","scriptDialog","confirmCallback","onBrowserClose","isChanged","returnValue","editingStr","askAboutDebug","astroEvents","cmdToBlockly","cmdToRules","confirm","debugEnabled","instancesLoaded","menuDebugAnchorEl","menuTabsOpened","rules","showAstro","showCompiledCode","showCron","showDebugMenu","showScript","toast","verboseEnabled","visible","setChangedInAdmin","systemLang","selectIdDialog","cronDialog","showScriptDialog","getAllAdapterInstances","onSelectedChange","instanceObjects","onInstanceChanged","configNotSaved","removeNonExistingScripts","_changed","verbose","_this$objects$id","oldSource","commonLocal","_this$objects$id$from","nextCommon","onStartStop","onSave","onSaveAll","onCancel","onConvertBlockly2JS","showConfirmDialog","nowSelected","onTabChange","isScriptChanged","onTabClose","ok","sendCommandToBlockly","sendCommandToRules","getScriptFullName","getTabs","textColor","allowScrollButtonsMobile","wrapped","iconPosition","IconCloseAll","getDebugMenu","IconVerbose","getDebugBadge","getAskAboutDebug","DialogConfirm","onDebugModeChange","cancel","getToolbar","isInstanceRunning","isScriptRunning","changedAll","onLocate","IconLocate","endIcon","IconCron","OpenAiDialog","IconAstro","IconSelectId","IconDebugMode","ImgBlockly2Js","ImgRules2Js","badgeMargin","IconDebugMenu","getScriptEditor","getBlocklyEditor","getRulesEditor","_this$scripts$this$st","_this$scripts$this$st2","RulesEditor","resizing","getConfirmDialog","getSelectIdDialog","_this$selectId","allObjectTypes","expertModeTypes","selectedId","types","getCronDialog","DialogCron","getAstroDialog","TableContainer","Table","TableHead","TableRow","TableCell","TableBody","_this$state$astroEven","_this$state$astroEven2","_this$state$astroEven3","_this$state$astroEven4","Tooltip","isValidDate","toLocaleTimeString","serverTime","getEditorDialog","getToast","Snackbar","anchorOrigin","autoHideDuration","ContentProps","closeToast","getTour","isAnyRulesExists","Tour","steps","isOpen","onRequestClose","goToStep","getDebug","DialogImportFile","readAsDataURL","PaperProps","menuDiv","splitterDivs","mainDiv","splitterDivWithMenu","menuDivWithoutMenu","progress","menuOpenCloseButton","showLogButton","App","GenericApp","Connection","AdminConnection","translations","enLang","deLang","esLang","frLang","itLang","nlLang","plLang","ptLang","ruLang","ukLang","zhCnLang","bottomButtons","autoSubscribeLog","sentryDSN","hosts","importFile","onScriptsChanged","idNum","onInstanceAliveChange","reload","onHostChanged","logSizesStr","logSizes","splitSizesStr","splitSizes","showJsError","onConnectionReady","ready","updating","logMessage","menuSelectId","logHorzLayout","hideLog","instancesResult","subscribeOnInstances","readAdaptersWithBlockly","getHosts","readAllScripts","compareScripts","instanceId","onToggleExpertMode","newScripts","oldIds","newIds","oldScript","newScript","_this$scripts$oldId","parentID","updateScript","renameGroup","_list","nId","delObject","expert","onUpdateScript","onSelect","showMessage","isFolder","reg","newCommon","_obj2","_obj3","_obj","extendObject","_rev","getLiveHost","h","getFullYear","getMonth","getDate","getRawSocket","emit","link","fileStorageNamespace","click","remove","onImportConfirmed","toggleLogLayout","renderEditor","reduce","sum","IconShowLog","renderMain","onResizeStarted","IconMenuOpened","IconMenuClosed","StyledEngineProvider","injectFirst","ThemeProvider","Loader","SideMenu","setThemeName","getThemeType","hostname","pgk","createRoot","DndProvider","TouchBackend","navigator","serviceWorker","registration","unregister","loadDynamicScript","port","socketLoadedHandler"],"sourceRoot":""}